(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[800],{5951:function(e,t,r){Promise.resolve().then(r.bind(r,1021))},1021:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return c}});var n=r(7437),s=r(2265),a=r(2177),l=r(6350),i=r(3192);function o(){let{state:e,updateState:t}=(0,l.q)(),[r,o]=(0,s.useState)([]),[c,u]=(0,s.useState)(null),[d,h]=(0,s.useState)("24h"),{connect:m,isConnected:x}=(0,i.s)();(0,s.useEffect)(()=>{f(),m(e=>{"limbic_update"===e.type&&e.state&&(t(e.state),v(e.state))})},[]);let f=async()=>{try{let e=localStorage.getItem("limbic_history");e&&o(JSON.parse(e))}catch(e){console.error("Failed to load history:",e)}},v=e=>{let t={timestamp:Date.now(),trust:e.trust||0,warmth:e.warmth||0,arousal:e.arousal||0,valence:e.valence||0,posture:e.posture||"PEER"};o(e=>{let r=[...e,t].slice(-1e3);return localStorage.setItem("limbic_history",JSON.stringify(r)),r})},g=r.filter(e=>Date.now()-e.timestamp<({"1h":36e5,"24h":864e5,"7d":6048e5,"30d":2592e6})[d]),p=(()=>{let e=[];for(let t=1;t<r.length;t++){let n=r[t-1],s=r[t],a=Math.abs(s.trust-n.trust),l=Math.abs(s.warmth-n.warmth),i=Math.abs(s.arousal-n.arousal),o=Math.abs(s.valence-n.valence);(a>.1||l>.1||i>.1||o>.2)&&e.push({...s,event:"Significant state change: Trust ".concat(a>.1?"\xb1".concat(a.toFixed(2)):""," ").concat(l>.1?"Warmth \xb1".concat(l.toFixed(2)):"")})}return e})();return(0,n.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,n.jsxs)("div",{className:"mb-8",children:[(0,n.jsx)("h1",{className:"text-3xl font-bold mb-2",children:"Limbic State"}),(0,n.jsx)("p",{className:"text-gray-400",children:"Real-time emotional state and historical trends"})]}),(0,n.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 mb-6",children:[(0,n.jsx)("div",{className:"lg:col-span-1",children:(0,n.jsxs)("div",{className:"bg-gray-800 rounded-lg p-6",children:[(0,n.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"Current State"}),e?(0,n.jsx)(a.O,{state:e}):(0,n.jsx)("p",{className:"text-gray-400",children:"Loading..."})]})}),(0,n.jsx)("div",{className:"lg:col-span-2",children:(0,n.jsxs)("div",{className:"bg-gray-800 rounded-lg p-6",children:[(0,n.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,n.jsx)("h2",{className:"text-xl font-semibold",children:"Historical Trends"}),(0,n.jsxs)("select",{value:d,onChange:e=>h(e.target.value),className:"bg-gray-700 text-gray-100 px-3 py-1 rounded-lg border border-gray-600",children:[(0,n.jsx)("option",{value:"1h",children:"Last Hour"}),(0,n.jsx)("option",{value:"24h",children:"Last 24 Hours"}),(0,n.jsx)("option",{value:"7d",children:"Last 7 Days"}),(0,n.jsx)("option",{value:"30d",children:"Last 30 Days"})]})]}),g.length>0?(0,n.jsxs)("div",{className:"h-64 relative",children:[(0,n.jsxs)("svg",{width:"100%",height:"100%",className:"overflow-visible",children:[[0,.25,.5,.75,1].map(e=>(0,n.jsx)("line",{x1:"0",y1:100*e+"%",x2:"100%",y2:100*e+"%",stroke:"rgba(255,255,255,0.1)",strokeWidth:"1"},e)),g.length>1&&(0,n.jsx)("polyline",{points:g.map((e,t)=>"".concat(t/(g.length-1)*100,",").concat((1-e.trust)*100)).join(" "),fill:"none",stroke:"#8B5CF6",strokeWidth:"2"}),g.length>1&&(0,n.jsx)("polyline",{points:g.map((e,t)=>"".concat(t/(g.length-1)*100,",").concat((1-e.warmth)*100)).join(" "),fill:"none",stroke:"#22d3ee",strokeWidth:"2"}),g.length>1&&(0,n.jsx)("polyline",{points:g.map((e,t)=>"".concat(t/(g.length-1)*100,",").concat((1-e.arousal)*100)).join(" "),fill:"none",stroke:"#f59e0b",strokeWidth:"2"}),p.map((e,t)=>{var r,s,a,l;let i=(e.timestamp-(null===(r=g[0])||void 0===r?void 0:r.timestamp)||0)/((null===(s=g[g.length-1])||void 0===s?void 0:s.timestamp)-(null===(a=g[0])||void 0===a?void 0:a.timestamp)||1)*100;return(0,n.jsx)("circle",{cx:"".concat(i,"%"),cy:"50%",r:"4",fill:"#ef4444",className:"cursor-pointer hover:r-6",onClick:()=>u(e),children:(0,n.jsx)("title",{children:null!==(l=e.event)&&void 0!==l?l:""})},t)})]}),(0,n.jsxs)("div",{className:"flex gap-4 mt-4 text-sm",children:[(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)("div",{className:"w-4 h-0.5 bg-violet-500"}),(0,n.jsx)("span",{className:"text-gray-400",children:"Trust"})]}),(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)("div",{className:"w-4 h-0.5 bg-cyan-500"}),(0,n.jsx)("span",{className:"text-gray-400",children:"Warmth"})]}),(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)("div",{className:"w-4 h-0.5 bg-amber-500"}),(0,n.jsx)("span",{className:"text-gray-400",children:"Arousal"})]})]})]}):(0,n.jsx)("div",{className:"h-64 flex items-center justify-center text-gray-500",children:(0,n.jsx)("p",{children:"No historical data available"})})]})})]}),c&&(0,n.jsxs)("div",{className:"bg-gray-800 rounded-lg p-6 mb-6",children:[(0,n.jsx)("h3",{className:"text-lg font-semibold mb-2",children:"Event Details"}),(0,n.jsx)("p",{className:"text-gray-400 mb-4",children:c.event}),(0,n.jsxs)("div",{className:"grid grid-cols-4 gap-4",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("div",{className:"text-xs text-gray-500",children:"Trust"}),(0,n.jsx)("div",{className:"text-lg font-semibold",children:c.trust.toFixed(2)})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("div",{className:"text-xs text-gray-500",children:"Warmth"}),(0,n.jsx)("div",{className:"text-lg font-semibold",children:c.warmth.toFixed(2)})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("div",{className:"text-xs text-gray-500",children:"Arousal"}),(0,n.jsx)("div",{className:"text-lg font-semibold",children:c.arousal.toFixed(2)})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("div",{className:"text-xs text-gray-500",children:"Valence"}),(0,n.jsx)("div",{className:"text-lg font-semibold",children:c.valence.toFixed(2)})]})]}),(0,n.jsx)("button",{onClick:()=>u(null),className:"mt-4 text-sm text-violet-400 hover:text-violet-300",children:"Close"})]}),(0,n.jsxs)("div",{className:"text-center text-sm text-gray-500",children:["Status: ",x?(0,n.jsx)("span",{className:"text-emerald-400",children:"Connected"}):(0,n.jsx)("span",{className:"text-red-400",children:"Disconnected"})]})]})}function c(){return(0,n.jsx)("div",{className:"min-h-screen bg-gray-900 p-4 md:p-8",children:(0,n.jsx)(o,{})})}r(257).env.NEXT_PUBLIC_API_URL},2177:function(e,t,r){"use strict";r.d(t,{O:function(){return s}});var n=r(7437);function s(e){let{state:t}=e,r=[{label:"Trust",value:t.trust,color:"from-primary to-accent",ariaLabel:"Trust level: ".concat((100*t.trust).toFixed(0),"%")},{label:"Warmth",value:t.warmth,color:"from-accent to-warning",ariaLabel:"Warmth level: ".concat((100*t.warmth).toFixed(0),"%")},{label:"Energy",value:t.arousal,color:"from-warning to-error",ariaLabel:"Energy level: ".concat((100*t.arousal).toFixed(0),"%")},{label:"Mood",value:(t.valence+1)/2,color:"from-info to-success",ariaLabel:"Mood level: ".concat((100*t.valence).toFixed(0),"%")}];return(0,n.jsxs)("div",{role:"region","aria-label":"Emotional state gauges",children:[(0,n.jsx)("h3",{className:"text-sm font-medium text-gray-400 uppercase tracking-wider mb-4",children:"Emotional State"}),(0,n.jsx)("div",{className:"space-y-4",children:r.map(e=>(0,n.jsxs)("div",{className:"space-y-1",children:[(0,n.jsxs)("div",{className:"flex justify-between items-center",children:[(0,n.jsx)("span",{className:"text-sm text-gray-300",children:e.label}),(0,n.jsx)("span",{className:"text-xs text-gray-500 font-mono",children:e.value.toFixed(2)})]}),(0,n.jsx)("div",{className:"h-1.5 bg-gray-700 rounded-full overflow-hidden",role:"progressbar","aria-valuenow":100*e.value,"aria-valuemin":0,"aria-valuemax":100,"aria-label":e.ariaLabel,children:(0,n.jsx)("div",{className:"h-full bg-gradient-to-r ".concat(e.color," transition-all duration-500"),style:{width:"".concat(100*e.value,"%")}})})]},e.label))}),(0,n.jsxs)("div",{className:"mt-6 p-3 bg-gray-700/50 rounded-lg text-center",children:[(0,n.jsx)("div",{className:"text-xs text-gray-400 uppercase tracking-wider mb-1",children:"Current Mode"}),(0,n.jsx)("div",{className:"text-lg font-semibold text-accent-light",children:t.posture||"PEER"})]})]})}},3192:function(e,t,r){"use strict";r.d(t,{s:function(){return s}});var n=r(2265);function s(){let[e,t]=(0,n.useState)(!1),r=(0,n.useRef)(null),s=(0,n.useRef)(null),a=(0,n.useCallback)(e=>{var n;if((null===(n=r.current)||void 0===n?void 0:n.readyState)===WebSocket.OPEN)return;let l=new WebSocket("ws://localhost:8000/ws");s.current=e,l.onopen=()=>{t(!0)},l.onclose=()=>{t(!1),setTimeout(()=>a(e),3e3)},l.onerror=e=>{console.error("WebSocket error:",e),t(!1)},l.onmessage=e=>{try{var t;let r=JSON.parse(e.data);null===(t=s.current)||void 0===t||t.call(s,r)}catch(e){console.error("Failed to parse WebSocket message:",e)}},r.current=l},[]),l=(0,n.useCallback)(e=>{var t;(null===(t=r.current)||void 0===t?void 0:t.readyState)===WebSocket.OPEN&&r.current.send(e)},[]);return(0,n.useEffect)(()=>()=>{var e;null===(e=r.current)||void 0===e||e.close()},[]),{connect:a,send:l,isConnected:e}}},257:function(e,t,r){"use strict";var n,s;e.exports=(null==(n=r.g.process)?void 0:n.env)&&"object"==typeof(null==(s=r.g.process)?void 0:s.env)?r.g.process:r(4227)},4227:function(e){!function(){var t={229:function(e){var t,r,n,s=e.exports={};function a(){throw Error("setTimeout has not been defined")}function l(){throw Error("clearTimeout has not been defined")}function i(e){if(t===setTimeout)return setTimeout(e,0);if((t===a||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(r){try{return t.call(null,e,0)}catch(r){return t.call(this,e,0)}}}!function(){try{t="function"==typeof setTimeout?setTimeout:a}catch(e){t=a}try{r="function"==typeof clearTimeout?clearTimeout:l}catch(e){r=l}}();var o=[],c=!1,u=-1;function d(){c&&n&&(c=!1,n.length?o=n.concat(o):u=-1,o.length&&h())}function h(){if(!c){var e=i(d);c=!0;for(var t=o.length;t;){for(n=o,o=[];++u<t;)n&&n[u].run();u=-1,t=o.length}n=null,c=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===l||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function m(e,t){this.fun=e,this.array=t}function x(){}s.nextTick=function(e){var t=Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];o.push(new m(e,t)),1!==o.length||c||i(h)},m.prototype.run=function(){this.fun.apply(null,this.array)},s.title="browser",s.browser=!0,s.env={},s.argv=[],s.version="",s.versions={},s.on=x,s.addListener=x,s.once=x,s.off=x,s.removeListener=x,s.removeAllListeners=x,s.emit=x,s.prependListener=x,s.prependOnceListener=x,s.listeners=function(e){return[]},s.binding=function(e){throw Error("process.binding is not supported")},s.cwd=function(){return"/"},s.chdir=function(e){throw Error("process.chdir is not supported")},s.umask=function(){return 0}}},r={};function n(e){var s=r[e];if(void 0!==s)return s.exports;var a=r[e]={exports:{}},l=!0;try{t[e](a,a.exports,n),l=!1}finally{l&&delete r[e]}return a.exports}n.ab="//";var s=n(229);e.exports=s}()},4369:function(e,t,r){"use strict";var n=r(2265),s="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},a=n.useState,l=n.useEffect,i=n.useLayoutEffect,o=n.useDebugValue;function c(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!s(e,r)}catch(e){return!0}}var u="undefined"==typeof window||void 0===window.document||void 0===window.document.createElement?function(e,t){return t()}:function(e,t){var r=t(),n=a({inst:{value:r,getSnapshot:t}}),s=n[0].inst,u=n[1];return i(function(){s.value=r,s.getSnapshot=t,c(s)&&u({inst:s})},[e,r,t]),l(function(){return c(s)&&u({inst:s}),e(function(){c(s)&&u({inst:s})})},[e]),o(r),r};t.useSyncExternalStore=void 0!==n.useSyncExternalStore?n.useSyncExternalStore:u},2860:function(e,t,r){"use strict";var n=r(2265),s=r(2558),a="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},l=s.useSyncExternalStore,i=n.useRef,o=n.useEffect,c=n.useMemo,u=n.useDebugValue;t.useSyncExternalStoreWithSelector=function(e,t,r,n,s){var d=i(null);if(null===d.current){var h={hasValue:!1,value:null};d.current=h}else h=d.current;var m=l(e,(d=c(function(){function e(e){if(!o){if(o=!0,l=e,e=n(e),void 0!==s&&h.hasValue){var t=h.value;if(s(t,e))return i=t}return i=e}if(t=i,a(l,e))return t;var r=n(e);return void 0!==s&&s(t,r)?(l=e,t):(l=e,i=r)}var l,i,o=!1,c=void 0===r?null:r;return[function(){return e(t())},null===c?void 0:function(){return e(c())}]},[t,r,n,s]))[0],d[1]);return o(function(){h.hasValue=!0,h.value=m},[m]),u(m),m}},2558:function(e,t,r){"use strict";e.exports=r(4369)},5195:function(e,t,r){"use strict";e.exports=r(2860)},6350:function(e,t,r){"use strict";r.d(t,{q:function(){return a}});var n=r(9625);let s={trust:.5,warmth:.6,arousal:.7,valence:.6,posture:"PEER"},a=(0,n.Ue)(e=>({state:s,updateState:t=>e(e=>({state:{...e.state,...t}}))}))},9625:function(e,t,r){"use strict";r.d(t,{Ue:function(){return h}});let n=e=>{let t;let r=new Set,n=(e,n)=>{let s="function"==typeof e?e(t):e;if(!Object.is(s,t)){let e=t;t=(null!=n?n:"object"!=typeof s||null===s)?s:Object.assign({},t,s),r.forEach(r=>r(t,e))}},s=()=>t,a={setState:n,getState:s,getInitialState:()=>l,subscribe:e=>(r.add(e),()=>r.delete(e)),destroy:()=>{console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),r.clear()}},l=t=e(n,s,a);return a},s=e=>e?n(e):n;var a=r(2265),l=r(5195);let{useDebugValue:i}=a,{useSyncExternalStoreWithSelector:o}=l,c=!1,u=e=>e,d=e=>{"function"!=typeof e&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");let t="function"==typeof e?s(e):e,r=(e,r)=>(function(e,t=u,r){r&&!c&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),c=!0);let n=o(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,r);return i(n),n})(t,e,r);return Object.assign(r,t),r},h=e=>e?d(e):d}},function(e){e.O(0,[971,117,744],function(){return e(e.s=5951)}),_N_E=e.O()}]);