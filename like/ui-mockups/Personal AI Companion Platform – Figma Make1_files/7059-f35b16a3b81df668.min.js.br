"use strict";
!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="1e41dcc8-6031-5254-b0a3-32aae9ad5008")}catch(e){}}();
(globalThis.webpackChunk_figma_web_bundler=globalThis.webpackChunk_figma_web_bundler||[]).push([[7059],{670768:(e,t,r)=>{r.d(t,{Om:()=>s,R:()=>c,j6:()=>i,o:()=>o,r$:()=>n,rR:()=>l,xn:()=>a});let a="interactive_thumbnail--thumbnail--avVoO",l="interactive_thumbnail--onboardingTarget--Di7bt",n="interactive_thumbnail--dots--FIyhZ",i="interactive_thumbnail--dotHoverArea--35VM6",s="interactive_thumbnail--dot--i7FLi",o="interactive_thumbnail--activeDot--MZDgB",c="interactive_thumbnail--hidden--hUHma"},721429:(e,t,r)=>{r.d(t,{Az:()=>E});var a=r(716976),l=r(38989),n=r(536760),i=r(88839),s=r(589360),o=r(147186),c=r(790627),d=r(10679),u=r(143020),p=r(916847),_=r(428444),f=r(889323);let h=(0,n.Iz)(({orgId:e})=>(0,n.eU)(t=>e?t(f.WF4.Query({orgId:e})).transform(({org:e})=>{let t=!!c.oA(e?.isSalesAssistedPlanProperty)?.value,r=!!(0,c.oA)(e?.subscriptionShouldNotAutoRenewPlanProperty);return{isSalesAssisted:t,noTosAcceptanceKey:c.oA(e?.plan?.termsOfServiceAcceptanceByTermsKey)?.termsKey!==_.Lb.SEATS_MODEL_BILLING_2025,shouldNotAutoRenew:r}}):i.Qw.disabled()));function E(e){let t=e?.id??null,r=!(0,u.CT)(),{warningStatus:i,renewalDate:_,warningType:f}=function(e){let t=(0,s.Xf)(e),r=t.data?.analyze_data_contract_v2_start,a=r?(0,o.A)(r):null,l=(0,o.A)();function n(e,t,r){return{warningType:e,renewalDate:t,warningStatus:r}}return a&&l.isBefore(a)?n(30>=a.diff(l,"day")?"error":90>=a.diff(l,"day")?"warning":null,a,"loaded"):n(null,a,t.status)}(t),E=!!(0,l.kc)().order_form_billing_terms_banner,m=(0,p.n)(),y=(0,n.md)((0,a.useMemo)(()=>h({orgId:t}),[t])),b=(0,c.oA)(y.data),v=function({orgCreatedAt:e,isSalesAssisted:t,noTosAcceptanceKey:r,shouldNotAutoRenew:a,onExclusionList:l,isAdminView:n,isTermsOfServiceUpdateOn:i}){return!!(e&&(0,d.d)({date:new Date(e)})&&t&&r&&(a||l)&&(n||i))}({orgCreatedAt:e?.created_at,isSalesAssisted:!!b?.isSalesAssisted,noTosAcceptanceKey:!!b?.noTosAcceptanceKey,shouldNotAutoRenew:!!b?.shouldNotAutoRenew,onExclusionList:r,isAdminView:m,isTermsOfServiceUpdateOn:function(e){let t=!!(0,l.kc)().terms_of_service_may_2025_update,r=(0,o.A)(),a=!!e&&r.isBefore(e)&&30>=e.diff(r,"day");return t&&a}(_)}),I=(0,a.useMemo)(()=>"loaded"===y.status&&!!v,[y.status,v]);return"loading"===y.status||"loading"===i?(0,c.Xm)():(0,c.gB)({isEligible:E&&I,renewalDate:_,warningType:f})}},10679:(e,t,r)=>{r.d(t,{d:()=>n});var a=r(147186),l=r(890);function n(e){let t=(0,l.tl)().analyze_data_flow_v2_until;return!!t&&(0,a.A)(e.date).isBefore((0,a.A)(t))}},118753:(e,t,r)=>{r.d(t,{f:()=>d,x:()=>c});var a=r(104076);if(443==r.j)var l=r(748716);if(443==r.j)var n=r(421788);var i=r(848755),s=r(448160),o=r(526833);let c="FILE_CREATION_OMNICREATE_DROPDOWN";function d({menuItems:e,"data-onboarding-key":t,trackingProperties:r}){let d=e.newFiles.map(({key:e,...t})=>(0,a.jsx)(o.e,{...t},e));return(0,a.jsx)(n.a,{mode:"match",children:(0,a.jsx)(l.mc,{"data-onboarding-key":t,children:(0,a.jsxs)(i.fu,{name:s.e0.RESOURCE_CREATION_DROPDOWN,properties:{...r,fileCreationDefaultsDropdownType:c},onlyOnce:!0,children:[(0,a.jsx)(l.YJ,{children:d}),function(){if(!e.import)return null;let{key:t,...r}=e.import;return(0,a.jsx)(o.e,{...r},t)}()]})})})}},526833:(e,t,r)=>{r.d(t,{_:()=>d,e:()=>u});var a=r(104076);if(443==r.j)var l=r(748716);if(443==r.j)var n=r(258253);if(443==r.j)var i=r(920983);var s=r(468882);r(224433);var o=r(883739);function c({text:e,disabled:t}){return(0,a.jsx)(o.Ex,{color:t?o.zE.DISABLED:o.zE.DEFAULT_TRANSLUCENT,text:e})}var d=(e=>(e.REQUEST_UPGRADE="REQUEST_UPGRADE",e.REQUEST_SENT="REQUEST_SENT",e.ALPHA="ALPHA",e.BETA="BETA",e))(d||{});function u(e){let t=(0,n.G)(),r=e.isDisabled||e.isLoading;return(0,a.jsx)(i.J,{brand:e.brand,children:(0,a.jsx)(l.q7,{...{0:{className:"x19y5rnk xb3r6kr x1iorvi4 xjkvuk6 xet2fuk x1db2dqx x12ro6kh x1pcmjzl xmh6jz9 x1hop9l x1sd2uan x1g40iwv"},2:{className:"x19y5rnk xb3r6kr x1iorvi4 xjkvuk6 xet2fuk x1db2dqx x12ro6kh xmh6jz9 x1hop9l x1sd2uan x1g40iwv xc4ye4f"},1:{className:"x19y5rnk xb3r6kr x1iorvi4 xjkvuk6 xet2fuk x1db2dqx x12ro6kh xmh6jz9 x1hop9l x1sd2uan x1g40iwv x1fukjz5"},3:{className:"x19y5rnk xb3r6kr x1iorvi4 xjkvuk6 xet2fuk x1db2dqx x12ro6kh xmh6jz9 x1hop9l x1sd2uan x1g40iwv x1fukjz5"}}[!("dark"!==t.color)<<1|!!e.brand<<0],onClick:e.onClick,"data-testid":e.isLoading?void 0:e.dataTestId,disabled:r,"data-onboarding-key":e.dataOnboardingKey,children:(0,a.jsxs)("div",{className:"x78zum5 x6s0dn4 xh8yej3",children:[(0,a.jsxs)("div",{className:"x78zum5 x167g77z x6s0dn4 x1iyjqo2",children:[(0,a.jsx)("div",{...{0:{},2:{className:"x1aue78i"},1:{className:"xe5c7bq"},3:{className:"xe5c7bq"}}[!!e.brand<<1|!!e.isDisabled<<0],children:e.icon}),(0,a.jsx)("span",{...{0:{className:"x17akokd x1qxcl5b xclx6tv x1akne3o"},1:{className:"x17akokd x1qxcl5b xclx6tv x3vvef7"}}[!!e.isDisabled<<0],children:e.title})]}),e.badges?(0,a.jsx)("div",{className:"x78zum5 x1c4vz4f x6s0dn4",children:e.badges.map(e=>(0,a.jsx)(c,{text:p(e),disabled:r},e))}):null]})})})}let p=e=>{switch(e){case"REQUEST_UPGRADE":return(0,s.t)("upgrades.request");case"REQUEST_SENT":return(0,s.t)("upgrades.request_sent");case"ALPHA":return(0,s.t)("file_browser.creation_buttons.alpha");case"BETA":return(0,s.t)("file_browser.creation_buttons.beta")}}},403334:(e,t,r)=>{r.d(t,{q:()=>d});var a=r(104076),l=r(709120),n=r(594251),i=r(498020),s=r(235313),o=r(468882),c=r(420398);let d=(0,r(605020).Ju)(function(e){let{open:t,onClose:r,onRemove:d,fileName:u}=e,p=l.hS({open:t,onClose:r}),_=(0,a.jsx)(c.E,{fontWeight:"semi-bold",children:u}),f=async()=>{await d(),r()};return(0,a.jsx)(n.bL,{manager:p,width:"md",children:(0,a.jsxs)(i.vo,{children:[(0,a.jsx)(i.Y9,{children:(0,a.jsx)(i.hE,{children:(0,o.tx)("shared_with_you.confirm_delete.remove_file")})}),(0,a.jsx)(i.nB,{children:(0,o.tx)("shared_with_you.confirm_delete.body",{file_name:_})}),(0,a.jsx)(i.wi,{children:(0,a.jsxs)(i.jk,{children:[(0,a.jsx)(s.$n,{variant:"secondary",onClick:r,children:(0,o.tx)("shared_with_you.confirm_delete.cancel")}),(0,a.jsx)(s.$n,{variant:"destructive",onClick:f,children:(0,o.tx)("shared_with_you.confirm_delete.remove")})]})})]})})})},112042:(e,t,r)=>{let a;r.d(t,{a:()=>i});var l=r(324835),n=r(605020);function i(){return a??=(0,n.Ju)(l.A.createLazyComponent(()=>Promise.all([r.e(743),r.e(6221),r.e(1614),r.e(1821),r.e(3402),r.e(973),r.e(1283),r.e(7653),r.e(9525),r.e(6241),r.e(689),r.e(5814),r.e(4349),r.e(7888),r.e(6959),r.e(1414),r.e(7234),r.e(8858),r.e(2726),r.e(8134),r.e(7059),r.e(8946),r.e(8717)]).then(r.bind(r,268659)).then(e=>e.AddPinModal),(0,n.Ij)("AddPinModal")))}},669052:(e,t,r)=>{let a;r.d(t,{I:()=>i});var l=r(324835),n=r(605020);function i(){return a??=(0,n.Ju)(l.A.createLazyComponent(()=>Promise.all([r.e(743),r.e(6221),r.e(1614),r.e(1821),r.e(3402),r.e(973),r.e(1283),r.e(7653),r.e(9525),r.e(6241),r.e(689),r.e(5814),r.e(4349),r.e(7888),r.e(6959),r.e(1414),r.e(7234),r.e(8858),r.e(2726),r.e(8134),r.e(7059),r.e(8946),r.e(8717)]).then(r.bind(r,781449)).then(e=>e.DeletePinModal),(0,n.Ij)("DeletePinModal")))}},688683:(e,t,r)=>{let a;r.d(t,{l:()=>i});var l=r(324835),n=r(605020);function i(){return a??=(0,n.Ju)(l.A.createLazyComponent(()=>Promise.all([r.e(743),r.e(6221),r.e(1614),r.e(1821),r.e(3402),r.e(973),r.e(1283),r.e(7653),r.e(9525),r.e(6241),r.e(689),r.e(5814),r.e(4349),r.e(7888),r.e(6959),r.e(1414),r.e(7234),r.e(8858),r.e(2726),r.e(8134),r.e(7059),r.e(8946),r.e(8717)]).then(r.bind(r,208752)).then(e=>e.EditPinModal),(0,n.Ij)("EditPinModal")))}},808467:(e,t,r)=>{r.d(t,{Z:()=>tJ});var a=r(104076),l=r(716976),n=r(237420),i=r(38989),s=r(536760),o=r(224433),c=r(511570),d=r.n(c),u=r(359081),p=r(251931),_=r(65710),f=r(41814),h=r(824506),E=r(122614),m=r(179236),y=r(875276),b=r(349317),v=r(245943),I=r(289157),T=r(333139),w=r(239513),R=r(468882),x=r(84784),k=r(47972),O=r(651376),F=r(801070),g=r(939056),S=r(348967),C=r(301378),A=r(735153),N=r(283987),P=r(570199);function j(e){let t=e?.type??null,r=(0,s.md)(b.J),a=(0,s.md)(b.jM),n=(0,s.md)(b.P_),[i,o]=(0,s.fp)(A.R9),c=(0,s.md)(A.Q8),d=(0,s.md)(A.BA),u=(0,s.md)(A.sC),p=(0,s.md)(h.hO.isFragmentSearchAtom),[_,f]=(0,s.fp)((0,b.l4)(t)),E=(0,P.L)(p?"fragment_search_modal":"file_browser",u,!0);return l.useCallback(()=>{if(!e||!_)return;let t=null;e.type===N.WY.RESOURCE&&_.type===N.WY.RESOURCE?t=null:e.type===N.WY.CREATOR&&_.type===N.WY.CREATOR?t=(0,S.C8)(e,S.M2.REMOVE_FROM_GROUP,_):e.type===N.WY.SPACE&&_.type===N.WY.SPACE&&(t=(0,S.q1)(e,S.M2.REMOVE_FROM_GROUP,_)),f(t);let l=(0,S.gh)(t||{type:e.type,value:null},a,r,n,i??void 0);o(l?.searchModelType??null),E(c,N.uH.FILES,l,d,!1,!1)},[e,r,_,a,n,d,E,i,c,f,o])}var L=r(549326);let M="facet_pills--type--mX1lK";function D({previewIsShown:e}){let t=(0,s.md)(b.L8),r=(0,s.md)(b.rG);return(0,a.jsx)(a.Fragment,{children:t.map((t,l)=>(0,i.kc)().file_browser_search_panel_fpl_migration?(0,a.jsx)(U,{facet:t,index:l,isActive:(0,F.c2)(t,r),previewIsShown:e},`pill-${l}`):(0,a.jsx)(W,{facet:t,index:l,isActive:(0,F.c2)(t,r)},`pill-${l}`))})}function U({facet:e,index:t,isActive:r,previewIsShown:n}){let i=l.useRef(null),o=(0,s.md)(b.L8),c=(0,s.Xr)(b.rG),d=j(e),u=(0,S.gl)(e.type),p=(0,S.FR)(e),_=(0,C.k)(),f=l.useCallback(t=>{r?(c(null),i.current?.blur()):(t.stopPropagation(),c(e),i.current?.focus())},[e,r,c]),h=l.useCallback(a=>{r&&(("Backspace"===a.key||"Delete"===a.key)&&(d(),_((0,S.oM)(e),N.jD.PILL,N.uR.AUTOCOMPLETE)),"ArrowLeft"===a.key&&t>0&&c(o[t-1]),"ArrowRight"===a.key&&(t<o.length-1?c(o[t+1]):c(null)))},[o,t,r,d,c,_,e]),E=l.useCallback(e=>{n&&f(e)},[n,f]);return l.useEffect(()=>{r&&i.current?.focus()},[r]),(0,a.jsx)("span",{className:r?"facet_pills--activePill--ct05I facet_pills--pill--aJOOg faceted_search_bar--activePill--ydT4P":"facet_pills--pill--aJOOg",children:(0,a.jsxs)(g.v,{variant:"primary",selected:r,hasCloseButton:!1,onKeyDown:h,onMouseDown:E,tabIndex:0,ref:i,onClose:d,children:[(0,a.jsx)("span",{className:M,children:u}),p]})})}function W({facet:e,index:t,isActive:r}){let i=l.useRef(null),o=(0,n.d4)(e=>e.modalShown?.type===L.R),c=(0,s.md)(b.L8),d=(0,s.Xr)(b.rG),u=j(e),p=(0,S.gl)(e.type),_=(0,S.FR)(e),f=(0,C.k)(),h=l.useCallback(t=>{r?(d(null),i.current?.blur()):(t.stopPropagation(),d(e),i.current?.focus())},[e,r,d]),E=l.useCallback(a=>{r&&(("Backspace"===a.key||"Delete"===a.key)&&(u(),f((0,S.oM)(e),N.jD.PILL,N.uR.AUTOCOMPLETE)),"ArrowLeft"===a.key&&t>0&&d(c[t-1]),"ArrowRight"===a.key&&(t<c.length-1?d(c[t+1]):d(null)))},[c,t,r,u,d,f,e]),m=l.useCallback(e=>{o&&h(e)},[o,h]);return l.useEffect(()=>{r&&i.current?.focus()},[r]),(0,a.jsxs)("button",{className:r?"facet_pills--activePill_DEPRECATED--e6dp- facet_pills--pill_DEPRECATED--H1N64 faceted_search_bar--activePill--ydT4P":"facet_pills--pill_DEPRECATED--H1N64",onKeyDown:E,onMouseDown:m,ref:i,children:[(0,a.jsx)("span",{className:M,children:p}),_]})}var B=r(188254),V=r(758658),H=(e=>(e.TYPE="TYPE",e.TYPE_AND_VALUES="TYPE_AND_VALUES",e))(H||{});let K=(0,s.eU)([]),Y=(0,s.eU)(e=>e(K),(e,t,r)=>{t(K,r)}),$=(0,s.eU)(e=>{let t=e(b.L8),r=e(b.zD),a=e(A.Q8),l=e(A.BA),n=G(t,r);if(a.length<2||0===n.length||l)return null;for(let e of n){let t=J((0,S.qM)(e)+":"),r=J(a,!0).lastIndexOf(t);if(r>=0)return{suggestionType:"TYPE",facetType:e,facetTypeIndex:r,valueToQuery:a.slice(r+t.length).trim()};let l=J(a).split(" ").pop();if(l&&X(l,t))return{suggestionType:"TYPE",facetType:e,facetTypeIndex:a.lastIndexOf(l),valueToQuery:null}}return null}),z=(0,s.eU)(e=>{let t=e($);if(!t||null==t.valueToQuery)return null;let r=t.valueToQuery;if(t.facetType===N.WY.RESOURCE){let a=e(b._4),l=a.map(S.S2),n=[];return(a.forEach((e,t)=>{X(r,l[t])&&n.push(e)}),0===n.length)?null:{suggestionType:"TYPE_AND_VALUES",facetType:N.WY.RESOURCE,facetTypeIndex:t.facetTypeIndex,facetValues:n.slice(0,6)}}let a=e(Y);if(0===a.length)return null;if(t.facetType===N.WY.CREATOR){let r=(0,V.nv)(a,N.dC.USERS);if(0===r.length)return null;let l=e(b.J),n=l?.value||[],i=r.filter(e=>!(0,F.Jj)(n,e)).slice(0,5);if(0===i.length)return null;let s=i.map(e=>({type:N.WY.CREATOR,value:e}));return{suggestionType:"TYPE_AND_VALUES",facetType:N.WY.CREATOR,facetTypeIndex:t.facetTypeIndex,facetValues:s}}if(t.facetType===N.WY.SPACE){let r=e(b.P_),l=e(b.q$),n=[];if(l.includes(N.qy.FOLDER)){let e=r?.value?.folders||[],t=(0,V.nv)(a,N.dC.PROJECTS).slice(0,5).filter(t=>!(0,F.Jj)(e,t)).map(e=>({type:N.WY.SPACE,spaceType:N.qy.FOLDER,value:e}));n.push(...t)}if(l.includes(N.qy.TEAM)){let e=r?.value?.teams||[],t=(0,V.nv)(a,N.dC.TEAMS).slice(0,5).filter(t=>!(0,F.Jj)(e,t)).map(e=>({type:N.WY.SPACE,spaceType:N.qy.TEAM,value:e}));n.push(...t)}if(l.includes(N.qy.ORG)){let e=r?.value?.orgs||[],t=(0,V.nv)(a,N.dC.ORGS).slice(0,5).filter(t=>!(0,F.Jj)(e,t)).map(e=>({type:N.WY.SPACE,spaceType:N.qy.ORG,value:e}));n.push(...t)}return 0===n.length?null:{suggestionType:"TYPE_AND_VALUES",facetType:N.WY.SPACE,facetTypeIndex:t.facetTypeIndex,facetValues:n.slice(0,5)}}return null}),Q=(0,s.eU)(e=>{let t=e($);return e(z)||t}),q=(0,s.eU)(null);function G(e,t){let r=new Set(t);(0,S.sd)(N.WY.RESOURCE,e)&&r.delete(N.WY.RESOURCE);let a=0,l=0;for(let t of e)t.type===N.WY.CREATOR&&a++,t.type===N.WY.SPACE&&l++;return a>=S.hp&&r.delete(N.WY.CREATOR),l>=S.hp&&r.delete(N.WY.SPACE),Array.from(r)}let X=(e,t)=>J(t).startsWith(J(e)),J=(e,t)=>t?e.toLocaleLowerCase():e.toLocaleLowerCase().trim().replace(/\s+/g," ");var Z=r(569637);function ee(){let e=(0,s.Xr)(Y),t=(0,s.md)($),r=t?.facetType,a=t?.valueToQuery??null,n=(0,Z.F)(a,r);l.useEffect(()=>{"loading"!==n.status&&e(n.data?n.data:[])},[n,e])}function et({hideSearchPreview:e,autocomplete:t,searchInputRef:r,expanded:i,expandModal:o,collapseModal:c}){let d=(0,n.wA)(),u=(0,m._6)(),p=(0,y.X0)(u),[_,f]=l.useState(!1),F=l.useRef(null),[g,S]=(0,s.fp)(A.Q8),C=(0,s.md)(A.BA),N=(0,s.md)(A.sC),L=(0,s.md)(b.oT),M=(0,s.md)(b.L8),[U,W]=(0,s.fp)(b.rG),V=(0,s.Xr)(b.q4),H=(0,s.md)(h.hO.isFragmentSearchAtom),K=(0,P.y)(H?"fragment_search_modal":p?"desktop_new_tab":"file_browser",N,!0),Y=j(U),{activeValue:$,setActiveValue:z}=l.useContext(B.M),Q="[role=option]",q=t?.refs.scroll,G=l.useCallback(()=>{let e=q?.current,t=e?.querySelector(Q);return t?t.id:void 0},[q]),X=l.useCallback(()=>{let e=q?.current,t=e?.querySelectorAll(Q);return t?.[t.length-1]?t?.[t.length-1].id:void 0},[q]);ee();let J=l.useCallback(()=>{F.current?.scrollTo({left:F.current.scrollWidth})},[]);l.useEffect(()=>{let e=e=>{e.metaKey&&"/"===e.key&&(r.current?.focus(),J())};return document.addEventListener("keydown",e),()=>{document.removeEventListener("keydown",e)}},[J,r]);let Z=l.useCallback(t=>{S(t.target.value),e||K(t.target.value,C,!1,!1)},[C,K,S,e]),et=l.useCallback(e=>{if(_)return;"Escape"===e.key?c?.():"Tab"===e.key?c?.():o?.();let{selectionStart:t,selectionEnd:r}=e.currentTarget,a=0===t&&0===r;"Enter"===e.key&&void 0===$&&(K(g,C,!0,!0),H&&c?.()),!C&&(("Backspace"===e.key||"Delete"===e.key)&&a&&(U?Y():W(L)),"ArrowLeft"===e.key&&a&&W(L))},[_,U,C,L,K,g,Y,W,H,$,c,o]),er=l.useCallback(()=>{S(""),d(E._z({})),V(),C&&(0,y.kV)(u)&&d(k.sf(u.previousView??{view:"recentsAndSharing"}))},[V,d,u,C,S]),ea=l.useCallback(e=>{if(e.stopPropagation(),e.preventDefault(),r.current?.focus(),r.current){let e=r.current.value.length;r.current.setSelectionRange(e,e)}U&&W(null)},[U,W,r]),el=l.useCallback(e=>{e.stopPropagation(),e.preventDefault()},[]);l.useEffect(()=>{U||C||!i||(r.current?.focus(),z(void 0))},[U,M,g,C,z,i,r]);let en=0!==M.length,ei=0===g.length&&(!en||C);l.useLayoutEffect(()=>{if(!r||!r.current)return;if(ei){r.current.style.width="calc(100% - 10px)";return}var e=document.createElement("span");e.innerHTML=(0,x.p)(g.replace(/<|>/,"W")),e.style.font="11px Inter",document.body.appendChild(e);let t=e.getBoundingClientRect().width+8;r.current.style.width=`${t}px`,document.body.removeChild(e),J()},[g,J,r,ei]);let es=!C&&!p,eo=l.useMemo(()=>t?.getInputProps({onKeyDown:et})??{ref:r,onKeyDown:et},[t,et,r]),ec={...eo,onKeyDown:l.useCallback(e=>{if("ArrowUp"===e.key&&void 0!==$&&G()===$)q.current?.scrollTo({top:0}),e.preventDefault(),z(void 0);else{if("ArrowUp"===e.key&&void 0===$||"ArrowDown"===e.key&&void 0!==$&&X()===$)return;eo.onKeyDown?.(e)}},[$,G,X,eo,z,q])};return(0,a.jsxs)(v.Y.Root,{className:"faceted_search_bar--searchBar--hab2B search--searchContainerSidebarWithSelection--I54MO search--_expandingSearchBoxSidebarContainerBase--Mj7Ol search--searchContainerSidebar--JLCAb",onMouseDown:ea,onClick:el,children:[(0,a.jsx)("div",{className:"faceted_search_bar--rightFadeContainer--O7WxS faceted_search_bar--_fadeContainer--DiQLS",children:(0,a.jsx)(T.W,{className:"faceted_search_bar--iconWrapper--BpUGT","aria-hidden":!0})}),(0,a.jsxs)("div",{className:"faceted_search_bar--clipContainer--RB40P",ref:F,children:[es&&(0,a.jsx)(D,{previewIsShown:i}),(0,a.jsx)(v.Y,{"aria-label":(0,R.t)("search.search_bar.placeholder_v2"),className:"faceted_search_bar--input--V5ksZ","data-testid":"facetedSearchInput",id:"facetedSearchInput",onChange:(e,t)=>Z(t.event),onCompositionEnd:()=>f(!1),onCompositionStart:()=>f(!0),onFocus:o,onMouseDown:e=>e.stopPropagation(),placeholder:ei?(0,R.t)("search.search_bar.placeholder_v2"):void 0,spellCheck:!1,value:g,...ec})]}),(!!g||en)&&(0,a.jsx)("div",{className:"faceted_search_bar--leftFadeContainer--r39DL faceted_search_bar--_fadeContainer--DiQLS","data-testid":"facetedSearchClear",children:(0,a.jsx)("div",{className:"faceted_search_bar--clearButtonWrapper--768QM",children:(0,a.jsx)(I.K,{"aria-label":(0,R.t)("search.search_bar.clear"),"data-tooltip-type":O.Ib.TEXT,"data-tooltip":(0,R.t)("search.search_bar.clear"),onClick:er,actionOnPointerDown:!0,children:(0,a.jsx)(w.X,{})})})})]})}var er=r(922251),ea=r(133202),el=r(125239),en=r(965901),ei=r(554841);function es({hideSearchPreview:e}){let t=(0,n.wA)(),r=(0,m._6)(),i=(0,y.X0)(r),[o,c]=l.useState(!1),d=l.useRef(null),p=l.useRef(null),[_,f]=(0,s.fp)(A.Q8),v=(0,s.md)(A.BA),F=(0,s.md)(A.sC),g=(0,s.md)(b.oT),S=(0,s.md)(b.L8),[C,N]=(0,s.fp)(b.rG),L=(0,s.Xr)(b.q4),M=(0,s.md)(h.hO.isFragmentSearchAtom),U=(0,P.y)(M?"fragment_search_modal":i?"desktop_new_tab":"file_browser",F,!0),W=j(C);ee();let{setKeyboardNavigationElement:B,keyboardNavigationItem:V,isFocused:H,isFauxFocused:K}=(0,el.M3)({id:"faceted-search-bar",path:[0]});(0,u.h)(()=>{d.current&&B?.(d.current)});let Y=l.useCallback(()=>{p.current?.scrollTo({left:p.current.scrollWidth})},[]);l.useEffect(()=>{let e=e=>{e.metaKey&&"/"===e.key&&(V?.focus(),V?.fauxFocus(),Y())};return document.addEventListener("keydown",e),()=>{document.removeEventListener("keydown",e)}},[V,Y]);let $=l.useCallback(t=>{f(t.target.value),e||U(t.target.value,v,!1,!1)},[v,U,f,e]),z=l.useCallback(e=>{if(o)return;let{selectionStart:r,selectionEnd:a}=e.currentTarget,l=0===r&&0===a;"Enter"===e.key&&K&&(U(_,v,!0,!0),M&&t(ei.Lo())),!v&&(("Backspace"===e.key||"Delete"===e.key)&&l&&(C?W():N(g)),"ArrowLeft"===e.key&&l&&N(g))},[K,o,C,v,g,U,_,W,N,M,t]),Q=l.useCallback(()=>{f(""),t(E._z({})),L(),v&&(0,y.kV)(r)&&t(k.sf(r.previousView??{view:"recentsAndSharing"}))},[L,t,r,v,f]),q=l.useCallback(e=>{if(e.stopPropagation(),e.preventDefault(),V?.focus(),V?.fauxFocus(),d.current){let e=d.current.value.length;d.current.setSelectionRange(e,e)}C&&N(null)},[C,V,N]),G=l.useCallback(e=>{e.stopPropagation(),e.preventDefault()},[]);l.useEffect(()=>{H&&(V?.focus(),V?.fauxFocus(),Y(),t(E.W0({entryPoint:M?"fragment_search_modal":"file_browser"})))},[t,H,V,Y,M]),l.useEffect(()=>{C||v||(V?.focus(),V?.fauxFocus())},[C,S,V,_,v]);let X=0!==S.length,J=0===_.length&&(!X||v);l.useLayoutEffect(()=>{if(!d||!d.current)return;if(J){d.current.style.width="calc(100% - 10px)";return}var e=document.createElement("span");e.innerHTML=(0,x.p)(_.replace(/<|>/,"W")),e.style.font="11px Inter",document.body.appendChild(e);let t=e.getBoundingClientRect().width+8;d.current.style.width=`${t}px`,document.body.removeChild(e),Y()},[_,Y,d,J]);let Z=!v&&!i;return(0,a.jsxs)("div",{className:"faceted_search_bar_deprecated--searchBar--pTGKr search--searchContainerSidebarWithSelection--I54MO search--_expandingSearchBoxSidebarContainerBase--Mj7Ol search--searchContainerSidebar--JLCAb",onMouseDown:q,onClick:G,role:"button",tabIndex:0,children:[(0,a.jsx)("div",{className:"faceted_search_bar_deprecated--rightFadeContainer--tAkla faceted_search_bar_deprecated--_fadeContainer--VPsml",children:(0,a.jsx)(T.W,{className:"faceted_search_bar_deprecated--iconWrapper--McGNx"})}),(0,a.jsxs)("div",{className:"faceted_search_bar_deprecated--clipContainer--zgciu",ref:p,children:[Z&&(0,a.jsx)(D,{}),(0,a.jsx)(en.i,{ref:d,autoFocus:!0,className:"faceted_search_bar_deprecated--input--Xa5n1","data-testid":"facetedSearchInput",onChange:$,onCompositionEnd:()=>c(!1),onCompositionStart:()=>c(!0),onKeyDown:z,onMouseDown:e=>e.stopPropagation(),placeholder:J?(0,R.t)("search.search_bar.placeholder_v2"):void 0,spellCheck:"false",value:_})]}),(!!_||X)&&(0,a.jsx)("div",{className:"faceted_search_bar_deprecated--leftFadeContainer--CP4in faceted_search_bar_deprecated--_fadeContainer--VPsml","data-testid":"facetedSearchClear",children:(0,a.jsx)(I.K,{"aria-label":(0,R.t)("search.search_bar.clear"),onClick:Q,"data-tooltip-type":O.Ib.TEXT,"data-tooltip":(0,R.t)("search.search_bar.clear"),children:(0,a.jsx)(w.X,{})})})]})}var eo=r(735286),ec=r(749232),ed=r(907479),eu=r(605020),ep=r(440392),e_=r(229553),ef=r(759095),eh=r(847857),eE=r(842727),em=r(889323),ey=r(496052),eb=r(413683),ev=r(908397),eI=r(565698),eT=r(847863),ew=r(977051),eR=r(333863),ex=r(376102),ek=r(437054),eO=r(433960),eF=r(359418),eg=r(122864),eS=r(659942),eC=r(258882),eA=r(492711),eN=r(262561),eP=(e=>(e.PREVIEW="PREVIEW",e.DROPDOWN="DROPDOWN",e))(eP||{});let ej=l.createContext("PREVIEW");var eL=(e=>(e.BRAND="BRAND",e.BRAND_HOVER="BRAND_HOVER",e.CHECKBOX="CHECKBOX",e))(eL||{}),eM=(e=>(e.SHORT="SHORT",e))(eM||{});function eD({href:e,icon:t,id:r,path:i,text:o,breadcrumbElement:c,disableRecentSearchOnClick:u,onClickCallback:p,onContextMenuCallback:_,onKeyEnterCallback:f,sideElement:h,sideElementAlwaysVisible:m,rowStyle:y,rowHeight:b,textToHighlight:v,trackInteraction:I,elementBesideName:T}){let w=(0,eg.sR)(l.useContext(ej),"Must use `FacetedSearchPreviewRowBase` inside `<SearchRowContext.Provider>"),R=(0,n.wA)(),x=(0,s.md)(A.Q8),k=(0,n.d4)(e=>e.currentUserOrgId),O=eh.S(k)?.searches,{setKeyboardNavigationElement:F,isFauxFocused:g}=(0,el.M3)({id:r,path:i}),S=l.useCallback(()=>{x&&!u&&R(E.nG({searchQuery:x,previousSearches:O})),I?.(ec.vj.Query.ClickAction.CLICK)},[u,R,O,x,I]),C=l.useCallback(e=>{S(),p?.(e)},[S,p]),N=l.useCallback(e=>{1===e.button&&(S(),p?.(e))},[S,p]),P=l.useCallback(e=>{"Enter"===e.key&&(I?.(ec.vj.Query.ClickAction.ENTER),f?.(e))},[f,I]),j=l.useCallback(e=>{_?.(e)},[_]);return(0,a.jsx)(eS.o,{eventListeners:["onClick","onMouseDown"],children:(0,a.jsx)(eC.N,{href:e??"",onContextMenu:j,onKeyDown:P,onAuxClick:N,tabIndex:0,onClick:C,ref:F,children:(0,a.jsxs)("div",{className:d()(eN.nM,{[eN._O]:"BRAND"===y,[eN.iJ]:"BRAND_HOVER"===y,[eN.fc]:"SHORT"===b,[eN.Hi]:g}),children:[(0,a.jsxs)("div",{className:eN.aU,tabIndex:-1,children:[t&&(0,a.jsx)("div",{className:d()(eN.Kk,{[eN.L0]:"CHECKBOX"===y}),children:t}),(0,a.jsxs)("div",{className:d()(eN.FS,{[eN.y4]:!t,[eN.JX]:"BRAND"===y||"BRAND_HOVER"===y,[eN.b3]:"DROPDOWN"===w,[eN.P6]:"CHECKBOX"===y}),children:[(0,a.jsxs)("div",{className:eN.mX,children:[(0,a.jsx)("div",{className:eN.h5,children:v?(0,a.jsx)(eA.f,{text:o,query:v}):(0,a.jsx)(a.Fragment,{children:o})}),!!T&&T]}),!!c&&(0,a.jsx)("div",{className:eN.QF,children:c})]})]}),!!h&&(0,a.jsx)("div",{className:d()({[eN.qZ]:!m,[eN.PQ]:m,[eN.eF]:"CHECKBOX"===y,[eN.Hi]:g}),tabIndex:-1,children:h})]})})})}function eU({leftElement:e,rightElement:t}){return(0,a.jsxs)("div",{className:"faceted_search_preview_row_breadcrumb--breadcrumbContainer--9LSeY text--fontPos11--2LvXf text--_fontBase--QdLsd",children:[(0,a.jsx)("span",{className:"faceted_search_preview_row_breadcrumb--ellipsis--xJG0b ellipsis--ellipsis--Tjyfa",children:e}),!!e&&!!t&&(0,a.jsx)("span",{className:"faceted_search_preview_row_breadcrumb--dot--oLkFy",children:"\xb7"}),(0,a.jsx)("span",{children:t})]})}function eW({fileResult:e,id:t,path:r,position:o,onContextMenuCallback:c}){let d=(0,n.wA)(),u=(0,n.d4)(e=>e.currentUserOrgId||void 0),p=(0,n.d4)(e=>e.currentTeamId),_=(0,n.d4)(e=>e.user),f=(0,n.d4)(e=>e.search.sessionId),h=(0,s.md)(A.Q),E=(0,eR.$E)(),y=(0,m._6)(),b=(0,V.EN)(e),v=b?e.model:e,I=b?e:v,T=(0,V.AR)(v,_,u,p,y),w=(0,ex.GT)(T,o,b?e:void 0),{Sprig:R}=(0,eT.A)(),x=(0,ek.v)(),k=l.useCallback(()=>{(0,i.kc)().file_browser_search_panel_fpl_migration?x((0,eO.fA)(v)):(d(ei.AS()),(0,V.K4)(d,v,u??null,p,_,R))},[u,p,_,d,v,x,R]),O=l.useCallback(e=>{e.preventDefault(),(0,i.kc)().file_browser_sentiment_survey&&R("setAttribute","fb_file_opened",!0),(0,i.kc)().file_browser_search_panel_fpl_migration?x((0,eO.fA)(v),e):e.metaKey||1===e.button?ev.Ay.redirect(T,"_blank"):k()},[T,k,v,x,R]),F=l.useCallback(e=>{e.preventDefault(),(0,i.kc)().file_browser_search_panel_fpl_migration?x((0,eO.fA)(v),e):(d(ei.AS()),(0,V.K4)(d,v,u??null,p,_,R))},[u,p,_,d,v,x,R]),g=l.useCallback(e=>{c({index:0,data:I},e)},[I,c]),S=l.useCallback(t=>{b?w(t):ec.vj.Recents.trackRecentsClick(f,o,e.key,ec.vj.RecentType.FILE)},[e,b,o,f,w]),C=E(v);return(0,i.kc)().file_browser_search_panel_fpl_migration?(0,a.jsx)(eF.cr,{breadcrumbElement:(0,a.jsx)(eB,{file:v}),icon:(0,a.jsx)(eR.w4,{size:16,type:C}),id:t,onClickCallback:O,onContextMenuCallback:g,onSelectCallback:k,text:v.name,textToHighlight:h,trackInteraction:S}):(0,a.jsx)(eD,{breadcrumbElement:(0,a.jsx)(eB,{file:v}),icon:(0,a.jsx)(eR.w4,{size:16,type:C}),id:t,onClickCallback:O,onContextMenuCallback:g,onKeyEnterCallback:F,path:r,text:v.name,textToHighlight:h,trackInteraction:S})}function eB({file:e}){let{data:t}=(0,eI.bc)(em.yf7,{projectId:e.folder_id},{enabled:!!e.folder_id}),r=t?.project?.path||"",l=e.touched_at?(0,R.tx)("search.preview_item.edited_from_now",{relativeTimeString:(0,a.jsx)(ew.h1,{date:e.touched_at,style:"narrow"})}):null;return(0,a.jsx)(eU,{leftElement:r||null,rightElement:l})}var eV=r(225363),eH=r(133586),eK=r(927903),eY=r(512130);function e$({id:e,path:t,position:r,recentSearch:o}){let c=(0,n.wA)(),d=(0,m._6)(),u=(0,y.X0)(d)?"desktop_new_tab":"file_browser",p=(0,s.Xr)(A.Q8),_=(0,s.md)(A.sC),f=(0,s.md)(A.R9),h=(0,s.md)(b.CZ),v=(0,n.d4)(e=>e.currentUserOrgId||null),T=(0,n.d4)(e=>e.search.sessionId),w=eh.S(v)?.searches,x=l.useCallback(()=>{(0,y.X0)(d)&&c(E.Rz({query:o.query,searchScope:_,searchModelType:N.uH.FILES})),c(E.Dy({entryPoint:u})),p(o.query),(0,V.Yb)(c,d,u,o.query,_,f??N.uH.FILES,!0,h),c(ei.AS())},[c,u,h,o.query,f,_,d,p]),k=l.useCallback(e=>{if(e.preventDefault(),e.metaKey){(0,y.X0)(d)&&c(E.Rz({query:o.query,searchScope:_,searchModelType:N.uH.FILES}));let e=(0,V.XW)(o.query,v,f??N.uH.FILES);ev.Ay.redirect(e,"_blank")}else x()},[d,c,x,o.query,_,v,f]),O=l.useCallback(e=>{e.stopPropagation(),e.preventDefault(),c(E.uL({orgId:v,searchQuery:o.query,previousSearches:w}))},[v,c,w,o.query]),F=l.useCallback(()=>{ec.vj.Recents.trackRecentsClick(T,r,null,ec.vj.RecentType.SEARCH)},[r,T]),g=(0,a.jsx)("div",{className:"faceted_search_preview_recent_row--clearButton--6Pwen raw_components--iconButtonEnabled--WmVk5 raw_components--_iconButton---ybo6",children:(0,a.jsx)(I.K,{"aria-label":(0,R.t)("search.search_bar.clear"),onClick:O,children:(0,a.jsx)(eV.A,{})})});return(0,i.kc)().file_browser_search_panel_fpl_migration?(0,a.jsx)(eF.cr,{icon:(0,a.jsx)(eH.R,{}),id:e,text:o.query,onClickCallback:k,onSelectCallback:x,sideElement:g,trackInteraction:F}):(0,a.jsx)(eD,{icon:(0,a.jsx)(eK.B,{className:"faceted_search_preview_recent_row--icon--6eUrW",svg:eY.A}),id:e,path:t,text:o.query,onClickCallback:k,sideElement:g,trackInteraction:F})}function ez({id:e,path:t}){let r=(0,n.d4)(e=>e.currentUserOrgId),i=(0,eh.S)(r),s=i.searches.slice(0,N.Or),o=N.MU-s.length,c=function(){let[e]=(0,ef.IT)((0,em.MAl)({})),t=l.useMemo(()=>e.transform(e=>(0,ey.YN)(e.currentUser.recentFiles)),[e]);return l.useEffect(()=>{"loaded"===t.status&&(0,e_.Wn)(t.data)},[t]),l.useMemo(()=>t.transform(e=>e.recent_files),[t])}(),d=c?.data?.slice(0,o)||[];return"loaded"===c.status&&"loaded"===i.status?(0,a.jsxs)(a.Fragment,{children:[s.length+d.length>0&&(0,a.jsx)("div",{className:"faceted_search_preview_recents--header--JjcIl",children:(0,R.tx)("search.preview_section.recent")}),s.map((r,l)=>{let n=`${e}-recent-search-${l}`;return(0,a.jsx)(e$,{id:n,path:[...t,0,l],position:l,recentSearch:r},n)}),(0,a.jsx)(eE.Q0,{isDropdown:!0,children:(0,a.jsx)(eE.kq.Consumer,{children:r=>(0,a.jsx)(a.Fragment,{children:d.map((l,n)=>{let i=`${e}-recent-file-${n}`,o=s.length+n;return(0,a.jsx)(eW,{fileResult:l,id:i,path:[...t,1,n],position:o,onContextMenuCallback:r.onContextMenuClick},i)})})})})]}):(0,a.jsx)(eb.e,{numRows:N.MU})}var eQ=r(509233),eq=r(835729),eG=r(463702),eX=r(220532),eJ=r(110063);function eZ({folderResult:e,id:t,path:r,position:o,onContextMenuCallback:c}){let d=(0,n.wA)(),u=(0,s.md)(A.Q8),p=(0,V.uF)(e.model),_=(0,ex.GT)(p,o,e),f=(0,eX.EB)(),h=l.useCallback(()=>{d(ei.AS()),(0,i.kc)().file_browser_search_panel_fpl_migration?f(e.model.id):(0,V.NE)(d,e.model)},[d,e,f]),E=l.useCallback(t=>{t.preventDefault(),(0,i.kc)().file_browser_search_panel_fpl_migration?(t.metaKey||1===t.button||d(ei.AS()),f(e.model.id,t)):t.metaKey||1===t.button?ev.Ay.redirect(p,"_blank"):h()},[p,h,e.model.id,f,d]),m=l.useCallback(t=>{t.preventDefault(),d(ei.AS()),(0,i.kc)().file_browser_search_panel_fpl_migration?f(e.model.id,t):(0,V.NE)(d,e.model)},[d,e,f]),y=l.useCallback(t=>{c({index:0,data:e},t)},[e,c]);return(0,i.kc)().file_browser_search_panel_fpl_migration?(0,a.jsx)(eF.cr,{breadcrumbElement:(0,a.jsx)(e0,{folderResult:e}),elementBesideName:e.model.is_connected_project?(0,a.jsx)(eG.W,{}):void 0,icon:(0,a.jsx)(eq.J,{}),id:t,onClickCallback:E,onContextMenuCallback:y,onSelectCallback:h,text:e.model.name,textToHighlight:u,trackInteraction:_}):(0,a.jsx)(eD,{breadcrumbElement:(0,a.jsx)(e0,{folderResult:e}),elementBesideName:e.model.is_connected_project?(0,a.jsx)(eG.W,{}):void 0,icon:(0,a.jsx)(eK.B,{className:"faceted_search_preview_folder_row--icon--TnWhg",svg:eJ.A}),id:t,onClickCallback:E,onContextMenuCallback:y,onKeyEnterCallback:m,path:r,text:e.model.name,textToHighlight:u,trackInteraction:_})}function e0({folderResult:e}){let{data:t}=(0,eI.bc)(em.sn$,{teamId:e.model.team_id??""},{enabled:!!e.model.team_id}),r=t?.team?.name||"",l=r?(0,R.tx)("search.preview_item.in_team",{teamName:r}):null,n=(0,R.tx)("search.preview_item.num_files_in_project",{fileCount:e.file_count});return(0,a.jsx)(eU,{leftElement:l,rightElement:n})}var e1=r(790476),e2=r(595759);function e4({teamResult:e,id:t,path:r,position:o,onContextMenuCallback:c}){let d=(0,n.wA)(),u=(0,s.md)(A.Q),p=(0,V.Xx)(e.model),_=(0,ex.GT)(p,o,e),f=(0,e2.lo)(),h=l.useCallback(()=>{d(ei.AS()),(0,i.kc)().file_browser_search_panel_fpl_migration?f(e.model):(0,V.e_)(d,e.model)},[d,e,f]),E=l.useCallback(t=>{t.preventDefault(),(0,i.kc)().file_browser_search_panel_fpl_migration?(t.metaKey||1===t.button||d(ei.AS()),f(e.model,t)):t.metaKey||1===t.button?ev.Ay.redirect(p,"_blank"):h()},[p,h,e,f,d]),m=l.useCallback(t=>{t.preventDefault(),d(ei.AS()),(0,i.kc)().file_browser_search_panel_fpl_migration?f(e.model,t):(0,V.e_)(d,e.model)},[d,e,f]),y=l.useCallback(t=>{c({index:0,data:e},t)},[c,e]);return(0,i.kc)().file_browser_search_panel_fpl_migration?(0,a.jsx)(eF.cr,{breadcrumbElement:(0,a.jsx)(e8,{teamResult:e}),icon:(0,a.jsx)(e1.nl,{team:e.model,size:e1.Pf.MEDIUM}),id:t,onClickCallback:E,onContextMenuCallback:y,onSelectCallback:h,text:e.model.name,textToHighlight:u,trackInteraction:_}):(0,a.jsx)(eD,{breadcrumbElement:(0,a.jsx)(e8,{teamResult:e}),icon:(0,a.jsx)(e1.nl,{team:e.model,size:e1.Pf.MEDIUM}),id:t,onClickCallback:E,onContextMenuCallback:y,onKeyEnterCallback:m,path:r,text:e.model.name,textToHighlight:u,trackInteraction:_})}function e8({teamResult:e}){let t=(0,n.d4)(t=>t.teams[e.model.id]),r=(0,R.tx)("search.preview_item.num_members_in_team",{memberCount:e.member_count}),l=t?(0,R.tx)("search.preview_item.num_projects_in_team",{projectCount:t.projects??0}):null;return(0,a.jsx)(eU,{leftElement:r,rightElement:l})}var e6=r(132287),e3=r(252343),e5=r(870765);function e7({id:e,path:t,position:r,userResult:o,onContextMenuCallback:c}){let d=(0,n.wA)(),u=(0,s.md)(A.Q),p=(0,n.d4)(e=>e.currentUserOrgId||void 0),_=(0,n.d4)(e=>e.orgById),f=(0,e3.t)(o.model,p),h=(0,ex.GT)(f,r,o),E=(0,e6.y)(),m=l.useCallback(()=>{d(ei.AS()),(0,i.kc)().file_browser_search_panel_fpl_migration?E(o.model):(0,V.KL)(d,o.model)},[d,o,E]),y=l.useCallback(e=>{e.preventDefault(),(0,i.kc)().file_browser_search_panel_fpl_migration?(e.metaKey||1===e.button||d(ei.AS()),E(o.model,e)):e.metaKey||1===e.button?ev.Ay.redirect(f,"_blank"):m()},[f,m,o,E,d]),b=l.useCallback(e=>{e.preventDefault(),d(ei.AS()),(0,i.kc)().file_browser_search_panel_fpl_migration?E(o.model,e):(0,V.KL)(d,o.model)},[d,o,E]),v=l.useCallback(e=>{c({index:0,data:o},e)},[c,o]),I=o.model.org_id&&_[o.model.org_id]||null,T=(0,a.jsxs)("div",{className:"faceted_search_preview_user_row--iconContainer--d-n6O",children:[(0,a.jsx)(e1.H8,{user:o.model,size:e1.Pf.MEDIUM}),I&&(0,a.jsx)("div",{className:"faceted_search_preview_user_row--planIcon--bXPm0",children:(0,a.jsx)(e5.H,{entityId:I.id,entityName:I.name,imgUrl:I.img_url,size:10})})]});return(0,i.kc)().file_browser_search_panel_fpl_migration?(0,a.jsx)(eF.cr,{breadcrumbElement:o.last_active_at?(0,R.tx)("search.preview_item.active_from_now",{relativeTimeString:(0,a.jsx)(ew.h1,{date:o.last_active_at,style:"narrow"})}):void 0,icon:T,id:e,onClickCallback:y,onContextMenuCallback:v,onSelectCallback:m,text:o.model.name||o.model.handle,textToHighlight:u,trackInteraction:h}):(0,a.jsx)(eD,{icon:T,id:e,onClickCallback:y,onContextMenuCallback:v,onKeyEnterCallback:b,path:t,text:o.model.name||o.model.handle,textToHighlight:u,trackInteraction:h})}var e9=r(923656),te=r(981227),tt=r(649074),tr=r(817366),ta=r(844596),tl=r(635182);function tn({onSearch:e,id:t,path:r,showResultsForModelType:n}){let o=(0,s.md)(A.Q8),c=(0,s.md)(b.jM),d=n&&c?(0,N.Xr)(c):null,u=l.useCallback(()=>{e(o,!1,!0,!0)},[o,e]),p=l.useCallback(e=>{e.preventDefault(),e.metaKey||u()},[u]),_=l.useMemo(()=>{if((0,i.kc)().file_browser_search_panel_fpl_migration)switch(d){case N.uH.FILES:return(0,a.jsx)(e9.p,{});case N.uH.PROJECTS:return(0,a.jsx)(te.e,{});case N.uH.TEAMS:return(0,a.jsx)(tt.b,{});case N.uH.USERS:return(0,a.jsx)(tr.j,{});default:return(0,a.jsx)(T.W,{})}else switch(d){case N.uH.FILES:return(0,a.jsx)(ta.In,{icon:"page-16",fill:"brand"});case N.uH.PROJECTS:return(0,a.jsx)(ta.In,{icon:"folder-16",fill:"brand"});case N.uH.TEAMS:return(0,a.jsx)(ta.In,{icon:"team-16",fill:"brand"});case N.uH.USERS:return(0,a.jsx)(eK.B,{svg:tl.A,className:"faceted_search_see_all_results--icon--XAyF3"});default:return(0,a.jsx)(ta.In,{icon:"search-32",fill:"brand"})}},[d]),f=l.useMemo(()=>{switch(d){case N.uH.FILES:return(0,R.t)("search.facet_preview_section.see_more_files");case N.uH.PROJECTS:return(0,R.t)("search.facet_preview_section.see_more_projects");case N.uH.TEAMS:return(0,R.t)("search.facet_preview_section.see_more_teams");case N.uH.USERS:return(0,R.t)("search.facet_preview_section.see_more_users");default:return(0,R.t)("search.preview_section.see_all_results")}},[d]);return(0,a.jsx)("div",{className:"faceted_search_see_all_results--container--FbF-L",onContextMenu:e=>e.preventDefault(),children:(0,i.kc)().file_browser_search_panel_fpl_migration?(0,a.jsx)(eF.cr,{icon:_,id:t,onClickCallback:p,onSelectCallback:u,rowStyle:eF.yY.BRAND_HOVER,rowHeight:eF.CO.SHORT,text:f}):(0,a.jsx)(eD,{icon:_,id:t,onClickCallback:p,path:r,rowStyle:eF.yY.BRAND_HOVER,rowHeight:eF.CO.SHORT,text:f})})}let ti="faceted_search_preview_results--emptyState--MCu1y";function ts({id:e,path:t}){let r=(0,s.md)(b.jM),i=(0,s.md)(A.ih),o=(0,s.md)(b.CZ),c=(0,s.md)(A.Yj),d=(0,s.md)(A.ic),u=(0,s.md)(A.Q),p=(0,N.Xr)(r),_=function(){let e=(0,n.wA)(),t=(0,n.d4)(e=>e.search),r=(0,n.d4)(e=>e.selectedView),a=(0,n.d4)(e=>e.search.parameters),l=E.$P.loadingKeyForPayload({parameters:a}),i=(0,n.d4)(e=>e.loadingState[l]),o=(0,s.md)(b.L8);return i===eQ.r.SUCCESS&&t.queryId!==t.lastAckedQueryId&&(t.parameters.query.length>0||o.length>0)&&(e(E.ej({lastAckedQueryId:t.queryId})),e(E.w2({sessionId:t.sessionId,query:t.parameters.query,queryId:t.queryId})),ec.vj.Session.trackClientResult(t,r)),i}(),f=(0,s.md)(A.sC),h=(0,m._6)(),v=(0,y.X0)(h)?"desktop_new_tab":"file_browser",I=(0,P.y)(v,f,!0),T=l.useMemo(()=>!_||_===eQ.r.LOADING||!(0,F.c2)(i,o),[o,_,i]),w=l.useMemo(()=>{if(!d)return!1;for(let e of c){let t=d[e]?.results;if(t&&t.length>0)return!1}return!0},[c,d]);return(0,S.GX)(u)?(0,a.jsx)("div",{className:ti,children:(0,R.tx)("search.error.max_query_length_exceeded")}):T?(0,a.jsx)(eb.e,{numRows:7}):w?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:ti,"data-testid":"facetedSearchNoResults",children:u?p?(0,a.jsxs)(a.Fragment,{children:[(0,N.hf)(p),"\xa0",(0,a.jsx)("span",{children:u})]}):(0,R.tx)("search.empty_state.no_file_project_team_or_people_results",{searchQuery:u}):(0,R.tx)("search.zero_state.empty_state")}),(0,a.jsx)(tn,{id:e,path:t,onSearch:I})]}):(0,a.jsx)(eE.Q0,{isDropdown:!0,children:(0,a.jsx)(eE.kq.Consumer,{children:r=>(0,a.jsxs)(a.Fragment,{children:[c.map((n,i)=>{let s=d[n]?.results;return s&&0!==s.length?(0,a.jsxs)(l.Fragment,{children:[c.length>1&&(0,a.jsx)("div",{className:"faceted_search_preview_results--header--0RvlC faceted_search_preview_recents--header--JjcIl",children:(0,N.q6)(n)}),s.map((l,n)=>{if(l.search_model_type===N.uH.FILES){let s=`${e}-file-${n}`;return(0,a.jsx)(eW,{fileResult:l,id:s,path:[...t,0,i,n],position:n,onContextMenuCallback:r.onContextMenuClick},s)}if(l.search_model_type===N.uH.PROJECTS){let s=`${e}-folder-${n}`;return(0,a.jsx)(eZ,{folderResult:l,id:s,path:[...t,0,i,n],position:n,onContextMenuCallback:r.onContextMenuClick},s)}if(l.search_model_type===N.uH.TEAMS){let s=`${e}-team-${n}`;return(0,a.jsx)(e4,{teamResult:l,id:s,path:[...t,0,i,n],position:n,onContextMenuCallback:r.onContextMenuClick},s)}if(l.search_model_type===N.uH.USERS){let s=`${e}-user-${n}`;return(0,a.jsx)(e7,{userResult:l,id:s,path:[...t,0,i,n],position:n,onContextMenuCallback:r.onContextMenuClick},s)}})]},i):null}),(0,a.jsx)(tn,{id:`${e}-see-all`,path:[...t,1],onSearch:I,showResultsForModelType:!0})]})})})}var to=r(356780),tc=r(59881),td=r(729117),tu=r(128891),tp=r(393982),t_=r(520356),tf=r(414393),th=r(604549);let tE="faceted_search_preview_suggestion_row--pill---AWE3",tm="faceted_search_preview_suggestion_row--row--mtRkj",ty="faceted_search_preview_suggestion_row--fauxFocus--Hm52U",tb="faceted_search_preview_suggestion_row--hoveredPill--QO2uT",tv="faceted_search_preview_suggestion_row--helpText--l9gXW",tI="faceted_search_preview_suggestion_row--container--a6EET",tT="faceted_search_preview_suggestion_row--valueContainer--oWST3",tw=e=>{switch(e){case N.WY.RESOURCE:return(0,R.t)("search.facets.filter_by_resource");case N.WY.CREATOR:return(0,R.t)("search.facets.filter_by_creator");case N.WY.SPACE:return(0,R.t)("search.facets.filter_by_space");default:return(0,tf.xb)(e)}};function tR({type:e,value:t,onSelect:r,showHint:n}){let i=(0,s.md)(A.Q8),{activeValue:o}=l.useContext(B.M),c=tw(e),u=l.useId(),p=o===u;return(0,a.jsx)(th.M.Option,{onSelect:r,value:u,id:u,children:(0,a.jsx)(eS.o,{eventListeners:["onPointerMove"],children:(0,a.jsxs)("div",{className:d()(tm,p&&ty),"aria-current":p||void 0,children:[(0,a.jsxs)("div",{className:tI,children:[(0,a.jsx)("div",{className:d()(tE,p&&tb),children:(0,S.gl)(e)}),!!t&&(0,a.jsx)("div",{className:tT,children:(0,a.jsx)(eA.f,{text:t,query:i})})]}),n&&(0,a.jsx)("div",{className:tv,children:c})]})})})}let tx=e=>{switch(e){case N.WY.RESOURCE:return(0,R.t)("search.facets.filter_by_resource");case N.WY.CREATOR:return(0,R.t)("search.facets.filter_by_creator");case N.WY.SPACE:return(0,R.t)("search.facets.filter_by_space");default:return""}};function tk({type:e,value:t,onSelect:r,showHint:l,id:n,path:i}){let o=(0,s.md)(A.Q8),{setKeyboardNavigationElement:c,isFauxFocused:u}=(0,el.M3)({id:n,path:i}),p=tx(e);return(0,a.jsxs)(er.E,{ref:c,className:d()(tm,"faceted_search_preview_suggestion_row--rowDeprecated--bjgMa",u&&ty),"aria-label":p,"aria-current":u||void 0,onClick:r,children:[(0,a.jsxs)("div",{className:tI,children:[(0,a.jsx)("div",{className:d()(tE,u&&tb),children:(0,S.gl)(e)}),!!t&&(0,a.jsx)("div",{className:tT,children:(0,a.jsx)(eA.f,{text:t,query:o})})]}),l&&(0,a.jsx)("div",{className:tv,children:p})]})}let tO=(e,t,r)=>{if(t===N.WY.RESOURCE){let t=(0,S.jN)(e);return t?(0,S.yA)(t):""}return t===N.WY.CREATOR||t===N.WY.SPACE?(0,S.FR)(e,r):""};function tF({id:e,path:t}){let r=(0,s.md)(b.zD),o=(0,s.md)(b.L8),c=(0,s.md)(Q),[d,u]=(0,s.fp)(A.Q8),p=(0,t_.iZ)(),_=G(o,r),f=function(){let e=(0,s.md)(Q),t=(0,s.md)(A.sC),r=(0,s.md)(A.BA),a=(0,s.md)(b.jM),n=(0,s.md)(b.J),i=(0,s.md)(b.P_),[o,c]=(0,s.fp)(A.R9),[d,u]=(0,s.fp)(A.Q8),p=(0,tp.f)(),_=(0,tu.n)(),f=(0,s.Xr)((0,b.l4)(e?.facetType??null)),E=(0,s.md)(h.hO.isFragmentSearchAtom),m=(0,P.L)(E?"fragment_search_modal":"file_browser",t,!0),y=l.useCallback(t=>{if(e){if("TYPE_AND_VALUES"===e.suggestionType){let l=e.facetType,s=null==t?e.facetValues[0]:e.facetValues[t],o=l===N.WY.RESOURCE?{type:N.WY.RESOURCE,value:s}:s,p=null;l===N.WY.RESOURCE?p=(0,S.jN)(s):l===N.WY.CREATOR?p=(0,S.C8)(s,S.M2.ADD_TO_GROUP,n):l===N.WY.SPACE&&(p=(0,S.q1)(s,S.M2.ADD_TO_GROUP,i)),f(p);let h=d.slice(0,e.facetTypeIndex);if(u(h),!p)return;let y=(0,S.gh)(p,a,n,i);c(y?.searchModelType??null),E||m(h,N.uH.FILES,y,r,!1,!1),_((0,S.oM)(o),d)}else{let t=d.split(" ").slice(0,-1).join(" "),l=t+(t?" ":"")+(0,S.gl)(e.facetType);u(l);let s=(0,S.nX)(a,n,i,o??void 0);E||m(l,N.uH.FILES,s,r,!1,!1),p(N.uR.AUTOCOMPLETE,e.facetType)}}},[e,f,d,u,a,n,i,o,c,m,r,_,p,E]);return l.useMemo(()=>y,[y])}(),E=l.useCallback(e=>{f(e)},[f]),m=l.useCallback((e,t)=>{e.preventDefault(),f(t)},[f]),y=l.useCallback(e=>{let t=(0,S.gl)(e);u(d?d+" "+t:t)},[d,u]),v=l.useCallback((e,t)=>{e.preventDefault();let r=(0,S.gl)(t);u(d?d+" "+r:r)},[d,u]);return(!function(){let e=(0,s.md)(Q),[t,r]=(0,s.fp)(b.a3),[a,i]=(0,s.fp)(q),o=(0,s.md)(b.wf),c=(0,s.md)($),d=c?.valueToQuery??"",u=function(){let e=(0,n.d4)(e=>e.search.sessionId),t=(0,n.d4)(e=>e.search.queryId),r=(0,n.d4)(e=>e.search.parameters.query);return a=>{let l={sessionId:e,queryId:t,query:r,facet_entrypoint:N.uR.AUTOCOMPLETE,facet_type:a};(0,tc.sx)("facet_type_shown",l)}}(),p=(0,to.P)(),_=(0,td.A)();l.useEffect(()=>{e&&(e.suggestionType===H.TYPE?u(e.facetType):d.length>0&&t!==o&&(r(o),p(d,e.facetType,N.uR.AUTOCOMPLETE))),!e&&a&&_(N.uR.AUTOCOMPLETE,a.facetType),i(e)},[e])}(),c)?c.suggestionType===H.TYPE?(0,i.kc)().file_browser_search_panel_fpl_migration?(0,a.jsx)(tR,{type:c.facetType,value:null,onSelect:E,showHint:!0},c.facetType):(0,a.jsx)(tk,{type:c.facetType,value:null,onSelect:m,showHint:!0,id:`${e}-facet-type`,path:t}):(0,a.jsx)(a.Fragment,{children:c.facetValues.map((r,l)=>{let n;let s=tO(r,c.facetType,p?.id),o=c.facetType;switch(o){case N.WY.RESOURCE:n=`${o}-${r}`;break;case N.WY.CREATOR:case N.WY.SPACE:n=`${o}-${r.value.id}`;break;default:n=`${o}-${s}`}return(0,i.kc)().file_browser_search_panel_fpl_migration?(0,a.jsx)(tR,{type:o,value:s,onSelect:()=>E(l),showHint:!1},n):(0,a.jsx)(tk,{type:c.facetType,value:s,onSelect:e=>m(e,l),showHint:!1,id:`${e}-facet-type`,path:[...t,l]},l)})}):d||o.length>0?(0,a.jsx)(a.Fragment,{}):(0,a.jsx)(a.Fragment,{children:_.map((r,l)=>(0,i.kc)().file_browser_search_panel_fpl_migration?(0,a.jsx)(tR,{type:r,value:null,onSelect:()=>y(r),showHint:!0},`${r}`):(0,a.jsx)(tk,{type:r,value:null,onSelect:e=>v(e,r),showHint:!0,id:`${e}-${l}`,path:[...t,l]},`suggestion-row-${l}`))})}var tg=r(404343);let tS=(0,ea.jz)(tg.RAo),tC=(0,ea.jz)(tg.aIx),tA=(0,ea.jz)(tg.cU5),tN=(0,ea.jz)(tg.Fcu),tP=(0,eu.Ju)(function(){let e=(0,n.wA)(),t=(0,n.d4)(e=>e.modalShown),r=(0,n.d4)(e=>e.search.sessionId),i=(0,s.md)(A.Q),o=(0,s.md)(b.L8);l.useEffect(()=>()=>{r&&ec.vj.Session.searchModalExit(r)},[r]);let c=l.useCallback(()=>{e(_.ky())},[e]),[d,u]=l.useState(t?.data.topOffset);if((0,eo.h)(()=>{if(t?.data.relativePositionRef&&t?.data.resizableObservedRef){let e=new ResizeObserver(()=>{u(t?.data.relativePositionRef.current.getBoundingClientRect().top-tS)});return e.observe(t?.data.resizableObservedRef.current,{box:"border-box"}),()=>e.disconnect()}}),!t)return null;let p=t.data.width??tC,f=t.data.hideFacetFilters??!1,h=t.data.leftOffset,E=t.data.bottomPadding;return(0,a.jsx)(ep.d_,{absolutePosition:{top:d,left:h},"data-testid":"facetedSearchModal",maxHeight:E?`calc(100vh - ${d}px - ${E}px)`:"90vh",minHeight:tN+2*tS,onHide:c,padding:`0 0 ${tS}px 0`,popStack:!0,size:"any",tintedModalBackground:!1,useModalViewScroll:!1,width:`calc(min(${p}px, calc(100vw - 2 * ${tS}px))`,children:(0,a.jsx)(el.dP,{children:(0,a.jsxs)(eF.a3.Provider,{value:eF.Vm.PREVIEW,children:[(0,a.jsx)("div",{style:{margin:tS,width:p-2*tS,maxWidth:`calc(100vw - 4 * ${tS}px)`},children:(0,a.jsx)(es,{hideSearchPreview:t.data?.hideSearchPreview})}),(0,a.jsxs)(ed.P,{maxHeight:E?`calc(100vh - ${d}px - ${E}px - ${tA}px - ${tS}px)`:`calc(80vh - 2 * ${tA}px)`,children:[!f&&(0,a.jsx)(tF,{id:"suggestions",path:[4]}),t.data.hideSearchPreview?null:i||o.length>0?(0,a.jsx)(ts,{id:"search-results",path:[5]}):(0,a.jsx)(ez,{id:"recents",path:[5]})]})]})})})},L.R);var tj=r(24989),tL=r(641567),tM=r(838909),tD=r(607966),tU=r(428444),tW=r(190397),tB=r(78285),tV=r(807083),tH=r(353734);function tK(){let e=(0,n.wA)(),t=(0,tM.UP)(),r=(0,n.d4)(e=>(0,tW.getPermissionsStateMemoized)(e)),a=(0,tV.X$)("useUpdateSearchScope"),i=(0,l.useRef)(!1);return r.currentTeamId&&a.data?.key.type===tU.OL.ORG&&!i.current&&(i.current=!0,(0,tL.$D)(tj.e.FRONTEND_PLATFORM,Error("Redux vs. plan-hook inconsistency"),{extra:{currentTeamId:r.currentTeamId,currentUserOrgId:r.currentUserOrgId,planType:a.data?.key.type,planParentId:a.data?.key.parentId,planTier:a.data?.tier}})),l.useCallback(async()=>{let r=await (0,tD.Q)((0,tB.mZ)(!0)),a=await (0,tD.Q)((0,tB.Ji)(!0)),l=(0,tV.zQ)(r),n=(0,tV.A8)(a,tU.Xn.MEMBER);e(E.Ns({searchScope:(0,tH.l_)(t,l,n)}))},[e,t])}let tY="faceted_search_entrypoint_deprecated--inputWrapperRedesign--IQ5O8",t$=(0,ea.jz)(tg.RAo);function tz({hideSearchPreview:e,modalPositionRef:t}){let r=(0,n.wA)(),o=(0,n.d4)(e=>e.modalShown),c=(0,m._6)(),p=(0,y.X0)(c),_=tK(),[f,v]=(0,s.fp)(A.Q8),I=(0,s.md)(b.L8),w=l.useRef(null),x=(0,s.Xr)(b.q4),k=l.useCallback(()=>{let a,l,n;if(!w.current||o?.type===L.R)return;let i=w.current.getBoundingClientRect(),s=i.top-t$,c=i.left-t$,d=(0,ea.jz)(tg.aIx),u=!1;p&&(c=void 0,d=(0,ea.jz)(tg.xc),u=!0,a=(0,ea.jz)(tg.akG),l=t,n=w),r(ei.to({type:tP,data:{topOffset:s,leftOffset:c,hideSearchPreview:e,width:d,hideFacetFilters:u,resizableObservedRef:l,relativePositionRef:n,bottomPadding:a},showModalsBeneath:!0}))},[o?.type,p,r,e,t]);(0,u.h)(()=>{_()}),l.useEffect(()=>{let e=e=>{e.metaKey&&"/"===e.key&&!o&&k()},t=e=>{"Tab"===e.key&&o?.type===L.R&&r(ei.AS())};return document.addEventListener("keydown",e),document.addEventListener("keydown",t),()=>{document.removeEventListener("keydown",e),document.removeEventListener("keydown",t)}},[r,o,k]);let O=(0,s.md)(h.hO.isFragmentSearchAtom);if(l.useEffect(()=>{O||"search"===c.view||(r(E._z({})),v(""),x())},[r,c,v,x,O]),l.useEffect(()=>{if(p){let e=()=>{"visible"===document.visibilityState&&(r(E._z({})),v(""),x())};return document.addEventListener("visibilitychange",e),()=>document.removeEventListener("visibilitychange",e)}},[x,r,p,v]),"search"===c.view)return(0,a.jsx)("div",{className:d()("faceted_search_entrypoint_deprecated--fullResultsSearchWrapper--ZNncJ",{[tY]:(0,i.kc)().file_browser_sidebar_row_ui}),children:(0,a.jsx)(el.dP,{children:(0,a.jsx)(es,{})})});let F=!p;return(0,a.jsxs)(er.E,{className:d()("faceted_search_entrypoint_deprecated--inputWrapper--WmYo8 search--searchContainerSidebarWithSelection--I54MO search--_expandingSearchBoxSidebarContainerBase--Mj7Ol search--searchContainerSidebar--JLCAb",{[tY]:(0,i.kc)().file_browser_sidebar_row_ui,"faceted_search_entrypoint_deprecated--isDesktopNewTabSearch--yhpuq":p}),onClick:k,onFocus:k,"data-testid":"facetedSearchEntrypoint",ref:w,"aria-label":(0,R.t)("search.search_bar.placeholder_v2"),children:[(0,a.jsx)(T.W,{className:"faceted_search_entrypoint_deprecated--iconWrapper--x-M85"}),(0,a.jsxs)("div",{className:"faceted_search_entrypoint_deprecated--contentContainer--zMQUl",children:[F&&(0,a.jsx)(D,{}),(0,a.jsx)(en.i,{className:"faceted_search_entrypoint_deprecated--input--OAeBb faceted_search_bar_deprecated--input--Xa5n1",placeholder:0===I.length?(0,R.t)("search.search_bar.placeholder_v2"):"",value:f})]}),!e&&(0,a.jsx)("div",{className:"faceted_search_entrypoint_deprecated--leftFadeContainer--fQjkT faceted_search_bar_deprecated--leftFadeContainer--CP4in faceted_search_bar_deprecated--_fadeContainer--VPsml"})]})}function tQ({maxHeight:e,modalHideFacetFilters:t,modalHiddenStyles:r,modalExpandedStyles:i,expanded:c,expandModal:d,collapseModal:u}){let p=(0,n.d4)(e=>e.search.sessionId),_=(0,s.md)(A.Q),f=(0,s.md)(b.L8);l.useEffect(()=>()=>{p&&ec.vj.Session.searchModalExit(p)},[p]);let h=l.useRef(null),[E,m]=l.useState(void 0),y=th.M.useAutocomplete({activeValue:E,onActiveValueChange:m,expanded:c,expandOnFocus:!1});return(0,a.jsx)("div",{"data-testid":"facetedSearchModal",...o.xk(c?tq.facetedSearchModalExpanded:tq.facetedSearchModalHidden,c?i:r),ref:h,children:(0,a.jsx)(eF.a3.Provider,{value:eF.Vm.PREVIEW,children:(0,a.jsxs)(B.M.Provider,{value:{activeValue:E,setActiveValue:m},children:[(0,a.jsx)("div",{className:"x1e56ztr xet2fuk x1db2dqx",children:(0,a.jsx)(et,{expanded:c,expandModal:d,collapseModal:u,hideSearchPreview:!c,autocomplete:y,searchInputRef:y.refs.input})}),(0,a.jsxs)(th.M.List,{...y.getListProps({maxHeight:e}),children:[!t&&(0,a.jsx)(tF,{id:"suggestions",path:[4]}),c?_||f.length>0?(0,a.jsx)(ts,{id:"search-results",path:[5]}):(0,a.jsx)(ez,{id:"recents",path:[5]}):null]})]})})})}let tq={facetedSearchModalExpanded:{kVAEAm:"x10l6tqk",k87sOh:"x1v4kod4",kY2c9j:"x1h5zca0",kaIpWk:"x1mxnbhz",krdFHd:null,kfmiAY:null,kVL7Gh:null,kT0f0o:null,kIxVMA:null,ksF3WI:null,kqGeR4:null,kYm2EN:null,kGVxlE:"x1wu5q8a",kWkggS:"x1yjdb4r",kLKAdn:"x1y1aw1k",ks0D6T:"x87tlaw",kGO01o:"xwib8y2",$$css:!0},facetedSearchModalHidden:{kVAEAm:"x1n2onr6",ks0D6T:"x87tlaw",$$css:!0}},tG={facetedSearchModalDesktopNewTab:{kbCHJM:"xwdnntx",kLqNvP:null,kt4wiu:null,kzqmXN:"x1s20hzv",$$css:!0},facetedSearchModalSidebarExpanded:{kzqmXN:"xauayk2",$$css:!0},facetedSearchModalSidebarHidden:{kzqmXN:"x1dc9kz8",$$css:!0}};function tX(){let e=(0,n.wA)(),t=(0,m._6)(),r=(0,y.X0)(t),o=tK(),c=(0,s.Xr)(A.Q8),v=l.useRef(null),I=(0,s.Xr)(b.q4),[T,w]=l.useState(!1),R=l.useCallback(()=>{T&&(e(_.ky()),w(!1))},[T,e,w]),x=(0,s.md)(h.hO.isFragmentSearchAtom),k=l.useCallback(()=>{T||(w(!0),e(E.W0({entryPoint:x?"fragment_search_modal":"file_browser"})))},[T,w,e,x]);(0,u.h)(()=>{o()});let O=l.useCallback(()=>{let e=`calc(80vh - 2 * ${f.ID.previewRowHeight})`;if(!v.current)return{maxHeight:e};if(r){let t=v.current.getBoundingClientRect(),r=`${t.top}px`,a=f.ID.bottomPaddingDesktopNewTab;return{maxHeight:e=`calc(100vh - ${r} - ${a} - ${f.ID.previewRowHeight})`,modalHideFacetFilters:!0,modalBottomPadding:a,modalHiddenStyles:tG.facetedSearchModalDesktopNewTab,modalExpandedStyles:tG.facetedSearchModalDesktopNewTab}}return{maxHeight:e,modalHideFacetFilters:!1,modalHiddenStyles:tG.facetedSearchModalSidebarHidden,modalExpandedStyles:tG.facetedSearchModalSidebarExpanded}},[v,r]);l.useEffect(()=>{let e=e=>{e.metaKey&&"/"===e.key&&!T&&(v.current?.focus(),k())};return document.addEventListener("keydown",e),()=>{document.removeEventListener("keydown",e)}},[k,v,T]),l.useEffect(()=>{x||"search"===t.view||(e(E._z({})),c(""),I())},[e,t,c,I,x]),l.useEffect(()=>{if(r){let t=()=>{"visible"===document.visibilityState&&(e(E._z({})),c(""),I(),R(),document.activeElement&&document.activeElement.blur&&document.activeElement.blur())};return document.addEventListener("visibilitychange",t),()=>document.removeEventListener("visibilitychange",t)}},[I,e,r,c,R]);let F=l.useRef(null);return"search"===t.view?(0,a.jsx)("div",{className:d()("faceted_search_entrypoint--fullResultsSearchWrapper--UiZa5",{"faceted_search_entrypoint--inputWrapperRedesign--6cCJ0":(0,i.kc)().file_browser_sidebar_row_ui}),children:(0,a.jsx)(et,{searchInputRef:F})}):(0,a.jsxs)("div",{ref:v,className:d()("faceted_search_entrypoint--facetedSearchEntrypoint--UbOlV",{"faceted_search_entrypoint--facetedSearchEntrypointDesktopNewTab--Qbnse":r}),"data-testid":"facetedSearchEntrypoint",children:[T&&(0,a.jsx)(p.X9,{closeDropdown:R}),(0,a.jsx)(tQ,{...O(),expanded:T,expandModal:k,collapseModal:R})]})}function tJ({hideSearchPreview:e,modalPositionRef:t}){return(0,i.kc)().file_browser_search_panel_fpl_migration?(0,a.jsx)(tX,{}):(0,a.jsx)(tz,{hideSearchPreview:e,modalPositionRef:t})}},376102:(e,t,r)=>{r.d(t,{GT:()=>f,aL:()=>y,db:()=>E,hA:()=>m});var a=r(716976),l=r(237420),n=r(685430),i=r(749232),s=r(758658),o=r(122614),c=r(203745),d=r(179236),u=r(520356),p=r(770462);function _(e,t,r,a,l,n,o){let c=(0,s.mv)(e);new i.vj.Analytics(l,{position:t,resource_id:c,resource_type:e.search_model_type.toString(),matched_queries:e.matched_queries,result:e},{plan:o}).click(e.search_model_type,n,{action:a,target:r})}function f(e,t,r){let i=(0,l.wA)(),s=(0,l.d4)(e=>e.search),c=(0,d._6)(),u=(0,l.d4)(e=>(0,n.S)(e));return a.useCallback(a=>{i(o.ky()),r&&_(r,t,e,a,s,c,u)},[i,e,t,r,s,c,u])}function h(){let e=(0,l.wA)(),t=(0,l.d4)(e=>e.search),r=(0,d._6)(),i=(0,l.d4)(e=>(0,n.S)(e));return a.useCallback((a,l,n,s)=>{e(o.ky()),_(s,a,l,n,t,r,i)},[e,t,r,i])}function E(){let e=(0,u.iZ)(),t=(0,c.dq)(),r=p.ol()?.id,l=(0,d._6)(),n=h();return a.useCallback((a,i,o)=>{if(!o)return;let c=o.model;n(a,(0,s.AR)(c,e,t,r,l),i,o)},[e,t,r,l,n])}function m(){let e=h();return a.useCallback((t,r,a)=>{if(!a)return;let l=a.model;e(t,(0,s.uF)(l),r,a)},[e])}function y(){let e=h();return a.useCallback((t,r,a)=>{if(!a)return;let l=a.model;e(t,(0,s.Xx)(l),r,a)},[e])}},127253:(e,t,r)=>{r.d(t,{G:()=>d,R:()=>o});var a=r(104076),l=r(716976),n=r(237420),i=r(685430),s=r(749232);let o="search_file_browser_full_results",c=e=>"href"in e?e.href:null;function d({category:e,searchResult:t,index:r,children:o,planFilter:d}){let u=(0,n.d4)(e=>e.search),p=(0,n.d4)(e=>e.selectedView),_=(0,n.d4)(i.S),f=(0,l.useMemo)(()=>({position:r,resource_id:"id"in t.model?t.model.id:t.model.key,resource_type:t.search_model_type,matched_queries:t.matched_queries,result:t}),[t,r]),h=(0,l.useMemo)(()=>new s.vj.Analytics(u,f,{plan:_}),[]);(0,l.useEffect)(()=>{h.update(u,f,{plan:_})},[h,u,f,_]);let E=(0,l.useCallback)(t=>{let r=t.target,a=r.closest("[data-search-click-action]")?.getAttribute("data-search-click-action");a!==s.jr&&h.click(e,p,{action:a||"click",target:c(r)},d)},[h,e,p,d]),m=(0,l.useCallback)(t=>{let r=t.target,a=r.closest("[data-search-context-menu-action]")?.getAttribute("data-search-context-menu-action");a!==s.jr&&h.click(e,p,{action:a||"context-click",target:c(r)})},[h,e,p]);return(0,a.jsx)("div",{"data-search-context-menu-action":"context-click","data-search-click-action":"click",onClickCapture:E,onContextMenuCapture:m,children:o})}},842727:(e,t,r)=>{r.d(t,{kq:()=>eb,Q0:()=>ev,ro:()=>ey});var a,l,n,i,s,o,c,d,u,p=r(104076),_=r(414393),f=r(62591),h=r(716976),E=r(237420),m=r(128212),y=r(47972);let b=(e,t)=>class extends h.PureComponent{constructor(){super(...arguments),this.onContextMenuClick=(t,r)=>{r.stopPropagation(),r.preventDefault();let a=window.innerWidth,l=window.innerHeight,n={};n={left:r.clientX<a/2?r.clientX:"auto",right:r.clientX<a/2?"auto":a-r.clientX,top:r.clientY<l/2?r.clientY:"auto",bottom:r.clientY<l/2?"auto":l-r.clientY},this.props.onContextClick&&this.props.onContextClick(t,r),this.props.dispatch(y.j7({type:e,data:{selected:t,targetRect:n,modifiers:(0,m.sN)(r)}}))}}render(){let e={onContextMenuClick:this.onContextMenuClick};return(0,p.jsx)(t.Provider,{value:e,children:this.props.children})}};var v=r(876137),I=r(283987),T=r(127253),w=r(251931);function R(e){return t=>(function(e,t){let r=t.map(t=>t(e.data)).filter(e=>null!==e),a={...e.targetRect,position:"fixed"};return(0,p.jsx)(w.ms,{style:a,children:r.map((e,t)=>null===e?null:"SEPARATOR"===e?t===r.length-1?null:(0,p.jsx)(w.wv,{},`sep${t}`):(0,p.jsx)(w.c$,{id:e.id,onClick:e.onClick,disabled:e.disabled,onMouseDown:e=>e.preventDefault(),children:e.text},e.id))})})(t,e)}var x=r(468882),k=r(707698),O=r(580310),F=r(554841),g=r(139541),S=r(291203),C=r(433960),A=r(799661),N=r(629220),P=r(184437),j=r(31827),L=r(59881),M=r(908397),D=r(847863),U=r(511245),W=r(266132),B=r(808655);(e=>{e.Separator=()=>"SEPARATOR";let t=(e,t)=>r=>{let a=e(r);return a?t(a):null};function r(e){let t=(0,E.wA)(),{Sprig:r}=(0,D.A)();if(!e)return null;let{overrides:a,...l}=e;return{id:"open_view",text:(0,x.t)("general.open"),onClick:()=>{let e=(0,M.Xr)();"fullscreen"===l.view&&l.fileKey&&e&&((0,L.sx)("Open File Click",{fileKey:l.fileKey,uiSelectedView:JSON.stringify(e.view)}),(0,W.k1)(l.fileKey,{selectedViewName:e.view,sprig:r})),t(y.sf(l))},...a}}let a=e=>{let t=(0,E.wA)(),{overrides:r,...a}=e;return{id:"copy_link",text:(0,x.t)("file_browser.copy_link"),onClick:()=>t(k.S(a)),...r}};function l(e){let t=(0,E.wA)();if(!e)return null;let{overrides:r,...a}=e;return{id:"copy_view_link",text:(0,x.t)("file_browser.copy_link"),onClick:()=>t(k.le(a)),...r}}let n=e=>{let t=(0,E.wA)(),{overrides:r,...a}=e;return{id:"open_in_new_tab",text:(0,x.t)("file_browser.open_in_new_tab"),onClick:()=>t(U.V3(a)),...r}};function i(e){let t=(0,E.wA)(),r=(0,E.Pj)();if(!e)return null;let{overrides:a,...l}=e;return{id:"open_view_in_new_tab",text:(0,x.t)("file_browser.open_in_new_tab"),onClick:()=>{let e=(0,M.Xr)();"fullscreen"===l.view&&l.fileKey&&e&&((0,L.sx)("Open File in New Tab Click",{fileKey:l.fileKey,uiSelectedView:JSON.stringify(e.view)}),t(U.UN({fileKey:l.fileKey})));let a=(0,B.xS)(r.getState(),l);t(U.V3({url:a}))},...a}}(e=>{e.Open=e=>t(e,r),e.CopyLink=e=>t(e,a),e.CopyViewLink=e=>t(e,l),e.OpenInNewTab=e=>t(e,n),e.OpenViewInNewTab=e=>t(e,i)})(e.Creators||(e.Creators={}))})(a||(a={}));let V=e=>({view:"fullscreen",fileKey:e.key,editorType:(0,A.wN)(e.editorType||"design")});(e=>{e.Open=a.Creators.Open(V),e.OpenInNewTab=a.Creators.OpenViewInNewTab(V),e.CopyLink=function(e){let t=(0,E.wA)(),r=(0,E.d4)(e=>e.sharingAttributionContextKey);return{id:"copy_view_link",text:(0,x.t)("file_browser.copy_link"),onClick:()=>{let a=new P.a;t(k.TH({selector:a,selectedView:V(e),data:{sharingAttributionContextKey:r,resources:{file:v.F.toSinatra(e),repo:e.fileRepo}}}))}}},e.Share=e=>{let t=(0,E.wA)();return{id:"share_file",text:"Share",onClick:()=>{t((0,F.to)({type:j.g_,data:{fileKey:e.key,source:S.nk.fileBrowserContextMenu}}))}}},e.ShowInFolder=e=>{let t=(0,E.wA)();return(0,E.d4)(t=>e.folderId&&t.folders[e.folderId])?{id:"show_in_folder",text:"Show in project",onClick:()=>{t(y.sf({view:"folder",folderId:e.folderId})),t(g.y$({type:N.F.FILES,tiles:[(0,C.fA)(v.F.toSinatra(e))]}))}}:null},e.SetFavoriteStatus=e=>{let t=(0,E.wA)();return e.isFavorited?{id:"set_favorite_status",text:e.isFavorited?(0,x.t)("tile.favoriting.remove_from_favorites"):(0,x.t)("tile.favoriting.add_to_favorites"),onClick:()=>{e.isFavorited?t(O.qP({file:{editorType:e.editorType,key:e.key},entrypoint:"search_dropdown",fileBrowserEntryPoint:!0})):t(O.Fb({file:e,entrypoint:"search_dropdown",fileBrowserEntryPoint:!0})),t(y.oB())}}:null}})(l||(l={}));var H=r(283219);let K=e=>function(t){return e&&f.eD?null:{view:"folder",folderId:t.id}};(e=>{e.CopyLink=a.Creators.CopyViewLink(K(!1)),e.Open=a.Creators.Open(K(!1)),e.OpenInNewTab=a.Creators.OpenViewInNewTab(K(!0)),e.ShowInTeam=e=>{let t=(0,E.wA)(),{team_id:r}=e;return r?{id:"show_in_team",text:"Show team",onClick:()=>{t(y.sf({view:"team",teamId:r}))}}:null},e.Share=e=>{let t=(0,E.wA)();return{id:"share_folder",text:"Share",onClick:()=>{t(F.to({type:H.WY,data:{folderId:e.id}}))}}}})(n||(n={}));var Y=r(553538),$=r(533546),z=r(520356);let Q=e=>({view:"communityHub",subView:"hubFile",hubFileId:e.id});(e=>{e.Open=a.Creators.Open(Q),e.OpenInNewTab=a.Creators.OpenViewInNewTab(Q),e.CopyLink=a.Creators.CopyViewLink(Q),e.Duplicate=e=>{let t=(0,E.wA)(),r=(0,z.iZ)();return{id:"duplicate_hub_file",text:"Duplicate",onClick:()=>{r?t((0,$.p7)({hubFileId:e.id,workspace:{userId:r.id,orgId:null}})):t(Y.F.enqueue({message:"Must be signed in to duplicate a file",error:!0}))}}}})(i||(i={}));let q=e=>function(t){return e&&f.eD?null:{view:"communityHub",subView:"plugin",publishedPluginId:t.id}};(e=>{e.Open=a.Creators.Open(q(!1)),e.OpenInNewTab=a.Creators.OpenViewInNewTab(q(!0)),e.CopyLink=a.Creators.CopyViewLink(q(!1))})(s||(s={}));let G=e=>({view:"communityHub",subView:"handle",handle:e.profile_handle});(e=>{e.Open=a.Creators.Open(G),e.OpenInNewTab=a.Creators.OpenViewInNewTab(G),e.CopyLink=a.Creators.CopyViewLink(G)})(o||(o={}));var X=r(565698),J=r(889323),Z=r(392506);let ee=e=>{let t=(0,X.bc)(J.yQw,{teamId:e.id}).transform(({team:e})=>!e?.canRead).unwrapOr(!1);return{view:"team",teamId:e.id,overrides:{disabled:!!t}}};function et(e){return f.eD?null:ee(e)}(e=>{e.Open=a.Creators.Open(ee),e.OpenInNewTab=a.Creators.OpenViewInNewTab(et),e.CopyLink=a.Creators.CopyViewLink(ee),e.Leave=e=>{let t=(0,E.wA)(),r=(0,E.d4)(e=>e.user),a=(0,E.d4)(t=>t.roles?.byTeamId[e.id]);return r&&a&&a[r.id]?{id:"leave_team_prompt",text:"Leave team",onClick:()=>{t((0,F.to)({type:Z.p,data:{teamId:e.id}}))}}:null}})(c||(c={}));var er=r(282740);let ea=e=>function(t){return e&&f.eD?null:{view:"user",userId:t.id,orgId:t.org_id,userViewTab:er.o.INTERNAL_PROFILE}};(e=>{e.Open=a.Creators.Open(ea(!1)),e.OpenInNewTab=a.Creators.OpenViewInNewTab(ea(!0)),e.CopyLink=a.Creators.CopyViewLink(ea(!1))})(d||(d={}));let el=e=>function(t){return e&&f.eD?null:{view:"communityHub",subView:"widget",widgetId:t.id}};(e=>{e.Open=a.Creators.Open(el(!1)),e.OpenInNewTab=a.Creators.OpenViewInNewTab(el(!0)),e.CopyLink=a.Creators.CopyViewLink(el(!1))})(u||(u={}));let en=R([s.Open,s.OpenInNewTab,a.Separator,s.CopyLink]),ei=e=>R([l.Open].concat([l.OpenInNewTab],[a.Separator],[l.CopyLink],e?[]:[l.Share],[l.ShowInFolder],[l.SetFavoriteStatus])),es=e=>R([n.Open].concat([n.OpenInNewTab],[a.Separator],e?[]:[n.Share],[n.ShowInTeam])),eo=R([i.Open,i.OpenInNewTab,a.Separator,i.CopyLink,i.Duplicate]),ec=R([i.Open,a.Separator,i.CopyLink,i.Duplicate]),ed=R([d.Open,d.OpenInNewTab,a.Separator,d.CopyLink]),eu=R([o.Open,o.OpenInNewTab,a.Separator,o.CopyLink]),ep=R([c.Open,c.OpenInNewTab,a.Separator,c.Leave]),e_=R([u.Open,u.OpenInNewTab,a.Separator,u.CopyLink]);function ef(e){let{data:t}=e.selected,r=ei(e.isDropdown);if(!("search_model_type"in t))return(0,p.jsx)(r,{targetRect:e.targetRect,data:v.F.toLiveGraph(t)});switch(t.search_model_type){case I.uH.HUB_FILES:if(f.eD)return(0,p.jsx)(ec,{targetRect:e.targetRect,data:t.model});return(0,p.jsx)(eo,{targetRect:e.targetRect,data:t.model});case I.uH.PUBLIC_PLUGINS:return(0,p.jsx)(en,{targetRect:e.targetRect,data:t.model});case I.uH.PUBLIC_PROFILES:return(0,p.jsx)(eu,{targetRect:e.targetRect,data:t.model});case I.uH.USERS:return(0,p.jsx)(ed,{targetRect:e.targetRect,data:t.model});case I.uH.FILES:return(0,p.jsx)(r,{targetRect:e.targetRect,data:v.F.toLiveGraph(t.model)});case I.uH.TEAMS:return(0,p.jsx)(ep,{targetRect:e.targetRect,data:t.model});case I.uH.PROJECTS:let a=es(e.isDropdown);return(0,p.jsx)(a,{targetRect:e.targetRect,data:t.model});case I.uH.PRIVATE_PLUGINS:return(0,p.jsx)(en,{targetRect:e.targetRect,data:t.model});case I.uH.PUBLIC_WIDGETS:case I.uH.PRIVATE_WIDGETS:return(0,p.jsx)(e_,{targetRect:e.targetRect,data:t.model});default:return(0,_.xb)(t)}}let{Context:eh,Provider:eE}=function(e,t){let r=h.createContext({onContextMenuClick:(e,t)=>{}});function a(r){let a=(0,E.d4)(e=>e.dropdownShown);return a&&a.data&&a.type===e?t(r,{...a.data}):null}let l=b(e,r);return{Context:r,Provider:e=>{let t=(0,E.wA)(),r=(0,E.d4)(e=>e.dropdownShown);return(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(l,{dispatch:t,dropdownShown:r,...e}),(0,p.jsx)(a,{...e,children:void 0})]})}}}("search-results-context-menu",(e,t)=>{let{data:r,index:a}=t.selected;return"search_model_type"in r?(0,p.jsx)(T.G,{category:r.search_model_type,searchResult:r,index:a,children:(0,p.jsx)(ef,{isDropdown:e.isDropdown,...t})}):(0,p.jsx)(ef,{isDropdown:e.isDropdown,...t})});function em(e){return(0,p.jsx)("div",{onContextMenu:t=>{let r={index:e.index,data:e.data};e.onContextMenu(r,t)},children:e.children})}function ey(e){return(0,p.jsx)(eh.Consumer,{children:t=>(0,p.jsx)(em,{onContextMenu:t.onContextMenuClick,...e})})}let eb=eh,ev=eE},549326:(e,t,r)=>{r.d(t,{R:()=>a});let a="FACETED_SEARCH_MODAL_DEPRECATED_TYPE"},763822:(e,t,r)=>{if(r.d(t,{C:()=>s}),443==r.j)var a=r(414393);var l=r(333863),n=r(433960),i=r(428444);function s(e){let t=(0,l.NN)();switch(e.type){case n.nb.FILE:return t(e.file);case n.nb.PINNED_FILE:case n.nb.OFFLINE_FILE:if(e.file.editorType===i._Y.WHITEBOARD)return l.y1.WHITEBOARD;if(e.file.editorType===i._Y.SLIDES)return l.y1.SLIDES;if(e.file.editorType===i._Y.SITES)return l.y1.SITES;if(e.file.editorType===i._Y.COOPER)return l.y1.COOPER;if(e.file.editorType===i._Y.FIGMAKE)return l.y1.FIGMAKE;if(e.file.editorType===i._Y.DESIGN||null===e.file.editorType)return l.y1.DESIGN;(0,a.xb)(e.file.editorType);case n.nb.PROTOTYPE:return l.y1.PROTOTYPE;case n.nb.REPO:return l.y1.REPO;default:(0,a.xb)(e)}}},220532:(e,t,r)=>{r.d(t,{EB:()=>d,WJ:()=>p,ym:()=>u});var a=r(716976),l=r(237420),n=r(908397),i=r(128212);if(443==r.j)var s=r(511245);var o=r(47972),c=r(808655);function d(){let e=u(),t=p();return a.useCallback(async(r,a)=>{if(a?.preventDefault(),a&&((0,i.oJ)(a)||1===a.button)){t(r);return}await e(r)},[e,t])}function u(){let e=(0,l.wA)();return a.useCallback(async t=>{e(o.oB()),await e(s.gN(t))},[e])}function p(){let e=(0,l.wA)(),t=(0,l.Pj)();return a.useCallback(r=>{e(o.oB());let a=s.gN(r),l=t.getState(),i=(0,c.xS)(l,a.payload);n.Ay.redirect(i,"_blank")},[e,t])}},437054:(e,t,r)=>{r.d(t,{v:()=>x});var a=r(716976),l=r(237420);if(443==r.j)var n=r(414393);var i=r(774531),s=r(62591),o=r(908397),c=r(128212),d=r(47972),u=r(931330),p=r(442721),_=r(89286),f=r(846303),h=r(433960),E=r(203745),m=r(179236),y=r(520356),b=r(214099),v=r(770462),I=r(868513),T=r(799661),w=r(635278),R=r(65464);function x(){let e=(0,y.iZ)(),t=(0,E.dq)(),r=(0,v.cD)(),n=(0,m._6)(),i=(0,l.wA)(),o=(0,l.d4)(e=>e.selectedBranchKeyByRepoId);return a.useCallback(async(a,l)=>{i(d.oB());let u=l&&1===l.button,p=l&&((0,c.Fo)(l)||u),_=null;if(p&&l?.shiftKey?_=s.aw.FOCAL_TAB:p?_=s.aw.BACKGROUND_TAB:l?.shiftKey&&(_=s.aw.NEW_WINDOW),s.eD){k({tile:a,selectedBranchKeyByRepoId:o,dispatch:i,user:e,target:_}),l?.preventDefault();return}if(null!=_&&l){O({tile:a,e:l,selectedBranchKeyByRepoId:o,target:_,dispatch:i});return}l?.preventDefault(),await F({tile:a,selectedBranchKeyByRepoId:o,dispatch:i,user:e,selectedView:n,currentUserOrgId:t,currentTeamId:r})},[o,i,e,t,r,n])}let k=({tile:e,selectedBranchKeyByRepoId:t,dispatch:r,user:a,target:l})=>{if(!s.eD){(0,n.KF)(!0,"Should not be calling openGenericTileDesktop if not in the desktop app");return}l=l??s.aw.FOCAL_TAB;let i=h.Tf.getIsTeamTemplate(e),o=h.Tf.getName(e),c=h.Tf.getEditorType(e);switch(e.type){case h.nb.FILE:s.eD.openFile({fileKey:e.file.key,title:e.file.name,fileEditorType:e.file.editorType,target:l,isBranch:(0,_.Kz)(e.file),isLibrary:!!e.file.lastPublishedAt,isTeamTemplate:i,userId:a?.id});break;case h.nb.PINNED_FILE:s.eD.openFile({fileKey:e.file.key,title:o,fileEditorType:c,isTeamTemplate:i,target:l,userId:a?.id});break;case h.nb.PROTOTYPE:s.eD.openPrototype(e.prototype.file_key,e.prototype.page_id,e.prototype.fig_file.name||"",l,a?.id);break;case h.nb.REPO:let d=(0,_.mr)(e.repo,e.branches,t);d&&s.eD.openFile({fileKey:d.key,title:d.name,fileEditorType:d.editor_type,target:l,isBranch:(0,_.Xm)(d),isLibrary:!!d.last_published_at,userId:a?.id});break;case h.nb.OFFLINE_FILE:r(u.NA({file:e.file,openNewFileIn:w.ai.NEW_TAB,source:I.U.OFFLINE_FILE_TILE}));break;default:(0,n.xb)(e)}},O=({tile:e,e:t,selectedBranchKeyByRepoId:r,dispatch:a})=>{e.type===h.nb.OFFLINE_FILE&&a(u.NA({file:e.file,openNewFileIn:w.ai.NEW_TAB,source:I.U.OFFLINE_FILE_TILE}));let l=h.Tf.getEditUrl(e,r);o.Ay.redirect(l,"_blank"),t.preventDefault()},F=async({tile:e,selectedBranchKeyByRepoId:t,dispatch:r,currentUserOrgId:a,selectedView:l,currentTeamId:s,user:o})=>{let c="recentsAndSharing"===l.view||"folder"===l.view?l:void 0;r(p.c5({planId:a||s,planType:a?R.O.ORG:R.O.TEAM}));let E={user:o,teamId:s,orgId:a,selectedView:l};switch(e.type){case h.nb.FILE:i.N7(a,e.file.parentOrgId,s,e.file.teamId)?i.QV({file:{key:e.file.key,editorType:e.file.editorType||void 0}},E):r(d.sf({view:"fullscreen",fileKey:e.file.key,editorType:f.z4.getIsExtension()?T.nT.DevHandoff:e.file.editorType?(0,T.wN)(e.file.editorType):T.nT.Design,prevSelectedView:c}));break;case h.nb.PINNED_FILE:let m=await b.M4.fetchFile(e.file.key);i.N7(a,m.parent_org_id,s,m.team_id)?i.QV({file:{key:e.file.key,editorType:e.file.editorType}},E):r(d.sf({view:"fullscreen",fileKey:e.file.key,editorType:(0,T.wN)(e.file.editorType),prevSelectedView:c}));break;case h.nb.PROTOTYPE:let y=e.prototype.fig_file;i.N7(a,y.parent_org_id,s,y.team_id)?i.QV({base:"proto",file:{key:y.key,editorType:y.editor_type||void 0},nodeId:e.prototype.page_id},E):r(d.sf({view:"prototype",file:y,nodeId:e.prototype.page_id,prevSelectedView:c}));break;case h.nb.REPO:let v=(0,_.mr)(e.repo,e.branches,t);if(!v)return;i.N7(a,v.parent_org_id,s,v.team_id)?i.QV({file:{key:v.key}},E):r(d.sf({view:"fullscreen",fileKey:v.key,editorType:T.nT.Design,prevSelectedView:c}));break;case h.nb.OFFLINE_FILE:r(u.NA({file:e.file,openNewFileIn:w.ai.SAME_TAB,source:I.U.OFFLINE_FILE_TILE}));break;default:(0,n.xb)(e)}}},595759:(e,t,r)=>{r.d(t,{TS:()=>p,Vj:()=>_,lo:()=>u});var a=r(716976),l=r(237420),n=r(908397),i=r(128212);if(443==r.j)var s=r(511245);var o=r(47972),c=r(203745),d=r(541137);function u(){let e=p(),t=_();return a.useCallback((r,a)=>{if(a&&((0,i.oJ)(a)||1===a.button)){t(r.id);return}a?.preventDefault(),e(r.id)},[t,e])}function p(){let e=(0,l.wA)();return a.useCallback(t=>{e(s.kg({clickedResourceType:"team",resourceIdOrKey:t})),e(o.sf({view:"team",teamId:t}))},[e])}function _(){let e=(0,c.dq)();return a.useCallback(t=>{let r=(0,d.bL)(t,e);n.Ay.redirect(r,"_blank")},[e])}},132287:(e,t,r)=>{r.d(t,{y:()=>p});var a=r(716976),l=r(237420),n=r(908397),i=r(128212);if(443==r.j)var s=r(252343);var o=r(47972),c=r(203745),d=r(520356),u=r(282740);function p(){let e=(0,l.wA)(),t=(0,d.TA)(),r=(0,c.dq)();return a.useCallback((a,l)=>{if(l&&((0,i.oJ)(l)||1===l.button)){l?.stopPropagation();let e=a.id;if(e===t){n.Ay.redirect(`/files/${r}/user/${e}`,"_blank");return}let i=a.org_id,o=(0,s.t)(a,i);n.Ay.redirect(o,"_blank");return}l?.preventDefault(),e(o.sf({view:"user",userId:a.id,orgId:a.org_id||null,userViewTab:u.o.INTERNAL_PROFILE}))},[t,r,e])}},823134:(e,t,r)=>{r.d(t,{$:()=>l});var a=r(59881);let l=new class{constructor(e){this.type=e}start(e){performance.mark(`${this.type}_${e}.startSpan`,{startTime:performance.now()})}endAndReport(e){let t=performance.now(),r=`${this.type}_${e}`;performance.mark(`${r}.endSpan`,{startTime:t});try{let e=performance.measure(`${r}`,`${r}.startSpan`,`${r}.endSpan`).duration;a.az.trackDefinedEvent("file_browser.total_context_menu_load_time",{durationMs:Math.round(e),type:this.type}),performance.clearMarks(`${r}.startSpan`),performance.clearMarks(`${r}.endSpan`)}catch(e){}}}("tile-action-dropdown")},906192:(e,t,r)=>{if(r.d(t,{K:()=>n}),443==r.j)var a=r(414393);var l=r(428444);function n(e){switch(e){case l._Y.DESIGN:return"design";case l._Y.WHITEBOARD:return"whiteboard";case l._Y.SLIDES:return"piper";case l._Y.SITES:return"seascape";case l._Y.FIGMAKE:return"bake-filebrowser";case l._Y.COOPER:return"cooper";default:return(0,a.S9)(e,"design")}}},252343:(e,t,r)=>{r.d(t,{t:()=>a});function a(e,t){return t?`/files/${t}/user/${e.id}`:`/files/user/${e.id}`}},885425:(e,t,r)=>{r.d(t,{i:()=>T});var a=r(104076),l=r(716976),n=r(24989),i=r(59881),s=r(454093),o=r(355448),c=r(322801),d=r(617413),u=r(823134),p=r(527082),_=r(191095),f=r(210299),h=r(772651),E=r(531211),m=r(893831),y=r(761877),b=r(433960),v=r(876137),I=r(428444);function T({tileActions:e,openTile:t,tile:r,selectedTiles:T,dropdownVisible:w,trackSearchFn:R}){let{filePermissions:x,repoPermissions:k,protoPermissions:O}=(0,s.xD)(),F=(0,y.ud)(),g=l.useMemo(()=>{if(!r)return null;let e=null;if(r.type===b.nb.FILE)e=r.file;else if(r.type===b.nb.REPO){let t=F[r.repo.default_file_key];e=t?v.F.toLiveGraph(t):null}else r.type===b.nb.PINNED_FILE&&(e=r.file);return e},[F,r]),S=function({sourceFile:e,tile:t,tileActions:r}){let a=t?.file?.key,l=(0,h.ac)(e);(0,f.d)({file:e??null});let n=t?b.Tf.getOrgId(t):null,i=t?b.Tf.getFavoriteResourceTeamId(t):null,s=(0,m.jm)(n,i),o=(0,_.Y)(a??"",I.bk.FILE,n,i),c=(0,d.pH)(e?.key??"",{enabled:!!e&&r.pinToWorkspace}),u=o.hasMaxFavorites,p=o.favorite,y=o.orderedSidebarSections??[],v=(0,E.t$)(o.userSidebarSections??[],y),T=v.find(e=>e.id===p?.resource.sidebarSectionId);return{loading:"loaded"!==o.status||"loaded"!==l.status||"disabled"!==c.status&&"loaded"!==c.status,data:{hasMaxFavorites:u,userSidebarSections:v,favoriteSidebarSection:T,createBranchStatus:l.data,isResourceInUserPlan:!!s,fileWorkspacePinActions:c.data}}}({sourceFile:g,tile:r,tileActions:e}),C=S.loading&&r?.type!==b.nb.OFFLINE_FILE||"loaded"!==x.status||"loaded"!==k.status||"loaded"!==O.status;return((0,o.oY)(C,e=>{i.az.trackDefinedEvent("file_browser.context_menu_load_queries_time",{durationMs:Math.round(e),type:"tile-action-dropdown"})}),!w||null===r||C)?null:(0,a.jsx)(c.tH,{boundaryKey:"TileActionDropdown",sentryTags:{area:n.e.WAYFINDING},fallback:c.H4.NONE_I_KNOW_WHAT_IM_DOING,children:(0,a.jsx)(p.w,{className:"subscribed_tile_action_dropdown--tileActions--zsKOG",loadedQueries:S.data,onMount:()=>{u.$.endAndReport(`${b.Tf.getId(r)}`)},openTile:t,permsByFileKey:x.data,permsByPrototypeId:O.data,permsByRepoId:k.data,selectedTiles:T,sourceFile:g,tile:r,tileActions:e,trackSearchFn:R})})}},527082:(e,t,r)=>{r.d(t,{w:()=>eC,L:()=>eS});var a=r(104076),l=r(716976),n=r(237420),i=r(414393),s=r(24989),o=r(468882),c=r(38989),d=r(822610),u=r(536760),p=r(774531),_=r(288230),f=r(229553),h=r(369104),E=r(359298),m=r(62591),y=r(908397),b=r(759095),v=r(641567),I=r(847863),T=r(202039),w=r(754245);function R({children:e,portalTarget:t,portalKey:r}){return(0,w.createPortal)(e,t,r)}var x=r(622038),k=r(669052),O=r(688683),F=r(403334),g=r(579848),S=r(617413),C=r(707698),A=r(580310),N=r(47972),P=r(884492),j=r(931330),L=r(904672),M=r(91142),D=r(12440),U=r(320530),W=r(554841),B=r(886530),V=r(41510),H=r(139541),K=r(211271),Y=r(207746),$=r(330801),z=r(888061),Q=r(89286),q=r(839982),G=r(531211),X=r(893831),J=r(860985),Z=r(291203),ee=r(381865),et=r(433960),er=r(64994),ea=r(482051),el=r(520356),en=r(397617),ei=r(876137),es=r(323984),eo=r(428444),ec=r(991408),ed=r(807083),eu=r(20313),ep=r(12186),e_=r(868513),ef=r(635278),eh=r(629220),eE=r(298610),em=r(448160),ey=r(162014),eb=r(354546),ev=r(297532),eI=r(109134),eT=r(990054),ew=r(541376),eR=r(979418),ex=r(31827),ek=r(346186),eO=r(103192),eF=r(476224);let eg={COPY_LINK:"COPY_LINK",DELETE:"DELETE",DUPLICATE:"DUPLICATE",DUPLICATE_TO_DRAFTS:"DUPLICATE_TO_DRAFTS",OPEN:"OPEN",OPEN_NEW_TAB:"OPEN_NEW_TAB",OPEN_WITH_DISABLED_PREVIEW:"OPEN_WITH_DISABLED_PREVIEW",PIN_FILE_TO_FOLDER:"PIN_FILE_TO_FOLDER",PIN_REPO_TO_FOLDER:"PIN_REPO_TO_FOLDER",PIN_FILE_TO_WORKSPACE:"PIN_FILE_TO_WORKSPACE",RENAME:"RENAME",MOVE_FILE:"MOVE_FILE",SHARE:"SHARE",SHOW_IN_FOLDER:"SHOW_IN_FOLDER",REMOVE_FROM_RECENTS:"REMOVE_FROM_RECENTS",REMOVE_FROM_SHARED_FILES:"REMOVE_FROM_SHARED_FILES",RESTORE_FROM_VERSION:"RESTORE_FROM_VERSION",UNPIN_FILE_FROM_FOLDER:"UNPIN_FILE_FROM_FOLDER",UNPIN_REPO_FROM_FOLDER:"UNPIN_REPO_FROM_FOLDER",UNPIN_FILE_FROM_WORKSPACE:"UNPIN_FILE_FROM_WORKSPACE",EDIT_WORKSPACE_PIN:"EDIT_WORKSPACE_PIN",CREATE_BRANCH:"CREATE_BRANCH",FAVORITE_FILE:"FAVORITE_FILE",FAVORITE_PROTOTYPE:"FAVORITE_PROTOTYPE",FAVORITE_REPO:"FAVORITE_REPO",UNFAVORITE_FILE:"UNFAVORITE_FILE",UNFAVORITE_PROTOTYPE:"UNFAVORITE_PROTOTYPE",UNFAVORITE_REPO:"UNFAVORITE_REPO",USE_IN_NEW_FILE:"USE_IN_NEW_FILE",PUBLISH_ORG_TEMPLATE:"PUBLISH_ORG_TEMPLATE",FILE_ANALYTICS:"FILE_ANALYTICS",DELETE_FOREVER:"DELETE_FOREVER",RESTORE:"RESTORE",RESTORE_TO:"RESTORE_TO"};function eS(){let e=`TILE_ACTION_DROPDOWN_${l.useId()}`;return(0,er.BK)(e)}function eC(e){let t=(0,ea.FC)(),r=(0,n.wA)(),{user:w,currentUserOrgId:er}=t,{dropdownShown:eS,openFileFolderId:eC,selectedView:eA,tileSelect:eN,pinnedFileKeys:eP,isDrafts:ej,folders:eL,selectedBranchKeyByRepoId:eM,fileKeysByRepoId:eD,isOnDeleted:eU,attributionContextKey:eW}=(0,d.R)(e=>({dropdownShown:e.dropdownShown,openFileFolderId:e.openFile?.folderId,selectedView:e.selectedView,tileSelect:e.tileSelect,pinnedFileKeys:e.pinnedFileKeys,isDrafts:"folder"===e.selectedView.view&&(0,ee.Gi)(e.folders[e.selectedView.folderId]),folders:e.folders,selectedBranchKeyByRepoId:e.selectedBranchKeyByRepoId,fileKeysByRepoId:e.fileKeysByRepoId,isOnDeleted:"deletedFiles"===e.selectedView.view,attributionContextKey:e.sharingAttributionContextKey})),eB=e.tile,eV=(0,el.TA)(),[eH]=(0,b.IT)((0,$.OL)({userId:eV})),eK=(0,l.useMemo)(()=>eH?.data??{},[eH]),eY=eB.type===et.nb.FILE?eB.file?.teamId:void 0,e$=(0,eR.vt)(eY),ez=(0,ey.jn)(),{hasPendingRequest:eQ,getUpgradeEligibility:eq,getUpgradePathway:eG}=(0,ep.wH)({folderId:eB.type===et.nb.FILE?eB.file.folderId:null,fileInBrowser:eB.type===et.nb.FILE?eB.file:void 0}),eX=(0,S.GI)("tile_action_dropdown"),{Sprig:eJ}=(0,I.A)(),eZ=(0,T.bY)("file_multi_move_limit").getDynamicConfig().get("fileLimit",100),e0=()=>{(0,c.kc)().file_browser_sentiment_survey&&eJ("setAttribute","fb_file_organized",!0)},e1=e=>{if(null!=e.file.folderId){if(er===e.file.parentOrgId)r(N.sf({view:"folder",folderId:e.file.folderId})),r(H.y$({type:eh.F.FILES,tiles:[e]}));else{let t=e.file.parentOrgId?`/files/${e.file.parentOrgId}/project/${e.file.folderId}`:`/files/project/${e.file.folderId}`;t=w?(0,p.NQ)(t,"fuid",w.id):t,y.Ay.redirect(t)}}},e2=e=>{r(N.sf({view:"folder",folderId:e.repo.folder_id})),r(H.y$({type:eh.F.REPOS,tiles:[e]}))},e4=t=>{e.trackSearchFn&&e.trackSearchFn();let a=void 0===e.trackSearchFn;switch(t.type){case et.nb.FILE:let l=(0,en.rl)(t.file);(0,X.nz)(l,t.file.key,eA,r,eJ,a);break;case et.nb.PINNED_FILE:(0,X.nz)((0,en.jN)(t),t.file.key,eA,r,eJ,a);break;case et.nb.PROTOTYPE:(0,X.D4)(t.prototype.url,t.prototype.file_key,t.prototype.page_id,eA);break;case et.nb.REPO:let n=(0,Q.mr)(t.repo,t.branches,eM);y.Ay.redirect((0,Q.CE)(n,t.repo,"file"),"_blank");break;case et.nb.OFFLINE_FILE:r(j.NA({file:t.file,openNewFileIn:ef.ai.NEW_TAB,source:e_.U.OFFLINE_FILE_TILE}));return;default:(0,i.xb)(t)}},e8=t=>{switch(e.trackSearchFn&&e.trackSearchFn(),t.type){case et.nb.FILE:case et.nb.PINNED_FILE:if(t.file.editorType===eo._Y.FIGMAKE){let e=(0,en.jN)({file:t.file,disablePreview:!0});(0,X.nz)(e,t.file.key,eA,r,eJ)}}},e6=e=>{null!=e.folderId&&r(U.gO({folderId:e.folderId,fileKey:e.key})),e0()},e3=e=>{null!=e.folder_id&&null!=e.default_file_key&&r(U.gO({folderId:e.folder_id,fileKey:e.default_file_key})),e0()},e5=e=>{let t=e.folderId;null!=t&&r(U.z6({folderId:t,fileKey:e.key})),e0()},e7=e=>{null!=e.folder_id&&null!=e.default_file_key&&r(U.z6({folderId:e.folder_id,fileKey:e.default_file_key})),e0()},e9=e=>{r(W.to({type:(0,k.I)(),data:{pinnedFileId:e}})),e0()},te=e=>{r(W.to({type:(0,O.l)(),data:{pinnedFileId:e}})),e0()},tt=e=>{r(W.to({type:ex.g_,data:{fileKey:e.key,source:Z.nk.fileBrowserTileActionMenu}}))},tr=e=>{if(t5!==eE.q.UPGRADE_NOT_NEEDED&&eG(e)!==eE.J.AUTO_PATHWAY)return eQ(e)?(0,o.t)("upgrades.request_sent"):(0,o.t)("upgrades.request")},ta=e=>!!eQ(e)&&t5===eE.q.CANNOT_UPGRADE,tl=e=>{switch(e.type){case et.nb.FILE:let t=e.file;r(P.S({fileKey:t.key,url:(0,en.jN)({file:t,attributionContext:(0,es.b)(eW,es.d.FILE_TILE_CONTEXT_MENU),allowDefaulting:!0}),source:es.d.FILE_TILE_CONTEXT_MENU}));break;case et.nb.PINNED_FILE:r(P.S({fileKey:e.file.key,url:(0,en.jN)({file:e.file,attributionContext:(0,es.b)(eW,es.d.FILE_TILE_CONTEXT_MENU),allowDefaulting:!0}),source:es.d.FILE_TILE_CONTEXT_MENU}));break;case et.nb.PROTOTYPE:r(C.S({url:(0,en.Kw)({base:"proto",file:{key:e.prototype.file_key},nodeId:e.prototype.page_id,attributionContext:(0,es.b)(eW,es.d.FILE_TILE_CONTEXT_MENU)})}));break;case et.nb.REPO:let a=(0,Q.mr)(e.repo,e.branches,eM);r(P.S({fileKey:a.key,url:(0,Q.CE)(a,e.repo,"file"),source:es.d.FILE_TILE_CONTEXT_MENU}))}},tn=(0,u.Xr)(et.Y6),ti=e=>{tn({type:"FILE",id:e.key}),r(H.an()),e0()},ts=e=>{tn({type:"REPO",id:e.id}),r(H.an()),e0()},to=e=>{(0,$.dm)(e),r(H.an()),e0()},tc=e=>{r(D.Z({fileKey:e.key})),e0()},td=()=>{r((0,J.n_)({toDraft:!1})),r(H.an()),e0()},tu=e=>{null!=e.folderId&&r((0,W.to)({type:eI.e,data:{fileKey:e.key,entrypoint:q.F.FileNavigation}}))},tp=()=>{let{selectedCount:t,deletableCount:a,allDrafts:l,filesByKey:n,reposById:i,offlineFilesByKey:s}=L.Mw(e.selectedTiles,e.permsByFileKey,e.permsByRepoId);if(a<t){let e=(0,o.t)("tile.dropdown.no_permission_to_trash_error");r(x.s.error(e));return}r(L.U1({filesByKey:n,reposById:i,offlineFilesByKey:s,allDrafts:l})),e0()},t_=()=>{let t=(0,h.m8)(tx,e.permsByFileKey),a=(0,E.gX)(tO,e.permsByRepoId);if(t.length+a.length<tx.length+tO.length){r(x.s.error((0,o.t)("flash.dont_have_permission_permanently_delete_files")));return}r(L.Fh({fileKeys:t,repoIds:a})),e0()},tf=()=>{let t=(0,h.g4)(tx,e.permsByFileKey),a=(0,E._H)(tO,e.permsByRepoId);if(0===t.length+a.length){r(x.s.error((0,o.t)("tile.dropdown.no_permission_to_restore_error")));return}r((0,J.b4)({fileKeys:t,repoIds:a})),e0()},th=(t,a)=>{let l=tC.length+tD.length;if(0===l){r(x.s.error((0,o.t)("tile.dropdown.no_permission_to_restore_error")));return}if(1===l){let l=e.selectedTiles[0];if(l?.type===et.nb.FILE)(0,g.h)(ei.F.toSinatra(l.file),null,r,void 0,void 0,{canMove:!!t?.canMove,isUserViewerRestricted:!!t?.isUserRestrictedForSeat,planUser:t?.planUser??null,inDrafts:!!t?.isDraftFile,draftsMoveData:ra,canMoveWithReasons:t?.canMoveWithReasons},void 0,!0);else if(l?.type===et.nb.REPO){let e=l.branches.find(e=>(0,Q.SA)(e,l.repo));(0,g.h)(e??null,l.repo,r,void 0,void 0,{canMove:!!a?.canMove,isUserViewerRestricted:!!a?.isUserRestrictedForSeat,planUser:a?.planUser??null,inDrafts:!!a?.isDraftRepo,draftsMoveData:ra,canMoveWithReasons:a?.canMoveWithReasons},void 0,!0)}}else{let t=e.selectedTiles.filter(e=>e.type===et.nb.FILE).map(e=>ei.F.toSinatra(e.file)),a=e.selectedTiles.filter(e=>e.type===et.nb.REPO).map(e=>e.repo);(0,g.O)(t,a,r,void 0,!0)}},tE=()=>{r((0,J.g4)()),r(H.an()),e0()},tm=()=>{let e=Object.keys(eN[eh.F.REPOS]);e.length>0&&r(V.iC({recent_repo_ids:e}));let t=[];for(let r of e)t=t.concat(eD[r]);let a=Object.keys(eN[eh.F.FILES]).concat(t),l=a.map(e=>({key:e}));for(let e of(l.length>0&&(0,f.yN)(l.map(e=>e.key)).catch(e=>{throw r(x.s.error((0,o.t)("file_browser.file_browser_actions.recently_viewed_error",{numFiles:a.length}))),e}),Object.keys(eN[eh.F.PROTOTYPES]))){let[t,a,l]=e.split(",");r(B.tl({fileKey:t,pageId:a}))}r(H.an())},ty=e=>{let t="",a="";e.type===et.nb.FILE?(t=e.sharedWithYouFields?.id??"",a=e.file.name??""):e.type===et.nb.PROTOTYPE&&(t=e.prototype.shared_with_you_id??"",a=e.prototype.fig_file?.name??e.prototype.name??"");let l=async()=>{try{await (0,f.LG)(t)}catch(e){r(x.s.error((0,o.t)("file_browser.file_browser_actions.remove_files_from_shared_files")))}};r(W.to({type:F.q,data:{fileName:a,onRemove:l}}))},tb=()=>{let t=e.sourceFile,a=e.loadedQueries.createBranchStatus;if(!t||!a)return;let l=em.e0.FILE_BROWSER;switch(a.status){case"upsell-org":r(M.j({trackingContextName:l}));break;case"enabled":r(M.l({trackingContextName:l,sourceFileKey:t.key,dispatchedFromEditor:!1}));break;case"disabled":case"hidden":break;default:(0,i.xb)(a.status)}},tv=(e,t,a)=>{let l={file:e,sectionId:t,entrypoint:"dropdown",fileBrowserFavorite:!0};a?r(A.Fb(l)):r(A.qP(l)),e0()},tI=(e,t)=>{let a={prototype:e,entrypoint:"dropdown",fileBrowserEntryPoint:!0};t?r(A.iN(a)):r(A.X7(a))},tT=(e,t,r,a)=>{let l=e.is_favorited&&t.some(e=>e.id===r?.id);return{displayText:e.is_favorited?`${(0,o.t)("favorited_resources.indicate_section_prefix")}: ${r?.name||(0,o.t)("sidebar.starred")}`:(0,o.t)("favorited_resources.add_to_sidebar"),children:t.map(({id:e,name:t})=>({recordingKey:"FAVORITE_FILE.CUSTOM",displayText:""===t?(0,o.t)("sidebar.starred"):t,isChecked:r?.id===e,alwaysShowCheckMarkOffset:l,callback:()=>a(e)}))}},tw=(e,t,a,l)=>{if(null===e.default_file_key){console.error("Repo file key should not be null");return}let n={file:ei.F.toLiveGraph(t),repoId:e.id,sectionId:a,entrypoint:"dropdown",fileBrowserFavorite:!0};l?r(A.Fb(n)):r(A.qP(n))},tR=(t,a,l)=>{if(1===l){let l=e.selectedTiles[0];if(l?.type===et.nb.FILE)(0,g.h)(ei.F.toSinatra(l.file),null,r,void 0,void 0,{canMove:!!t?.canMove,isUserViewerRestricted:!!t?.isUserRestrictedForSeat,planUser:t?.planUser??null,inDrafts:!!t?.isDraftFile,draftsMoveData:ra,hasConnectedPlanUserInOrg:rl,canMoveWithReasons:t?.canMoveWithReasons});else if(l?.type===et.nb.REPO){let e=l.branches.find(e=>(0,Q.SA)(e,l.repo));(0,g.h)(e??null,l.repo,r,void 0,void 0,{canMove:!!a?.canMove,isUserViewerRestricted:!!a?.isUserRestrictedForSeat,planUser:a?.planUser??null,inDrafts:!!a?.isDraftRepo,draftsMoveData:ra,hasConnectedPlanUserInOrg:rl,canMoveWithReasons:a?.canMoveWithReasons})}}else{let t=e.selectedTiles.filter(e=>e.type===et.nb.FILE).map(e=>ei.F.toSinatra(e.file)),a=e.selectedTiles.filter(e=>e.type===et.nb.REPO).map(e=>e.repo);(0,g.O)(t,a,r)}e0()},tx=l.useMemo(()=>Object.keys(eN[eh.F.FILES]),[eN]),tk=l.useMemo(()=>Object.keys(eN[eh.F.PINNED_FILES]),[eN]),tO=l.useMemo(()=>Object.keys(eN[eh.F.REPOS]),[eN]),tF=l.useMemo(()=>(0,h.Ul)(tx,e.permsByFileKey)||[],[e.permsByFileKey,tx]),tg=l.useMemo(()=>(0,h.n)(tx,e.permsByFileKey)||[],[e.permsByFileKey,tx]),tS=l.useMemo(()=>(0,h.g4)(tx,e.permsByFileKey)||[],[e.permsByFileKey,tx]),tC=l.useMemo(()=>(0,h.SW)(tx,e.permsByFileKey)||[],[e.permsByFileKey,tx]),tA=l.useMemo(()=>(0,h.v_)(tx,e.permsByFileKey).length,[e.permsByFileKey,tx]),tN=l.useMemo(()=>(0,h.v_)(tk,e.permsByFileKey).length,[e.permsByFileKey,tk]),tP=l.useMemo(()=>(0,h.m8)(tx,e.permsByFileKey)||[],[e.permsByFileKey,tx]),tj=l.useMemo(()=>eU?Object.keys(eN[eh.F.REPOS]).length:((0,E.nL)(tO,eM,e.permsByRepoId)||[]).length,[eU,e.permsByRepoId,eN,tO,eM]),tL=l.useMemo(()=>(0,E.zj)(tO,e.permsByRepoId)||[],[e.permsByRepoId,tO]),tM=l.useMemo(()=>(0,E._H)(tO,e.permsByRepoId)||[],[e.permsByRepoId,tO]),tD=l.useMemo(()=>(0,E.CS)(tO,e.permsByRepoId)||[],[e.permsByRepoId,tO]),tU=l.useMemo(()=>(0,E.gX)(tO,e.permsByRepoId)||[],[e.permsByRepoId,tO]),tW=l.useMemo(()=>Object.keys((0,$.gp)(eN[eh.F.OFFLINE_FILES],{offlineFiles:eK})),[eK,eN]),tB=l.useMemo(()=>(0,E.ae)(tO,e.permsByRepoId)||[],[e.permsByRepoId,tO]),tV=l.useMemo(()=>Object.keys(eN[eh.F.FILES]).length+Object.keys(eN[eh.F.REPOS]).length+Object.keys(eN[eh.F.PROTOTYPES]).length,[eN]),tH=l.useMemo(()=>Object.keys(eN[eh.F.FILES]).length+Object.keys(eN[eh.F.PROTOTYPES]).length,[eN]),tK=l.useMemo(()=>Object.keys(eN[eh.F.FILES]).length+Object.keys(eN[eh.F.REPOS]).length,[eN]),tY=l.useMemo(()=>{let t=new Set,r=new Set;return tx.forEach(a=>{let l=e.permsByFileKey[a];l&&(t.add(l.planType||""),r.add(l.planId||""))}),tO.forEach(a=>{let l=e.permsByRepoId[a];l&&(t.add(l.planType||""),r.add(l.planId||""))}),1===t.size&&(t.has("team")||1===r.size)},[e.permsByFileKey,e.permsByRepoId,tx,tO]),t$=(0,eF.aI)(),tz=eB.type===et.nb.FILE?eB.file:null,tQ=eB.type===et.nb.PINNED_FILE?eB.file:null,tq=tQ||tz,tG=eB.type===et.nb.REPO?eB.repo:null,tX=(tq&&e.permsByFileKey[tq.key])??null,tJ=(tG&&e.permsByRepoId[tG.id])??null,tZ=e.tile.type===et.nb.PROTOTYPE?e.tile.prototype:null,t0=null!=tG&&eB.branches?eB.branches.find(e=>(0,Q.SA)(e,tG)):null,t1=t0?ei.F.toLiveGraph(t0):null,t2=e.tile.type===et.nb.OFFLINE_FILE?e.tile.file:null,t4=(0,eO.mu)(e.tile.type===et.nb.FILE?ei.F.toSinatra(e.tile.file):null,eV),t8=(0,K.a9)(),t6=eB.type===et.nb.REPO?t1:tq,t3=(0,eO.$S)({fileKey:t6?.key??"",file:t6?ei.F.toSinatra(t6):null}),t5=(0,l.useMemo)(()=>{let e=et.Tf.getEditorType(eB);if(!w||!e||!t6)return null;let t=ei.F.toSinatra(t6),r=t3.data?.file?.mustUpgradeToShareDraft??!1;return eq((0,z.wR)(e),!(0,ek.l)({file:{...t,mustUpgradeToShareDraft:r},user:w,orgUser:t8,orgDraftsOwner:t8,teamUser:t4}))},[eB,t6,w,t4,eq,t8,t3.data?.file?.mustUpgradeToShareDraft]),t7=Object.keys(eN[eh.F.FILES]).length,t9=Object.keys(eN[eh.F.PINNED_FILES]).length,re=Object.keys(eN[eh.F.PROTOTYPES]).length,rt=Object.keys(eN[eh.F.REPOS]).length,rr=Object.keys(eN[eh.F.OFFLINE_FILES]).length,ra=(0,eu.jB)({files:tz?[ei.F.toSinatra(tz)]:[],repos:tG?[tG]:[],destinationFolderId:et.Tf.getFolderId(eB),isDestinationDrafts:!1}),rl=(0,eu.Cp)(ra.destinationPlan?.key||null,ra.licenseType),rn=e.selectedTiles.filter(e=>e.type===et.nb.FILE).map(e=>e.file).some(e=>e.editorType===eo._Y.FIGMAKE)&&ra.requiresUpgrade&&!t$,ri=(0,ed.D6)("TileActionDropdown"),rs=(0,ed.Kd)(ri).unwrapOr(!1),ro=(0,u.md)(ev.V1),rc=eS?.data;if(!rc)return null;let rd=t7+t9+rt,ru=rd+rr,rp=t7+t9+rt+re+rr,r_=1===rd,rf=1===ru;if(0===rp)return(0,a.jsx)("div",{});let rh=!0,rE=!0,rm=!0,ry=!1,rb=!0,rv=!0,rI=!0;(tg.length+tL.length+tW.length<t7||re>0)&&(rh=!1),(tP.length+tU.length<t7||re>0||rr>0)&&(rE=!1),(tS.length<t7||tM.length<rt||re>0||rr>0)&&(rm=!1),tC.length===t7&&tD.length===rt&&(ry=!0),(tA<t7||tN<t9||tj<rt||re>0||rr>0)&&(rb=!1),rr>0&&(rv=!1);let rT=tF.length+tB.length;rT<rd&&(rI=!1);let rw="";r_||(rw=(0,o.t)("tile.dropdown.multiple_file_suffix",{totalSelected:rd}));let rR="";rf||(rR=(0,o.t)("tile.dropdown.multiple_file_suffix",{totalSelected:ru}));let rx=((t,a)=>{let l=(0,G.D6)(er),n=l?(0,o.t)("favorited_resources.remove_from_sidebar"):(0,o.t)("tile.favoriting.remove_from_favorites");return{[eg.COPY_LINK]:e=>({displayText:(0,o.t)("tile.dropdown.copy_link"),callback:()=>tl(e)}),[eg.DELETE]:(e,r,a)=>{let l=!1;if(e.type===et.nb.REPO){let t=(0,Q.mr)(e.repo,e.branches,eM);l=!(0,Q.SA)(t,e.repo)}return{displayText:l?(0,o.t)("tile.dropdown.move_file_and_branches_to_trash"):1===t?(0,o.t)("tile.dropdown.trash_single_tile"):(0,o.t)("tile.dropdown.trash_file",{objText:r}),callback:tp,disabled:a}},[eg.DUPLICATE]:(e,r)=>({displayText:1===t?(0,o.t)("tile.dropdown.duplicate_single_tile"):(0,o.t)("tile.dropdown.duplicate",{objText:e}),callback:td,disabled:r}),[eg.DUPLICATE_TO_DRAFTS]:(e,t)=>({displayText:1===a?(0,o.t)("tile.dropdown.duplicate_to_draft_single_file_or_repo"):(0,o.t)("tile.dropdown.duplicate_to_draft",{objText:e}),callback:tE,disabled:t}),[eg.OPEN]:()=>({displayText:(0,o.t)("tile.dropdown.open"),callback:(t,r,a,l)=>{e.openTile(l)}}),[eg.OPEN_NEW_TAB]:e=>({displayText:(0,o.t)("tile.dropdown.open_new_tab"),callback:()=>e4(e)}),[eg.OPEN_WITH_DISABLED_PREVIEW]:e=>({displayText:(0,o.t)("tile.dropdown.open_with_disabled_preview"),callback:()=>e8(e)}),[eg.PIN_FILE_TO_FOLDER]:e=>({displayText:(0,o.t)("tile.dropdown.pin_to_project"),callback:()=>e6(e)}),[eg.PIN_REPO_TO_FOLDER]:e=>({displayText:(0,o.t)("tile.dropdown.pin_to_project"),callback:()=>e3(e)}),[eg.PIN_FILE_TO_WORKSPACE]:t=>{let r=!!e.loadedQueries.fileWorkspacePinActions&&e.loadedQueries.fileWorkspacePinActions.workspaceHasMaxPins;return{displayText:(0,o.t)("tile.dropdown.pin_to_workspace"),callback:()=>eX(t,r)}},[eg.REMOVE_FROM_RECENTS]:(e,t)=>({displayText:(0,o.t)("tile.dropdown.remove_from_recent_pluralized",{numFiles:e}),callback:tm,disabled:t}),[eg.REMOVE_FROM_SHARED_FILES]:e=>({displayText:(0,o.t)("tile.dropdown.remove_from_shared_files"),callback:()=>ty(e)}),[eg.RENAME]:e=>{switch(e.type){case et.nb.FILE:return{displayText:(0,o.t)("tile.dropdown.rename"),callback:()=>ti(e.file)};case et.nb.REPO:let t=(0,Q.mr)(e.repo,e.branches,eM);return{displayText:(0,Q.SA)(t,e.repo)?(0,o.t)("tile.dropdown.rename"):(0,o.t)("tile.dropdown.rename_file"),callback:()=>ts(e.repo)};case et.nb.OFFLINE_FILE:return{displayText:(0,o.t)("tile.dropdown.rename"),callback:()=>to(e.file)};default:(0,i.xb)(e)}},[eg.MOVE_FILE]:(e,t,r)=>({displayText:1===e?(0,o.t)("tile.dropdown.move_file"):(0,o.t)("tile.dropdown.move_object",{objText:t}),callback:()=>tR(tX,tJ,e),disabled:r||rn||(0,eu.Px)(ra,!!tX?.isFileTypeDisabled,rl),sideText:(0,eu.zS)(ra,r||!!tX?.isFileTypeDisabled,rl),rightJustifySideText:!0}),[eg.RESTORE_FROM_VERSION]:e=>{switch(e.type){case et.nb.FILE:return{displayText:(0,o.t)("fullscreen_actions.toggle-version-history"),callback:()=>{tc(e.file)}};case et.nb.REPO:let t=(0,Q.mr)(e.repo,e.branches,eM);return{displayText:(0,o.t)("fullscreen_actions.toggle-version-history"),callback:()=>{tc(t)}};default:(0,i.wc)(eg.RESTORE_FROM_VERSION)}},[eg.SHARE]:e=>{let t=(()=>{switch(e.type){case et.nb.FILE:case et.nb.PINNED_FILE:return e.file;case et.nb.REPO:return(0,Q.mr)(e.repo,e.branches,eM);default:return(0,v.$D)(s.e.WAYFINDING,Error("Invalid tile type when rendering DropdownActionOptions.SHARE"),{extra:{"tile.type":e.type,numFilesSelected:t7,numPinnedFilesSelected:t9,numReposSelected:rt}}),null}})(),r=et.Tf.getEditorType(e),a=(0,z.wR)(r);return{displayText:(0,o.t)("tile.dropdown.share"),callback:()=>{t&&tt(t)},sideText:tr(a),rightJustifySideText:!0,disabled:ta(a)}},[eg.SHOW_IN_FOLDER]:e=>{switch(e.type){case et.nb.FILE:return{displayText:(0,o.t)("tile.dropdown.show_in_project"),callback:()=>e1(e)};case et.nb.REPO:return{displayText:(0,o.t)("tile.dropdown.show_in_project"),callback:()=>e2(e)};default:(0,i.wc)(eg.SHOW_IN_FOLDER)}},[eg.UNPIN_FILE_FROM_FOLDER]:e=>({displayText:(0,o.t)("tile.dropdown.remove_project_pin"),callback:()=>e5(e)}),[eg.UNPIN_REPO_FROM_FOLDER]:e=>({displayText:(0,o.t)("tile.dropdown.remove_project_pin"),callback:()=>e7(e)}),[eg.UNPIN_FILE_FROM_WORKSPACE]:e=>({displayText:(0,o.t)("tile.dropdown.remove_workspace_pin"),callback:()=>e9(e)}),[eg.EDIT_WORKSPACE_PIN]:e=>({displayText:(0,o.t)("tile.dropdown.edit_workspace_pin"),callback:()=>te(e)}),[eg.CREATE_BRANCH]:e=>({displayText:(0,o.t)("tile.dropdown.create_new_branch"),callback:tb,disabled:e}),[eg.DELETE_FOREVER]:(e,t)=>({displayText:(0,o.t)("tile.dropdown.delete_forever",{objectText:e}),callback:t_,disabled:t}),[eg.RESTORE]:(e,t,r)=>({displayText:(0,o.t)("tile.dropdown.restore",{objectText:e,numFiles:r}),callback:tf,disabled:t}),[eg.RESTORE_TO]:(e,t,r)=>({displayText:(0,o.t)("tile.dropdown.restore_to",{objectText:e,numFiles:r}),callback:()=>th(tX,tJ),disabled:t}),[eg.FAVORITE_FILE]:(t,r)=>{let{favoriteSidebarSection:a}=e.loadedQueries;return l&&null!=r&&r?.length>0?tT({is_favorited:t.isFavorited},r,a,e=>{tv(t,e,a?.id!==e)}):{displayText:(0,o.t)("tile.favoriting.add_to_favorites"),callback:()=>tv(t,void 0,!0)}},[eg.FAVORITE_PROTOTYPE]:e=>({displayText:(0,o.t)("tile.favoriting.add_to_favorites"),callback:()=>tI(e,!0)}),[eg.FAVORITE_REPO]:(t,r,a)=>{let{favoriteSidebarSection:n}=e.loadedQueries;return l&&null!=a?tT(t,a,n,e=>{tw(t,r,e,n?.id!==e)}):{displayText:(0,o.t)("tile.favoriting.add_to_favorites"),callback:()=>tw(t,r,void 0,!0)}},[eg.UNFAVORITE_FILE]:e=>({displayText:n,callback:()=>tv(e,void 0,!1)}),[eg.UNFAVORITE_PROTOTYPE]:e=>({displayText:n,callback:()=>tI(e,!1)}),[eg.UNFAVORITE_REPO]:(e,t)=>({displayText:n,callback:()=>tw(e,t,void 0,!1)}),[eg.USE_IN_NEW_FILE]:e=>(0,eb.rC)({dispatch:r,fileKey:e.key,templateName:e.name}),[eg.PUBLISH_ORG_TEMPLATE]:e=>{let t=!!et.Tf.getIsTeamTemplate(e),a=et.Tf.getFileOrMainBranchKey(e),l=et.Tf.getName(e),n=et.Tf.getFolderId(e),i=et.Tf.getTeamId(e),s=et.Tf.getEditorType(e),o=et.Tf.getOrgId(e),c=ej||null!==n&&(0,ee.Gi)(eL[n]);return(0,eb.we)({dispatch:r,file:{key:a,name:l,folder_id:n,team_id:i,editor_type:s,parent_org_id:o},fileNeedsMovingBeforePublish:c,isPublished:t,source:"file-browser-dropdown"})},[eg.FILE_ANALYTICS]:e=>({displayText:(0,o.t)("fullscreen.filename_view.file_analytics"),callback:()=>tu(e)})}})(rp,rd),rk=(()=>{let r=(tZ&&e.permsByPrototypeId[tZ.file_key])??null,a=(0,ec.R$)(w,er),l=!!tz&&!!tz.teamId&&e$,n="folder"===eA.view&&eP[eA.folderId]||ro&&eC&&eP[eC]||[],i=tz&&n.includes(tz.key),s=tQ&&n.includes(tQ.key),o=tG&&tG.default_file_key&&n.includes(tG.default_file_key),c=i||s||o||Object.keys(eN[eh.F.PINNED_FILES]).length>0,d=t7+t9+re+rt+rr===1,u=tq?.editorType===eo._Y.FIGMAKE,p=tq?.editorType===eo._Y.FIGMAKE&&!t$,f=(tA>0||tN>0||tj>0)&&!a&&!l&&!ez,h=tL.length+tg.length+tW.length,E=tU.length+tP.length,y=tM.length+tS.length,b=tD.length+tC.length,v=!ej&&0===y&&0===b&&0===E&&!e.tileActions.showInFolder&&d,I=(0,G.D6)(er);return{[eg.COPY_LINK]:()=>!!(e.tileActions.copyLink&&d&&!t2),[eg.DELETE]:()=>!!(e.tileActions.delete&&h>0&&0===t9),[eg.DUPLICATE]:()=>!!(e.tileActions.duplicate&&f),[eg.DUPLICATE_TO_DRAFTS]:()=>!!(e.tileActions.duplicateToDrafts&&f),[eg.OPEN]:()=>!!(e.tileActions.open&&d),[eg.OPEN_NEW_TAB]:()=>!!(e.tileActions.openNewTab&&d&&!m.eD&&!(0,_.ce)()),[eg.OPEN_WITH_DISABLED_PREVIEW]:()=>!!(d&&(eB.type===et.nb.FILE&&eB.file.editorType===eo._Y.FIGMAKE||eB.type===et.nb.PINNED_FILE&&eB.file.editorType===eo._Y.FIGMAKE)),[eg.PIN_FILE_TO_FOLDER]:()=>{let t=tX?.canPin;return!!(e.tileActions.pinToFolder&&!c&&1===t7&&v&&t)},[eg.PIN_REPO_TO_FOLDER]:()=>{let t=tJ?.canPin;return!!(e.tileActions.pinToFolder&&!c&&1===rt&&v&&t)},[eg.PIN_FILE_TO_WORKSPACE]:()=>!!(d&&(1===t7||1===rt)&&e.tileActions.pinToWorkspace&&e.loadedQueries.fileWorkspacePinActions&&e.loadedQueries.fileWorkspacePinActions.shouldShowPinFileToWorkspaceAction),[eg.REMOVE_FROM_RECENTS]:()=>!!(e.tileActions.removeFromRecents&&tV>0),[eg.REMOVE_FROM_SHARED_FILES]:()=>!!(e.tileActions.removeFromSharedFiles&&1===tH),[eg.RENAME]:()=>{let t=tX?.canRename,r=tJ?.canRename;return!!(e.tileActions.rename&&d&&(1===t7&&t||1===rt&&r||1===rr))},[eg.MOVE_FILE]:()=>{let t=tX?.canOpenMoveModal,r=tJ?.canOpenMoveModal;return!!(e.tileActions.moveFile&&0===rr&&(d&&(1===t7&&t||1===rt&&r)||rd>1&&rd<=eZ&&rT>0))},[eg.RESTORE_FROM_VERSION]:()=>{let t=tX?.canRestoreFromVersion,r=!!tG&&tJ?.canEditBranch(eM[tG.id]);return!!(e.tileActions.restoreFromVersion&&d&&(1===t7&&t||1===rt&&r)&&!u)},[eg.SHARE]:()=>!!(e.tileActions.share&&d&&(1===t7||1===t9||1===rt)&&!tX?.isFileTypeDisabled&&!p),[eg.SHOW_IN_FOLDER]:()=>{let t=tX?.canShowInProject,r=tJ?.canShowInProject;return!!(e.tileActions.showInFolder&&d&&(1===rt&&r||1===t7&&t))},[eg.UNPIN_FILE_FROM_FOLDER]:()=>{let t=!!tX?.canPin;return!!(e.tileActions.pinToFolder&&c&&t9<=1&&v&&t)},[eg.UNPIN_REPO_FROM_FOLDER]:()=>{let t=tJ?.canPin;return!!(e.tileActions.pinToFolder&&c&&rt<=1&&v&&t)},[eg.UNPIN_FILE_FROM_WORKSPACE]:()=>!!(e.tileActions.pinToWorkspace&&d&&e.loadedQueries.fileWorkspacePinActions&&e.loadedQueries.fileWorkspacePinActions.canEditPin),[eg.EDIT_WORKSPACE_PIN]:()=>!!(e.tileActions.pinToWorkspace&&1===t7&&e.loadedQueries.fileWorkspacePinActions&&e.loadedQueries.fileWorkspacePinActions.canEditPin),[eg.CREATE_BRANCH]:()=>!!(e.tileActions.createBranch&&d&&(1===t7||1===t9||1===rt)&&e.sourceFile&&e.loadedQueries.createBranchStatus&&"hidden"!==e.loadedQueries.createBranchStatus.status),[eg.FAVORITE_FILE]:()=>{if("deletedFiles"===eA.view)return!1;let t=tX?.canFavorite&&e.loadedQueries.isResourceInUserPlan,r=tX?.canFavorite&&!tX?.isFavorited&&e.loadedQueries.isResourceInUserPlan;return!!("team"!==eA.view&&!e.loadedQueries.hasMaxFavorites&&!I&&(r&&1===t7&&d||tQ&&1===t9&&!tQ?.isFavorited))||(I&&e.loadedQueries.userSidebarSections,!!t&&1===t7&&!!d||!!tQ&&1===t9)},[eg.FAVORITE_PROTOTYPE]:()=>{if("deletedFiles"===eA.view||"team"===eA.view)return!1;let t=r?.canFavorite&&e.loadedQueries.isResourceInUserPlan;return!!(!e.loadedQueries.hasMaxFavorites&&!I&&1===re&&d&&t)},[eg.FAVORITE_REPO]:()=>{if("deletedFiles"===eA.view)return!1;let t=tJ?.canFavorite&&e.loadedQueries.isResourceInUserPlan;return!!("team"!==eA.view&&!e.loadedQueries.hasMaxFavorites&&!I&&1===rt&&d&&t)||(I&&e.loadedQueries.userSidebarSections,1===rt&&!!d&&!!t)},[eg.UNFAVORITE_FILE]:()=>{if("deletedFiles"===eA.view||"team"===eA.view)return!1;let e=tX?.canFavorite&&tX?.isFavorited;return!!(tz?.parentOrgId===er&&(1===t7&&d&&e||tQ&&1===t9&&tQ?.isFavorited))},[eg.UNFAVORITE_PROTOTYPE]:()=>{if("deletedFiles"===eA.view||"team"===eA.view)return!1;let e=r?.canUnfavorite;return!!(1===re&&d&&e)},[eg.UNFAVORITE_REPO]:()=>{if("deletedFiles"===eA.view||"team"===eA.view)return!1;let e=tJ?.canUnfavorite;return!!(1===rt&&d&&e)},[eg.USE_IN_NEW_FILE]:()=>{let t=!!tX?.canUseInNewFile;return!!(d&&tq&&e.tileActions.publishOrgTemplate&&t)},[eg.PUBLISH_ORG_TEMPLATE]:()=>{let r=!!tX?.canEdit,a=tq&&(0,Y.UF)({fileCanEdit:r,editor_type:tq.editorType,team_id:tq.teamId,state:t});return!!(d&&tq&&e.tileActions.publishOrgTemplate&&a)},[eg.DELETE_FOREVER]:()=>!!(e.tileActions.deleteForever&&E>0),[eg.RESTORE]:()=>!!(e.tileActions.restore&&y>0&&!a),[eg.RESTORE_TO]:()=>!!(e.tileActions.restoreToOtherFolders&&b>0&&!a&&!(e.tileActions.restore&&y>0)),[eg.FILE_ANALYTICS]:()=>{let e=tq??t1,t=(0,eT.MG)(e?{parentOrgId:e.parentOrgId||null}:null,!!e?.lastPublishedAt,rs);return!!(e&&t)}}})(),rO=(e,...t)=>rk[e]()?[].concat(rx[e](...t)):[],rF=[[...rO(eg.SHOW_IN_FOLDER,eB),...rO(eg.OPEN,eB),...rO(eg.OPEN_NEW_TAB,eB),...rO(eg.OPEN_WITH_DISABLED_PREVIEW,eB)],[...rO(eg.CREATE_BRANCH,null!=e.loadedQueries.createBranchStatus&&"disabled"===e.loadedQueries.createBranchStatus.status)],[...rO(eg.FILE_ANALYTICS,tq??t1)],[...rO(eg.FAVORITE_FILE,tq,e.loadedQueries.userSidebarSections),...rO(eg.FAVORITE_PROTOTYPE,tZ),...rO(eg.FAVORITE_REPO,tG,t0,e.loadedQueries.userSidebarSections),...rO(eg.UNFAVORITE_FILE,tq),...rO(eg.UNFAVORITE_PROTOTYPE,tZ),...rO(eg.UNFAVORITE_REPO,tG,t0),...rO(eg.PIN_FILE_TO_FOLDER,tz),...rO(eg.PIN_REPO_TO_FOLDER,tG),...rO(eg.UNPIN_FILE_FROM_FOLDER,tq),...rO(eg.UNPIN_REPO_FROM_FOLDER,tG),...rO(eg.PIN_FILE_TO_WORKSPACE,tz?.key||t0?.key),...rO(eg.EDIT_WORKSPACE_PIN,e.loadedQueries.fileWorkspacePinActions?.existingFilePinId),...rO(eg.UNPIN_FILE_FROM_WORKSPACE,e.loadedQueries.fileWorkspacePinActions?.existingFilePinId)],[...rO(eg.COPY_LINK,eB),...rO(eg.SHARE,eB),...rO(eg.DUPLICATE,rw,!rb),...rO(eg.DUPLICATE_TO_DRAFTS,rw,!rb),...rO(eg.USE_IN_NEW_FILE,tq),...rO(eg.PUBLISH_ORG_TEMPLATE,eB)],[...rO(eg.RESTORE_FROM_VERSION,eB),...rO(eg.RENAME,eB),...rO(eg.MOVE_FILE,tK,rw,!(1===rp||rI&&tY)),...rO(eg.DELETE,eB,rR,!rh),...rO(eg.REMOVE_FROM_RECENTS,tV,!rv),...rO(eg.REMOVE_FROM_SHARED_FILES,eB),...rO(eg.RESTORE,rw,!rm,rd),...rO(eg.RESTORE_TO,rw,!ry,rd),...rO(eg.DELETE_FOREVER,rw,!rE)]],rg=[];return rF.filter(e=>e.length>0).forEach(e=>{rg.length>0&&rg.push({displayText:"",separator:!0}),rg.push(...e)}),(0,a.jsx)(R,{portalTarget:document.body,children:(0,a.jsx)(ew.j,{autofocusPrevOnDismount:!0,dispatch:r,items:rg,lean:"right",minWidth:r_?void 0:140,onMount:e.onMount,onSelectItem:(e,t)=>{e.callback&&e.callback("",{},r,t)},parentRect:rc.targetRect,recordingKey:"tile-dropdown",showPoint:!1})})}},808276:(e,t,r)=>{r.d(t,{Q4:()=>g,gE:()=>O,u5:()=>F});var a=r(468882),l=r(59881),n=r(774531),i=r(908397),s=r(343116),o=r(922902),c=r(56857),d=r(313745);if(443==r.j)var u=r(553538);var p=r(571883),_=r(651594),f=r(852130),h=r(732215),E=r(756703),m=r(430834),y=r(226922),b=r(397617),v=r(428444),I=r(930419),T=r(864830),w=r(635278),R=r(926107),x=r(346680);async function k(e,t,r,l,n,i){let s=[],c=null;try{c=await (0,m.nm)()(r),s=(0,y.F)(l,t,c)}catch(t){let e=t?.data?.message||(0,a.t)("file_browser.error_try_again");r(u.F.enqueue({message:e,type:"error"}))}let d=(l.authedActiveCommunityProfile?.associated_users??[]).filter(e=>e.user_id in l.authedUsers.byId).length>1,p=(0,_.JJ)(t.viewer_mode),f=s.map(e=>(0,h.y)(e,p,l,c,i)).filter(e=>null!==e);1!==f.length||d?(0===f.length&&(0,o.xi)("community","no available workspaces for workspace selection modal",{workspaces:s,userId:l.user?.id}),e({onSelectWorkspace:n,workspaces:f,mode:"new_file"})):n(f[0])}let O=(e,t={isFreemiumPreview:!1,adminReviewerOverride:!1,skipWorkspaceSelection:!1,userId:void 0,openInNewTab:!0})=>r=>async(a,o)=>{let u=o();function _(e){let o={headers:{...c.Ay.defaults.headers}},_={};e&&(o.headers["X-Figma-User-ID"]=e.userId,_.org_id=e.orgId,_.team_id=e.teamId),!0===t.adminReviewerOverride&&(_.admin_reviewer_override=!0),c.Ay.post(`/api/hub_files/v2/${r.id}/copy`,_,o).then(({data:o})=>{let c=o.meta,f=(0,T.m3)(r),h=!0!==f?"none":!0===t.isFreemiumPreview?"trial":"paid";(0,l.sx)(E.M5.HUB_FILE_DUPLICATED,{hubFileId:r.id,figFileKey:c.key,isMonetized:f,paidStatus:h,searchSessionId:(0,p.wr)(u),file_team_id:_.team_id,org_id:_.org_id,file_folder_id:c.folder_id}),"whiteboard"===c.editor_type&&a((0,d.Hx)({storeInRecentsKey:R.$A.FigJam,id:r.id,type:R.vt.CommunityResource}));let m=(0,b.to)(c);m=(0,n.dR)(m,{"is-community-duplicate":"1",fuid:e?.userId||t.userId||""}),!0===t.isFreemiumPreview&&(m=(0,n.dR)(m,{"is-freemium-preview":"1"})),i.Ay.redirect(m,s.Ay.isMobileBrowser||!t.openInNewTab?void 0:"_blank")})}(0,f.YN)()&&t.skipWorkspaceSelection?_():await k(e,r,a,u,_)},F=(e,t={skipWorkspaceSelection:!1,userId:void 0})=>r=>async(a,l)=>{let o=l();function c(e){let a=(0,x.e)(v._Y.SLIDES,w.f6.COMMUNITY_RESOURCE_TILE_USE_TEMPLATE,r.library_key);e?((0,I.Y9)(e.userId,!1,e.orgId,void 0,e.teamId??null),a=(0,n.dR)(a,{fuid:e.userId})):t.userId&&(a=(0,n.dR)(a,{fuid:t.userId})),i.Ay.redirect(a,s.Ay.isMobileBrowser?void 0:"_blank")}(0,f.YN)()&&t.skipWorkspaceSelection?c():await k(e,r,a,o,c)},g=(e,t={skipWorkspaceSelection:!1,userId:void 0})=>r=>async(a,l)=>{let o=l();function c(e){let a=`/file/new?initial-library-key=${r.library_key}`;e?((0,I.Y9)(e.userId,!1,e.orgId,void 0,e.teamId??null),a=(0,n.dR)(a,{fuid:e.userId})):t.userId&&(a=(0,n.dR)(a,{fuid:t.userId})),i.Ay.redirect(a,s.Ay.isMobileBrowser?void 0:"_blank")}(0,f.YN)()&&t.skipWorkspaceSelection?c():await k(e,r,a,o,c,!0)}},564836:(e,t,r)=>{r.d(t,{A:()=>p});var a=r(237420),l=r(59881),n=r(808276),i=r(79726),s=r(554841),o=r(520356),c=r(864830),d=r(43638),u=r(571883);function p({resource:e,adminReviewerOverride:t=!1,isFreemiumPreview:r=!1,skipWorkspaceSelection:p=!1,openInNewTab:_=!0}){let f=(0,a.wA)(),h=(0,u.Jm)(),E=(0,d.T)(),m=(0,o.iZ)();if(!(0,c.U)(e))return()=>{};let y=n.gE(t=>{(0,l.sx)("try_it_out_drafts_picker_menu_opened",{hubFileId:e.id,searchSessionId:h}),f((0,s.to)({type:i._,data:{payload:t}}))},{isFreemiumPreview:r,adminReviewerOverride:t,skipWorkspaceSelection:E||p,userId:m?.id,openInNewTab:_});return()=>{f(y(e))}}},240082:(e,t,r)=>{r.d(t,{I:()=>n});var a=r(848755),l=r(448160);function n(){return(0,a.j6)().name===l.e0.RESOURCE_HUB_LIGHTBOX_RDP}},191095:(e,t,r)=>{r.d(t,{Y:()=>s});var a=r(565698),l=r(790627),n=r(531211),i=r(889323);function s(e,t,r=null,o=null){let c=(0,a.bc)(i.qjT,{resourceId:e,resourceType:t,orgId:r,teamId:r?null:o}),d=c.data?(0,n.eU)(c.data,t):void 0;return{status:c.status,favorite:d,hasMaxFavorites:!!c.data?.favoritedResources?.numFavorites&&(0,n.tW)(c.data?.favoritedResources.numFavorites),userSidebarSections:c.data?.currentUser?(0,l.oA)(c.data.currentUser.userSidebarSections):null,orderedSidebarSections:c.data?.currentUser.baseOrgUser?.fileBrowserPreferences?.orderedSidebarSections}}},721266:(e,t,r)=>{r.d(t,{Q:()=>E,S:()=>m});var a=r(468882),l=r(212643),n=r(790627),i=r(922902),s=r(56857),o=r(622038),c=r(553538),d=r(511245),u=r(889323),p=r(590195),_=r(565117),f=r(520807),h=r(533222);let E=(0,h.nF)(async(e,t,{loadingKey:r})=>{let s=!1;try{s=!!(0,n.oA)((await (0,l.Ek)(u.jmg,{fileKey:t.file_key})).deviceTryFile)}catch(e){(0,i.x1)("claimFigJamTryFile","Request failed for fetching LG DeviceTryFileView",e,{reportAsSentryError:!0})}try{let l;l=s?f.L.claimDeviceFile({fileKey:t.file_key}):_.Uy.claimTryFile({fileKey:t.file_key,folderId:t.folder_id}),(0,p.N)(l,e,r);let{data:n}=await l,{save_location:i,folder_name:o,org_id:u}=n.meta,{user:h,currentUserOrgId:E,selectedView:m}=e.getState(),y=(0,a.t)("figjam_try.this_file_has_been_saved_to_drafts");if("team"===i&&o&&(y=(0,a.t)("figjam_try.this_file_has_been_saved_to_folder_name",{folder_name:o})),u&&u!==E&&h){let t={userId:h.id,orgId:u};e.dispatch(d._l({workspace:t,view:m}))}e.dispatch(c.F.enqueue({message:y}))}catch(t){e.dispatch(o.s.error("Unable to save file. Please try again later."))}}),m=(0,h.nF)(async(e,{userName:t,file_key:r},{loadingKey:l})=>{try{await s.Ay.put(`/api/try/file/${r}`,{name:(0,a.t)("figjam_try.default_filename",{userName:t})})}catch(e){console.error(e)}})},12440:(e,t,r)=>{let a;r.d(t,{T:()=>u,Z:()=>p});var l=r(622038),n=r(324835),i=r(605020),s=r(554841),o=r(534752),c=r(661435),d=r(533222);let u=(0,d.nF)((e,{fileKey:t,versionId:r})=>{o.W.getVersion({fileKey:t,versionId:r}).then(({data:t})=>{let r=t.meta.version;e.dispatch(s.to({type:c.y,data:{description:r.description,label:r.label,savepointID:r.id,isEditingMergeSavepoint:!0}}))},()=>{e.dispatch(l.s.error("An error occurred while retrieving the file history."))})}),p=(0,d.nF)(async(e,{fileKey:t},{liveStore:c})=>{try{let{data:l}=await o.W.getVersions({fileKey:t,pageSize:100}),d=await c.fetchFile(t),u=l.meta.versions;e.dispatch(s.to({type:a??=(0,i.Ju)(n.A.createLazyComponent(()=>Promise.all([r.e(743),r.e(6221),r.e(1614),r.e(1821),r.e(3402),r.e(973),r.e(1283),r.e(7653),r.e(9525),r.e(6241),r.e(689),r.e(5814),r.e(4349),r.e(7888),r.e(6959),r.e(1414),r.e(7234),r.e(8858),r.e(2726),r.e(8134),r.e(7059),r.e(8946),r.e(8717)]).then(r.bind(r,318683)).then(e=>e.FileRestoreFromVersionModal),(0,i.Ij)("FileRestoreFromVersionModal"))),data:{fig:d,versions:u}}))}catch(t){e.dispatch(l.s.error("An error occurred while retrieving the file history."))}})},827716:(e,t,r)=>{r.d(t,{j:()=>s});var a=r(24989),l=r(641567),n=r(693181),i=r(91094);let s=new class{constructor(){this.ResourceUseSchemaValidator=(0,n.YV)("ResourceUseSchema",i.tF,null)}async addResourceUse(e){try{return await this.ResourceUseSchemaValidator.validate(({xr:t})=>"resourceId"in e?t.post(`/api/resource_uses/${e.resourceId}`):t.post(`/api/resource_uses/template/${e.templateId}`))}catch(e){(0,l.$D)(a.e.COMMUNITY,e)}}}},43638:(e,t,r)=>{r.d(t,{T:()=>n});var a=r(918468),l=r(240082);function n(){let e=(0,l.I)(),t=(0,a.AG)();return e||t}},655534:(e,t,r)=>{r.d(t,{Q:()=>o,R:()=>s});var a=r(716976),l=r(88839),n=r(565698),i=r(889323);function s(e){return{canRead:e.canRead,canFavorite:e.canRead&&!e.isFavorited,canUnfavorite:e.canRead&&e.isFavorited}}function o(e,t=!0){let r=(0,a.useMemo)(()=>e.map(e=>({prototypeId:e})),[e]),c=(0,n.p)(i.vE,r,{enabled:t});return(0,a.useMemo)(()=>l.Qw.all(c.map(e=>e.result)).transform(e=>{let t={};for(let r of e){let e=r.prototype;e&&(t[e.id]=s(e))}return t}),[c])}},454093:(e,t,r)=>{r.d(t,{Cm:()=>d,xD:()=>p});var a=r(716976),l=r(237420),n=r(433960),i=r(629220),s=r(369104),o=r(655534),c=r(359298);function d(e,t=!0){return function(e,t=!0){return{files:(0,s.IT)(e.fileKeys||u,t),repos:(0,c.k8)(e.repoIds||u,t),prototypes:(0,o.Q)(e.prototypeIds||u,t)}}(a.useMemo(()=>{let t={fileKeys:[],repoIds:[],prototypeIds:[]};return e.forEach(e=>{if(e.type===n.nb.FILE)t.fileKeys.push(n.Tf.getId(e));else if(e.type===n.nb.REPO)t.repoIds.push(n.Tf.getId(e));else if(e.type===n.nb.PROTOTYPE){let r=e.prototype.id;t.prototypeIds.push(r)}}),t},[e]),t)}let u=443==r.j?[]:null;function p({enabled:e=!0}={}){let t=(0,l.d4)(e=>e.tileSelect),r=a.useMemo(()=>[...Object.keys(t[i.F.FILES]),...Object.keys(t[i.F.PINNED_FILES])],[t]),n=a.useMemo(()=>Object.keys(t[i.F.REPOS]),[t]),d=a.useMemo(()=>Object.keys(t[i.F.PROTOTYPES]).map(e=>{if(!e.includes(","))throw Error(`Expected prototype id ${e} to be a client-side generated id`);let[t,r,a]=e.split(",");return a}),[t]);return{filePermissions:(0,s.IT)(r,e),repoPermissions:(0,c.k8)(n,e),protoPermissions:(0,o.Q)(d,e)}}},926110:(e,t,r)=>{function a(){return null}r.d(t,{A:()=>l,S:()=>n}),r(13607),r(792050),new(r(451336)).b({name:"litmus",dependencies:[],exports:{"./components":"./components.ts","./litmus_view_selector":"./litmus_view_selector.ts","./is_litmus":"./is_litmus.ts"},sideEffects:!1,friendFiles:[],routeHints:["litmus"],eslint:{rules:{"react/no-array-index-key":"off","@typescript-eslint/no-explicit-any":"off"}}});let l=a,n=a},847669:(e,t,r)=>{r.d(t,{OF:()=>l,e7:()=>a});let a=function(){return!1},l=function(){return!1}},936724:(e,t,r)=>{r.d(t,{F:()=>d});var a=r(104076),l=r(716976),n=r(468882),i=r(890),s=r(622038),o=r(800406);let c=class e extends l.PureComponent{constructor(e){super(e),this.state={loaded:!1,error:null,isOpen:!1}}componentDidMount(){e.singleton=this}componentWillUnmount(){e.singleton=null}init(){return(0,o.L3)().then(()=>{this.state.loaded||(window.zE("webWidget","hide"),window.zE("webWidget:on","open",()=>{this.setState({isOpen:!0})}),window.zE("webWidget:on","close",()=>{this.setState({isOpen:!1}),this.close(!0)})),this.setState({loaded:!0,error:null})}).catch(e=>{throw e&&console.error("Unable to load Zendesk Web Widget:",e),this.setState({loaded:!1,error:e}),e})}open(e){let{userEmail:t,userName:r}=this.props;if((0,i.O_)()&&t?.endsWith("@figma.com")){this.props.dispatch(s.s.flash("Hello there! Sadly Figmates cannot use this feature. Please use a non-@figma.com account to test Zendesk"));return}this.init().then(()=>(0,o.wB)({name:r,email:t},e)).then(()=>{this.state.isOpen||(0,o.b_)()}).catch(()=>{this.props.dispatch(s.s.flash((0,n.t)("help_widget.zendesk.unavailable_error_message",{supportEmail:(0,i.W4)()})))})}close(e=!1){this.state.loaded&&(this.state.isOpen||e)&&(window.zE("webWidget","hide"),window.zE("webWidget","close"))}isError(){return!!this.state.error}render(){return(0,a.jsx)("div",{className:"zendesk-web-widget"})}};c.singleton=null;let d=443==r.j?c:null},111588:(e,t,r)=>{r.d(t,{xv:()=>_,AV:()=>u,Bm:()=>p});var a=r(104076),l=r(716976),n=r(414393),i=r(611290),s=r(511570),o=r.n(s),c=r(213242);let d="loading_page--fadeOut--Ho-om";function u({backgroundColor:e="default",children:t,loaded:r,loadingElementId:s,loadingElementClassName:u,delay:p=0}){let _=l.useRef(null),f=l.useRef(null);l.useEffect(()=>{if(_.current&&!f.current&&!(0,i.Lg)()){let e=document.getElementById(s);e&&(f.current=e.cloneNode(!0),_.current.appendChild(f.current))}},[s,_]);let h={animationDelay:`${p}ms`,backgroundColor:function(e){if("default"===e)return"var(--color-bg)";(0,n.xb)(e)}(e)};return(0,a.jsxs)(a.Fragment,{children:[r&&t,(0,a.jsx)("div",{ref:_,className:o()(u,c.s.eventsNone.absolute.top0.left0.right0.bottom0.overflowHidden.opacity1.$,{[d]:r}),style:h})]})}function p({result:e,children:t,...r}){let l="loaded"===e.status;return(0,a.jsx)(u,{...r,loaded:l,children:l?t(e.data):null})}function _({loaded:e,loadingSkeletonElement:t,showElementBeforeLoaded:r,children:n}){let i=l.useRef(e);return(0,a.jsxs)("div",{className:c.s.grid.$,children:[(e||r)&&(0,a.jsx)("div",{className:o()(c.s.gridRowEnd1.gridColumnEnd1.$),children:n}),(0,a.jsx)("div",{className:o()(c.s.eventsNone.gridRowEnd1.gridColumnEnd1.overflowHidden.$,{[d]:e,[c.s.opacity1.$]:!i.current}),children:t})]})}},167650:(e,t,r)=>{r.d(t,{e:()=>T});var a=r(104076),l=r(38989),n=r(536760),i=r(565698),s=r(716976),o=r(202039),c=r(52667),d=r(818727),u=r(428444),p=r(29038),_=r(708688),f=r(213242);function h({thumbnailUrl:e,thumbnailType:t,clientMeta:r,lastTouchedAt:l,config:n,...i}){let[o,d]=s.useState(1),[u,p]=s.useState({x:0,y:0}),_=s.useRef(null),h=n?.get("FJZoomableThumbnailsScale",3.5)??3.5,E=s.useCallback(e=>{let t=_.current;if(!t)return;let r=t.getBoundingClientRect();p({x:e.clientX-r.left,y:e.clientY-r.top})},[p]),m=s.useCallback(()=>{d(h)},[h,d]),y=s.useCallback(()=>{d(1)},[d]);return(0,a.jsx)("div",{className:f.s.hFull.wFull.$,onMouseMove:E,onMouseEnter:m,onMouseLeave:y,onDragStart:y,children:(0,a.jsx)("div",{ref:_,className:f.s.hFull.wFull.$,children:(0,a.jsx)(c.V,{thumbnailUrl:e,thumbnailType:t,lastTouchedAt:l,clientMeta:r,addtlStyles:{transform:`scale(${o})`,transformOrigin:`${u.x}px ${u.y}px`,transition:`transform 0.4s ease ${o>1?.5:0}s`},draggable:!0,...i})})})}function E({thumbnailUrl:e,thumbnailType:t,additionalThumbnailUrls:r,clientMeta:l,lastTouchedAt:n,editorType:i,...f}){let{getConfig:E}=(0,o.I7)("exp_search_fb_thumbnail_previews"),m=E(),y=m.get("shouldAutoplay",!0),b=s.useRef(null);switch(i){case u._Y.WHITEBOARD:if(t===d.F.WHITEBOARD)break;return(0,a.jsx)(h,{thumbnailUrl:e,clientMeta:l,thumbnailType:t,lastTouchedAt:n,config:m,...f});default:let v=(r||[]).slice(0,6);if(v.length<3)break;if(y)return(0,a.jsx)(p.A,{ref:b,thumbnailUrl:e,additionalThumbnailUrls:v,clientMeta:l,thumbnailType:t,lastTouchedAt:n,...f});return(0,a.jsx)(_._,{ref:b,thumbnailUrl:e,additionalThumbnailUrls:v,clientMeta:l,thumbnailType:t,lastTouchedAt:n,...f})}return(0,a.jsx)(c.V,{thumbnailUrl:e,clientMeta:l,thumbnailType:t,lastTouchedAt:n,...f})}var m=r(191519),y=r(293675),b=r(433960),v=r(889323);let I=e=>{let t=b.Tf.getIsThumbnailFullWidth(e),r=b.Tf.getEditorType(e);return e.type===b.nb.PROTOTYPE?d.F.PROTOTYPE:e.type===b.nb.OFFLINE_FILE?d.F.OFFLINE:r===u._Y.SLIDES?d.F.SLIDES:r===u._Y.WHITEBOARD?t?d.F.WHITEBOARD:d.F.DEFAULT_WHITEBOARD:t?d.F.DESIGN:d.F.DEFAULT_DESIGN};function T({tile:e,interactiveThumbnailsEnabled:t,...r}){let s=b.Tf.getIsPasswordProtected(e),o=(0,n.md)((0,b.hi)({tile:e,enabled:s})),d=b.Tf.getThumbnailUrl(e),u=b.Tf.getTouchedAt(e),p=I(e),_=b.Tf.getFileOrMainBranchKey(e);if((0,i.bc)((0,v.N6_)((0,l.kc)().iam_pv2_lg_pol_smoke&&_?{fileKey:_,linkAccessOverrideKey:null}:null)),s){if("loading"===o.status)return(0,a.jsx)(y.q,{...r});if(!o.unwrapOr(!1))return(0,a.jsx)(m.N,{thumbnailType:p,...r})}let f=b.Tf.getClientMeta(e),h=b.Tf.getEditorType(e),T=b.Tf.getFileOrMainBranchKey(e);return(0,l.kc)().scrub_file_browser_search_results&&t&&d?(0,a.jsx)(E,{thumbnailUrl:d,thumbnailType:p,additionalThumbnailUrls:b.Tf.getPreviewThumbnailUrls(e)??[],clientMeta:f,lastTouchedAt:u,editorType:h,...r},T):(0,a.jsx)(c.V,{thumbnailUrl:d,clientMeta:f,thumbnailType:p,lastTouchedAt:u,...r},T)}},29038:(e,t,r)=>{r.d(t,{A:()=>_});var a=r(104076),l=r(716976),n=r(24989),i=r(511570),s=r.n(i),o=r(922902),c=r(52667),d=r(213242),u=r(950799),p=r(670768);let _=l.forwardRef(({thumbnailUrl:e,additionalThumbnailUrls:t,thumbnailType:r,clientMeta:i,lastTouchedAt:_,...f},h)=>{let[E,m]=l.useState(0),[y,b]=l.useState(!1),[v,I]=l.useState(!1),T=l.useRef(null),w=l.useRef(void 0),R=l.useRef(void 0),[x,k]=l.useState(!1),O=(0,u.E)(e,t,r,!0),F=O.length,g=O[E];l.useEffect(()=>{x||Promise.all(t.map(e=>(0,u.N)(e))).then(()=>{k(!0)}).catch(e=>{(0,o.x1)(n.e.SEARCH,"[fb-scrubber] Error: Could not pre-load fragment thumbnails",e)})},[x,t]);let S=()=>{R.current||(R.current=window.setInterval(()=>{m(e=>(e+1)%F)},800))},C=()=>{R.current&&(clearInterval(R.current),R.current=void 0)},A=()=>{clearTimeout(w.current),w.current=void 0,b(!1),I(!1),C(),m(0)},N=(e,t)=>{if(C(),0!==t.buttons){A(),m(0);return}m(e)};if(l.useEffect(()=>{clearInterval(R.current),clearTimeout(w.current)},[]),!x)return(0,a.jsx)("div",{className:d.s.hFull.wFull.$,children:(0,a.jsx)(c.V,{thumbnailUrl:e,thumbnailType:r,lastTouchedAt:_,clientMeta:i,...f})});let P=Array.from({length:O.length}).map((e,t)=>(0,a.jsx)("div",{className:p.j6,onMouseEnter:v?e=>N(t,e):void 0,onMouseMove:v?e=>N(t,e):void 0,children:(0,a.jsx)("button",{className:s()(p.Om,{[p.o]:t===E})},t)},t));return(0,a.jsx)("div",{className:d.s.hFull.wFull.$,ref:h,onMouseEnter:()=>{b(!0),S(),w.current=window.setTimeout(()=>{I(!0)},200)},onMouseLeave:A,onDragStart:A,children:(0,a.jsxs)("div",{ref:T,className:d.s.hFull.wFull.$,children:[(0,a.jsx)("div",{className:p.rR}),(0,a.jsx)(c.V,{thumbnailUrl:g,thumbnailType:r,lastTouchedAt:_,clientMeta:i,draggable:!0,...f}),(0,a.jsx)("div",{className:s()(p.r$,{[p.R]:!y}),onMouseLeave:v?()=>{S()}:void 0,children:P})]})})})},950799:(e,t,r)=>{r.d(t,{E:()=>n,N:()=>l});var a=r(818727);function l(e){return new Promise((t,r)=>{let a=new Image;a.src=e,a.crossOrigin="anonymous",a.onload=()=>{t(e)},a.onerror=e=>{r(e)}})}function n(e,t,r,l){return 0===t.length?[e]:l||r===a.F.SLIDES?[e,...t]:[e,...t,e]}},708688:(e,t,r)=>{r.d(t,{_:()=>h,i:()=>f});var a=r(104076),l=r(716976),n=r(24989),i=r(536760),s=r(511570),o=r.n(s),c=r(922902),d=r(52667),u=r(213242),p=r(950799),_=r(670768);let f=(0,i.eU)(new Set),h=l.forwardRef(({thumbnailUrl:e,additionalThumbnailUrls:t,thumbnailType:r,clientMeta:s,lastTouchedAt:h,showEmptyState:E,...m},y)=>{let[b,v]=l.useState(0),[I,T]=l.useState(b),[w,R]=l.useState(500),x=l.useRef(void 0),k=l.useRef(b),O=l.useRef(null);l.useEffect(()=>{k.current=b,x.current||(x.current=window.setTimeout(()=>{T(k.current),x.current=void 0,R(100)},w))},[b]);let[F,g]=l.useState(!1),S=(0,p.E)(e,t,r),C=S.length,A=S[I];l.useEffect(()=>{F||Promise.all(t.map(e=>(0,p.N)(e))).then(()=>{g(!0)}).catch(e=>{(0,c.x1)(n.e.SEARCH,"[fb-scrubber] Error: Could not pre-load fragment thumbnails",e)})},[F,t]);let N=l.useCallback(e=>{let t=O.current;if(!t)return;let r=t.getBoundingClientRect(),a=r.width/C;v(Math.max(0,Math.min(Math.floor((e.clientX-r.left)/a),C-1)))},[C]),P=()=>{clearTimeout(x.current),x.current=void 0,v(0),T(0),R(500)},j=(0,i.Xr)(f),L="IntersectionObserver"in window,[M,D]=l.useState(!1);return(l.useEffect(()=>{if(!L||!F||"function"==typeof y||!y?.current)return;let e=y.current,t=new IntersectionObserver(([e])=>{D(e.isIntersecting)},{threshold:1});return t.observe(e),()=>{t.unobserve(e)}},[y,t,F,L]),l.useEffect(()=>(M?j(t=>new Set(t).add(e)):j(t=>{let r=new Set(t);return r.delete(e),r}),()=>{j(t=>{let r=new Set(t);return r.delete(e),r})}),[M,e,j]),F)?(0,a.jsx)("div",{className:o()(u.s.hFull.wFull.$,_.xn),ref:y,onMouseMove:N,onMouseEnter:()=>{R(500)},onMouseLeave:P,onDragStart:P,children:(0,a.jsxs)("div",{ref:O,className:u.s.hFull.wFull.$,children:[(0,a.jsx)("div",{"data-onboarding-key":M?"scrubbable-thumbnail":void 0,className:_.rR}),(0,a.jsx)(d.V,{thumbnailUrl:A,thumbnailType:r,lastTouchedAt:h,clientMeta:s,draggable:!0,...m})]})}):(0,a.jsx)("div",{onMouseEnter:E?e=>{e.target.style.transition="opacity 0.2s ease-in-out",e.target.style.opacity="0.5",setTimeout(()=>{e.target.style.opacity="1"},200)}:void 0,className:u.s.hFull.wFull.$,children:(0,a.jsx)(d.V,{thumbnailUrl:e,thumbnailType:r,lastTouchedAt:h,clientMeta:s,...m})})})},753334:(e,t,r)=>{r.d(t,{z:()=>n});var a=r(38989),l=(e=>(e.BETA="BETA",e.UNKNOWN="UNKNOWN",e))(l||{});function n(){return(0,a.kc)().sites_beta?"BETA":"UNKNOWN"}},48374:(e,t,r)=>{r.d(t,{v:()=>n});var a=r(716976),l=r(104076);let n=(0,a.memo)(function(e){return(0,l.jsx)("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e,"data-fpl-icon-size":"24",children:(0,l.jsx)("path",{fill:"var(--fpl-icon-color, var(--color-icon))",fillRule:"evenodd",d:"M17 14.942V16.5c0 .005 0 .024-.02.063a.8.8 0 0 1-.153.198c-.183.18-.498.388-.969.584-.937.39-2.3.655-3.858.655s-2.921-.265-3.858-.655c-.47-.196-.786-.404-.969-.584a.8.8 0 0 1-.154-.198A.14.14 0 0 1 7 16.5v-1.558c.274.169.593.316.94.442 1.063.387 2.499.616 4.06.616s2.997-.23 4.06-.616a5 5 0 0 0 .94-.442m0-1.442c0 .076-.04.212-.258.4-.216.185-.558.375-1.024.544-.927.338-2.242.556-3.718.556s-2.79-.218-3.718-.556c-.466-.17-.808-.359-1.024-.545C7.041 13.712 7 13.576 7 13.5v-1.558c.274.169.593.316.94.442 1.063.387 2.499.616 4.06.616s2.997-.23 4.06-.616a5 5 0 0 0 .94-.442zm-9.742-2.6c-.217-.188-.258-.324-.258-.4V8.942c.274.169.593.316.94.442C9.003 9.771 10.439 10 12 10s2.997-.23 4.06-.616c.347-.126.666-.273.94-.442V10.5c0 .076-.04.212-.258.4-.216.185-.558.375-1.024.544-.927.338-2.242.556-3.718.556s-2.79-.218-3.718-.556c-.466-.17-.808-.359-1.024-.545M17 7.5c0-.005 0-.024-.02-.063a.8.8 0 0 0-.153-.198c-.183-.18-.498-.388-.969-.584C14.921 6.265 13.558 6 12 6s-2.921.265-3.858.655c-.47.196-.786.404-.969.584a.8.8 0 0 0-.154.198A.14.14 0 0 0 7 7.5c0 .076.04.212.258.4.216.185.558.375 1.024.544C9.209 8.782 10.524 9 12 9s2.79-.218 3.718-.556c.466-.17.808-.359 1.024-.545.217-.187.258-.323.258-.399m-11 0C6 6.12 8.686 5 12 5s6 1.12 6 2.5v9c0 1.38-2.686 2.5-6 2.5s-6-1.12-6-2.5z",clipRule:"evenodd"})})})},621083:(e,t,r)=>{r.d(t,{s:()=>n});var a=r(716976),l=r(104076);let n=(0,a.memo)(function(e){return(0,l.jsx)("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e,"data-fpl-icon-size":"24",children:(0,l.jsx)("path",{fill:"var(--fpl-icon-color, var(--color-icon))",d:"M7.5 6a.5.5 0 0 1 .5.5v9.793l1.146-1.146a.5.5 0 0 1 .707.707l-2 2a.5.5 0 0 1-.707 0l-2-2-.064-.079a.5.5 0 0 1 .693-.693l.078.064L7 16.293V6.5a.5.5 0 0 1 .5-.5m10 10a.5.5 0 0 1 0 1h-5a.5.5 0 0 1 0-1zm0-3a.5.5 0 0 1 0 1h-5a.5.5 0 0 1 0-1zm0-3a.5.5 0 0 1 0 1h-5a.5.5 0 0 1 0-1zm0-3a.5.5 0 0 1 0 1h-5a.5.5 0 0 1 0-1z"})})})},133586:(e,t,r)=>{r.d(t,{R:()=>n});var a=r(716976),l=r(104076);let n=(0,a.memo)(function(e){return(0,l.jsx)("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e,"data-fpl-icon-size":"24",children:(0,l.jsx)("path",{fill:"var(--fpl-icon-color, var(--color-icon))",fillRule:"evenodd",d:"M18 12a6 6 0 1 1-12 0 6 6 0 0 1 12 0m1 0a7 7 0 1 1-14 0 7 7 0 0 1 14 0m-6.5-3.5a.5.5 0 0 0-1 0V12a.5.5 0 0 0 .146.354l2 2a.5.5 0 0 0 .708-.708L12.5 11.793z",clipRule:"evenodd"})})})}}]);

//# debugId=1e41dcc8-6031-5254-b0a3-32aae9ad5008

//# sourceMappingURL=https://admin.figma.com/admin/webpack-artifacts/eef679be90c35e40e62452e043b11c319bd4190b/7059-f35b16a3b81df668.min.js.map