"use strict";
!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="927a6de9-f8de-5779-8fb4-c1be5e51be98")}catch(e){}}();
(globalThis.webpackChunk_figma_web_bundler=globalThis.webpackChunk_figma_web_bundler||[]).push([[926],{877214:(e,t,r)=>{r.d(t,{f:()=>i});class i{constructor(){this.inFlightOperations=new Map}run(e,t){let r=this.inFlightOperations.get(e);if(r)return r;let i=(async()=>{try{return await t()}finally{this.inFlightOperations.delete(e)}})();return this.inFlightOperations.set(e,i),i}}},644216:(e,t,r)=>{r.d(t,{q:()=>c});var i=r(906338),o=r(877214),n=r(120401),a=r(537550),l=r(93288),s=r(734378);let d=new o.f,c=(0,s.nh)(async e=>{let{fileKey:t,context:r,plan:o}=e,s="ai_assistant"===r?n.fC:n.Tv,c=o.planRecordId;if(!c){let e="No plan record id, cannot create thread";return(0,n.fL)(new s(e),"create_thread_record",{fileKey:t}),{status:"error",error:e}}let u=async()=>{let o=a.J.createVital(`${r}.chat_sdk.thread_creation_time`,{level:i.$b.INFO});o.start();let d=await (0,n.kA)(o,()=>l.NH.createThread({fileKey:t,threadType:"ai_assistant"===r?"assistant":void 0,planId:c,privacyMode:"code_chat"===r?"file":"user",nodeGuid:"code_chat"===r?e.isOldFile?"old_file":e.nodeGuid:void 0}));if(o.stop(),!d.success){let{statusCode:e,cause:r,errorData:i}=d,o=`ApiAiChat.createThread failed, status: ${e}`;return(0,n.fL)(new s(o),"create_thread_record",{fileKey:t,statusCode:e,cause:r,errorData:i}),{status:"error",error:o}}return d.data.meta.alreadyExists&&(0,n.fL)(new s("ApiAiChat.createThread succeeded but thread already exists"),"create_thread_record",{fileKey:t,threadId:d.data.meta.threadId}),{status:"created",threadId:d.data.meta.threadId,isOldFile:"code_chat"===r&&e.isOldFile}};if("code_chat"!==r)return await u();{let i=`${t}:${r}:${e.nodeGuid}`;return await d.run(i,u)}})},801830:(e,t,r)=>{if(r.d(t,{G:()=>o}),/^(3679|443)$/.test(r.j))var i=r(190949);function o(e){return"org"===e.tier||"enterprise"===e.tier?(0,i.z)("make_chat_sdk_phase1_org"):"pro"===e.tier||"student"===e.tier?(0,i.z)("make_chat_sdk_phase1_pro"):(0,i.z)("make_chat_sdk_phase1_starter")}},190949:(e,t,r)=>{r.d(t,{z:()=>n});var i=r(38989),o=r(537550);function n(e){let t=!!(0,i.kc)()[e];return o.J.trackFeatureFlagInView(e,t)}},36659:(e,t,r)=>{r.d(t,{V:()=>u,Y:()=>d});var i=r(153472),o=r(818822),n=r(191427),a=r(649892),l=r(328201);if(/^(3679|443)$/.test(r.j))var s=r(414393);function d(e){let t={userId:e.userId,messageGuid:e.guid,createdAtMs:e.createdAtMs,scenegraphSentAt:e.scenegraphSentAt};switch(e.role){case"user":{let r=function(e,t){let r=(0,l.XL)(e,"code-chat-snapshot-restore");if(r){let e={type:"restore",plainText:"",codeSnapshot:{codeSnapshotKey:r.legacyS3CodeSnapshotKey,blobstoreContentKey:r.blobstoreContentKey},title:r.title},i=c(o.K$p.SYSTEM_MESSAGE,t);return i.textContent=JSON.stringify(e),i}let i=(0,l.XL)(e,"code-chat-manual-edit");if(i){let e={type:"manual_edit",plainText:"",changedFiles:i.changedFiles,codeSnapshot:i.legacyS3CodeSnapshotKey?{codeSnapshotKey:i.legacyS3CodeSnapshotKey}:void 0,title:i.title},r=c(o.K$p.SYSTEM_MESSAGE,t);return r.textContent=JSON.stringify(e),r}let n=(0,l.XL)(e,"code-chat-duplicated-file");if(n){let e={type:"duplicated_file",plainText:n.plainText,fileKeyHash:n.fileKeyHash},r=c(o.K$p.SYSTEM_MESSAGE,t);return r.textContent=JSON.stringify(e),r}let a=(0,l.XL)(e,"code-chat-deleted-chat-history");if(a){let e={type:"deleted_chat_history",plainText:"",userId:a.userId,timestamp:Number(a.timestamp)},r=c(o.K$p.SYSTEM_MESSAGE,t);return r.textContent=JSON.stringify(e),r}}(e,t);if(r)return r;let n={plainText:"",imports:[]};for(let t of e.content)switch(t.type){case"text":n.plainText=t.text;break;case"enabled-libraries":case"selected-node-ids":break;case"code-chat-model-config-version":n.modelConfigVersion=t.modelConfigVersion;break;case"code-chat-library-keys":n.libraryKey=t.libraryKeys[0],n.libraryKeys=[...t.libraryKeys];break;case"code-chat-errors":n.errors=[...t.errors],n.hidden=!0,n.plainText="";break;case"cortex-request-uuid":n.requestUuid=t.requestUuid;break;case"code-chat-origin":n.origin=t.origin;break;case"code-chat-inspected-component":n.inspectedComponent={filePath:t.filePath,tagName:t.tagName};break;case"code-chat-inspected-library":n.inspectedLibrary={folderPath:t.folderPath,libraryName:t.libraryName};break;case"code-chat-snapshot-restore":case"code-chat-manual-edit":case"code-chat-duplicated-file":case"code-chat-deleted-chat-history":throw new i.T(`${t.type} should have been handled by maybeHandleNodeChatSystemMessage. Probably a bug`);case"code-chat-backfill-image-import":n.imports.push({type:"image",guid:t.guid,imageHash:t.imageHash});break;case"code-chat-backfill-code-import":n.imports.push({type:"node",guid:t.guid,communityAttribution:t.communityAttribution});break;case"code-chat-backfill-diff-import":n.imports.push({type:"diff",guid:t.guid,diffs:t.diffs});break;case"code-chat-backfill-inspected-element":{let{type:e,...r}=t;n.inspectedElement=r;break}case"code-chat-code-import-ref":n.imports.push(t.blobData?t.blobData:{type:"node",guid:"placeholder"});break;case"code-chat-image-import-ref":n.imports.push(t.blobData?t.blobData:{type:"image",guid:"placeholder"});break;case"code-chat-diff-import-ref":n.imports.push(t.blobData?t.blobData:{type:"diff",guid:"placeholder",diffs:""});break;case"code-chat-inspected-element-ref":n.inspectedElement={filePath:t.filePath,snippetStartLine:t.snippetStartLine,tagLine:t.tagLine,tagName:t.tagName,snippet:"",fileImports:"",componentHeader:""};break;case"image":case"jsx":throw new i.T(`Make does not support message part with type ${t.type}`);default:(0,s.xb)(t)}let d=c(o.K$p.USER_MESSAGE,t);return d.textContent=(0,a.J6)(n),d}case"assistant":{let r=[],n=[],l={plainText:""};for(let t of e.content)switch(t.type){case"text":throw new i.T("Cannot use 'text' for Code Chat assistant messages. Use 'code-chat-assistant-text' instead.");case"tool-call":r.push({toolCallId:t.toolCallId,toolName:t.toolName,argsJson:t.argsJSON});break;case"code-chat-legacy-assistant-tool-result":{let{type:e,...r}=t;n.push({...r});break}case"reasoning":l.signedReasoning={text:t.text,signature:t.signature??void 0};break;case"redacted-reasoning":l.redactedReasoning=t.data;break;case"code-chat-model-config-version":l.modelConfigVersion=t.modelConfigVersion;break;case"code-chat-assistant-text":l.plainText=t.text,l.mode=t.textMode;break;case"code-chat-assistant-code":case"code-chat-provider-metadata":break;case"code-chat-assistant-title":l.title=t.title;break;case"code-chat-legacy-s3-code-snapshot":{let e=l.codeSnapshot??{};l.codeSnapshot={...e,codeSnapshotKey:t.codeSnapshotKey,fileVersionId:"-1"};break}case"code-chat-code-snapshot":{let e=l.codeSnapshot??{};l.codeSnapshot={...e,blobstoreContentKey:t.blobstoreContentKey,fileVersionId:"-1"};break}default:(0,s.xb)(t)}let d=c(o.K$p.ASSISTANT_MESSAGE,t);return d.textContent=(0,a.J6)(l),d.toolCalls=r,d.toolResults=n,d}case"tool":{let r=[],i={plainText:""};for(let t of e.content)switch(t.type){case"tool-result":r.push({toolCallId:t.toolCallId,toolName:t.toolName,resultJson:t.resultJSON});break;case"tool-result-ref":r.push({toolCallId:t.toolCallId,toolName:t.toolName,resultJson:t.blobData&&null!=t.blobData.result&&"object"==typeof t.blobData.result?JSON.stringify(t.blobData.result):JSON.stringify({success:!0,unhydrated:!0,message:"Tool result not hydrated from ChatSDK Blobstore",data:"placeholder"})});break;case"code-chat-model-config-version":i.modelConfigVersion=t.modelConfigVersion;break;default:(0,s.xb)(t)}let n=c(o.K$p.TOOL_MESSAGE,t);return n.textContent=(0,a.J6)(i),n.toolResults=r,n}case"system":throw new i.T("Chat SDK does not store system messages in the database (yet), we should never get here");default:(0,s.xb)(e)}}function c(e,t){let r=(0,a.ic)(e,t.userId??"placeholderUserId",()=>"placeholderMessageGuid");return void 0!==t.messageGuid&&(r.id=t.messageGuid),r.sentAt64=t.scenegraphSentAt??t.createdAtMs.toString(),r}async function u({aiChatMessages:e,partTypesToHydrate:t,shouldHydrateToolCallback:r,blobstoreCache:i,threadId:o,fileKey:a,logWarn:l}){let s=[];for(let[i,o]of e.entries())for(let[e,a]of o.content.entries())if((0,n.DN)(a)&&void 0===a.blobData){let o=t.includes(a.type),n="tool-result-ref"===a.type&&r(a.toolName);(o||n)&&s.push({messageIndex:i,partIndex:e,refPart:structuredClone(a)})}if(0===s.length)return{aiChatMessages:e,numHydratedRefParts:0};let d=s.map(({refPart:e})=>e.blobstoreContentKey),c=await i.fetchBlobs({fileKey:a,threadId:o,contentKeys:d});for(let{refPart:e}of s){let t;let r=c.get(e.blobstoreContentKey);if(!r)continue;try{t=JSON.parse(new TextDecoder().decode(r))}catch(t){l(`Failed to parse JSON for ${e.type} part, content key ${e.blobstoreContentKey}`);continue}let i=n.hE[e.type].shape.blobData.unwrap().safeParse(t);if(!i.success){l(`Invalid JSON schema for ${e.type} part, content key ${e.blobstoreContentKey}`);continue}e.blobData=i.data}return{aiChatMessages:function(e,t){let r={};for(let[t,i]of e.entries())r[t]=[...i.content];for(let{messageIndex:e,partIndex:i,refPart:o}of t)r[e][i]=o;return e.map((e,t)=>{let i=r[t];return i?{...e,content:i}:e})}(e,s),numHydratedRefParts:s.length}}},897701:(e,t,r)=>{r.d(t,{H:()=>s,pQ:()=>a});var i=r(814975),o=r(153472),n=r(248005);function a(e){return n.g.includes(e)}function l(e,t){let r=(function(e){let t=n.l[e];if(null==t)throw new o.T(`Unknown message part type: ${e}. Did you add a new message part type to a proto file? Run \`pnpm --filter @figma/synapse-global generate-ai-chat-proto\` to regenerate Typescript bindings.`);return t})(e).decode(t);return{type:e,...r}}function s(e,t,r){try{let o=function(e){let t=atob(e),r=new Uint8Array(t.length);for(let e=0;e<t.length;e++)r[e]=t.charCodeAt(e);return r}(t);return r?.isContentCompressed&&(o=(0,i.UD)(o)),l(e,o)}catch(n){let o=function(e){let t=new Uint8Array(e.length/2);for(let r=0;r<e.length;r+=2){let i=e.slice(r,r+2);t[r/2]=parseInt(i,16)}return t}(t);return r?.isContentCompressed&&(o=(0,i.UD)(o)),l(e,o)}}},248005:(e,t,r)=>{r.d(t,{g:()=>e4,l:()=>e8});var i=r(885432);function o(){return{selectedNodeIds:[]}}let n={encode(e,t=new i.fI){for(let r of e.selectedNodeIds)t.uint32(10).string(r);return t},decode(e,t){let r=e instanceof i.V5?e:new i.V5(e),n=void 0===t?r.len:r.pos+t,a=o();for(;r.pos<n;){let e=r.uint32();switch(e>>>3){case 1:if(10!==e)break;a.selectedNodeIds.push(r.string());continue}if((7&e)==4||0===e)break;r.skip(7&e)}return a},fromJSON:e=>({selectedNodeIds:u.Array.isArray(e?.selectedNodeIds)?e.selectedNodeIds.map(e=>u.String(e)):[]}),toJSON(e){let t={};return e.selectedNodeIds?.length&&(t.selectedNodeIds=e.selectedNodeIds),t},create:e=>n.fromPartial(e??{}),fromPartial(e){let t=o();return t.selectedNodeIds=e.selectedNodeIds?.map(e=>e)||[],t}};function a(){return{libraries:[]}}let l={encode(e,t=new i.fI){for(let r of e.libraries)d.encode(r,t.uint32(10).fork()).join();return t},decode(e,t){let r=e instanceof i.V5?e:new i.V5(e),o=void 0===t?r.len:r.pos+t,n=a();for(;r.pos<o;){let e=r.uint32();switch(e>>>3){case 1:if(10!==e)break;n.libraries.push(d.decode(r,r.uint32()));continue}if((7&e)==4||0===e)break;r.skip(7&e)}return n},fromJSON:e=>({libraries:u.Array.isArray(e?.libraries)?e.libraries.map(e=>d.fromJSON(e)):[]}),toJSON(e){let t={};return e.libraries?.length&&(t.libraries=e.libraries.map(e=>d.toJSON(e))),t},create:e=>l.fromPartial(e??{}),fromPartial(e){let t=a();return t.libraries=e.libraries?.map(e=>d.fromPartial(e))||[],t}};function s(){return{libraryKey:"",libraryName:""}}let d={encode:(e,t=new i.fI)=>(""!==e.libraryKey&&t.uint32(10).string(e.libraryKey),""!==e.libraryName&&t.uint32(18).string(e.libraryName),t),decode(e,t){let r=e instanceof i.V5?e:new i.V5(e),o=void 0===t?r.len:r.pos+t,n=s();for(;r.pos<o;){let e=r.uint32();switch(e>>>3){case 1:if(10!==e)break;n.libraryKey=r.string();continue;case 2:if(18!==e)break;n.libraryName=r.string();continue}if((7&e)==4||0===e)break;r.skip(7&e)}return n},fromJSON:e=>({libraryKey:null!=e.libraryKey?u.String(e.libraryKey):"",libraryName:null!=e.libraryName?u.String(e.libraryName):""}),toJSON(e){let t={};return""!==e.libraryKey&&(t.libraryKey=e.libraryKey),""!==e.libraryName&&(t.libraryName=e.libraryName),t},create:e=>d.fromPartial(e??{}),fromPartial(e){let t=s();return t.libraryKey=e.libraryKey??"",t.libraryName=e.libraryName??"",t}},c={encode:(e,t=new i.fI)=>(""!==e.jsx&&t.uint32(10).string(e.jsx),t),decode(e,t){let r=e instanceof i.V5?e:new i.V5(e),o=void 0===t?r.len:r.pos+t,n={jsx:""};for(;r.pos<o;){let e=r.uint32();switch(e>>>3){case 1:if(10!==e)break;n.jsx=r.string();continue}if((7&e)==4||0===e)break;r.skip(7&e)}return n},fromJSON:e=>({jsx:null!=e.jsx?u.String(e.jsx):""}),toJSON(e){let t={};return""!==e.jsx&&(t.jsx=e.jsx),t},create:e=>c.fromPartial(e??{}),fromPartial(e){let t={jsx:""};return t.jsx=e.jsx??"",t}},u=(()=>{if("undefined"!=typeof globalThis)return globalThis;if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if("undefined"!=typeof global)return global;throw"Unable to locate global object"})();function f(){return{text:"",providerOptions:{}}}let p={encode:(e,t=new i.fI)=>(""!==e.text&&t.uint32(10).string(e.text),Object.entries(e.providerOptions).forEach(([e,r])=>{m.encode({key:e,value:r},t.uint32(18).fork()).join()}),t),decode(e,t){let r=e instanceof i.V5?e:new i.V5(e),o=void 0===t?r.len:r.pos+t,n=f();for(;r.pos<o;){let e=r.uint32();switch(e>>>3){case 1:if(10!==e)break;n.text=r.string();continue;case 2:{if(18!==e)break;let t=m.decode(r,r.uint32());void 0!==t.value&&(n.providerOptions[t.key]=t.value);continue}}if((7&e)==4||0===e)break;r.skip(7&e)}return n},fromJSON:e=>({text:eo(e.text)?er.String(e.text):"",providerOptions:ei(e.providerOptions)?Object.entries(e.providerOptions).reduce((e,[t,r])=>(e[t]=String(r),e),{}):{}}),toJSON(e){let t={};if(""!==e.text&&(t.text=e.text),e.providerOptions){let r=Object.entries(e.providerOptions);r.length>0&&(t.providerOptions={},r.forEach(([e,r])=>{t.providerOptions[e]=r}))}return t},create:e=>p.fromPartial(e??{}),fromPartial(e){let t=f();return t.text=e.text??"",t.providerOptions=Object.entries(e.providerOptions??{}).reduce((e,[t,r])=>(void 0!==r&&(e[t]=er.String(r)),e),{}),t}};function g(){return{key:"",value:""}}let m={encode:(e,t=new i.fI)=>(""!==e.key&&t.uint32(10).string(e.key),""!==e.value&&t.uint32(18).string(e.value),t),decode(e,t){let r=e instanceof i.V5?e:new i.V5(e),o=void 0===t?r.len:r.pos+t,n=g();for(;r.pos<o;){let e=r.uint32();switch(e>>>3){case 1:if(10!==e)break;n.key=r.string();continue;case 2:if(18!==e)break;n.value=r.string();continue}if((7&e)==4||0===e)break;r.skip(7&e)}return n},fromJSON:e=>({key:eo(e.key)?er.String(e.key):"",value:eo(e.value)?er.String(e.value):""}),toJSON(e){let t={};return""!==e.key&&(t.key=e.key),""!==e.value&&(t.value=e.value),t},create:e=>m.fromPartial(e??{}),fromPartial(e){let t=g();return t.key=e.key??"",t.value=e.value??"",t}};function b(){return{textBlobstoreKey:"",providerOptions:{}}}let h={encode:(e,t=new i.fI)=>(""!==e.textBlobstoreKey&&t.uint32(10).string(e.textBlobstoreKey),Object.entries(e.providerOptions).forEach(([e,r])=>{v.encode({key:e,value:r},t.uint32(18).fork()).join()}),t),decode(e,t){let r=e instanceof i.V5?e:new i.V5(e),o=void 0===t?r.len:r.pos+t,n=b();for(;r.pos<o;){let e=r.uint32();switch(e>>>3){case 1:if(10!==e)break;n.textBlobstoreKey=r.string();continue;case 2:{if(18!==e)break;let t=v.decode(r,r.uint32());void 0!==t.value&&(n.providerOptions[t.key]=t.value);continue}}if((7&e)==4||0===e)break;r.skip(7&e)}return n},fromJSON:e=>({textBlobstoreKey:eo(e.textBlobstoreKey)?er.String(e.textBlobstoreKey):"",providerOptions:ei(e.providerOptions)?Object.entries(e.providerOptions).reduce((e,[t,r])=>(e[t]=String(r),e),{}):{}}),toJSON(e){let t={};if(""!==e.textBlobstoreKey&&(t.textBlobstoreKey=e.textBlobstoreKey),e.providerOptions){let r=Object.entries(e.providerOptions);r.length>0&&(t.providerOptions={},r.forEach(([e,r])=>{t.providerOptions[e]=r}))}return t},create:e=>h.fromPartial(e??{}),fromPartial(e){let t=b();return t.textBlobstoreKey=e.textBlobstoreKey??"",t.providerOptions=Object.entries(e.providerOptions??{}).reduce((e,[t,r])=>(void 0!==r&&(e[t]=er.String(r)),e),{}),t}};function y(){return{key:"",value:""}}let v={encode:(e,t=new i.fI)=>(""!==e.key&&t.uint32(10).string(e.key),""!==e.value&&t.uint32(18).string(e.value),t),decode(e,t){let r=e instanceof i.V5?e:new i.V5(e),o=void 0===t?r.len:r.pos+t,n=y();for(;r.pos<o;){let e=r.uint32();switch(e>>>3){case 1:if(10!==e)break;n.key=r.string();continue;case 2:if(18!==e)break;n.value=r.string();continue}if((7&e)==4||0===e)break;r.skip(7&e)}return n},fromJSON:e=>({key:eo(e.key)?er.String(e.key):"",value:eo(e.value)?er.String(e.value):""}),toJSON(e){let t={};return""!==e.key&&(t.key=e.key),""!==e.value&&(t.value=e.value),t},create:e=>v.fromPartial(e??{}),fromPartial(e){let t=y();return t.key=e.key??"",t.value=e.value??"",t}};function k(){return{mimeType:void 0,providerOptions:{}}}let S={encode:(e,t=new i.fI)=>(void 0!==e.mimeType&&t.uint32(18).string(e.mimeType),Object.entries(e.providerOptions).forEach(([e,r])=>{N.encode({key:e,value:r},t.uint32(26).fork()).join()}),t),decode(e,t){let r=e instanceof i.V5?e:new i.V5(e),o=void 0===t?r.len:r.pos+t,n=k();for(;r.pos<o;){let e=r.uint32();switch(e>>>3){case 2:if(18!==e)break;n.mimeType=r.string();continue;case 3:{if(26!==e)break;let t=N.decode(r,r.uint32());void 0!==t.value&&(n.providerOptions[t.key]=t.value);continue}}if((7&e)==4||0===e)break;r.skip(7&e)}return n},fromJSON:e=>({mimeType:eo(e.mimeType)?er.String(e.mimeType):void 0,providerOptions:ei(e.providerOptions)?Object.entries(e.providerOptions).reduce((e,[t,r])=>(e[t]=String(r),e),{}):{}}),toJSON(e){let t={};if(void 0!==e.mimeType&&(t.mimeType=e.mimeType),e.providerOptions){let r=Object.entries(e.providerOptions);r.length>0&&(t.providerOptions={},r.forEach(([e,r])=>{t.providerOptions[e]=r}))}return t},create:e=>S.fromPartial(e??{}),fromPartial(e){let t=k();return t.mimeType=e.mimeType??void 0,t.providerOptions=Object.entries(e.providerOptions??{}).reduce((e,[t,r])=>(void 0!==r&&(e[t]=er.String(r)),e),{}),t}};function O(){return{key:"",value:""}}let N={encode:(e,t=new i.fI)=>(""!==e.key&&t.uint32(10).string(e.key),""!==e.value&&t.uint32(18).string(e.value),t),decode(e,t){let r=e instanceof i.V5?e:new i.V5(e),o=void 0===t?r.len:r.pos+t,n=O();for(;r.pos<o;){let e=r.uint32();switch(e>>>3){case 1:if(10!==e)break;n.key=r.string();continue;case 2:if(18!==e)break;n.value=r.string();continue}if((7&e)==4||0===e)break;r.skip(7&e)}return n},fromJSON:e=>({key:eo(e.key)?er.String(e.key):"",value:eo(e.value)?er.String(e.value):""}),toJSON(e){let t={};return""!==e.key&&(t.key=e.key),""!==e.value&&(t.value=e.value),t},create:e=>N.fromPartial(e??{}),fromPartial(e){let t=O();return t.key=e.key??"",t.value=e.value??"",t}};function w(){return{text:"",signature:void 0,providerOptions:{}}}let P={encode:(e,t=new i.fI)=>(""!==e.text&&t.uint32(10).string(e.text),void 0!==e.signature&&t.uint32(18).string(e.signature),Object.entries(e.providerOptions).forEach(([e,r])=>{I.encode({key:e,value:r},t.uint32(26).fork()).join()}),t),decode(e,t){let r=e instanceof i.V5?e:new i.V5(e),o=void 0===t?r.len:r.pos+t,n=w();for(;r.pos<o;){let e=r.uint32();switch(e>>>3){case 1:if(10!==e)break;n.text=r.string();continue;case 2:if(18!==e)break;n.signature=r.string();continue;case 3:{if(26!==e)break;let t=I.decode(r,r.uint32());void 0!==t.value&&(n.providerOptions[t.key]=t.value);continue}}if((7&e)==4||0===e)break;r.skip(7&e)}return n},fromJSON:e=>({text:eo(e.text)?er.String(e.text):"",signature:eo(e.signature)?er.String(e.signature):void 0,providerOptions:ei(e.providerOptions)?Object.entries(e.providerOptions).reduce((e,[t,r])=>(e[t]=String(r),e),{}):{}}),toJSON(e){let t={};if(""!==e.text&&(t.text=e.text),void 0!==e.signature&&(t.signature=e.signature),e.providerOptions){let r=Object.entries(e.providerOptions);r.length>0&&(t.providerOptions={},r.forEach(([e,r])=>{t.providerOptions[e]=r}))}return t},create:e=>P.fromPartial(e??{}),fromPartial(e){let t=w();return t.text=e.text??"",t.signature=e.signature??void 0,t.providerOptions=Object.entries(e.providerOptions??{}).reduce((e,[t,r])=>(void 0!==r&&(e[t]=er.String(r)),e),{}),t}};function J(){return{key:"",value:""}}let I={encode:(e,t=new i.fI)=>(""!==e.key&&t.uint32(10).string(e.key),""!==e.value&&t.uint32(18).string(e.value),t),decode(e,t){let r=e instanceof i.V5?e:new i.V5(e),o=void 0===t?r.len:r.pos+t,n=J();for(;r.pos<o;){let e=r.uint32();switch(e>>>3){case 1:if(10!==e)break;n.key=r.string();continue;case 2:if(18!==e)break;n.value=r.string();continue}if((7&e)==4||0===e)break;r.skip(7&e)}return n},fromJSON:e=>({key:eo(e.key)?er.String(e.key):"",value:eo(e.value)?er.String(e.value):""}),toJSON(e){let t={};return""!==e.key&&(t.key=e.key),""!==e.value&&(t.value=e.value),t},create:e=>I.fromPartial(e??{}),fromPartial(e){let t=J();return t.key=e.key??"",t.value=e.value??"",t}};function C(){return{providerOptions:{}}}let V={encode:(e,t=new i.fI)=>(Object.entries(e.providerOptions).forEach(([e,r])=>{K.encode({key:e,value:r},t.uint32(18).fork()).join()}),t),decode(e,t){let r=e instanceof i.V5?e:new i.V5(e),o=void 0===t?r.len:r.pos+t,n=C();for(;r.pos<o;){let e=r.uint32();switch(e>>>3){case 2:{if(18!==e)break;let t=K.decode(r,r.uint32());void 0!==t.value&&(n.providerOptions[t.key]=t.value);continue}}if((7&e)==4||0===e)break;r.skip(7&e)}return n},fromJSON:e=>({providerOptions:ei(e.providerOptions)?Object.entries(e.providerOptions).reduce((e,[t,r])=>(e[t]=String(r),e),{}):{}}),toJSON(e){let t={};if(e.providerOptions){let r=Object.entries(e.providerOptions);r.length>0&&(t.providerOptions={},r.forEach(([e,r])=>{t.providerOptions[e]=r}))}return t},create:e=>V.fromPartial(e??{}),fromPartial(e){let t=C();return t.providerOptions=Object.entries(e.providerOptions??{}).reduce((e,[t,r])=>(void 0!==r&&(e[t]=er.String(r)),e),{}),t}};function x(){return{key:"",value:""}}let K={encode:(e,t=new i.fI)=>(""!==e.key&&t.uint32(10).string(e.key),""!==e.value&&t.uint32(18).string(e.value),t),decode(e,t){let r=e instanceof i.V5?e:new i.V5(e),o=void 0===t?r.len:r.pos+t,n=x();for(;r.pos<o;){let e=r.uint32();switch(e>>>3){case 1:if(10!==e)break;n.key=r.string();continue;case 2:if(18!==e)break;n.value=r.string();continue}if((7&e)==4||0===e)break;r.skip(7&e)}return n},fromJSON:e=>({key:eo(e.key)?er.String(e.key):"",value:eo(e.value)?er.String(e.value):""}),toJSON(e){let t={};return""!==e.key&&(t.key=e.key),""!==e.value&&(t.value=e.value),t},create:e=>K.fromPartial(e??{}),fromPartial(e){let t=x();return t.key=e.key??"",t.value=e.value??"",t}};function F(){return{data:"",providerOptions:{}}}let j={encode:(e,t=new i.fI)=>(""!==e.data&&t.uint32(10).string(e.data),Object.entries(e.providerOptions).forEach(([e,r])=>{T.encode({key:e,value:r},t.uint32(18).fork()).join()}),t),decode(e,t){let r=e instanceof i.V5?e:new i.V5(e),o=void 0===t?r.len:r.pos+t,n=F();for(;r.pos<o;){let e=r.uint32();switch(e>>>3){case 1:if(10!==e)break;n.data=r.string();continue;case 2:{if(18!==e)break;let t=T.decode(r,r.uint32());void 0!==t.value&&(n.providerOptions[t.key]=t.value);continue}}if((7&e)==4||0===e)break;r.skip(7&e)}return n},fromJSON:e=>({data:eo(e.data)?er.String(e.data):"",providerOptions:ei(e.providerOptions)?Object.entries(e.providerOptions).reduce((e,[t,r])=>(e[t]=String(r),e),{}):{}}),toJSON(e){let t={};if(""!==e.data&&(t.data=e.data),e.providerOptions){let r=Object.entries(e.providerOptions);r.length>0&&(t.providerOptions={},r.forEach(([e,r])=>{t.providerOptions[e]=r}))}return t},create:e=>j.fromPartial(e??{}),fromPartial(e){let t=F();return t.data=e.data??"",t.providerOptions=Object.entries(e.providerOptions??{}).reduce((e,[t,r])=>(void 0!==r&&(e[t]=er.String(r)),e),{}),t}};function E(){return{key:"",value:""}}let T={encode:(e,t=new i.fI)=>(""!==e.key&&t.uint32(10).string(e.key),""!==e.value&&t.uint32(18).string(e.value),t),decode(e,t){let r=e instanceof i.V5?e:new i.V5(e),o=void 0===t?r.len:r.pos+t,n=E();for(;r.pos<o;){let e=r.uint32();switch(e>>>3){case 1:if(10!==e)break;n.key=r.string();continue;case 2:if(18!==e)break;n.value=r.string();continue}if((7&e)==4||0===e)break;r.skip(7&e)}return n},fromJSON:e=>({key:eo(e.key)?er.String(e.key):"",value:eo(e.value)?er.String(e.value):""}),toJSON(e){let t={};return""!==e.key&&(t.key=e.key),""!==e.value&&(t.value=e.value),t},create:e=>T.fromPartial(e??{}),fromPartial(e){let t=E();return t.key=e.key??"",t.value=e.value??"",t}};function L(){return{providerOptions:{}}}let A={encode:(e,t=new i.fI)=>(Object.entries(e.providerOptions).forEach(([e,r])=>{H.encode({key:e,value:r},t.uint32(18).fork()).join()}),t),decode(e,t){let r=e instanceof i.V5?e:new i.V5(e),o=void 0===t?r.len:r.pos+t,n=L();for(;r.pos<o;){let e=r.uint32();switch(e>>>3){case 2:{if(18!==e)break;let t=H.decode(r,r.uint32());void 0!==t.value&&(n.providerOptions[t.key]=t.value);continue}}if((7&e)==4||0===e)break;r.skip(7&e)}return n},fromJSON:e=>({providerOptions:ei(e.providerOptions)?Object.entries(e.providerOptions).reduce((e,[t,r])=>(e[t]=String(r),e),{}):{}}),toJSON(e){let t={};if(e.providerOptions){let r=Object.entries(e.providerOptions);r.length>0&&(t.providerOptions={},r.forEach(([e,r])=>{t.providerOptions[e]=r}))}return t},create:e=>A.fromPartial(e??{}),fromPartial(e){let t=L();return t.providerOptions=Object.entries(e.providerOptions??{}).reduce((e,[t,r])=>(void 0!==r&&(e[t]=er.String(r)),e),{}),t}};function M(){return{key:"",value:""}}let H={encode:(e,t=new i.fI)=>(""!==e.key&&t.uint32(10).string(e.key),""!==e.value&&t.uint32(18).string(e.value),t),decode(e,t){let r=e instanceof i.V5?e:new i.V5(e),o=void 0===t?r.len:r.pos+t,n=M();for(;r.pos<o;){let e=r.uint32();switch(e>>>3){case 1:if(10!==e)break;n.key=r.string();continue;case 2:if(18!==e)break;n.value=r.string();continue}if((7&e)==4||0===e)break;r.skip(7&e)}return n},fromJSON:e=>({key:eo(e.key)?er.String(e.key):"",value:eo(e.value)?er.String(e.value):""}),toJSON(e){let t={};return""!==e.key&&(t.key=e.key),""!==e.value&&(t.value=e.value),t},create:e=>H.fromPartial(e??{}),fromPartial(e){let t=M();return t.key=e.key??"",t.value=e.value??"",t}};function _(){return{toolCallId:"",toolName:"",providerOptions:{}}}let U={encode:(e,t=new i.fI)=>(""!==e.toolCallId&&t.uint32(10).string(e.toolCallId),""!==e.toolName&&t.uint32(18).string(e.toolName),Object.entries(e.providerOptions).forEach(([e,r])=>{G.encode({key:e,value:r},t.uint32(34).fork()).join()}),t),decode(e,t){let r=e instanceof i.V5?e:new i.V5(e),o=void 0===t?r.len:r.pos+t,n=_();for(;r.pos<o;){let e=r.uint32();switch(e>>>3){case 1:if(10!==e)break;n.toolCallId=r.string();continue;case 2:if(18!==e)break;n.toolName=r.string();continue;case 4:{if(34!==e)break;let t=G.decode(r,r.uint32());void 0!==t.value&&(n.providerOptions[t.key]=t.value);continue}}if((7&e)==4||0===e)break;r.skip(7&e)}return n},fromJSON:e=>({toolCallId:eo(e.toolCallId)?er.String(e.toolCallId):"",toolName:eo(e.toolName)?er.String(e.toolName):"",providerOptions:ei(e.providerOptions)?Object.entries(e.providerOptions).reduce((e,[t,r])=>(e[t]=String(r),e),{}):{}}),toJSON(e){let t={};if(""!==e.toolCallId&&(t.toolCallId=e.toolCallId),""!==e.toolName&&(t.toolName=e.toolName),e.providerOptions){let r=Object.entries(e.providerOptions);r.length>0&&(t.providerOptions={},r.forEach(([e,r])=>{t.providerOptions[e]=r}))}return t},create:e=>U.fromPartial(e??{}),fromPartial(e){let t=_();return t.toolCallId=e.toolCallId??"",t.toolName=e.toolName??"",t.providerOptions=Object.entries(e.providerOptions??{}).reduce((e,[t,r])=>(void 0!==r&&(e[t]=er.String(r)),e),{}),t}};function D(){return{key:"",value:""}}let G={encode:(e,t=new i.fI)=>(""!==e.key&&t.uint32(10).string(e.key),""!==e.value&&t.uint32(18).string(e.value),t),decode(e,t){let r=e instanceof i.V5?e:new i.V5(e),o=void 0===t?r.len:r.pos+t,n=D();for(;r.pos<o;){let e=r.uint32();switch(e>>>3){case 1:if(10!==e)break;n.key=r.string();continue;case 2:if(18!==e)break;n.value=r.string();continue}if((7&e)==4||0===e)break;r.skip(7&e)}return n},fromJSON:e=>({key:eo(e.key)?er.String(e.key):"",value:eo(e.value)?er.String(e.value):""}),toJSON(e){let t={};return""!==e.key&&(t.key=e.key),""!==e.value&&(t.value=e.value),t},create:e=>G.fromPartial(e??{}),fromPartial(e){let t=D();return t.key=e.key??"",t.value=e.value??"",t}};function $(){return{toolCallId:"",toolName:"",isError:void 0,providerOptions:{}}}let q={encode:(e,t=new i.fI)=>(""!==e.toolCallId&&t.uint32(10).string(e.toolCallId),""!==e.toolName&&t.uint32(18).string(e.toolName),void 0!==e.isError&&t.uint32(32).bool(e.isError),Object.entries(e.providerOptions).forEach(([e,r])=>{R.encode({key:e,value:r},t.uint32(42).fork()).join()}),t),decode(e,t){let r=e instanceof i.V5?e:new i.V5(e),o=void 0===t?r.len:r.pos+t,n=$();for(;r.pos<o;){let e=r.uint32();switch(e>>>3){case 1:if(10!==e)break;n.toolCallId=r.string();continue;case 2:if(18!==e)break;n.toolName=r.string();continue;case 4:if(32!==e)break;n.isError=r.bool();continue;case 5:{if(42!==e)break;let t=R.decode(r,r.uint32());void 0!==t.value&&(n.providerOptions[t.key]=t.value);continue}}if((7&e)==4||0===e)break;r.skip(7&e)}return n},fromJSON:e=>({toolCallId:eo(e.toolCallId)?er.String(e.toolCallId):"",toolName:eo(e.toolName)?er.String(e.toolName):"",isError:eo(e.isError)?er.Boolean(e.isError):void 0,providerOptions:ei(e.providerOptions)?Object.entries(e.providerOptions).reduce((e,[t,r])=>(e[t]=String(r),e),{}):{}}),toJSON(e){let t={};if(""!==e.toolCallId&&(t.toolCallId=e.toolCallId),""!==e.toolName&&(t.toolName=e.toolName),void 0!==e.isError&&(t.isError=e.isError),e.providerOptions){let r=Object.entries(e.providerOptions);r.length>0&&(t.providerOptions={},r.forEach(([e,r])=>{t.providerOptions[e]=r}))}return t},create:e=>q.fromPartial(e??{}),fromPartial(e){let t=$();return t.toolCallId=e.toolCallId??"",t.toolName=e.toolName??"",t.isError=e.isError??void 0,t.providerOptions=Object.entries(e.providerOptions??{}).reduce((e,[t,r])=>(void 0!==r&&(e[t]=er.String(r)),e),{}),t}};function B(){return{key:"",value:""}}let R={encode:(e,t=new i.fI)=>(""!==e.key&&t.uint32(10).string(e.key),""!==e.value&&t.uint32(18).string(e.value),t),decode(e,t){let r=e instanceof i.V5?e:new i.V5(e),o=void 0===t?r.len:r.pos+t,n=B();for(;r.pos<o;){let e=r.uint32();switch(e>>>3){case 1:if(10!==e)break;n.key=r.string();continue;case 2:if(18!==e)break;n.value=r.string();continue}if((7&e)==4||0===e)break;r.skip(7&e)}return n},fromJSON:e=>({key:eo(e.key)?er.String(e.key):"",value:eo(e.value)?er.String(e.value):""}),toJSON(e){let t={};return""!==e.key&&(t.key=e.key),""!==e.value&&(t.value=e.value),t},create:e=>R.fromPartial(e??{}),fromPartial(e){let t=B();return t.key=e.key??"",t.value=e.value??"",t}};function Y(){return{toolCallId:"",toolName:"",argsJson:"",providerOptions:{}}}let z={encode:(e,t=new i.fI)=>(""!==e.toolCallId&&t.uint32(10).string(e.toolCallId),""!==e.toolName&&t.uint32(18).string(e.toolName),""!==e.argsJson&&t.uint32(26).string(e.argsJson),Object.entries(e.providerOptions).forEach(([e,r])=>{Q.encode({key:e,value:r},t.uint32(34).fork()).join()}),t),decode(e,t){let r=e instanceof i.V5?e:new i.V5(e),o=void 0===t?r.len:r.pos+t,n=Y();for(;r.pos<o;){let e=r.uint32();switch(e>>>3){case 1:if(10!==e)break;n.toolCallId=r.string();continue;case 2:if(18!==e)break;n.toolName=r.string();continue;case 3:if(26!==e)break;n.argsJson=r.string();continue;case 4:{if(34!==e)break;let t=Q.decode(r,r.uint32());void 0!==t.value&&(n.providerOptions[t.key]=t.value);continue}}if((7&e)==4||0===e)break;r.skip(7&e)}return n},fromJSON:e=>({toolCallId:eo(e.toolCallId)?er.String(e.toolCallId):"",toolName:eo(e.toolName)?er.String(e.toolName):"",argsJson:eo(e.argsJson)?er.String(e.argsJson):"",providerOptions:ei(e.providerOptions)?Object.entries(e.providerOptions).reduce((e,[t,r])=>(e[t]=String(r),e),{}):{}}),toJSON(e){let t={};if(""!==e.toolCallId&&(t.toolCallId=e.toolCallId),""!==e.toolName&&(t.toolName=e.toolName),""!==e.argsJson&&(t.argsJson=e.argsJson),e.providerOptions){let r=Object.entries(e.providerOptions);r.length>0&&(t.providerOptions={},r.forEach(([e,r])=>{t.providerOptions[e]=r}))}return t},create:e=>z.fromPartial(e??{}),fromPartial(e){let t=Y();return t.toolCallId=e.toolCallId??"",t.toolName=e.toolName??"",t.argsJson=e.argsJson??"",t.providerOptions=Object.entries(e.providerOptions??{}).reduce((e,[t,r])=>(void 0!==r&&(e[t]=er.String(r)),e),{}),t}};function X(){return{key:"",value:""}}let Q={encode:(e,t=new i.fI)=>(""!==e.key&&t.uint32(10).string(e.key),""!==e.value&&t.uint32(18).string(e.value),t),decode(e,t){let r=e instanceof i.V5?e:new i.V5(e),o=void 0===t?r.len:r.pos+t,n=X();for(;r.pos<o;){let e=r.uint32();switch(e>>>3){case 1:if(10!==e)break;n.key=r.string();continue;case 2:if(18!==e)break;n.value=r.string();continue}if((7&e)==4||0===e)break;r.skip(7&e)}return n},fromJSON:e=>({key:eo(e.key)?er.String(e.key):"",value:eo(e.value)?er.String(e.value):""}),toJSON(e){let t={};return""!==e.key&&(t.key=e.key),""!==e.value&&(t.value=e.value),t},create:e=>Q.fromPartial(e??{}),fromPartial(e){let t=X();return t.key=e.key??"",t.value=e.value??"",t}};function W(){return{toolCallId:"",toolName:"",resultJson:"",isError:void 0,providerOptions:{}}}let Z={encode:(e,t=new i.fI)=>(""!==e.toolCallId&&t.uint32(10).string(e.toolCallId),""!==e.toolName&&t.uint32(18).string(e.toolName),""!==e.resultJson&&t.uint32(26).string(e.resultJson),void 0!==e.isError&&t.uint32(32).bool(e.isError),Object.entries(e.providerOptions).forEach(([e,r])=>{et.encode({key:e,value:r},t.uint32(42).fork()).join()}),t),decode(e,t){let r=e instanceof i.V5?e:new i.V5(e),o=void 0===t?r.len:r.pos+t,n=W();for(;r.pos<o;){let e=r.uint32();switch(e>>>3){case 1:if(10!==e)break;n.toolCallId=r.string();continue;case 2:if(18!==e)break;n.toolName=r.string();continue;case 3:if(26!==e)break;n.resultJson=r.string();continue;case 4:if(32!==e)break;n.isError=r.bool();continue;case 5:{if(42!==e)break;let t=et.decode(r,r.uint32());void 0!==t.value&&(n.providerOptions[t.key]=t.value);continue}}if((7&e)==4||0===e)break;r.skip(7&e)}return n},fromJSON:e=>({toolCallId:eo(e.toolCallId)?er.String(e.toolCallId):"",toolName:eo(e.toolName)?er.String(e.toolName):"",resultJson:eo(e.resultJson)?er.String(e.resultJson):"",isError:eo(e.isError)?er.Boolean(e.isError):void 0,providerOptions:ei(e.providerOptions)?Object.entries(e.providerOptions).reduce((e,[t,r])=>(e[t]=String(r),e),{}):{}}),toJSON(e){let t={};if(""!==e.toolCallId&&(t.toolCallId=e.toolCallId),""!==e.toolName&&(t.toolName=e.toolName),""!==e.resultJson&&(t.resultJson=e.resultJson),void 0!==e.isError&&(t.isError=e.isError),e.providerOptions){let r=Object.entries(e.providerOptions);r.length>0&&(t.providerOptions={},r.forEach(([e,r])=>{t.providerOptions[e]=r}))}return t},create:e=>Z.fromPartial(e??{}),fromPartial(e){let t=W();return t.toolCallId=e.toolCallId??"",t.toolName=e.toolName??"",t.resultJson=e.resultJson??"",t.isError=e.isError??void 0,t.providerOptions=Object.entries(e.providerOptions??{}).reduce((e,[t,r])=>(void 0!==r&&(e[t]=er.String(r)),e),{}),t}};function ee(){return{key:"",value:""}}let et={encode:(e,t=new i.fI)=>(""!==e.key&&t.uint32(10).string(e.key),""!==e.value&&t.uint32(18).string(e.value),t),decode(e,t){let r=e instanceof i.V5?e:new i.V5(e),o=void 0===t?r.len:r.pos+t,n=ee();for(;r.pos<o;){let e=r.uint32();switch(e>>>3){case 1:if(10!==e)break;n.key=r.string();continue;case 2:if(18!==e)break;n.value=r.string();continue}if((7&e)==4||0===e)break;r.skip(7&e)}return n},fromJSON:e=>({key:eo(e.key)?er.String(e.key):"",value:eo(e.value)?er.String(e.value):""}),toJSON(e){let t={};return""!==e.key&&(t.key=e.key),""!==e.value&&(t.value=e.value),t},create:e=>et.fromPartial(e??{}),fromPartial(e){let t=ee();return t.key=e.key??"",t.value=e.value??"",t}},er=(()=>{if("undefined"!=typeof globalThis)return globalThis;if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if("undefined"!=typeof global)return global;throw"Unable to locate global object"})();function ei(e){return"object"==typeof e&&null!==e}function eo(e){return null!=e}let en={encode:(e,t=new i.fI)=>(""!==e.foo&&t.uint32(10).string(e.foo),t),decode(e,t){let r=e instanceof i.V5?e:new i.V5(e),o=void 0===t?r.len:r.pos+t,n={foo:""};for(;r.pos<o;){let e=r.uint32();switch(e>>>3){case 1:if(10!==e)break;n.foo=r.string();continue}if((7&e)==4||0===e)break;r.skip(7&e)}return n},fromJSON:e=>({foo:e7(e.foo)?e5.String(e.foo):""}),toJSON(e){let t={};return""!==e.foo&&(t.foo=e.foo),t},create:e=>en.fromPartial(e??{}),fromPartial(e){let t={foo:""};return t.foo=e.foo??"",t}};function ea(){return{requestUuid:""}}let el={encode:(e,t=new i.fI)=>(""!==e.requestUuid&&t.uint32(10).string(e.requestUuid),t),decode(e,t){let r=e instanceof i.V5?e:new i.V5(e),o=void 0===t?r.len:r.pos+t,n=ea();for(;r.pos<o;){let e=r.uint32();switch(e>>>3){case 1:if(10!==e)break;n.requestUuid=r.string();continue}if((7&e)==4||0===e)break;r.skip(7&e)}return n},fromJSON:e=>({requestUuid:e7(e.requestUuid)?e5.String(e.requestUuid):""}),toJSON(e){let t={};return""!==e.requestUuid&&(t.requestUuid=e.requestUuid),t},create:e=>el.fromPartial(e??{}),fromPartial(e){let t=ea();return t.requestUuid=e.requestUuid??"",t}};function es(){return{text:"",textMode:""}}let ed={encode:(e,t=new i.fI)=>(""!==e.text&&t.uint32(10).string(e.text),""!==e.textMode&&t.uint32(18).string(e.textMode),t),decode(e,t){let r=e instanceof i.V5?e:new i.V5(e),o=void 0===t?r.len:r.pos+t,n=es();for(;r.pos<o;){let e=r.uint32();switch(e>>>3){case 1:if(10!==e)break;n.text=r.string();continue;case 2:if(18!==e)break;n.textMode=r.string();continue}if((7&e)==4||0===e)break;r.skip(7&e)}return n},fromJSON:e=>({text:e7(e.text)?e5.String(e.text):"",textMode:e7(e.textMode)?e5.String(e.textMode):""}),toJSON(e){let t={};return""!==e.text&&(t.text=e.text),""!==e.textMode&&(t.textMode=e.textMode),t},create:e=>ed.fromPartial(e??{}),fromPartial(e){let t=es();return t.text=e.text??"",t.textMode=e.textMode??"",t}};function ec(){return{code:"",codeFilePath:""}}let eu={encode:(e,t=new i.fI)=>(""!==e.code&&t.uint32(10).string(e.code),""!==e.codeFilePath&&t.uint32(18).string(e.codeFilePath),t),decode(e,t){let r=e instanceof i.V5?e:new i.V5(e),o=void 0===t?r.len:r.pos+t,n=ec();for(;r.pos<o;){let e=r.uint32();switch(e>>>3){case 1:if(10!==e)break;n.code=r.string();continue;case 2:if(18!==e)break;n.codeFilePath=r.string();continue}if((7&e)==4||0===e)break;r.skip(7&e)}return n},fromJSON:e=>({code:e7(e.code)?e5.String(e.code):"",codeFilePath:e7(e.codeFilePath)?e5.String(e.codeFilePath):""}),toJSON(e){let t={};return""!==e.code&&(t.code=e.code),""!==e.codeFilePath&&(t.codeFilePath=e.codeFilePath),t},create:e=>eu.fromPartial(e??{}),fromPartial(e){let t=ec();return t.code=e.code??"",t.codeFilePath=e.codeFilePath??"",t}};function ef(){return{modelConfigVersion:""}}let ep={encode:(e,t=new i.fI)=>(""!==e.modelConfigVersion&&t.uint32(10).string(e.modelConfigVersion),t),decode(e,t){let r=e instanceof i.V5?e:new i.V5(e),o=void 0===t?r.len:r.pos+t,n=ef();for(;r.pos<o;){let e=r.uint32();switch(e>>>3){case 1:if(10!==e)break;n.modelConfigVersion=r.string();continue}if((7&e)==4||0===e)break;r.skip(7&e)}return n},fromJSON:e=>({modelConfigVersion:e7(e.modelConfigVersion)?e5.String(e.modelConfigVersion):""}),toJSON(e){let t={};return""!==e.modelConfigVersion&&(t.modelConfigVersion=e.modelConfigVersion),t},create:e=>ep.fromPartial(e??{}),fromPartial(e){let t=ef();return t.modelConfigVersion=e.modelConfigVersion??"",t}};function eg(){return{title:""}}let em={encode:(e,t=new i.fI)=>(""!==e.title&&t.uint32(10).string(e.title),t),decode(e,t){let r=e instanceof i.V5?e:new i.V5(e),o=void 0===t?r.len:r.pos+t,n=eg();for(;r.pos<o;){let e=r.uint32();switch(e>>>3){case 1:if(10!==e)break;n.title=r.string();continue}if((7&e)==4||0===e)break;r.skip(7&e)}return n},fromJSON:e=>({title:e7(e.title)?e5.String(e.title):""}),toJSON(e){let t={};return""!==e.title&&(t.title=e.title),t},create:e=>em.fromPartial(e??{}),fromPartial(e){let t=eg();return t.title=e.title??"",t}};function eb(){return{providerMetadataJson:""}}let eh={encode:(e,t=new i.fI)=>(""!==e.providerMetadataJson&&t.uint32(10).string(e.providerMetadataJson),t),decode(e,t){let r=e instanceof i.V5?e:new i.V5(e),o=void 0===t?r.len:r.pos+t,n=eb();for(;r.pos<o;){let e=r.uint32();switch(e>>>3){case 1:if(10!==e)break;n.providerMetadataJson=r.string();continue}if((7&e)==4||0===e)break;r.skip(7&e)}return n},fromJSON:e=>({providerMetadataJson:e7(e.providerMetadataJson)?e5.String(e.providerMetadataJson):""}),toJSON(e){let t={};return""!==e.providerMetadataJson&&(t.providerMetadataJson=e.providerMetadataJson),t},create:e=>eh.fromPartial(e??{}),fromPartial(e){let t=eb();return t.providerMetadataJson=e.providerMetadataJson??"",t}},ey={encode:(e,t=new i.fI)=>t,decode(e,t){let r=e instanceof i.V5?e:new i.V5(e),o=void 0===t?r.len:r.pos+t;for(;r.pos<o;){let e=r.uint32();if((7&e)==4||0===e)break;r.skip(7&e)}return{}},fromJSON:e=>({}),toJSON:e=>({}),create:e=>ey.fromPartial(e??{}),fromPartial:e=>({})},ev={encode:(e,t=new i.fI)=>t,decode(e,t){let r=e instanceof i.V5?e:new i.V5(e),o=void 0===t?r.len:r.pos+t;for(;r.pos<o;){let e=r.uint32();if((7&e)==4||0===e)break;r.skip(7&e)}return{}},fromJSON:e=>({}),toJSON:e=>({}),create:e=>ev.fromPartial(e??{}),fromPartial:e=>({})},ek={encode:(e,t=new i.fI)=>t,decode(e,t){let r=e instanceof i.V5?e:new i.V5(e),o=void 0===t?r.len:r.pos+t;for(;r.pos<o;){let e=r.uint32();if((7&e)==4||0===e)break;r.skip(7&e)}return{}},fromJSON:e=>({}),toJSON:e=>({}),create:e=>ek.fromPartial(e??{}),fromPartial:e=>({})};function eS(){return{guid:"",imageHash:void 0}}let eO={encode:(e,t=new i.fI)=>(""!==e.guid&&t.uint32(10).string(e.guid),void 0!==e.imageHash&&t.uint32(18).string(e.imageHash),t),decode(e,t){let r=e instanceof i.V5?e:new i.V5(e),o=void 0===t?r.len:r.pos+t,n=eS();for(;r.pos<o;){let e=r.uint32();switch(e>>>3){case 1:if(10!==e)break;n.guid=r.string();continue;case 2:if(18!==e)break;n.imageHash=r.string();continue}if((7&e)==4||0===e)break;r.skip(7&e)}return n},fromJSON:e=>({guid:e7(e.guid)?e5.String(e.guid):"",imageHash:e7(e.imageHash)?e5.String(e.imageHash):void 0}),toJSON(e){let t={};return""!==e.guid&&(t.guid=e.guid),void 0!==e.imageHash&&(t.imageHash=e.imageHash),t},create:e=>eO.fromPartial(e??{}),fromPartial(e){let t=eS();return t.guid=e.guid??"",t.imageHash=e.imageHash??void 0,t}};function eN(){return{guid:"",codeFiles:[],communityAttribution:void 0}}let ew={encode(e,t=new i.fI){for(let r of(""!==e.guid&&t.uint32(10).string(e.guid),e.codeFiles))eJ.encode(r,t.uint32(18).fork()).join();return void 0!==e.communityAttribution&&eC.encode(e.communityAttribution,t.uint32(26).fork()).join(),t},decode(e,t){let r=e instanceof i.V5?e:new i.V5(e),o=void 0===t?r.len:r.pos+t,n=eN();for(;r.pos<o;){let e=r.uint32();switch(e>>>3){case 1:if(10!==e)break;n.guid=r.string();continue;case 2:if(18!==e)break;n.codeFiles.push(eJ.decode(r,r.uint32()));continue;case 3:if(26!==e)break;n.communityAttribution=eC.decode(r,r.uint32());continue}if((7&e)==4||0===e)break;r.skip(7&e)}return n},fromJSON:e=>({guid:e7(e.guid)?e5.String(e.guid):"",codeFiles:e5.Array.isArray(e?.codeFiles)?e.codeFiles.map(e=>eJ.fromJSON(e)):[],communityAttribution:e7(e.communityAttribution)?eC.fromJSON(e.communityAttribution):void 0}),toJSON(e){let t={};return""!==e.guid&&(t.guid=e.guid),e.codeFiles?.length&&(t.codeFiles=e.codeFiles.map(e=>eJ.toJSON(e))),void 0!==e.communityAttribution&&(t.communityAttribution=eC.toJSON(e.communityAttribution)),t},create:e=>ew.fromPartial(e??{}),fromPartial(e){let t=eN();return t.guid=e.guid??"",t.codeFiles=e.codeFiles?.map(e=>eJ.fromPartial(e))||[],t.communityAttribution=void 0!==e.communityAttribution&&null!==e.communityAttribution?eC.fromPartial(e.communityAttribution):void 0,t}};function eP(){return{codeFileGuid:"",fullFilePath:""}}let eJ={encode:(e,t=new i.fI)=>(""!==e.codeFileGuid&&t.uint32(10).string(e.codeFileGuid),""!==e.fullFilePath&&t.uint32(18).string(e.fullFilePath),t),decode(e,t){let r=e instanceof i.V5?e:new i.V5(e),o=void 0===t?r.len:r.pos+t,n=eP();for(;r.pos<o;){let e=r.uint32();switch(e>>>3){case 1:if(10!==e)break;n.codeFileGuid=r.string();continue;case 2:if(18!==e)break;n.fullFilePath=r.string();continue}if((7&e)==4||0===e)break;r.skip(7&e)}return n},fromJSON:e=>({codeFileGuid:e7(e.codeFileGuid)?e5.String(e.codeFileGuid):"",fullFilePath:e7(e.fullFilePath)?e5.String(e.fullFilePath):""}),toJSON(e){let t={};return""!==e.codeFileGuid&&(t.codeFileGuid=e.codeFileGuid),""!==e.fullFilePath&&(t.fullFilePath=e.fullFilePath),t},create:e=>eJ.fromPartial(e??{}),fromPartial(e){let t=eP();return t.codeFileGuid=e.codeFileGuid??"",t.fullFilePath=e.fullFilePath??"",t}};function eI(){return{hubFileId:"",hubFileName:"",creatorName:""}}let eC={encode:(e,t=new i.fI)=>(""!==e.hubFileId&&t.uint32(10).string(e.hubFileId),""!==e.hubFileName&&t.uint32(18).string(e.hubFileName),""!==e.creatorName&&t.uint32(26).string(e.creatorName),t),decode(e,t){let r=e instanceof i.V5?e:new i.V5(e),o=void 0===t?r.len:r.pos+t,n=eI();for(;r.pos<o;){let e=r.uint32();switch(e>>>3){case 1:if(10!==e)break;n.hubFileId=r.string();continue;case 2:if(18!==e)break;n.hubFileName=r.string();continue;case 3:if(26!==e)break;n.creatorName=r.string();continue}if((7&e)==4||0===e)break;r.skip(7&e)}return n},fromJSON:e=>({hubFileId:e7(e.hubFileId)?e5.String(e.hubFileId):"",hubFileName:e7(e.hubFileName)?e5.String(e.hubFileName):"",creatorName:e7(e.creatorName)?e5.String(e.creatorName):""}),toJSON(e){let t={};return""!==e.hubFileId&&(t.hubFileId=e.hubFileId),""!==e.hubFileName&&(t.hubFileName=e.hubFileName),""!==e.creatorName&&(t.creatorName=e.creatorName),t},create:e=>eC.fromPartial(e??{}),fromPartial(e){let t=eI();return t.hubFileId=e.hubFileId??"",t.hubFileName=e.hubFileName??"",t.creatorName=e.creatorName??"",t}};function eV(){return{guid:"",diffs:""}}let ex={encode:(e,t=new i.fI)=>(""!==e.guid&&t.uint32(10).string(e.guid),""!==e.diffs&&t.uint32(18).string(e.diffs),t),decode(e,t){let r=e instanceof i.V5?e:new i.V5(e),o=void 0===t?r.len:r.pos+t,n=eV();for(;r.pos<o;){let e=r.uint32();switch(e>>>3){case 1:if(10!==e)break;n.guid=r.string();continue;case 2:if(18!==e)break;n.diffs=r.string();continue}if((7&e)==4||0===e)break;r.skip(7&e)}return n},fromJSON:e=>({guid:e7(e.guid)?e5.String(e.guid):"",diffs:e7(e.diffs)?e5.String(e.diffs):""}),toJSON(e){let t={};return""!==e.guid&&(t.guid=e.guid),""!==e.diffs&&(t.diffs=e.diffs),t},create:e=>ex.fromPartial(e??{}),fromPartial(e){let t=eV();return t.guid=e.guid??"",t.diffs=e.diffs??"",t}};function eK(){return{codeSnapshotKey:""}}let eF={encode:(e,t=new i.fI)=>(""!==e.codeSnapshotKey&&t.uint32(10).string(e.codeSnapshotKey),t),decode(e,t){let r=e instanceof i.V5?e:new i.V5(e),o=void 0===t?r.len:r.pos+t,n=eK();for(;r.pos<o;){let e=r.uint32();switch(e>>>3){case 1:if(10!==e)break;n.codeSnapshotKey=r.string();continue}if((7&e)==4||0===e)break;r.skip(7&e)}return n},fromJSON:e=>({codeSnapshotKey:e7(e.codeSnapshotKey)?e5.String(e.codeSnapshotKey):""}),toJSON(e){let t={};return""!==e.codeSnapshotKey&&(t.codeSnapshotKey=e.codeSnapshotKey),t},create:e=>eF.fromPartial(e??{}),fromPartial(e){let t=eK();return t.codeSnapshotKey=e.codeSnapshotKey??"",t}},ej={encode:(e,t=new i.fI)=>t,decode(e,t){let r=e instanceof i.V5?e:new i.V5(e),o=void 0===t?r.len:r.pos+t;for(;r.pos<o;){let e=r.uint32();if((7&e)==4||0===e)break;r.skip(7&e)}return{}},fromJSON:e=>({}),toJSON:e=>({}),create:e=>ej.fromPartial(e??{}),fromPartial:e=>({})};function eE(){return{errors:[]}}let eT={encode(e,t=new i.fI){for(let r of e.errors)t.uint32(10).string(r);return t},decode(e,t){let r=e instanceof i.V5?e:new i.V5(e),o=void 0===t?r.len:r.pos+t,n=eE();for(;r.pos<o;){let e=r.uint32();switch(e>>>3){case 1:if(10!==e)break;n.errors.push(r.string());continue}if((7&e)==4||0===e)break;r.skip(7&e)}return n},fromJSON:e=>({errors:e5.Array.isArray(e?.errors)?e.errors.map(e=>e5.String(e)):[]}),toJSON(e){let t={};return e.errors?.length&&(t.errors=e.errors),t},create:e=>eT.fromPartial(e??{}),fromPartial(e){let t=eE();return t.errors=e.errors?.map(e=>e)||[],t}};function eL(){return{libraryKeys:[]}}let eA={encode(e,t=new i.fI){for(let r of e.libraryKeys)t.uint32(10).string(r);return t},decode(e,t){let r=e instanceof i.V5?e:new i.V5(e),o=void 0===t?r.len:r.pos+t,n=eL();for(;r.pos<o;){let e=r.uint32();switch(e>>>3){case 1:if(10!==e)break;n.libraryKeys.push(r.string());continue}if((7&e)==4||0===e)break;r.skip(7&e)}return n},fromJSON:e=>({libraryKeys:e5.Array.isArray(e?.libraryKeys)?e.libraryKeys.map(e=>e5.String(e)):[]}),toJSON(e){let t={};return e.libraryKeys?.length&&(t.libraryKeys=e.libraryKeys),t},create:e=>eA.fromPartial(e??{}),fromPartial(e){let t=eL();return t.libraryKeys=e.libraryKeys?.map(e=>e)||[],t}};function eM(){return{filePath:"",snippetStartLine:0,tagLine:0,tagName:""}}let eH={encode:(e,t=new i.fI)=>(""!==e.filePath&&t.uint32(10).string(e.filePath),0!==e.snippetStartLine&&t.uint32(16).int32(e.snippetStartLine),0!==e.tagLine&&t.uint32(24).int32(e.tagLine),""!==e.tagName&&t.uint32(34).string(e.tagName),t),decode(e,t){let r=e instanceof i.V5?e:new i.V5(e),o=void 0===t?r.len:r.pos+t,n=eM();for(;r.pos<o;){let e=r.uint32();switch(e>>>3){case 1:if(10!==e)break;n.filePath=r.string();continue;case 2:if(16!==e)break;n.snippetStartLine=r.int32();continue;case 3:if(24!==e)break;n.tagLine=r.int32();continue;case 4:if(34!==e)break;n.tagName=r.string();continue}if((7&e)==4||0===e)break;r.skip(7&e)}return n},fromJSON:e=>({filePath:e7(e.filePath)?e5.String(e.filePath):"",snippetStartLine:e7(e.snippetStartLine)?e5.Number(e.snippetStartLine):0,tagLine:e7(e.tagLine)?e5.Number(e.tagLine):0,tagName:e7(e.tagName)?e5.String(e.tagName):""}),toJSON(e){let t={};return""!==e.filePath&&(t.filePath=e.filePath),0!==e.snippetStartLine&&(t.snippetStartLine=Math.round(e.snippetStartLine)),0!==e.tagLine&&(t.tagLine=Math.round(e.tagLine)),""!==e.tagName&&(t.tagName=e.tagName),t},create:e=>eH.fromPartial(e??{}),fromPartial(e){let t=eM();return t.filePath=e.filePath??"",t.snippetStartLine=e.snippetStartLine??0,t.tagLine=e.tagLine??0,t.tagName=e.tagName??"",t}};function e_(){return{filePath:"",snippetStartLine:0,tagLine:0,snippet:"",tagName:"",fileImports:void 0,componentHeader:void 0}}let eU={encode:(e,t=new i.fI)=>(""!==e.filePath&&t.uint32(10).string(e.filePath),0!==e.snippetStartLine&&t.uint32(16).int32(e.snippetStartLine),0!==e.tagLine&&t.uint32(24).int32(e.tagLine),""!==e.snippet&&t.uint32(34).string(e.snippet),""!==e.tagName&&t.uint32(42).string(e.tagName),void 0!==e.fileImports&&t.uint32(50).string(e.fileImports),void 0!==e.componentHeader&&t.uint32(58).string(e.componentHeader),t),decode(e,t){let r=e instanceof i.V5?e:new i.V5(e),o=void 0===t?r.len:r.pos+t,n=e_();for(;r.pos<o;){let e=r.uint32();switch(e>>>3){case 1:if(10!==e)break;n.filePath=r.string();continue;case 2:if(16!==e)break;n.snippetStartLine=r.int32();continue;case 3:if(24!==e)break;n.tagLine=r.int32();continue;case 4:if(34!==e)break;n.snippet=r.string();continue;case 5:if(42!==e)break;n.tagName=r.string();continue;case 6:if(50!==e)break;n.fileImports=r.string();continue;case 7:if(58!==e)break;n.componentHeader=r.string();continue}if((7&e)==4||0===e)break;r.skip(7&e)}return n},fromJSON:e=>({filePath:e7(e.filePath)?e5.String(e.filePath):"",snippetStartLine:e7(e.snippetStartLine)?e5.Number(e.snippetStartLine):0,tagLine:e7(e.tagLine)?e5.Number(e.tagLine):0,snippet:e7(e.snippet)?e5.String(e.snippet):"",tagName:e7(e.tagName)?e5.String(e.tagName):"",fileImports:e7(e.fileImports)?e5.String(e.fileImports):void 0,componentHeader:e7(e.componentHeader)?e5.String(e.componentHeader):void 0}),toJSON(e){let t={};return""!==e.filePath&&(t.filePath=e.filePath),0!==e.snippetStartLine&&(t.snippetStartLine=Math.round(e.snippetStartLine)),0!==e.tagLine&&(t.tagLine=Math.round(e.tagLine)),""!==e.snippet&&(t.snippet=e.snippet),""!==e.tagName&&(t.tagName=e.tagName),void 0!==e.fileImports&&(t.fileImports=e.fileImports),void 0!==e.componentHeader&&(t.componentHeader=e.componentHeader),t},create:e=>eU.fromPartial(e??{}),fromPartial(e){let t=e_();return t.filePath=e.filePath??"",t.snippetStartLine=e.snippetStartLine??0,t.tagLine=e.tagLine??0,t.snippet=e.snippet??"",t.tagName=e.tagName??"",t.fileImports=e.fileImports??void 0,t.componentHeader=e.componentHeader??void 0,t}};function eD(){return{filePath:"",tagName:""}}let eG={encode:(e,t=new i.fI)=>(""!==e.filePath&&t.uint32(10).string(e.filePath),""!==e.tagName&&t.uint32(18).string(e.tagName),t),decode(e,t){let r=e instanceof i.V5?e:new i.V5(e),o=void 0===t?r.len:r.pos+t,n=eD();for(;r.pos<o;){let e=r.uint32();switch(e>>>3){case 1:if(10!==e)break;n.filePath=r.string();continue;case 2:if(18!==e)break;n.tagName=r.string();continue}if((7&e)==4||0===e)break;r.skip(7&e)}return n},fromJSON:e=>({filePath:e7(e.filePath)?e5.String(e.filePath):"",tagName:e7(e.tagName)?e5.String(e.tagName):""}),toJSON(e){let t={};return""!==e.filePath&&(t.filePath=e.filePath),""!==e.tagName&&(t.tagName=e.tagName),t},create:e=>eG.fromPartial(e??{}),fromPartial(e){let t=eD();return t.filePath=e.filePath??"",t.tagName=e.tagName??"",t}};function e$(){return{folderPath:"",libraryName:void 0}}let eq={encode:(e,t=new i.fI)=>(""!==e.folderPath&&t.uint32(10).string(e.folderPath),void 0!==e.libraryName&&t.uint32(18).string(e.libraryName),t),decode(e,t){let r=e instanceof i.V5?e:new i.V5(e),o=void 0===t?r.len:r.pos+t,n=e$();for(;r.pos<o;){let e=r.uint32();switch(e>>>3){case 1:if(10!==e)break;n.folderPath=r.string();continue;case 2:if(18!==e)break;n.libraryName=r.string();continue}if((7&e)==4||0===e)break;r.skip(7&e)}return n},fromJSON:e=>({folderPath:e7(e.folderPath)?e5.String(e.folderPath):"",libraryName:e7(e.libraryName)?e5.String(e.libraryName):void 0}),toJSON(e){let t={};return""!==e.folderPath&&(t.folderPath=e.folderPath),void 0!==e.libraryName&&(t.libraryName=e.libraryName),t},create:e=>eq.fromPartial(e??{}),fromPartial(e){let t=e$();return t.folderPath=e.folderPath??"",t.libraryName=e.libraryName??void 0,t}};function eB(){return{origin:""}}let eR={encode:(e,t=new i.fI)=>(""!==e.origin&&t.uint32(10).string(e.origin),t),decode(e,t){let r=e instanceof i.V5?e:new i.V5(e),o=void 0===t?r.len:r.pos+t,n=eB();for(;r.pos<o;){let e=r.uint32();switch(e>>>3){case 1:if(10!==e)break;n.origin=r.string();continue}if((7&e)==4||0===e)break;r.skip(7&e)}return n},fromJSON:e=>({origin:e7(e.origin)?e5.String(e.origin):""}),toJSON(e){let t={};return""!==e.origin&&(t.origin=e.origin),t},create:e=>eR.fromPartial(e??{}),fromPartial(e){let t=eB();return t.origin=e.origin??"",t}};function eY(){return{toolCallId:"",toolName:"",resultJson:""}}let ez={encode:(e,t=new i.fI)=>(""!==e.toolCallId&&t.uint32(10).string(e.toolCallId),""!==e.toolName&&t.uint32(18).string(e.toolName),""!==e.resultJson&&t.uint32(26).string(e.resultJson),t),decode(e,t){let r=e instanceof i.V5?e:new i.V5(e),o=void 0===t?r.len:r.pos+t,n=eY();for(;r.pos<o;){let e=r.uint32();switch(e>>>3){case 1:if(10!==e)break;n.toolCallId=r.string();continue;case 2:if(18!==e)break;n.toolName=r.string();continue;case 3:if(26!==e)break;n.resultJson=r.string();continue}if((7&e)==4||0===e)break;r.skip(7&e)}return n},fromJSON:e=>({toolCallId:e7(e.toolCallId)?e5.String(e.toolCallId):"",toolName:e7(e.toolName)?e5.String(e.toolName):"",resultJson:e7(e.resultJson)?e5.String(e.resultJson):""}),toJSON(e){let t={};return""!==e.toolCallId&&(t.toolCallId=e.toolCallId),""!==e.toolName&&(t.toolName=e.toolName),""!==e.resultJson&&(t.resultJson=e.resultJson),t},create:e=>ez.fromPartial(e??{}),fromPartial(e){let t=eY();return t.toolCallId=e.toolCallId??"",t.toolName=e.toolName??"",t.resultJson=e.resultJson??"",t}};function eX(){return{changedFilesJson:"",title:"",legacyS3CodeSnapshotKey:void 0}}let eQ={encode:(e,t=new i.fI)=>(""!==e.changedFilesJson&&t.uint32(10).string(e.changedFilesJson),""!==e.title&&t.uint32(18).string(e.title),void 0!==e.legacyS3CodeSnapshotKey&&t.uint32(26).string(e.legacyS3CodeSnapshotKey),t),decode(e,t){let r=e instanceof i.V5?e:new i.V5(e),o=void 0===t?r.len:r.pos+t,n=eX();for(;r.pos<o;){let e=r.uint32();switch(e>>>3){case 1:if(10!==e)break;n.changedFilesJson=r.string();continue;case 2:if(18!==e)break;n.title=r.string();continue;case 3:if(26!==e)break;n.legacyS3CodeSnapshotKey=r.string();continue}if((7&e)==4||0===e)break;r.skip(7&e)}return n},fromJSON:e=>({changedFilesJson:e7(e.changedFilesJson)?e5.String(e.changedFilesJson):"",title:e7(e.title)?e5.String(e.title):"",legacyS3CodeSnapshotKey:e7(e.legacyS3CodeSnapshotKey)?e5.String(e.legacyS3CodeSnapshotKey):void 0}),toJSON(e){let t={};return""!==e.changedFilesJson&&(t.changedFilesJson=e.changedFilesJson),""!==e.title&&(t.title=e.title),void 0!==e.legacyS3CodeSnapshotKey&&(t.legacyS3CodeSnapshotKey=e.legacyS3CodeSnapshotKey),t},create:e=>eQ.fromPartial(e??{}),fromPartial(e){let t=eX();return t.changedFilesJson=e.changedFilesJson??"",t.title=e.title??"",t.legacyS3CodeSnapshotKey=e.legacyS3CodeSnapshotKey??void 0,t}};function eW(){return{plainText:"",fileKeyHash:""}}let eZ={encode:(e,t=new i.fI)=>(""!==e.plainText&&t.uint32(10).string(e.plainText),""!==e.fileKeyHash&&t.uint32(18).string(e.fileKeyHash),t),decode(e,t){let r=e instanceof i.V5?e:new i.V5(e),o=void 0===t?r.len:r.pos+t,n=eW();for(;r.pos<o;){let e=r.uint32();switch(e>>>3){case 1:if(10!==e)break;n.plainText=r.string();continue;case 2:if(18!==e)break;n.fileKeyHash=r.string();continue}if((7&e)==4||0===e)break;r.skip(7&e)}return n},fromJSON:e=>({plainText:e7(e.plainText)?e5.String(e.plainText):"",fileKeyHash:e7(e.fileKeyHash)?e5.String(e.fileKeyHash):""}),toJSON(e){let t={};return""!==e.plainText&&(t.plainText=e.plainText),""!==e.fileKeyHash&&(t.fileKeyHash=e.fileKeyHash),t},create:e=>eZ.fromPartial(e??{}),fromPartial(e){let t=eW();return t.plainText=e.plainText??"",t.fileKeyHash=e.fileKeyHash??"",t}};function e0(){return{userId:"",timestamp:""}}let e3={encode:(e,t=new i.fI)=>(""!==e.userId&&t.uint32(10).string(e.userId),""!==e.timestamp&&t.uint32(18).string(e.timestamp),t),decode(e,t){let r=e instanceof i.V5?e:new i.V5(e),o=void 0===t?r.len:r.pos+t,n=e0();for(;r.pos<o;){let e=r.uint32();switch(e>>>3){case 1:if(10!==e)break;n.userId=r.string();continue;case 2:if(18!==e)break;n.timestamp=r.string();continue}if((7&e)==4||0===e)break;r.skip(7&e)}return n},fromJSON:e=>({userId:e7(e.userId)?e5.String(e.userId):"",timestamp:e7(e.timestamp)?e5.String(e.timestamp):""}),toJSON(e){let t={};return""!==e.userId&&(t.userId=e.userId),""!==e.timestamp&&(t.timestamp=e.timestamp),t},create:e=>e3.fromPartial(e??{}),fromPartial(e){let t=e0();return t.userId=e.userId??"",t.timestamp=e.timestamp??"",t}};function e2(){return{title:"",legacyS3CodeSnapshotKey:void 0,blobstoreContentKey:void 0}}let e1={encode:(e,t=new i.fI)=>(""!==e.title&&t.uint32(10).string(e.title),void 0!==e.legacyS3CodeSnapshotKey&&t.uint32(18).string(e.legacyS3CodeSnapshotKey),void 0!==e.blobstoreContentKey&&t.uint32(26).string(e.blobstoreContentKey),t),decode(e,t){let r=e instanceof i.V5?e:new i.V5(e),o=void 0===t?r.len:r.pos+t,n=e2();for(;r.pos<o;){let e=r.uint32();switch(e>>>3){case 1:if(10!==e)break;n.title=r.string();continue;case 2:if(18!==e)break;n.legacyS3CodeSnapshotKey=r.string();continue;case 3:if(26!==e)break;n.blobstoreContentKey=r.string();continue}if((7&e)==4||0===e)break;r.skip(7&e)}return n},fromJSON:e=>({title:e7(e.title)?e5.String(e.title):"",legacyS3CodeSnapshotKey:e7(e.legacyS3CodeSnapshotKey)?e5.String(e.legacyS3CodeSnapshotKey):void 0,blobstoreContentKey:e7(e.blobstoreContentKey)?e5.String(e.blobstoreContentKey):void 0}),toJSON(e){let t={};return""!==e.title&&(t.title=e.title),void 0!==e.legacyS3CodeSnapshotKey&&(t.legacyS3CodeSnapshotKey=e.legacyS3CodeSnapshotKey),void 0!==e.blobstoreContentKey&&(t.blobstoreContentKey=e.blobstoreContentKey),t},create:e=>e1.fromPartial(e??{}),fromPartial(e){let t=e2();return t.title=e.title??"",t.legacyS3CodeSnapshotKey=e.legacyS3CodeSnapshotKey??void 0,t.blobstoreContentKey=e.blobstoreContentKey??void 0,t}},e5=(()=>{if("undefined"!=typeof globalThis)return globalThis;if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if("undefined"!=typeof global)return global;throw"Unable to locate global object"})();function e7(e){return null!=e}let e4=["selected-node-ids","enabled-libraries","jsx","text","text-ref","image-ref","reasoning","reasoning-ref","redacted-reasoning","redacted-reasoning-ref","tool-call-ref","tool-result-ref","tool-call-json-DO-NOT-USE-IN-PROD","tool-result-json-DO-NOT-USE-IN-PROD","figmake-test-part","cortex-request-uuid","code-chat-assistant-text","code-chat-assistant-code","code-chat-model-config-version","code-chat-assistant-title","code-chat-provider-metadata","code-chat-code-import-ref","code-chat-image-import-ref","code-chat-diff-import-ref","code-chat-backfill-image-import","code-chat-backfill-code-import","code-chat-backfill-diff-import","code-chat-legacy-s3-code-snapshot","code-chat-code-snapshot","code-chat-errors","code-chat-library-keys","code-chat-inspected-element-ref","code-chat-backfill-inspected-element","code-chat-inspected-component","code-chat-inspected-library","code-chat-origin","code-chat-legacy-assistant-tool-result","code-chat-manual-edit","code-chat-duplicated-file","code-chat-deleted-chat-history","code-chat-snapshot-restore"],e8={"selected-node-ids":n,"enabled-libraries":l,jsx:c,text:p,"text-ref":h,"image-ref":S,reasoning:P,"reasoning-ref":V,"redacted-reasoning":j,"redacted-reasoning-ref":A,"tool-call-ref":U,"tool-result-ref":q,"tool-call-json-DO-NOT-USE-IN-PROD":z,"tool-result-json-DO-NOT-USE-IN-PROD":Z,"figmake-test-part":en,"cortex-request-uuid":el,"code-chat-assistant-text":ed,"code-chat-assistant-code":eu,"code-chat-model-config-version":ep,"code-chat-assistant-title":em,"code-chat-provider-metadata":eh,"code-chat-code-import-ref":ey,"code-chat-image-import-ref":ev,"code-chat-diff-import-ref":ek,"code-chat-backfill-image-import":eO,"code-chat-backfill-code-import":ew,"code-chat-backfill-diff-import":ex,"code-chat-legacy-s3-code-snapshot":eF,"code-chat-code-snapshot":ej,"code-chat-errors":eT,"code-chat-library-keys":eA,"code-chat-inspected-element-ref":eH,"code-chat-backfill-inspected-element":eU,"code-chat-inspected-component":eG,"code-chat-inspected-library":eq,"code-chat-origin":eR,"code-chat-legacy-assistant-tool-result":ez,"code-chat-manual-edit":eQ,"code-chat-duplicated-file":eZ,"code-chat-deleted-chat-history":e3,"code-chat-snapshot-restore":e1}},692564:(e,t,r)=>{r.d(t,{O:()=>a});var i=r(153472),o=r(191427);let n=(e,t,r)=>{let o=t.safeParse(r);if(!o.success){let t=Object.keys(r);throw new i.T(`Failed to parse ${e} message part. Type: ${r.type}. Keys: ${t.join(", ")}. Error: ${o.error.message}`)}return o.data};function a(e){let{role:t,content:r,...a}=e;return{...(()=>{switch(t){case"user":return{role:t,content:r.map(e=>n(t,o.Fd,e))};case"assistant":return{role:t,content:r.map(e=>n(t,o.G4,e))};case"tool":return{role:t,content:r.map(e=>n(t,o.iS,e))};case"system":return{role:t,content:r.map(e=>n(t,o.jV,e))};default:throw new i.T(`Unknown message role: ${t}`)}})(),...a}}}}]);

//# debugId=927a6de9-f8de-5779-8fb4-c1be5e51be98

//# sourceMappingURL=https://admin.figma.com/admin/webpack-artifacts/2f9d7393af6cfc9b6afdf742d6b7318fb1d205b3/926-d4ec2c0b520d712e.min.js.map