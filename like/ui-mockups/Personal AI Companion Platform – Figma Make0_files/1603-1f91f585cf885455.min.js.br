"use strict";
!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="64418b1e-546a-5cb2-aa2a-5bb90c34a500")}catch(e){}}();
(globalThis.webpackChunk_figma_web_bundler=globalThis.webpackChunk_figma_web_bundler||[]).push([[1603],{976284:(e,t,i)=>{i.d(t,{BI:()=>d,Dn:()=>s,Tz:()=>l,as:()=>a,bW:()=>n,iY:()=>o,sI:()=>r});let s="panel_title--panelTitle--M1x9W",a="panel_title--legendAsPanelTitle--OzftF",r="panel_title--panelTitleWithoutChevron--VPLRr",n="panel_title--collapsiblePanelTitle--uB6Kg",o="panel_title--panelTitleExtended--AnC0w",l="panel_title--panelTitleFaded--kA3xv",d="panel_title--hoverable--uEiVB"},62523:(e,t,i)=>{i.d(t,{KC:()=>r,VP:()=>s,sy:()=>a,zB:()=>n});let s="figmake--descriptionRow--EExtB",a="figmake--workshopRowFpl--hXhnB",r="figmake--workshopRowInfo--HD-jM",n="figmake--workshopRowIcon--7go8R role_row--linkAccessIcon--kLG-n role_row--roleRowIcon--BatSn"},518176:(e,t,i)=>{i.d(t,{b:()=>s});let s="with_popover--triggerButton---TeY8"},661700:(e,t,i)=>{i.d(t,{E0:()=>x,Ek:()=>a,F4:()=>p,KC:()=>d,S:()=>s,S4:()=>l,jC:()=>n,li:()=>u,oB:()=>o,pn:()=>_,pw:()=>c,rZ:()=>r,rf:()=>f,vt:()=>h,wx:()=>g,zc:()=>m});let s="lint_error_modal--lintErrorsContent--qTrOy",a="lint_error_modal--lintErrorsFallbackContent--dG9tc lint_error_modal--lintErrorsContent--qTrOy",r="lint_error_modal--lintErrorLocation--lkNBw",n="lint_error_modal--lintErrorsList--kzsZc",o="lint_error_modal--lintErrorsItemRow--bwpl0",l="lint_error_modal--errorTarget--kau97",d="lint_error_modal--lintErrorsItemLeft--pM6B6",c="lint_error_modal--lintContent--1OYXO",u="lint_error_modal--fixIssuesDropdownButton--vN-0U",m="lint_error_modal--iconContainer--fIwYm",p="lint_error_modal--issueContent--j9ORI",h="lint_error_modal--noErrors--yrO5N",_="lint_error_modal--lintNoErrorsText--9EY-K",g="lint_error_modal--header--SXufp",f="lint_error_modal--body--F01se",x="lint_error_modal--filterContainer--NwWyY"},302051:(e,t,i)=>{i.d(t,{Dm:()=>r,GK:()=>n,N_:()=>s,WR:()=>o,er:()=>l,vo:()=>a});let s="styles-module--warningIconWrapper--1toyP",a="styles-module--selectWebpagesButton--jz-y6",r="styles-module--publishModalRowLabel--WRR8e",n="styles-module--publishModalRowContent--YPJb5",o="styles-module--publishModalRowContentLong--huC-L",l="styles-module--publishedByHandle--d-S6y"},442703:(e,t,i)=>{i.d(t,{P:()=>p,b:()=>r});var s=i(818822),a=i(449980);function r(e,t){let i=s.mSn?.keyframeBindings(e.scene).getTargetNodesForAnimationPresetInstance(t);return i?Array.from(i):[]}let n=a.z.object({timelinePosition:a.z.number(),interpolationType:a.z.nativeEnum(s.VOf),value:a.z.number()}),o=a.z.object({topLevelField:a.z.nativeEnum(s.J9K),parameterField:a.z.nativeEnum(s.sRd),effectIndex:a.z.number(),effectParametrizedField:a.z.nativeEnum(s.YJ6),baseValue:a.z.number().optional(),keyframeOperation:a.z.nativeEnum(s.qfA),timelinePositionType:a.z.nativeEnum(s.DnW),keyframes:a.z.array(n)}),l=a.z.object({nodeId:a.z.string(),keyframeTracks:a.z.array(o)}),d=a.z.array(l);function c(e){return{interpolationType:e.interpolationType,timelinePosition:e.timelinePosition.toString(),keyframeValue:{type:s.CPn.FLOAT,valueJson:e.value}}}function u(e){return{bindingLocation:{topLevelField:e.topLevelField,parameterField:e.parameterField,effectIndex:e.effectIndex,effectParametrizedField:e.effectParametrizedField},baseValue:e.baseValue?{type:s.CPn.FLOAT,valueJson:e.baseValue}:null,keyframeOperation:e.keyframeOperation,timelinePositionType:e.timelinePositionType,keyframes:e.keyframes.map(c)}}function m(e){return{nodeId:e.nodeId,keyframeTracks:e.keyframeTracks.map(u)}}function p(e){let t=d.safeParse(e);if(!t.success){let{fieldErrors:e}=t.error.flatten(),i=Object.entries(e).filter(([e,t])=>t?.length).map(([e,t])=>`${e}: ${t?.join(", ")}`);throw Error(i.length>0?`Animation preset is invalid:
  - ${i.join("\n  - ")}`:"Animation preset is missing.")}return t.data.map(m)}},982009:(e,t,i)=>{i.d(t,{CM:()=>p,JT:()=>u,NU:()=>g,Qi:()=>E,SI:()=>h,Tm:()=>f,V5:()=>b,kj:()=>_,mb:()=>y,nf:()=>x,r3:()=>c,tI:()=>m});var s=i(123447),a=i(414393),r=i(468882),n=i(721959),o=i(393629),l=i(226271),d=i(428444);let c="Seat",u=e=>m(e);function m(e){switch(e){case n.ud.DESIGN:case n.ud.FIGJAM:case n.ud.DEV_MODE:return(0,l.LN)((0,o.Gj)(e));case n.ud.SLIDES:return(0,r.t)("general.figma_slides");case n.ud.EXPERT:case n.ud.DEVELOPER:case n.ud.COLLABORATOR:case n.ud.CONTENT:return(0,r.t)(`general.bundle.${e}`);case n.ud.AI_CREDITS:return(0,r.t)("general.ai_credits");case n.ud.AI_CREDITS_OVERAGE:return(0,r.t)("general.ai_credits_overage");case n.Gu.VIEW:return(0,r.t)("checkout.view");default:return""}}let p=e=>u(e);function h(e){switch(e){case s.zRx.INSTANT_APPROVAL_IF_AVAILABLE_SEATS:return(0,r.t)("plan_settings.auto_approval_settings.options.instant_approval_if_available.title");case s.zRx.INSTANT_APPROVAL:return(0,r.t)("plan_settings.auto_approval_settings.options.instant_approval.title");case s.zRx.MANUAL_APPROVAL:return(0,r.t)("plan_settings.auto_approval_settings.options.manual_approval.title");default:return""}}function _(e,t,i,n){switch(e){case s.zRx.INSTANT_APPROVAL_IF_AVAILABLE_SEATS:return(0,r.t)("plan_settings.auto_approval_settings.options.instant_approval_if_available.description");case s.zRx.INSTANT_APPROVAL:if(t||!i)return(0,r.t)("plan_settings.auto_approval_settings.options.instant_approval.description.hide_charges");return(0,r.t)("plan_settings.auto_approval_settings.options.instant_approval.description");case s.zRx.MANUAL_APPROVAL:if(!n)return(0,r.t)("plan_settings.auto_approval_settings.options.manual_approval.description.hide_provisional_access");if(t||!i)return(0,r.t)("plan_settings.auto_approval_settings.options.manual_approval.description.hide_free_access");return(0,r.t)("plan_settings.auto_approval_settings.options.manual_approval.description");default:(0,a.xb)(e)}}function g(e,t){switch(e){case s.zRx.INSTANT_APPROVAL_IF_AVAILABLE_SEATS:if(t)return(0,r.t)("plan_settings.auto_approval_settings.options.instant_approval_if_available.tooltip");return null;case s.zRx.INSTANT_APPROVAL:case s.zRx.MANUAL_APPROVAL:return null;default:(0,a.xb)(e)}}function f(e){switch(e){case s.zRx.INSTANT_APPROVAL_IF_AVAILABLE_SEATS:return(0,r.t)("activity_log.event.org_auto_approval_setting_update.auto_approve_if_available");case s.zRx.INSTANT_APPROVAL:return(0,r.t)("activity_log.event.org_auto_approval_setting_update.auto_approve");case s.zRx.MANUAL_APPROVAL:return(0,r.t)("activity_log.event.org_auto_approval_setting_update.manual");default:return""}}let x="Seat changes";function b(e){return e===d.Uu.SCIM?"SCIM provisioned":""}function y(e){switch(e){case d.XI.AUTO_APPROVED:return(0,r.t)("admin_settings.people_tab.upgrade_method.auto_approved");case d.XI.MANUAL_APPROVED:case d.XI.MANUAL_APPROVED_NO_AVAILABLE_SEAT:return(0,r.t)("admin_settings.people_tab.upgrade_method.manually_approved");case d.XI.AUTO_APPROVED_AVAILABLE_SEAT:return(0,r.t)("admin_settings.people_tab.upgrade_method.auto_approved_available_seat");case d.XI.ADMIN_INITIATED:return(0,r.t)("admin_settings.people_tab.upgrade_method.admin_initiated");case d.XI.ADMIN_SELF_UPGRADE:return(0,r.t)("admin_settings.people_tab.upgrade_method.admin_self_upgrade");case d.XI.SCIM:return(0,r.t)("admin_settings.people_tab.upgrade_method.scim");case d.XI.FIGMA_ADMIN:return(0,r.t)("admin_settings.people_tab.upgrade_method.figma_admin");default:return(0,r.t)("admin_settings.people_tab.upgrade_method.migrated")}}function E(e,t,i,s,a,n){if(!e)return(0,r.t)("admin_settings.people_tab.upgrade_reason.fallback.without_user_name");switch(t){case d.XI.AUTO_APPROVED:if(a){switch(i){case d.Uu.CREATE_FILE:return(0,r.t)("admin_settings.people_tab.upgrade_reason.auto_approved.create_file_with_resource",{user:e,resourceName:a});case d.Uu.DEV_MODE:return(0,r.t)("admin_settings.people_tab.upgrade_reason.auto_approved.dev_mode_with_resource",{user:e,resourceName:a});case d.Uu.EDIT_ACTION:case d.Uu.EDIT_BUTTON:return(0,r.t)("admin_settings.people_tab.upgrade_reason.auto_approved.edit_file_with_resource",{user:e,resourceName:a});case d.Uu.DRAFTS_SHARE:case d.$n.DRAFTS_SHARE:case d.Uu.RESTRICTED_DRAFT_SHARED_EMAIL:case d.$n.RESTRICTED_DRAFT_SHARED_EMAIL:case d.Uu.IN_EDITOR_RESTRICTED_DRAFT:case d.$n.IN_EDITOR_RESTRICTED_DRAFT:return(0,r.t)("admin_settings.people_tab.upgrade_reason.auto_approved.drafts_share_with_resource",{user:e,resourceName:a});case d.Uu.RESOURCE_MOVED_FROM_ORG_DRAFTS:return(0,r.t)("admin_settings.people_tab.upgrade_reason.auto_approved.file_move_from_draft_with_resource",{user:e,resourceName:a});case d.Uu.PUBLISH_SITES:case d.$n.PUBLISH_SITES:return(0,r.t)("admin_settings.people_tab.upgrade_reason.auto_approved.publish_sites",{user:e,resourceName:a});case d.Uu.EXTENSIONS:case d.$n.EXTENSIONS:return(0,r.t)("admin_settings.people_tab.upgrade_reason.auto_approved.extensions_with_resource",{user:e,resourceName:a})}break}switch(i){case d.Uu.CREATE_FILE:case d.$n.CREATE_FILE:return(0,r.t)("admin_settings.people_tab.upgrade_reason.auto_approved.create_file_without_resource",{user:e});case d.Uu.DEV_MODE:case d.$n.DEV_MODE:return(0,r.t)("admin_settings.people_tab.upgrade_reason.auto_approved.dev_mode_without_resource",{user:e});case d.Uu.EDIT_ACTION:case d.Uu.EDIT_BUTTON:case d.$n.EDIT_ACTION:case d.$n.EDIT_BUTTON:return(0,r.t)("admin_settings.people_tab.upgrade_reason.auto_approved.edit_file_without_resource",{user:e});case d.Uu.DRAFTS_SHARE:case d.$n.DRAFTS_SHARE:case d.Uu.RESTRICTED_DRAFT_SHARED_EMAIL:case d.$n.RESTRICTED_DRAFT_SHARED_EMAIL:case d.Uu.IN_EDITOR_RESTRICTED_DRAFT:case d.$n.IN_EDITOR_RESTRICTED_DRAFT:return(0,r.t)("admin_settings.people_tab.upgrade_reason.auto_approved.drafts_share_without_resource",{user:e});case d.Uu.RESOURCE_MOVED_FROM_ORG_DRAFTS:case d.$n.RESOURCE_MOVED_FROM_PLAN_DRAFTS:return(0,r.t)("admin_settings.people_tab.upgrade_reason.auto_approved.file_move_from_draft_without_resource",{user:e});case d.Uu.PUBLISH_SITES:case d.$n.PUBLISH_SITES:return(0,r.t)("admin_settings.people_tab.upgrade_reason.auto_approved.publish_sites_without_resource",{user:e});case d.Uu.EXTENSIONS:case d.$n.EXTENSIONS:return(0,r.t)("admin_settings.people_tab.upgrade_reason.auto_approved.extensions_without_resource",{user:e})}break;case d.XI.AUTO_APPROVED_AVAILABLE_SEAT:if(a)switch(i){case d.Uu.CREATE_FILE:return(0,r.t)("admin_settings.people_tab.upgrade_reason.auto_approved_available_seat.create_file_with_resource",{user:e,resourceName:a});case d.Uu.DEV_MODE:return(0,r.t)("admin_settings.people_tab.upgrade_reason.auto_approved_available_seat.dev_mode_with_resource",{user:e,resourceName:a});case d.Uu.EDIT_ACTION:case d.Uu.EDIT_BUTTON:return(0,r.t)("admin_settings.people_tab.upgrade_reason.auto_approved_available_seat.edit_file_with_resource",{user:e,resourceName:a});case d.Uu.DRAFTS_SHARE:case d.$n.DRAFTS_SHARE:case d.Uu.RESTRICTED_DRAFT_SHARED_EMAIL:case d.$n.RESTRICTED_DRAFT_SHARED_EMAIL:case d.Uu.IN_EDITOR_RESTRICTED_DRAFT:case d.$n.IN_EDITOR_RESTRICTED_DRAFT:return(0,r.t)("admin_settings.people_tab.upgrade_reason.auto_approved_available_seat.drafts_share_with_resource",{user:e,resourceName:a});case d.Uu.RESOURCE_MOVED_FROM_ORG_DRAFTS:return(0,r.t)("admin_settings.people_tab.upgrade_reason.auto_approved_available_seat.file_move_from_draft_with_resource",{user:e,resourceName:a});case d.Uu.PUBLISH_SITES:case d.$n.PUBLISH_SITES:return(0,r.t)("admin_settings.people_tab.upgrade_reason.auto_approved_available_seat.publish_sites",{user:e,resourceName:a});case d.Uu.EXTENSIONS:case d.$n.EXTENSIONS:return(0,r.t)("admin_settings.people_tab.upgrade_reason.auto_approved_available_seat.extensions_with_resource",{user:e,resourceName:a})}else switch(i){case d.Uu.CREATE_FILE:case d.$n.CREATE_FILE:return(0,r.t)("admin_settings.people_tab.upgrade_reason.auto_approved_with_available_seat.create_file_without_resource",{user:e});case d.Uu.DEV_MODE:case d.$n.DEV_MODE:return(0,r.t)("admin_settings.people_tab.upgrade_reason.auto_approved_with_available_seat.dev_mode_without_resource",{user:e});case d.Uu.EDIT_ACTION:case d.Uu.EDIT_BUTTON:case d.$n.EDIT_ACTION:case d.$n.EDIT_BUTTON:return(0,r.t)("admin_settings.people_tab.upgrade_reason.auto_approved_with_available_seat.edit_file_without_resource",{user:e});case d.Uu.DRAFTS_SHARE:case d.$n.DRAFTS_SHARE:case d.Uu.RESTRICTED_DRAFT_SHARED_EMAIL:case d.$n.RESTRICTED_DRAFT_SHARED_EMAIL:case d.Uu.IN_EDITOR_RESTRICTED_DRAFT:case d.$n.IN_EDITOR_RESTRICTED_DRAFT:return(0,r.t)("admin_settings.people_tab.upgrade_reason.auto_approved_with_available_seat.drafts_share_without_resource",{user:e});case d.Uu.RESOURCE_MOVED_FROM_ORG_DRAFTS:case d.$n.RESOURCE_MOVED_FROM_PLAN_DRAFTS:return(0,r.t)("admin_settings.people_tab.upgrade_reason.auto_approved_with_available_seat.file_move_from_draft_without_resource",{user:e});case d.Uu.PUBLISH_SITES:case d.$n.PUBLISH_SITES:return(0,r.t)("admin_settings.people_tab.upgrade_reason.auto_approved_available_seat.publish_sites_without_resource",{user:e});case d.Uu.EXTENSIONS:case d.$n.EXTENSIONS:return(0,r.t)("admin_settings.people_tab.upgrade_reason.auto_approved_available_seat.extensions_without_resource",{user:e})}break;case d.XI.MANUAL_APPROVED:case d.XI.MANUAL_APPROVED_NO_AVAILABLE_SEAT:if(s){if(a)switch(i){case d.Uu.CREATE_FILE:return(0,r.t)("admin_settings.people_tab.upgrade_reason.manual_approved.create_file_with_resource",{user:e,actor:s,resourceName:a});case d.Uu.DEV_MODE:return(0,r.t)("admin_settings.people_tab.upgrade_reason.manual_approved.dev_mode_with_resource",{user:e,actor:s,resourceName:a});case d.Uu.EDIT_ACTION:case d.Uu.EDIT_BUTTON:return(0,r.t)("admin_settings.people_tab.upgrade_reason.manual_approved.edit_file_with_resource",{user:e,actor:s,resourceName:a});case d.Uu.DRAFTS_SHARE:case d.$n.DRAFTS_SHARE:case d.Uu.RESTRICTED_DRAFT_SHARED_EMAIL:case d.$n.RESTRICTED_DRAFT_SHARED_EMAIL:case d.Uu.IN_EDITOR_RESTRICTED_DRAFT:case d.$n.IN_EDITOR_RESTRICTED_DRAFT:return(0,r.t)("admin_settings.people_tab.upgrade_reason.manual_approved.drafts_share_with_resource",{user:e,actor:s,resourceName:a});case d.Uu.RESOURCE_MOVED_FROM_ORG_DRAFTS:return(0,r.t)("admin_settings.people_tab.upgrade_reason.manual_approved.file_move_from_draft_with_resource",{user:e,actor:s,resourceName:a});case d.Uu.ADMIN_UPGRADE:case d.$n.ADMIN_UPGRADE:return(0,r.t)("admin_settings.people_tab.upgrade_reason.manual_approved.admin_upgrade.v2",{user:e,actor:s})}else switch(i){case d.Uu.CREATE_FILE:case d.$n.CREATE_FILE:return(0,r.t)("admin_settings.people_tab.upgrade_reason.manual_approved.create_file_without_resource",{user:e,actor:s});case d.Uu.DEV_MODE:case d.$n.DEV_MODE:return(0,r.t)("admin_settings.people_tab.upgrade_reason.manual_approved.dev_mode_without_resource",{user:e,actor:s});case d.Uu.EDIT_ACTION:case d.Uu.EDIT_BUTTON:case d.$n.EDIT_ACTION:case d.$n.EDIT_BUTTON:return(0,r.t)("admin_settings.people_tab.upgrade_reason.manual_approved.edit_file_without_resource",{user:e,actor:s});case d.Uu.DRAFTS_SHARE:case d.$n.DRAFTS_SHARE:case d.Uu.RESTRICTED_DRAFT_SHARED_EMAIL:case d.$n.RESTRICTED_DRAFT_SHARED_EMAIL:case d.Uu.IN_EDITOR_RESTRICTED_DRAFT:case d.$n.IN_EDITOR_RESTRICTED_DRAFT:return(0,r.t)("admin_settings.people_tab.upgrade_reason.manual_approved.drafts_share_without_resource",{user:e,actor:s});case d.Uu.RESOURCE_MOVED_FROM_ORG_DRAFTS:case d.$n.RESOURCE_MOVED_FROM_PLAN_DRAFTS:return(0,r.t)("admin_settings.people_tab.upgrade_reason.manual_approved.file_move_from_draft_without_resource",{user:e,actor:s});case d.Uu.ADMIN_UPGRADE:case d.$n.ADMIN_UPGRADE:return(0,r.t)("admin_settings.people_tab.upgrade_reason.manual_approved.admin_upgrade.v2",{user:e,actor:s})}}break;case d.XI.SCIM:if(n){let t=m(n);return(0,r.t)("admin_settings.people_tab.upgrade_reason.scim.scim",{user:e,seatType:t})}break;case d.XI.ADMIN_INITIATED:if(n){let t=m(n);switch(i){case d.Uu.ADMIN_UPGRADE:case d.$n.ADMIN_UPGRADE:case d.$n.DEVELOPER_BUNDLE_OPT_IN:if(s)return(0,r.t)("admin_settings.people_tab.upgrade_reason.admin_initiated.admin_upgrade",{user:e,seatType:t,actor:s});break;case d.Uu.INVITE_REDEEM:case d.$n.INVITE_REDEEM:if(s)return(0,r.t)("admin_settings.people_tab.upgrade_reason.admin_initiated.invite_redeem",{user:e,seatType:t,actor:s});return(0,r.t)("admin_settings.people_tab.upgrade_reason.admin_initiated.invite_redeem.no_actor_fallback",{user:e,seatType:t});case d.Uu.SEAT_MANAGEMENT_AT_SELF_SERVE_CHECKOUT:case d.$n.CHECKOUT:return(0,r.t)("admin_settings.people_tab.upgrade_reason.admin_initiated.checkout",{user:e,seatType:t})}}break;case d.XI.ADMIN_SELF_UPGRADE:return(0,r.t)("admin_settings.people_tab.upgrade_method.admin_self_upgrade.description");case d.XI.FIGMA_ADMIN:switch(i){case d.Uu.SUPPORT_DRIVEN_ORG_MIGRATION:case d.Uu.SUPPORT_DRIVEN_ORG_MERGE:case d.Uu.SUPPORT_DRIVEN_TEAM_ADDITION:case d.Uu.FIGMA_ADMIN:if(n)return(0,r.t)("admin_settings.people_tab.upgrade_reason.figma_admin.figma_admin",{user:e,seatType:m(n)});break;case d.Uu.SCIM_RECOVERY:if(n)return(0,r.t)("admin_settings.people_tab.upgrade_reason.figma_admin.scim_recovery",{user:e,seatType:m(n)});break;case d.Uu.ORG_MERGE:if(n)return(0,r.t)("admin_settings.people_tab.upgrade_reason.figma_admin.org_merge",{user:e,seatType:m(n)});break;case d.Uu.TEAM_ADDED_TO_ORG_THROUGH_FIGMA_ADMIN:if(n)return(0,r.t)("admin_settings.people_tab.upgrade_reason.figma_admin.team_added_to_org_through_figma_admin",{user:e,seatType:m(n)});break;case d.Uu.PAID_STATUS_ON_ORG_CREATION:case d.Uu.SEAT_MANAGEMENT_AT_SELF_SERVE_CHECKOUT:if(n)return(0,r.t)("admin_settings.people_tab.upgrade_reason.figma_admin.paid_status_on_org_creation",{user:e,seatType:m(n)})}break;case null:return(0,r.t)("admin_settings.people_tab.upgrade_method.migrated")}return s?(0,r.t)("admin_settings.people_tab.upgrade_reason.fallback.with_actor",{actor:s,user:e}):(0,r.t)("admin_settings.people_tab.upgrade_reason.fallback.without_actor",{user:e})}},45170:(e,t,i)=>{i.d(t,{N:()=>_});var s=i(716976),a=i(237420),r=i(414393),n=i(107419),o=i(744350),l=i(721959),d=i(758625),c=i(393629),u=i(3120),m=i(428444),p=i(372045),h=i(179710);function _(e){let t=(0,a.wA)(),i=(0,c.Hl)({visibility:c.YT.ALL}),_=(0,s.useCallback)(({users:s,seatTypeOption:a,seatIncreaseAuthorized:o,seatSwapIntended:d,upgradeReason:c,upgradeMethod:u,assignedAt:m,upgradeActorName:h})=>{let _={};a!==l.Gu.VIEW&&(_[a]={key:a,license_types:i(a)}),(0,r.vA)(e.planType===p.OL.TEAM),t((0,n.P)({teamId:e.planId,deltas:s.map(({userId:e})=>({userId:e,seatTypeOption:a,seatIncreaseAuthorized:o,seatSwapIntended:d})),entryPoint:e.entryPoint,seatTypeProducts:_,upgradeReason:c,upgradeMethod:u,assignedAt:m,upgradeActorName:h,onSuccess:e.onSuccess,onFailure:e.onFailure}))},[t,e.entryPoint,e.planId,e.planType,e.onSuccess,e.onFailure,i]),{onFailure:g,onSuccess:f,queueFilterCountsRefetch:x}=e,b=(0,s.useCallback)(({users:i,seatTypeOption:s,lastUpdateTimestampOverride:a,seatIncreaseAuthorized:n,seatSwapIntended:c})=>{(0,r.vA)(e.planType===p.OL.ORG),t(o.uo({orgId:e.planId,lastUpdateTimestampOverride:a,seatTypeProducts:{},params:{org_user_ids:i.map(e=>e.planUserId),paid_statuses:s===l.Gu.VIEW?d.N_.dict(()=>m.dQ.STARTER):{[s]:m.dQ.FULL},entry_point:e.entryPoint,...null!=n&&null!=c?{seat_increase_authorized:n,seat_swap_intended:c}:null},successCallback:()=>{f?.(),(0,u.jL)({planType:p.OL.ORG,planId:e.planId})},errorCallback:()=>{g?.()}})),x?.()},[t,e.planId,e.entryPoint,e.planType,f,x,g]);return(0,h.RB)(e.planType,{team:_,org:b})}},906279:(e,t,i)=>{i.d(t,{UL:()=>_,kI:()=>p,un:()=>h});var s=i(716976),a=i(122864),r=i(88839),n=i(759095),o=i(529537),l=i(721959),d=i(758625),c=i(904974),u=i(889323),m=i(780189);function p({prices:e,currentSeatType:t,nextSeatType:i,nextSeatAvailable:s,failedToLoadPrices:r}){if(!i||s||t===l.Gu.VIEW||i===l.Gu.VIEW)return!1;if(r||!e)return!0;let n=e[i],o=e[t];return!!((0,a.uy)(n)||(0,a.uy)(o))||n.amount>o.amount}function h({planKey:e,currentSeatType:t,currentSeatBillingInterval:i,enabled:a}){let[n,l]=s.useMemo(()=>{let t=c.c[e.type],s=t.includes(m.IX.MONTH),a=(!s||i===m.IX.YEAR)&&t.includes(m.IX.YEAR);return[s,a]},[e.type,i]),u=(0,o.Ln)(e,d.N_,{renewalTerm:m.IX.MONTH,unit:m.IX.MONTH},{enabled:a&&n}),h=(0,o.Ln)(e,d.N_,{renewalTerm:m.IX.YEAR,unit:m.IX.MONTH},{enabled:a&&l});return s.useMemo(()=>{if(!a||!l)return u;if(!n)return h;let e=[u,h].find(e=>"loaded"!==e.status);if(e)return e;let i=u.data,s=h.data;return i?s?r.Qw.loadedSuspendable(d.N_.dict(e=>t===e||p({prices:i,currentSeatType:t,nextSeatType:e})?s[e]:i[e]),[],{release:()=>{}}):h:u},[a,t,n,u,l,h])}function _(e){let[t]=(0,n.IT)((0,u.oe)(e)),[i]=(0,n.Ad)(t);return i}},679638:(e,t,i)=>{i.d(t,{Z:()=>Z,bo:()=>er});var s=i(104076),a=i(716976),r=i(237420),n=i(122864),o=i(24989),l=i(709120),d=i(594251),c=i(498020),u=i(468882);i(224433);var m=i(59881),p=i(147186),h=i(530972),_=i(759095),g=i(959248),f=i(641567),x=i(322801),b=i(977051),y=i(991826),E=i(213242),A=i(115479),v=i(553538),T=i(18611),S=i(256112),I=i(420398),w=i(760938),R=i(234729),N=i(982009),C=i(136123),O=i(45170),k=i(617055),L=i(896511),j=i(143020),M=i(932119),F=i(848755),D=i(889148),P=i(721959),B=i(758625),U=i(484735),V=i(291117),z=i(520356),H=i(428444),$=i(664687),G=i(807083),W=i(179710),q=i(459381),K=i(830288),X=i(605020),Y=i(159236),Q=i(906279);let Z="https://help.figma.com/hc/articles/360039960434-Manage-seats-in-Figma",J=B.Ye.dict(()=>0);function ee(e){let{isInUserContextInDowngradeFlowExp:t}=e,i=l.hS({open:e.open,onClose:e.onClose}),r=(e.planUser.handle||e.planUser.name)??"",[m,p]=a.useState(e.nextSeatType??null),h=(0,V.d)({reportErrorsToTeam:o.e.SCALE}),g=(0,G.T5)("ModifyPlanUserSeatModalInner"),[x]=(0,_.Ad)(g);if("loaded"!==x.status){let e=Error("disabled"===x.status?"Plan fetching disabled":"Error fetching plan");throw(0,f.$D)(o.e.SCALE,e),e}let b=x.data;if(!b){let e=Error("No Plan found");throw(0,f.$D)(o.e.SCALE,e),e}let y=(0,C.k)(),A=(0,U.I)({plan:b}),v=(0,Q.UL)({planType:b.key.type,targetPlanUserId:e.planUser.id,targetUserId:e.planUser.userId}),T=v.data?.planUserById??{currentSeat:null},I=!!T.currentSeat,R=T.currentSeat?.billingInterval??null,O=(0,Q.un)({planKey:b.key,currentSeatType:e.planUser.currentSeatType,enabled:y&&!h&&!!A.data,currentSeatBillingInterval:R}),[L]=(0,_.Ad)(O),j=(0,k.Qf)(b.key.parentId,b.key.type),M="loaded"===j.status?B.Ye.dict(e=>j.data[e]?.available??0):J,D=new $.vr(e.currency),z=B.N_.dict(e=>{let t=L.data?.[e]?.amount??0;return{amount:t,display:D.formatMoney(t,{showCents:!1})}}),W="errors"===j.status,q="disabled"!==L.status&&("errors"===L.status||!e.currency||!L.data),K=!!m&&(m===P.Gu.VIEW||(0,n.Vq)(M[m])&&M[m]>0),X=(0,Q.kI)({prices:L.data,currentSeatType:e.planUser.currentSeatType,nextSeatType:m,nextSeatAvailable:K,failedToLoadPrices:q}),Y=b.key.type===H.OL.TEAM&&!y&&R===H.NW.YEAR&&e.planUser.currentSeatType===P.ud.EXPERT&&m===P.ud.DEVELOPER&&M[P.ud.DEVELOPER]<1;return(0,s.jsx)(F.fu,{name:"Modify Plan User Seat Modal",children:(0,s.jsx)(d.bL,{height:"dynamic",manager:i,width:"lg",children:(0,s.jsxs)(c.vo,{children:[(0,s.jsx)(c.nB,{children:(0,s.jsxs)(S.Y,{direction:"vertical",spacing:0,padding:{horizontal:8,vertical:16},children:[(0,s.jsx)(w.j,{user:e.planUser,text:null===m?(0,u.t)("modify_plan_user_seat_modal.choose_seat",{name:r}):m!==P.Gu.VIEW&&K?(0,u.t)("modify_plan_user_seat_modal.move_to_available_seat",{name:r,seatType:(0,N.JT)(m)}):(0,u.t)("modify_plan_user_seat_modal.move_to_unavailable_seat",{name:r,seatType:(0,N.JT)(m)})}),t&&(0,s.jsx)(ea,{userName:r,lastActiveAt:e.planUser.lastActiveAt,upgradeMethod:e.planUser.upgradeMethod,upgradeReason:e.planUser.upgradeReason,upgradeActorName:e.planUser.upgradeActorName,assignedAt:e.planUser.assignedAt,currentSeatType:e.planUser.currentSeatType,jobTitle:e.planUser.jobTitle}),(0,s.jsx)("div",{className:E.s.mb24.$}),(0,s.jsx)(et,{billableProductKeyContractPrices:z,currentSeatPaidFor:I,currentSeatType:e.planUser.currentSeatType,displayPricing:y&&!!e.currency&&null!==L.data&&!h&&"loading"!==j.status,isDiscouragedAnnualSeatSwap:Y,isInUserContextInDowngradeFlowExp:t,nextSeatType:m,plan:b,prorationEnabled:y,seatAvailability:h?J:M,setNextSeatType:p,userId:e.planUser.userId,userName:r}),(0,s.jsx)(es,{failedToLoadAvailability:W,failedToLoadPrices:q})]})}),!!m&&!e.hideFooter&&(0,s.jsx)(ei,{isDiscouragedAnnualSeatSwap:Y,nextSeatType:m,onClose:e.onClose,plan:b,planUserId:e.planUser.id,previousSeatType:e.planUser.currentSeatType,previousSeatWillBecomeAvailable:!h&&(I&&!y||y&&!X),queueFilterCountsRefetch:e.queueFilterCountsRefetch,refetchSeatCounts:j.refetch,seatIncreaseAuthorized:!y||m===P.Gu.VIEW||(0,n.Vq)(M[m])&&M[m]<1,seatSwapIntended:y&&X,setNextSeatType:p,userId:e.planUser.userId,userName:r})]})})})}function et({currentSeatType:e,nextSeatType:t,setNextSeatType:i,billableProductKeyContractPrices:a,seatAvailability:r,displayPricing:n,prorationEnabled:o,currentSeatPaidFor:l,isDiscouragedAnnualSeatSwap:d,plan:c,userName:u,userId:m,isInUserContextInDowngradeFlowExp:p}){return t?(0,s.jsx)(R.l,{availableSeats:r[t]??0,currentSeatPaidFor:l,displayPricing:n,fromSeatType:e,isDiscouragedAnnualSeatSwap:d,isInUserContextInDowngradeFlowExp:p,plan:c,pricing:a,prorationEnabled:o,toSeatType:t,userId:m,userName:u}):(0,s.jsx)(R.m,{currentSeatType:e,setNextSeatType:i,availableSeatCounts:r,displayPricing:n,pricing:a,learnMoreLinkHref:Z,isInUserContextInDowngradeFlowExp:p})}function ei({nextSeatType:e,onClose:t,plan:i,planUserId:n,seatIncreaseAuthorized:l,seatSwapIntended:d,setNextSeatType:m,userId:p,userName:h,previousSeatType:_,queueFilterCountsRefetch:g,previousSeatWillBecomeAvailable:f,isDiscouragedAnnualSeatSwap:x,refetchSeatCounts:b}){let y=i.key.parentId,E=i.key.type,S=(0,r.wA)(),[I,w]=a.useState(!1),R=a.useCallback(()=>{b(),w(!1)},[b]),N=a.useCallback(()=>{let e=f?function(e,t){switch(t){case P.ud.EXPERT:return(0,u.t)("modify_plan_user_seat_modal.visual_bell.message_with_previous_full",{userName:e});case P.ud.DEVELOPER:return(0,u.t)("modify_plan_user_seat_modal.visual_bell.message_with_previous_dev",{userName:e});case P.ud.COLLABORATOR:return(0,u.t)("modify_plan_user_seat_modal.visual_bell.message_with_previous_collab",{userName:e});case P.Gu.VIEW:default:return(0,u.t)("modify_plan_user_seat_modal.visual_bell.message_with_previous_view",{userName:e})}}(h,_):(0,u.t)("modify_plan_user_seat_modal.visual_bell.message_with_previous_view",{userName:h});t(),S(v.F.enqueue({message:e,type:"plan-user-seat-change",icon:T.zX.CHECK_WITH_CIRCLE}))},[S,t,h,_,f]),C=(0,O.N)({planId:y,...(0,W.Ef)(E,{team:{entryPoint:K.B.MEMBERS_TAB},org:{entryPoint:q.h.MEMBERS_TAB}}),queueFilterCountsRefetch:g,onSuccess:N,onFailure:R}),k=(0,z.iZ)(),L=(0,D.L)(o.e.MONETIZATION_EXPANSION);return(0,s.jsx)(c.wi,{children:(0,s.jsxs)(c.jk,{children:[(0,s.jsx)(A.$z,{disabled:I,onClick:()=>m(null),variant:"secondary",trackingProperties:{trackingDescriptor:M.c.BACK},children:(0,u.t)("modify_plan_user_seat_modal.button.back")}),(0,s.jsx)(A.$z,{disabled:I,onClick:()=>{w(!0),C({users:[{userId:p,planUserId:n}],seatTypeOption:e,seatIncreaseAuthorized:l,seatSwapIntended:d,upgradeReason:E===H.OL.TEAM?H.$n.ADMIN_UPGRADE:H.Uu.ADMIN_UPGRADE,upgradeMethod:H.XI.ADMIN_INITIATED,assignedAt:new Date,upgradeActorName:k?.name||k?.handle||void 0})},variant:"primary",trackingProperties:{trackingDescriptor:M.c.CONFIRM,isDiscouragedAnnualSeatSwap:x,previousSeatType:_,nextSeatType:e},trackingOptions:L,children:x?(0,u.t)("modify_plan_user_seat_modal.button.add_seat"):(0,u.t)("modify_plan_user_seat_modal.button.confirm")})]})})}function es({failedToLoadAvailability:e,failedToLoadPrices:t}){a.useEffect(()=>{(e||t)&&(0,m.sx)("seat_purchasing.non_blocking_fetch_error",{seat_counts_fetch_error:e,price_fetch_error:t,view:"modify_plan_user_seat_modal"},{forwardToDatadog:!0})},[e,t]);let i=null;return(e&&t?i=(0,u.t)("modify_plan_user_seat_modal.error.missing_pricing_and_seat_avability"):e?i=(0,u.t)("modify_plan_user_seat_modal.error.missing_seat_availability"):t&&(i=(0,u.t)("modify_plan_user_seat_modal.error.missing_pricing")),i)?(0,s.jsx)("div",{"data-testid":"modify-seat-modal-error-message",children:(0,s.jsx)(I.E,{color:"danger",children:i})}):null}function ea({userName:e,lastActiveAt:t,upgradeReason:i,upgradeMethod:a,assignedAt:r,upgradeActorName:n,currentSeatType:o,jobTitle:l}){let d=l&&"other"!==(0,h.HB)(l),c=t&&7>=(0,p.A)().diff((0,p.A)(t),"days"),m=r?(0,L.tb)(r.toISOString()):null;return(0,s.jsxs)(S.Y,{direction:"vertical",spacing:0,padding:{top:4},children:[(0,s.jsxs)("div",{className:"x78zum5 x6s0dn4",children:[d&&(0,s.jsx)(I.E,{color:"secondary",children:(0,u.t)("modify_plan_user_seat_modal.role",{jobTitle:(0,h.lb)(l)})}),d&&c&&(0,s.jsx)("div",{className:"x2lah0s xuxw1ft xt9pc3i",children:(0,s.jsx)(I.E,{color:"secondary","aria-hidden":"true",children:" \xb7 "})}),c&&(0,s.jsx)(I.E,{color:"secondary",children:(0,u.tx)("modify_plan_user_seat_modal.last_active",{lastActiveAt:(0,s.jsx)(b.h1,{date:t})})})]}),a&&(0,s.jsxs)("div",{className:"x78zum5 x6s0dn4",children:[(0,s.jsx)(y.b,{text:(0,s.jsx)("div",{className:"xrlp15q x1nmd3yn xm735u9 xkbmbem x3wk4up x1n0bwc9 x11yfylt",children:(0,N.mb)(a)}),setToMaxWidth:!0,popoverText:(0,N.Qi)(e,a??null,i??null,n,void 0,o)}),m&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(I.E,{color:"secondary","aria-hidden":"true",children:" "}),(0,s.jsx)(I.E,{color:"secondary",children:(0,u.tx)("members_table.user_upgrade_date",{upgradeDate:m})})]})]})]})}let er=(0,X.Ju)(function(e){let t=(0,j.jh)();return(0,s.jsx)(g.u9,{label:"ModifyPlanUserSeatModal",children:(0,s.jsx)(x.tH,{boundaryKey:"ModifyPlanUserSeatModal",fallback:x.H4.DEFAULT_FULL_PAGE,hasCustomWASMBuild:!1,children:(0,s.jsx)(a.Suspense,{fallback:(0,s.jsx)(Y.N,{hiddenTitle:"Modify Seat Modal",estimatedWidth:480,estimatedHeight:504,height:"dynamic"}),children:(0,s.jsx)(ee,{...e,isInUserContextInDowngradeFlowExp:t})})})})})},107419:(e,t,i)=>{i.d(t,{P:()=>c,Z:()=>u});var s=i(468882),a=i(551891),r=i(622038),n=i(533222),o=i(765617),l=i(721959),d=i(830288);let c=(0,n.MM)("TEAM_USER_UPDATE_SEAT_TYPE",async(e,{teamId:t,deltas:i,entryPoint:n,onSuccess:c,onFailure:u},{optimistId:m})=>{await d.H.updateTeamUsers({team_id:t,team_user_deltas:i.map(({userId:e,seatTypeOption:t,seatIncreaseAuthorized:i,seatSwapIntended:s})=>{let a={user_id:e,seat_type:t===l.Gu.VIEW?"":t};return null!=i&&(a.seat_increase_authorized=i),null!=s&&(a.seat_swap_intended=s),a}),entry_point:n}).then(function({data:i}){e.dispatch(a.c(m)),e.dispatch((0,o.yJ)({teamUsers:i.meta,teamId:t})),c?.()}).catch(function(t){e.dispatch(a.r(m)),e.dispatch(r.s.error(function(e){let{reason:t}=e,{message:i}=e;switch(t){case"seat_increase_unauthorized":return(0,s.t)("modify_plan_user_seat_modal.error.seat_increase_unauthorized");case"upgrade_on_suspended_plan":if(i)return(0,s.t)("modify_plan_user_seat_modal.error.upgrade_on_suspended_plan")}return(0,s.t)("team_user.actions.an_error_occurred_while_changing_a_team_member_s_billing_status")}(t.data))),u?.(),console.error(t)})});function u(e,t){let{teamId:i,deltas:s,seatTypeProducts:a,upgradeMethod:r,upgradeReason:n,assignedAt:o,upgradeActorName:d}=t.payload,c=e[i];if(!c)return e;let u={...c},m={};return Object.entries(c).forEach(([e,t])=>{let i=t.team_user?.user_id;e&&i&&(m[i]={originalKey:e,originalMember:t})}),s.forEach(({userId:e,seatTypeOption:t})=>{let{originalKey:i,originalMember:s}=m[e]||{},c=t===l.Gu.VIEW?null:t,p=(c&&a[c])??null;if(!i||!s||!s.team_user||c&&!p)return;let h={...s.team_user,active_seat_type:p},_={...s,upgrade_reason:n,upgrade_method:r,assigned_at:o,upgrade_actor_name:d,team_user:h};u[i]=_}),{...e,[i]:u}}},268912:(e,t,i)=>{i.d(t,{b:()=>c});var s=i(104076),a=i(716976),r=i(468882),n=i(511570),o=i.n(n),l=i(138580),d=i(651376);function c(e){let t=a.useRef(null);return e.disabled?(0,s.jsx)("button",{className:"base_like_button--buttonContainerDisabled--sOWAD base_like_button--buttonContainer--vfBIa cta_button--buttonBase--xMT0c text--fontNeg14--ARPWl text--_fontBase--QdLsd text--_negText--j9g-L",disabled:e.disabled,"aria-pressed":e.isResourceLiked,children:(0,s.jsx)("div",{className:"base_like_button--likeIconDisabled--dfrWS base_like_button--likeIcon--70nFu text--fontPos18--rYXJb text--_fontBase--QdLsd",children:l.C})}):(0,s.jsx)("button",{className:o()("base_like_button--buttonContainer--vfBIa cta_button--buttonBase--xMT0c text--fontNeg14--ARPWl text--_fontBase--QdLsd text--_negText--j9g-L",{"base_like_button--removeButtonBorder--h-j-A":!!e.removeButtonBorder}),onClick:e.onClick,"aria-label":(0,r.t)("community.like"),"aria-pressed":e.isResourceLiked,"data-tooltip":(0,r.t)("community.like"),"data-tooltip-type":d.Ib.TEXT,"data-testid":"like-button",children:(0,s.jsx)("div",{className:"base_like_button--likeIcon--70nFu text--fontPos18--rYXJb text--_fontBase--QdLsd",ref:t,children:e.isResourceLiked?l.W:l.C})})}},138580:(e,t,i)=>{i.d(t,{C:()=>a,W:()=>r});var s=i(104076);let a=(0,s.jsx)("span",{children:(0,s.jsxs)("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",children:[(0,s.jsx)("rect",{width:"16",height:"16",fill:"var(--color-background)"}),(0,s.jsx)("path",{d:"M1.8843 3.04791L2.23141 3.40779L1.8843 3.04791ZM7.12543 3.04791L7.47254 2.68802L7.12543 3.04791ZM1.8843 8.10293L2.23141 7.74304L2.23141 7.74304L1.8843 8.10293ZM2.75826 8.94585L3.10528 9.30582L3.47859 8.94594L3.10536 8.58597L2.75826 8.94585ZM2.75823 8.94588L2.41121 8.58591L2.0379 8.9458L2.41112 9.30577L2.75823 8.94588ZM7.99935 14.0009L7.65225 14.3608L7.99935 14.6956L8.34646 14.3608L7.99935 14.0009ZM14.114 8.10338L13.7669 7.74349L13.7669 7.74349L14.114 8.10338ZM14.114 3.04836L14.4611 2.68847L14.4611 2.68847L14.114 3.04836ZM8.87288 3.04836L8.52577 2.68847L8.52577 2.68847L8.87288 3.04836ZM7.99939 3.89083L7.65228 4.25072L7.99939 4.5855L8.34649 4.25072L7.99939 3.89083ZM2.23141 3.40779C3.48501 2.19871 5.52472 2.19871 6.77832 3.40779L7.47254 2.68802C5.83154 1.1053 3.17819 1.1053 1.53719 2.68802L2.23141 3.40779ZM2.23141 7.74304C0.987968 6.54376 0.987968 4.60708 2.23141 3.40779L1.5372 2.68802C-0.113961 4.28055 -0.113961 6.87029 1.5372 8.46281L2.23141 7.74304ZM3.10536 8.58597L2.23141 7.74304L1.5372 8.46281L2.41115 9.30574L3.10536 8.58597ZM3.10525 9.30585L3.10528 9.30582L2.41124 8.58588L2.41121 8.58591L3.10525 9.30585ZM8.34646 13.641L3.10533 8.586L2.41112 9.30577L7.65225 14.3608L8.34646 13.641ZM13.7669 7.74349L7.65225 13.641L8.34646 14.3608L14.4611 8.46326L13.7669 7.74349ZM13.7669 3.40824C15.0103 4.60753 15.0103 6.54421 13.7669 7.74349L14.4611 8.46326C16.1123 6.87074 16.1123 4.281 14.4611 2.68847L13.7669 3.40824ZM9.21998 3.40824C10.4736 2.19916 12.5133 2.19916 13.7669 3.40824L14.4611 2.68847C12.8201 1.10575 10.1668 1.10575 8.52577 2.68847L9.21998 3.40824ZM8.34649 4.25072L9.21998 3.40824L8.52577 2.68847L7.65228 3.53094L8.34649 4.25072ZM6.77832 3.40779L7.65228 4.25072L8.34649 3.53094L7.47254 2.68802L6.77832 3.40779Z",fill:"var(--color-icon)"})]})}),r=(0,s.jsx)("span",{children:(0,s.jsxs)("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",children:[(0,s.jsx)("rect",{width:"16",height:"16",fill:"var(--color-background)"}),(0,s.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7.12543 3.04791C5.67813 1.652 3.3316 1.652 1.8843 3.04791C0.437004 4.44381 0.437004 6.70702 1.8843 8.10293L2.75826 8.94585L2.75823 8.94588L7.99935 14.0009L14.114 8.10338C15.5613 6.70747 15.5613 4.44426 14.114 3.04836C12.6667 1.65245 10.3202 1.65245 8.87288 3.04836L7.99939 3.89083L7.12543 3.04791Z",fill:"#F24822"}),(0,s.jsx)("path",{d:"M1.8843 3.04791L2.23141 3.40779L1.8843 3.04791ZM7.12543 3.04791L7.47254 2.68802L7.12543 3.04791ZM1.8843 8.10293L2.23141 7.74304L2.23141 7.74304L1.8843 8.10293ZM2.75826 8.94585L3.10528 9.30582L3.47859 8.94594L3.10536 8.58597L2.75826 8.94585ZM2.75823 8.94588L2.41121 8.58591L2.0379 8.9458L2.41112 9.30577L2.75823 8.94588ZM7.99935 14.0009L7.65225 14.3608L7.99935 14.6956L8.34646 14.3608L7.99935 14.0009ZM14.114 8.10338L13.7669 7.74349L13.7669 7.74349L14.114 8.10338ZM14.114 3.04836L14.4611 2.68847L14.4611 2.68847L14.114 3.04836ZM8.87288 3.04836L8.52577 2.68847L8.52577 2.68847L8.87288 3.04836ZM7.99939 3.89083L7.65228 4.25072L7.99939 4.5855L8.34649 4.25072L7.99939 3.89083ZM2.23141 3.40779C3.48501 2.19871 5.52472 2.19871 6.77832 3.40779L7.47254 2.68802C5.83154 1.1053 3.17819 1.1053 1.53719 2.68802L2.23141 3.40779ZM2.23141 7.74304C0.987968 6.54376 0.987968 4.60708 2.23141 3.40779L1.5372 2.68802C-0.113961 4.28055 -0.113961 6.87029 1.5372 8.46281L2.23141 7.74304ZM3.10536 8.58597L2.23141 7.74304L1.5372 8.46281L2.41115 9.30574L3.10536 8.58597ZM3.10525 9.30585L3.10528 9.30582L2.41124 8.58588L2.41121 8.58591L3.10525 9.30585ZM8.34646 13.641L3.10533 8.586L2.41112 9.30577L7.65225 14.3608L8.34646 13.641ZM13.7669 7.74349L7.65225 13.641L8.34646 14.3608L14.4611 8.46326L13.7669 7.74349ZM13.7669 3.40824C15.0103 4.60753 15.0103 6.54421 13.7669 7.74349L14.4611 8.46326C16.1123 6.87074 16.1123 4.281 14.4611 2.68847L13.7669 3.40824ZM9.21998 3.40824C10.4736 2.19916 12.5133 2.19916 13.7669 3.40824L14.4611 2.68847C12.8201 1.10575 10.1668 1.10575 8.52577 2.68847L9.21998 3.40824ZM8.34649 4.25072L9.21998 3.40824L8.52577 2.68847L7.65228 3.53094L8.34649 4.25072ZM6.77832 3.40779L7.65228 4.25072L8.34649 3.53094L7.47254 2.68802L6.77832 3.40779Z",fill:"#F24822"})]})})},125735:(e,t,i)=>{i.d(t,{w:()=>v});var s=i(237420),a=i(653155),r=i(468882),n=i(762359),o=i(759095),l=i(553538),d=i(571883),c=i(651594),u=i(954402),m=i(389727),p=i(533546),h=i(270721),_=i(554841),g=i(756703),f=i(266132),x=i(520356),b=i(214099),y=i(864830),E=i(325488),A=i(300712);function v(e,t,i,m){let b=function(e,t,i,a){let r=(0,s.wA)(),n=(0,x.iZ)(),o=(0,d.Jm)(),l=()=>{(0,u.Sv)(e)||((0,f.Cu)(E()),(0,y.U)(e)?r(p.zm({hubFileId:e.id})):(0,y.xQ)(e)?r(h.C({id:e.id,resourceType:y.vt.WIDGET})):r(h.C({id:e.id,resourceType:y.vt.PLUGIN})))},m=e=>{if(e.stopPropagation(),n){if(!n.community_profile_id){r(_.to({type:A.G$,data:{userId:n.id,variations:[A.FF.OPT_IN],onFinish:()=>l()}}));return}l()}},b=t=>{if(!(0,u.Sv)(e)){if(t.stopPropagation(),!n)throw Error(`Tried to unlike a ${(0,c.KH)(e)} as a signed out user`);(0,f.Cu)(E()),(0,y.U)(e)?r(p.Qi({hubFileId:e.id,likeId:i||void 0})):(0,y.xQ)(e)?r(h.$({id:e.id,resourceType:y.vt.WIDGET,likeId:i||void 0})):r(h.$({id:e.id,resourceType:y.vt.PLUGIN,likeId:i||void 0}))}},E=()=>({action:(0,u.Qc)(e)?t?g.s0.HUB_FILE_UNLIKE:g.s0.HUB_FILE_LIKE:(0,u.$3)(e)?t?g.s0.WIDGET_UNLIKE:g.s0.WIDGET_LIKE:t?g.s0.PLUGIN_UNLIKE:g.s0.PLUGIN_LIKE,pluginId:e.id,profileId:e.publisher.id,viewContext:a,searchSessionId:o});return function(){return t?e=>b(e):e=>m(e)}}(e,t,i,m),E=function(e,t,i,m){let p=(0,s.wA)(),h=(0,x.iZ)(),b=(0,d.Jm)(),y=(0,o.gY)(T),E=(0,o.gY)(S),v=()=>{if(!(0,u.Sv)(e))return;let t=(0,u.qY)(e);if(!t)throw Error("Missing resource content");(0,f.Cu)(R());let i=y({resourceId:e.id,contentId:t.id,apiResourceType:(0,c.A7)(e)});h&&h.community_profile_id&&(0,n.WB)().optimisticallyCreate({CommunityHubLike:{[`optimistic-${e.id}-${h.community_profile_id}`]:{profileId:h.community_profile_id,resourceId:e.id,hubFileId:null,pluginId:null,hiddenAt:null,createdAt:new Date,updatedAt:new Date,canRead:!0}}},i),i.catch(e=>{p(l.F.enqueue({message:(0,r.t)("community.actions.unable_to_like_this_resource_error",{error:(0,a.J)(e,e.data?.message)}),type:"RESOURCE_LIKE_FAILED",error:!0}))})},I=e=>{if(e.stopPropagation(),h){if(!h.community_profile_id){p(_.to({type:A.G$,data:{userId:h.id,variations:[A.FF.OPT_IN],onFinish:()=>v()}}));return}v()}},w=t=>{if(!(0,u.Sv)(e))return;let s=(0,u.qY)(e);if(!s)throw Error("Missing resource content");if(t.stopPropagation(),!h)throw Error("Tried to unlike a resource as a signed out user");(0,f.Cu)(R());let o=E({resourceId:e.id,contentId:s.id,apiResourceType:(0,c.A7)(e)});i&&(0,n.WB)().optimisticallyDelete({CommunityHubLike:{[i]:null}},o),o.catch(e=>{p(l.F.enqueue({message:(0,r.t)("community.actions.unable_to_unlike_this_resource_error",{error:(0,a.J)(e,e.data.message)}),type:"RESOURCE_UNLIKE_FAILED",error:!0}))})},R=()=>({action:t?g.M5.RESOURCE_UNLIKE:g.M5.RESOURCE_LIKE,resourceId:e.id,resourceType:(0,u.Vm)(e),profileId:e.publisher.id,viewContext:m,searchSessionId:b});return function(){return t?e=>w(e):e=>I(e)}}(e,t,i,m);return(0,u.Sv)(e)?E:b}let T=b.M4.Mutation(({resourceId:e,contentId:t,apiResourceType:i},{query:s})=>(s.mutate((0,m.Z)({apiResourceType:i,id:t}),e=>{e&&(e.like_count+=1)}),E.a.likeResource({resourceId:e}))),S=b.M4.Mutation(({resourceId:e,contentId:t,apiResourceType:i},{query:s})=>(s.mutate((0,m.Z)({apiResourceType:i,id:t}),e=>{e&&(e.like_count-=1)}),E.a.unlikeResource({resourceId:e})))},845003:(e,t,i)=>{i.d(t,{o2:()=>A,vj:()=>v,w8:()=>y});var s=i(104076),a=i(716976),r=i(81850),n=i(235313),o=i(668658),l=i(420928),d=i(468882),c=i(511570),u=i.n(c),m=i(291778),p=i(985841),h=i(301094),_=i(52435),g=i(838909),f=i(320798),x=i(588586),b=i(387756);function y(e){if(e&&"exception"!==e.type&&"TOO_MANY_TAGS"===e.key){let{maxTags:t}=e.data;return(0,d.t)("community.publishing.select_up_to_n_tags_error",{maxTagsPerResource:t})}}let E=a.forwardRef(function({tagsFieldsManager:e,onTouched:t,disabled:i},r){let{tagsV2Field:{setValue:n},validV2Tags:o}=e,l=(0,h.Lz)(e.tagsV2Field,[]),d=a.useCallback(e=>!!l.find(t=>(0,_.s)(t,e)),[l]),c=a.useCallback(t=>!!i||!(0,h.Zc)(e.tagsV2Field)||!d(t)&&l.length>=g.jI,[i,d,l.length,e.tagsV2Field]),u=a.useCallback(e=>{n&&(d(e)?n(l.filter(t=>!(0,_.s)(t,e))):n([...l,e]))},[d,l,n]),m=o.find(e=>!c(e)),p=a.useRef(null);return a.useImperativeHandle(r,()=>({focus:e=>{p.current?.focus(e)}}),[]),(0,s.jsx)("div",{className:b.I8,children:o.map(e=>{let i=d(e),a=c(e),r=(0,g.uS)(e);return(0,s.jsx)(A,{tag:e,isDisabled:a,isSelected:i,onTouched:t,toggleTag:u,firstNonDisabledTag:m,firstNonDisabledCheckboxRef:p,translatedTag:r},e.text)})})});function A({tag:e,isDisabled:t,isSelected:i,onTouched:a,toggleTag:n,firstNonDisabledTag:d,firstNonDisabledCheckboxRef:c,translatedTag:m,useSecondaryStyles:p}){return(0,s.jsxs)("span",{className:u()(b.Tc,{[b.r9]:t,[b.ne]:p}),children:[(0,s.jsx)(r.F,{ref:e===d?c:void 0,id:`tagsV2Select-tag-${e.text}`,className:b.It,"aria-label":m,onChange:()=>{a?.(),n(e)},checked:i,disabled:t}),i?(0,s.jsx)(o.l,{className:u()(b.oE,{[b.Iz]:p})}):(0,s.jsx)(l.J,{className:b.WW}),(0,s.jsx)("label",{htmlFor:`tagsV2Select-tag-${e.text}`,children:m})]},e.text)}let v=a.forwardRef(function({tagsFieldsManager:e,touchedFieldsTracker:t,autoScrollAutocompleteResultsIntoView:i,PublishModalRowComponent:r=f.A,autocompleteInputContainerClassName:o,disabled:l},c){let{tagsV1Field:u,tagsV2Field:_,validV2Tags:b}=e,A=(0,p.w)(u,!t.tagsV1.touched),v=(0,m.U)(A,x.lN,b),T=(0,p.w)(_,!t.tagsV2.touched),S=(0,m.U)(T,y),I=(0,h.Lz)(u,[]),w=a.useRef((0,h.Lz)(u,[]).length>0),[R,N]=a.useState(w.current);a.useEffect(()=>{I.length>0&&N(!0)},[I]);let C=a.useRef(null),O=a.useRef(null);return a.useImperativeHandle(c,()=>({focus:e=>{S?C.current?.focus(e):O.current?.focus(e)}}),[S]),(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(r,{label:(0,d.t)("community.publishing.recommended_tags"),subLabel:b.length>g.jI?(0,d.t)("community.publishing.select_up_to_n_tags_to_help_people_discover_your_resource",{maxTagsPerResource:g.jI}):(0,d.t)("community.publishing.select_tags_to_help_people_discover_your_resource"),error:S,afterErrorContent:!l&&!R&&(0,s.jsx)(n.$n,{variant:"link",onClick:()=>{N(!0)},children:(0,d.t)("community.publishing.add_custom_tags")}),disabled:l,children:(0,s.jsx)(E,{ref:C,tagsFieldsManager:e,touched:t.tagsV2.touched,onTouched:t.tagsV2.onTouched,disabled:l})}),R&&(0,s.jsx)(r,{label:(0,d.t)("community.publishing.custom_tags"),error:v,disabled:l,children:(0,s.jsx)(x.Hs,{ref:O,tagsV1Field:u,validV2Tags:b,touched:t.tagsV1.touched,onTouched:t.tagsV1.onTouched,autoFocusAutocompleteInput:!w.current,autoScrollAutocompleteResultsIntoView:i,autocompleteInputContainerClassName:o,disabled:l})})]})})},519639:(e,t,i)=>{i.d(t,{l:()=>F,v:()=>D});var s=i(104076),a=i(716976),r=i(922251),n=i(235313),o=i(239513),l=i(468882),d=i(38989);i(224433);var c=i(511570),u=i.n(c),m=i(861814),p=i(604016),h=i(892918),_=i(748399),g=i(213242),f=i(139537),x=i(448821),b=i(366877),y=i(314543),E=i(291778),A=i(985841),v=i(301094),T=i(966010),S=i(508424),I=i(733323),w=i(756703),R=i(848755),N=i(920511),C=i(973570),O=i(593433),k=i(320798),L=i(243256),j=i(709117);function M(e){if(e&&"exception"!==e.type&&"THUMBNAIL_MEDIUM_MISSING"===e.key)return(0,l.t)("community.publishing.you_must_set_a_thumbnail_for_your_resource")}let F=a.forwardRef(function({carouselMediaFieldManager:e,touched:t,onTouched:i,trackingEventName:c,showThumbnailWithLetterbox:p,disabled:h},f){let{trackEvent:y}=(0,R.j6)(),{setThumbnailMediumFromFile:S,setThumbnailMediumFromInput:I,hasDefaultThumbnailMedium:F,defaultThumbnailMediumSource:D,restoreDefaultThumbnailMedium:P,deleteMedia:B}=e,{allowVideos:U}=e.deps,V=(0,v.Zc)(e),z=(0,A.w)(e,!t),H=(0,E.U)(z,M),$=(0,v.Lz)(e,void 0),G=$?.thumbnailMedium,W=a.useRef(null),[q,K]=a.useState(!1),X=a.useCallback(e=>{W.current?.click(),e.stopPropagation()},[]),Y=!G&&!1===F&&"file_thumbnail"===D,Q=a.useRef(null),Z=a.useRef(null),J=a.useId(),ee=`${J}-input`,et=`${J}-description`,ei=`${J}-error`;a.useImperativeHandle(f,()=>({focus:e=>{Q.current?Q.current.focus(e):Z.current?.focus(e)}}),[]);let es=a.useMemo(()=>[...N.CW,...U?C.VY:[]],[U]);return(0,s.jsx)(k.A,{label:V?(0,l.t)("community.publishing.set_a_thumbnail"):(0,l.t)("community.publishing.thumbnail_preview"),labelHtmlFor:ee,subLabel:V?(0,l.t)("community.publishing.recommended_size_in_pixels",{mediaWidth:T.Vb,mediaHeight:T.wj}):void 0,subLabelId:et,error:H,errorId:ei,afterErrorContent:(0,s.jsxs)("div",{className:u()(L.Pf,{[L.R]:!Y}),"aria-hidden":!Y,children:[(0,s.jsx)("div",{className:L.wI,children:(0,d.kc)().dse_library_pg_thumbnails?(0,l.t)("community.publishing.you_can_right_click_a_frame_and_select_set_as_file_thumbnail"):(0,l.t)("community.publishing.you_can_right_click_a_frame_and_select_set_as_thumbnail")}),(0,s.jsxs)("div",{className:L.oo,"aria-hidden":!0,children:[(0,s.jsx)(_.oW,{srcSet:`${j} 2x`,alt:""}),(0,s.jsxs)("div",{className:L.or,children:[(0,s.jsx)("div",{children:(0,l.t)("fullscreen_actions.mask-selection")}),(0,d.kc)().dse_library_pg_thumbnails?(0,s.jsx)("div",{children:(0,s.jsx)("div",{children:(0,l.t)("fullscreen_actions.set_as_file_thumbnail")})}):(0,s.jsx)("div",{children:(0,l.t)("fullscreen_actions.set_as_thumbnail")})]})]})]}),required:V,children:(0,s.jsxs)("div",{className:L.kL,onClick:X,onDragOver:e=>{let t=(0,x.S)(e.dataTransfer.items[0]?.type,C.yj)||(U?(0,x.S)(e.dataTransfer.items[0]?.type,C.Mr):void 0);S&&1===e.dataTransfer.items.length&&t&&es.includes(t)?(e.dataTransfer.dropEffect="copy",e.currentTarget.setAttribute("data-droppable","true")):(e.dataTransfer.dropEffect="none",e.currentTarget.setAttribute("data-droppable","false")),e.preventDefault()},onDragLeave:e=>{e.currentTarget.removeAttribute("data-droppable"),e.preventDefault()},onDrop:e=>{if(e.currentTarget.removeAttribute("data-droppable"),!S)return;let t=e.dataTransfer.items[0]?.getAsFile();t&&(i?.(),S(t),e.preventDefault())},children:[(0,s.jsx)("input",{ref:W,accept:es.join(", "),"aria-describedby":et,"aria-errormessage":H?ei:void 0,"aria-invalid":!!H,className:g.s.hidden.$,"data-testid":"resource-publishing-thumbnail-uploader-input",disabled:q||!I||h,id:ee,onChange:async e=>{q||!I||h||(i?.(),K(!0),await I(e.target),y(c,{step:w.WX.ADD_CUSTOM_THUMBNAIL}),K(!1))},type:"file"}),G?(0,s.jsxs)("div",{className:L.iT,children:[(0,s.jsx)("div",{className:L.xn,children:p&&"image"===G.type?(0,s.jsx)(b.Q,{src:G.url,loading:"lazy",alt:(0,l.t)("community.publishing.thumbnail_image"),draggable:!1,crossOrigin:"use-credentials"}):(e=>{switch(e.type){case"image":return(0,s.jsx)(_.oW,{src:e.url,loading:"lazy",alt:(0,l.t)("community.publishing.thumbnail_image"),draggable:!1});case"video":return(0,s.jsx)("video",{className:"x186iv6y xl1xv1r x5yr21d x192jxwq x1f0ztbi",controls:!0,controlsList:"nofullscreen nodownload noplaybackrate",disablePictureInPicture:!0,src:e.url});default:(0,m.xb)(e)}})(G)}),(0,s.jsx)(r.E,{ref:Q,className:L.Ik,"aria-label":(0,l.t)("community.publishing.clear_thumbnail_image"),onClick:e=>{i?.(),B?.(G),e.stopPropagation()},disabled:!B||h,children:(0,s.jsx)(o.X,{})})]}):(0,s.jsxs)("div",{className:L.y7,children:[(0,s.jsx)(O.L,{}),(0,s.jsxs)("div",{className:L.Yj,children:[P&&(0,s.jsx)(n.$n,{disabled:q||h,onClick:e=>{i?.(),P(),e.stopPropagation()},children:"file_thumbnail"===D?(0,l.t)("community.publishing.use_file_thumbnail"):(0,l.t)("community.publishing.use_default_thumbnail")}),(0,s.jsx)(n.$n,{ref:Z,variant:P?"link":void 0,onClick:X,disabled:q||!I||h,children:U?(0,l.t)("community.publishing.upload_images_or_videos"):(0,l.t)("community.publishing.upload_image")})]})]})]})})});function D({size:e="large",defaultImageUrl:t,existingHubFile:i,onThumbnailChange:r}){let o=(0,p.H)(r),d=(0,y.d)(S.v,{existingResourceContent:i,createNewVersionOnSubmit:!0,allowVideos:!1,generateInitialValue:void 0},void 0),c=(0,I.n)(d),u=v.Lz(d,void 0)?.thumbnailMedium,m=c.setThumbnailMediumFromInput&&!!d.setValue&&!!r,g=a.useRef(null),[x,b]=a.useState(!1),[E,A]=(0,h.M)(),T=a.useCallback(e=>{e?.stopPropagation(),m&&g.current?.click()},[m]),w=a.useCallback(async e=>{!x&&c.setThumbnailMediumFromInput&&(b(!0),await c.setThumbnailMediumFromInput(e.target),b(!1))},[x,c]);return a.useEffect(()=>{let e=v.Lz(d,void 0)?.thumbnailMedium;o.current?.(e)},[o,d]),(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("input",{ref:g,type:"file",accept:"image/*",onChange:w,disabled:x||!m,className:"x1s85apg"}),(0,s.jsxs)("div",{ref:E,...{0:{className:"x1n2onr6 xb3r6kr x186iv6y x19y5rnk x1v8gsql xh8yej3"},2:{className:"x1n2onr6 xb3r6kr x1xjupan x192jxwq x1v8gsql xh8yej3"},1:{className:"x1n2onr6 xb3r6kr x186iv6y x19y5rnk x1v8gsql xh8yej3 xbyyjgo"},3:{className:"x1n2onr6 xb3r6kr x1xjupan x192jxwq x1v8gsql xh8yej3 xbyyjgo"}}[!("small"!==e)<<1|!m<<0],children:[(0,s.jsx)(_.oW,{...{0:{className:"x1lliihq xh8yej3 x5yr21d xl1xv1r x19y5rnk"},2:{className:"x1lliihq xh8yej3 x5yr21d xl1xv1r x192jxwq"},1:{className:"x1lliihq xh8yej3 x5yr21d xl1xv1r x19y5rnk x197sbye"},3:{className:"x1lliihq xh8yej3 x5yr21d xl1xv1r x192jxwq x197sbye"}}[!("small"!==e)<<1|!!x<<0],src:u?.url||t,loading:"lazy",alt:(0,l.t)("community.publishing.thumbnail_image")}),A&&m&&(0,s.jsx)("button",{type:"button",...{0:{className:"x10l6tqk x13vifvy xu96u03 x3m8u43 x1ey2m1c x68m4m9 x78zum5 x6s0dn4 xl56j7k x1hc1fzr xzdg38j x19y5rnk"},1:{className:"x10l6tqk x13vifvy xu96u03 x3m8u43 x1ey2m1c x68m4m9 x78zum5 x6s0dn4 xl56j7k x1hc1fzr xzdg38j x192jxwq"}}[!("small"!==e)<<0],onClick:e=>{x||T(e)},children:(0,s.jsx)("div",{className:"x78zum5 xdt5ytf x6s0dn4 x1nfngrj",children:(0,s.jsx)(n.$n,{onClick:T,disabled:x,children:(0,l.tx)("templates.publishing.upload_custom_thumbnail")})})}),x&&(0,s.jsx)("div",{...{0:{className:"x10l6tqk x13vifvy xu96u03 x3m8u43 x1ey2m1c x11gdpij x78zum5 x6s0dn4 xl56j7k x19y5rnk"},1:{className:"x10l6tqk x13vifvy xu96u03 x3m8u43 x1ey2m1c x11gdpij x78zum5 x6s0dn4 xl56j7k x192jxwq"}}[!("small"!==e)<<0],children:(0,s.jsx)(f.k,{size:"small"===e?"sm":"md"})})]})]})}},470653:(e,t,i)=>{i.d(t,{M:()=>eA,S:()=>eT});var s=i(104076),a=i(716976),r=i(237420),n=i(801070),o=i(51091),l=i(258882),d=i(235313),c=i(498020),u=i(653155),m=i(468882);i(224433);var p=i(208265),h=i.n(p),_=i(851824),g=i(604016),f=i(959248),x=i(139537),b=i(133798),y=i(852130),E=i(13193),A=i(251180),v=i(456737),T=i(508642),S=i(79875),I=i(892338),w=i(491527),R=i(301094),N=i(783017),C=i(351768),O=i(736343),k=i(634080),L=i(519843),j=i(873013),M=i(640007),F=i(229574),D=i(281034),P=i(8272),B=i(320798),U=i(980849),V=i(748614),z=i(405713),H=i(971304),$=i(588586),G=i(845003),W=i(519639),q=i(811850),K=i(397028),X=i(581109),Y=i(733323),Q=i(67285),Z=i(498263),J=i(212828),ee=i(707698),et=i(554841),ei=i(756703),es=i(848755),ea=i(562709),er=i(920511),en=i(880283),eo=i(772321),el=i(503158),ed=i(794134),ec=i(203745),eu=i(520356),em=i(620221),ep=i(864830),eh=i(448160),e_=i(647185),eg=i(459337),ef=i(410561),ex=i(128757),eb=i(708515);function ey({draft:e,publishedDomainInfo:t,fastForwardOnMount:i}){let n,p;let{existingHubFile:f}=e.deps,y=(0,r.wA)(),{trackEvent:V}=(0,es.j6)(),K=(0,g.H)(V),X=a.useCallback(()=>{y(et.Ce()),K.current(ei.in,{step:ei.WX.CLOSED})},[y,K]),ea=(0,w.D)(e.fieldStates);(0,J.W)(e.fieldStates.viewerMode);let er=(0,Z.J)({tagsV1Field:e.fieldStates.tagsV1,tagsV2Field:e.fieldStates.tagsV2}),en=(0,Y.n)(e.fieldStates.carouselMedia),eo=(0,Q.w)(e.fieldStates.cocreators),el=a.useMemo(()=>({details:!0,thumbnail:!0,advanced:!0}),[]),[ed,ec,eu]=o.t.useTabs(el,{orientation:"vertical"}),em=(0,b.b)(eu),{stepWithErrors:ep,clearStepWithErrors:eh,checkProgress:e_,checkOverallProgress:eg}=(0,S.o)([{id:"details",checkpoints:[{check:()=>(0,R.i_)(e.fieldStates.name),onFail:()=>(0,O.__)(O.tZ.NAME_INPUT)},{check:()=>(0,R.i_)(e.fieldStates.description),onFail:()=>(0,O.__)(O.tZ.DESCRIPTION_INPUT)},{check:()=>(0,R.i_)(e.fieldStates.tagsV2)&&(0,R.i_)(e.fieldStates.tagsV1),onFail:()=>(0,O.__)(O.tZ.TAGS_SECTION)}],onFail:()=>{ea.name.onTouched?.(),ea.description.onTouched?.(),ea.tagsV2.onTouched?.(),ea.tagsV1.onTouched?.()}},{id:"thumbnail",checkpoints:[{check:()=>(0,R.i_)(e.fieldStates.carouselMedia),onFail:()=>(0,O.__)(O.tZ.THUMBNAIL_UPLOADER)}],onFail:()=>{ea.carouselMedia.onTouched?.()}},{id:"advanced",checkpoints:[{check:()=>(0,R.i_)(e.fieldStates.profileHandle),onFail:()=>(0,O.__)(O.tZ.PROFILE_HANDLE_INPUT)},{check:()=>(0,R.i_)(e.fieldStates.cocreators),onFail:()=>(0,O.__)(O.tZ.COCREATORS_INPUT)},{check:()=>(0,R.i_)(e.fieldStates.tosAccepted),onFail:()=>(0,O.__)(O.tZ.TOS_AGREED_CHECKBOX)},{check:()=>(0,R.i_)(e.fieldStates.supportContact),onFail:()=>(0,O.__)(O.tZ.SUPPORT_CONTACT_INPUT)}],onFail:()=>{ea.profileHandle.onTouched?.(),ea.cocreators.onTouched?.(),ea.supportContact.onTouched?.(),ea.tosAccepted.onTouched?.()}}],em.activeTab);a.useEffect(()=>{eh()},[e.fieldStates,eh]);let{draftSubmissionResult:ef,clearDraftSubmissionResult:ey,submit:eE}=(0,I.r)(e,a.useCallback(()=>{K.current(ei.in,{step:ei.WX.PUBLISH})},[K])),eA=a.useRef(i?(0,R.MQ)(e)?"ready":"waiting_for_draft_to_stabilize":"disabled");a.useEffect(()=>{switch(eA.current){case"waiting_for_draft_to_stabilize":(0,R.MQ)(e)&&(eA.current="ready");break;case"ready":eg(),eA.current="progress_check";break;case"progress_check":ep&&ep!==em.activeTab?(em.setActiveTab(ep),eA.current="tab_switch"):(ep||eE?.(),eA.current="completed");break;case"tab_switch":e_(),eA.current="completed"}},[e_,eg,ep,eE,em,e]);let[ev,eT]=a.useState(U.X.STOPPED),eI=ev===U.X.PLAYING;n=ef?(0,s.jsx)(U.S,{publishedResourceContent:"data"in ef?ef.data.hubFile:void 0,draftSubmissionStatus:ef.result,carouselMediaField:e.fieldStates.carouselMedia,nameField:e.fieldStates.name,authorField:e.fieldStates.author,onAnimationStateChange:eT,viewerModeField:e.fieldStates.viewerMode,hideLikeAndUsage:!0}):(0,s.jsxs)("div",{className:eb.KT,children:[(0,s.jsxs)("div",{className:eb.Cd,children:[(0,s.jsxs)(o.t.TabStrip,{manager:em,children:[(0,s.jsx)(H.y,{...ed.details,index:1,text:(0,m.t)("community.publishing.write_a_description"),selected:"details"===em.activeTab,hasErrors:"details"===ep}),(0,s.jsx)(H.y,{...ed.thumbnail,index:2,text:(0,m.t)("community.publishing.fine_tune_the_preview"),selected:"thumbnail"===em.activeTab,hasErrors:"thumbnail"===ep}),(0,s.jsx)(H.y,{...ed.advanced,index:3,text:(0,m.t)("community.publishing.add_the_final_details"),selected:"advanced"===em.activeTab,hasErrors:"advanced"===ep})]}),(0,s.jsxs)("div",{className:eb.ME,"aria-hidden":!0,children:[(0,s.jsx)("div",{className:eb.jc,children:(0,m.t)("community.publishing.resource_preview")}),(0,s.jsx)(D.x,{carouselMediaField:e.fieldStates.carouselMedia,nameField:e.fieldStates.name,authorField:e.fieldStates.author})]})]}),(0,s.jsxs)("div",{className:eb.DK,children:[(0,s.jsxs)(o.t.TabPanel,{...ec.details,children:[(0,s.jsx)(O.Mm,{id:O.tZ.NAME_INPUT,children:t=>(0,s.jsx)(F.A,{ref:t,nameField:e.fieldStates.name,...ea.name})}),(0,s.jsx)(O.Mm,{id:O.tZ.DESCRIPTION_INPUT,children:t=>(0,s.jsx)(M.A,{ref:t,descriptionField:e.fieldStates.description,...ea.description})}),(0,R.i_)(e.fieldStates.category)&&(0,s.jsx)(O.Mm,{id:O.tZ.TAGS_SECTION,children:e=>er.validV2Tags.length>0?(0,s.jsx)(G.vj,{ref:e,tagsFieldsManager:er,touchedFieldsTracker:ea,autoScrollAutocompleteResultsIntoView:{behavior:"smooth",block:"end"}}):(0,s.jsx)($.Yv,{ref:e,tagsV1Field:er.tagsV1Field,...ea.tagsV1,autoScrollAutocompleteResultsIntoView:{behavior:"smooth",block:"end"}})}),t&&(0,s.jsx)(B.A,{label:(0,m.t)("community.publishing.preview_url"),children:(0,s.jsx)(l.N,{href:t.fullURL,newTab:!0,children:t.fullURL})})]}),(0,s.jsx)(o.t.TabPanel,{...ec.thumbnail,children:(0,s.jsx)(O.Mm,{id:O.tZ.THUMBNAIL_UPLOADER,children:e=>(0,s.jsx)(W.l,{ref:e,carouselMediaFieldManager:en,trackingEventName:ei.in,...ea.carouselMedia})})}),(0,s.jsxs)(o.t.TabPanel,{...ec.advanced,children:[(0,s.jsx)(O.Mm,{id:O.tZ.PROMPT_VISIBILITY_CHECKBOX,children:t=>(0,s.jsx)(k.s,{ref:t,chatHistoryVisibilityField:e.fieldStates.chatHistoryVisibility})}),(0,s.jsx)(C.A,{authorField:e.fieldStates.author}),(0,s.jsx)(O.Mm,{id:O.tZ.PROFILE_HANDLE_INPUT,children:t=>(0,s.jsx)(P.S,{ref:t,profileHandleField:e.fieldStates.profileHandle,...ea.profileHandle})}),(0,s.jsx)(O.Mm,{id:O.tZ.COCREATORS_INPUT,children:(0,s.jsx)(L.A,{cocreatorsFieldManager:eo,...ea.cocreators})}),(0,s.jsx)(O.Mm,{id:O.tZ.TOS_AGREED_CHECKBOX,children:t=>(0,s.jsx)(q.B,{ref:t,tosAcceptedField:e.fieldStates.tosAccepted})}),(0,s.jsx)(j.A,{commentsSettingField:e.fieldStates.commentsSetting}),(0,s.jsx)(O.Mm,{id:O.tZ.SUPPORT_CONTACT_INPUT,children:t=>(0,s.jsx)(z.a,{ref:t,priceField:e.fieldStates.price,supportContactField:e.fieldStates.supportContact,...ea.supportContact})})]})]})]}),p=eI||ef?.result!=="success"?eI||ef?.result!=="failure"?(0,s.jsxs)(s.Fragment,{children:[em.isOnFirstTab?(0,s.jsx)(d.$n,{variant:"secondary",onClick:X,children:(0,m.t)("general.cancel")}):!eI&&(0,s.jsx)(d.$n,{variant:"secondary",onClick:em.selectPreviousTab,children:(0,m.t)("general.back")}),em.isOnLastTab?(0,s.jsx)(d.$n,{disabled:ef?.result==="pending"||eI,onClick:()=>{e_()&&eE?.()},"data-testid":"resource-publishing-make-form-view-submit-button",children:ef?.result==="pending"||eI?(0,s.jsx)(x.k,{size:"sm"}):(0,m.t)("community.publishing.publish")}):(0,s.jsx)(d.$n,{onClick:()=>{e_()&&em.selectNextTab()},"data-testid":"resource-publishing-make-form-view-next-step-button",children:(0,m.t)("general.next")})]}):(0,s.jsx)(A.h,{holdTimeInMs:5e3,onMouseHold:async()=>{y(ee.lW({stringToCopy:JSON.stringify({figFileKey:e.deps.figFile?.key,existingHubFileId:f?.id,createNewVersionOnSubmit:e.deps.createNewVersionOnSubmit,userId:e.deps.user.id,orgId:e.deps.org?.id,orgUserId:e.deps.orgUser?.id,allowedAuthors:e.deps.allowedAuthors,allowedCocreators:await (0,N.a)(e.deps.allowedCocreatorsPromise.then(e=>e.map(e=>e.id))),authedProfilesById:Object.fromEntries(Object.entries(e.deps.authedProfilesById).map(([e,t])=>[e,h()(t,"id","team_id","org_id")])),authedActiveCommunityProfile:e.deps.authedActiveCommunityProfile&&h()(e.deps.authedActiveCommunityProfile,"id","team_id","org_id"),errors:"error"===e.status?e.errors.map(E.L):[]},void 0,2),ignoreLineBreaks:!1,successText:(0,m.t)("community.publishing.debug_info_copied_to_clipboard")}))},children:(0,s.jsx)(d.$n,{variant:"secondary",onClick:ey,children:(0,m.t)("general.go_back")})}):(0,s.jsx)(eS,{publishedHubFile:ef.data.hubFile,publishedDomainInfo:t});let ew=a.useMemo(()=>{if(!eI&&ef?.result!=="success"){if(ep)return ep===em.activeTab?(0,m.t)("community.publishing.please_fill_out_required_fields_and_correct_any_errors"):(0,m.t)("community.publishing.updates_are_needed_in_another_step");if("error"===e.status){let t;let i=e.errors.find(e=>"submission"===e.type),s=i?.data.rawError;return(t=(0,ex.l)(i))||!s||(t=(0,u.J)(s)),t??(0,m.t)("community.publishing.an_error_occurred_please_try_again")}}},[e,ef?.result,eI,ep,em.activeTab]);a.useEffect(()=>{K.current(ei.in,{step:ei.WX.OPENED})},[K]);let eN=(0,R.Lz)(e.fieldStates.name,""),eC=(0,_.A)(()=>{K.current(ei.in,{step:ei.WX.EDIT_NAME})},2e3);a.useEffect(()=>{eN&&ea.name.touched&&eC()},[eN,eC,ea.name.touched]);let eO=(0,R.Lz)(e.fieldStates.description,""),ek=(0,_.A)(()=>{K.current(ei.in,{step:ei.WX.EDIT_DESCRIPTION})},1e4);return a.useEffect(()=>{eO&&ea.description.touched&&ek()},[eO,ek,ea.description.touched]),(0,s.jsxs)(v.I,{onClose:X,width:"fit-content",height:"dynamic",children:[(0,s.jsxs)(c.vo,{children:[(0,s.jsx)(c.Y9,{children:(0,s.jsx)(c.hE,{children:(0,m.tx)("community.publishing.publish_your_file_to_community")})}),(0,s.jsx)(c.nB,{padding:0,scrolling:"manual",children:n}),(0,s.jsxs)(c.wi,{children:[(0,s.jsxs)("div",{className:"x78zum5 x6s0dn4 x167g77z",children:[!eI&&(0,s.jsx)(eR,{existingHubFile:f}),ew&&(0,s.jsx)("span",{className:eb.$o,"aria-live":"assertive","aria-atomic":!0,children:ew})]}),(0,s.jsx)(c.jk,{children:p})]})]}),(0,s.jsx)(T.r,{draft:e,customRetryAction:{draftFailedToSubmit:eE}})]})}function eE({figFile:e,existingHubFile:t}){let i=(0,eu.Pc)(),s=(0,r.d4)(e=>(0,em.xw)(e)??void 0,n.c2),o=(0,ec.sZ)(),l=(0,r.d4)(i=>(0,er.Rv)(e?.team_id??null,i,t??null,e?.parent_org_id??null),n.c2),{status:d,allowedAuthors:c}=(0,er.d0)(e?.team_id??null,t??null,e?.parent_org_id??null),u=(0,el.u8)({oldValue:l,oldValueReady:!0,newValue:c,newValueReady:"loaded"===d,label:eo.A.MakeFormView.getAllowedAuthorsForHubFile,enableFullRead:(0,en.UZ)(en.CF.GROUP_5),enableShadowRead:(0,en.hc)(en.CF.GROUP_5)}),m=(0,r.d4)(e=>e.authedProfilesById),p=(0,r.d4)(e=>e.authedActiveCommunityProfile??void 0),h=a.useMemo(async()=>e?await (0,er.mN)(e)??[]:[],[e]),_=(0,ed.eY)(),g=(0,eg.t)(),f=t?.is_chat_history_removed!=null?!t.is_chat_history_removed:void 0;return{user:i,org:o,orgUser:s,allowedAuthors:u,allowedCocreatorsPromise:h,authedProfilesById:m,authedActiveCommunityProfile:p,sceneGraph:_,siteTitle:(g.title??g.placeholder).trim(),shouldShowChatHistory:f}}let eA=(0,f._d)(function(e){let t=eE({figFile:e.figFile,existingHubFile:e.existingHubFile}),i=(0,X.m_)({...e,...t}),a=(0,ef._t)(e.figFile?.key??"");return(0,s.jsx)(es.fu,{name:eh.e0.COMMUNITY_HUB_FILE_PUBLISH_MODAL_V2,properties:{userId:t.user.id,orgId:t.org?.id,resourceType:ep.vt.HUB_FILE,resourceId:e.existingHubFile?.id,fileKey:e.figFile?.key,editorType:e.figFile?.editor_type,isPaid:(0,K.wC)(i.fieldStates.price)},children:(0,s.jsx)(ey,{draft:i,publishedDomainInfo:a})})},"MakeFormView");function ev({draft:e,publishedDomainInfo:t,canPublishAsHubFile:i,cannotPublishAsHubFileReason:n,onPublishFailure:o}){let l=(0,r.wA)(),d=(0,g.H)(o),{trackEvent:p}=(0,es.j6)(),h=(0,g.H)(p),[_,f]=a.useState();a.useEffect(()=>{h.current(ei.in,{step:ei.WX.OPENED})},[h]),a.useEffect(()=>{i&&!_&&(async()=>{if(e.submit){h.current(ei.in,{step:ei.WX.PUBLISH}),f({result:"pending"});let t=await e.submit();"failure"===t.result?(h.current(ei.in,{step:ei.WX.ERROR}),d.current?.("failed_to_submit")):h.current(ei.in,{step:ei.WX.SUCCESS}),f(t)}})()},[e,_,i,d,h]),a.useEffect(()=>{n&&(h.current(ei.in,{step:ei.WX.ERROR,errorType:"source_file_cannot_be_published",errorReason:n}),f({result:"failure"}),d.current?.("source_file_cannot_be_published"))},[n,d,h]),a.useEffect(()=>{!_&&!e.submit&&(0,R.MQ)(e)&&(h.current(ei.in,{step:ei.WX.ERROR,errorType:"errors_in_form"}),f({result:"failure"}),d.current?.("errors_in_form"))},[e,_,d,h]);let x=a.useCallback(()=>{l(et.Ce())},[l]),[b,y]=a.useState(U.X.STOPPED),E=b===U.X.PLAYING,A=a.useMemo(()=>{if(!E&&_?.result==="failure"){let t;if(n)return(0,ea.Yw)(n);let i="error"===e.status?e.errors.find(e=>"submission"===e.type):void 0,s=i?.data.rawError;return(t=(0,ex.l)(i))||!s||(t=(0,u.J)(s)),t??(0,m.t)("community.publishing.an_error_occurred_please_try_again")}},[e,_?.result,E,n]);return(0,s.jsxs)(v.I,{onClose:x,width:"fit-content",height:"dynamic",children:[(0,s.jsxs)(c.vo,{children:[(0,s.jsx)(c.Y9,{children:(0,s.jsx)(c.hE,{children:(0,m.tx)("community.publishing.publish_your_file_to_community")})}),(0,s.jsx)(c.nB,{padding:0,scrolling:"manual",children:(0,s.jsx)(U.S,{publishedResourceContent:_?.result==="success"?_.data.hubFile:void 0,draftSubmissionStatus:_?.result??"pending",carouselMediaField:e.fieldStates.carouselMedia,nameField:e.fieldStates.name,authorField:e.fieldStates.author,onAnimationStateChange:y,viewerModeField:e.fieldStates.viewerMode,hideLikeAndUsage:!0})}),(0,s.jsxs)(c.wi,{children:[(0,s.jsx)("span",{className:eb.$o,"aria-live":"assertive","aria-atomic":!0,children:A}),(0,s.jsx)(c.jk,{children:_?.result==="success"&&!E&&(0,s.jsx)(eS,{publishedHubFile:_.data.hubFile,publishedDomainInfo:t})})]})]}),(0,s.jsx)(T.r,{draft:e,customRetryAction:{draftFailedToSubmit:e.submit}})]})}let eT=(0,f._d)(function(e){let t=eE({figFile:e.figFile,existingHubFile:e.existingHubFile}),i=(0,X.NY)({...e,...t,autoAcceptToSIfNeeded:!0},{name:t.siteTitle,chatHistoryVisibility:e.shouldShowChatHistory,...e.customThumbnailMedium&&{carouselMedia:{allMedia:[e.customThumbnailMedium],thumbnailMedium:e.customThumbnailMedium}},...e.tagsV2.length&&{tagsV2:e.tagsV2}}),r=(0,ef._t)(e.figFile?.key??""),{canPublishAsHubFile:n,reason:o}=(0,ea.Of)("StreamlinedMakeFormView",e.figFile),[l,d]=a.useState(!1);return l?(0,s.jsx)(ey,{draft:i,publishedDomainInfo:r,fastForwardOnMount:!0}):(0,s.jsx)(ev,{draft:i,publishedDomainInfo:r,onPublishFailure:e=>{"errors_in_form"===e&&d(!0)},canPublishAsHubFile:n,cannotPublishAsHubFileReason:o})},"StreamlinedMakeFormView");function eS({publishedHubFile:e,publishedDomainInfo:t}){return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(eI,{publishedResourceContent:e}),(0,s.jsx)(ew,{publishedDomainInfo:t})]})}function eI({publishedResourceContent:e}){return(0,s.jsx)(l.N.Button,{variant:"secondary",href:(0,V.jT)(e),newTab:!0,trusted:!0,"data-testid":"resource-publishing-success-screen-actions-see-in-community-button",children:(0,m.t)("community.publishing.see_in_community")})}function ew({publishedDomainInfo:e}){return e?(0,s.jsx)(l.N.Button,{href:e.fullURL,newTab:!0,trusted:!0,"data-testid":"resource-publishing-success-screen-actions-go-to-web-button",children:(0,m.t)("community.publishing.go_to_web")}):null}function eR({existingHubFile:e}){let t=(0,r.wA)(),i=(0,y.FT)(),n=a.useCallback(()=>{e&&i&&t(et.to({type:e_.V,data:{hubFile:e,confirmationTitle:(0,m.t)("community.hub_files.remove_file_from_community_hub"),content:(0,m.t)("community.hub_files.unpublishing_this_file_will_remove_it_from_the_community_hub_and_prevent_people_from_finding_and_using_this_file"),confirmText:(0,m.t)("community.resource.unpublish")}}))},[t,e,i]);return e&&i?(0,s.jsx)(d.$n,{variant:"destructiveSecondary",onClick:n,children:(0,m.t)("community.resource.unpublish")}):null}},366571:(e,t,i)=>{i.d(t,{Zp:()=>l,iB:()=>o});var s=i(214099),a=i(864830),r=i(78339),n=i(350267);let o=s.M4.Query({fetch:async e=>(await r.c.getAll({editorType:e})).data.meta}),l=s.M4.Query({fetch:async({categorySlug:e,tagSlug:t,locale:i})=>(await r.c.getCategoryBySlug(e,{tagSlug:t,locale:i})).data.meta});s.M4.Query({fetch:async e=>(await n.A.getCommunityShelves({categorySlug:e,shelfType:a.cS.CATEGORY_PAGE})).data.meta[0]})},867163:(e,t,i)=>{i.d(t,{e:()=>o});var s=i(104076),a=i(833371),r=i(248759);let n="data:image/gif;base64,R0lGODlhAQABAIAAAMLCwgAAACH5BAAAAAAALAAAAAABAAEAAAICRAEAOw==",o=(0,r.IY)(function(e){return(0,s.jsxs)(a.Yf,{name:"Avatar",children:[(0,s.jsx)(a.uA,{name:"type=Letter,size=Large",fill:"#FFC700",stroke:"#0000001A",cornerRadius:32,direction:"vertical",spacing:8,padding:8,width:32,height:32,verticalAlignItems:"center",horizontalAlignItems:"center",children:(0,s.jsx)(a.EY,{name:"letter",fill:"#FFF",verticalAlignText:"center",horizontalAlignText:"center",lineHeight:24,fontFamily:"Inter",letterSpacing:-.14399999618530274,children:e.letter??"A"})}),(0,s.jsx)(a.uA,{name:"type=Letter,size=Small",fill:"#FFC700",stroke:"#0000001A",cornerRadius:32,direction:"vertical",spacing:8,padding:8,width:26,height:26,verticalAlignItems:"center",horizontalAlignItems:"center",children:(0,s.jsx)(a.EY,{name:"letter",fill:"#FFF",verticalAlignText:"center",horizontalAlignText:"center",lineHeight:24,fontFamily:"Inter",fontSize:14,letterSpacing:-.014000000208616257,children:e.letter??"A"})}),(0,s.jsx)(a.uA,{name:"type=Image,size=Large",effect:{spread:1,color:"#FFF",offset:{x:0,y:0},blur:0,type:"drop-shadow"},fill:{type:"image",src:n,imageRef:"efe98099a0aa97c1aa64e286bc82e633cc9aed22",scalingFactor:.5},stroke:"#0000001A",cornerRadius:32,direction:"vertical",spacing:8,padding:8,width:32,height:32,verticalAlignItems:"center",horizontalAlignItems:"center"}),(0,s.jsx)(a.uA,{name:"type=Image,size=Small",fill:{type:"image",src:n,imageRef:"efe98099a0aa97c1aa64e286bc82e633cc9aed22",scalingFactor:.5},stroke:"#0000001A",cornerRadius:13,direction:"vertical",spacing:8,padding:8,width:26,height:26,verticalAlignItems:"center",horizontalAlignItems:"center"})]})})},967955:(e,t,i)=>{i.d(t,{F:()=>n});var s=i(536760),a=i(217095),r=i(54729);let n=new class{openTemplatePicker(){s.zl.set(a.YA,!0)}isBuzzApprovalsEnabled(){return(0,r.yL)()}}},714081:(e,t,i)=>{i.d(t,{RD:()=>o,i2:()=>r,ie:()=>n});var s=i(801070),a=i(122864);function r(e){return"IMAGE"===e.type&&(0,a.Vq)(e.imageVar?.value?.cmsAliasValue?.collectionId)}function n(e,t,i){let a=[...e],n=a.findIndex(e=>r(e)),o=i?a.findIndex(e=>(function(e,t){let{visible:i,...a}=e,{visible:r,...n}=t;return(0,s.c2)(a,n)})(i,e)):-1;return -1!==n?a[n]=t:-1!==o?a[o]=t:a.push(t),a}function o(e,t){return{type:"IMAGE",color:{r:1,g:1,b:1,a:1},opacity:1,imageScaleMode:"FILL",imageVar:{value:{cmsAliasValue:{collectionId:e,fieldId:t,itemId:""}},dataType:"CMS_ALIAS",resolvedDataType:"IMAGE"}}}},205099:(e,t,i)=>{let s;i.d(t,{BT:()=>n,Ju:()=>l,q$:()=>o,rS:()=>s});var a=i(278995);let r=[];function n(e){r.push(e),r.length&&a.w3z.setIsNodeChangeCallbackRegistered(!0)}function o(e){(r=r.filter(t=>t!==e)).length||a.w3z.setIsNodeChangeCallbackRegistered(!1)}function l(){s={nodeChange:e=>{for(let t of r)t(e)}}}},640750:(e,t,i)=>{i.d(t,{ZH:()=>o,r$:()=>n,r5:()=>l});var s=i(562310),a=i(774531),r=i(62591);(0,i(533222).nF)(e=>{let t=e.getState().appWindow.inFullScreenMode;if(r.eD){r.eD.setFullScreen(!t);return}a.R7.fullscreen&&(t?a.R7.getFullscreenElement()?a.R7.exitFullscreenFunc():e.dispatch(o()):a.R7.requestFullscreenFunc.call(document.documentElement))});let n=(0,s.NC)("WINDOW_DID_ENTER_FULL_SCREEN"),o=(0,s.NC)("WINDOW_DID_EXIT_FULL_SCREEN");function l(e){a.R7.fullscreen&&!r.eD&&(document.addEventListener(a.R7.fullscreenChangeEventName,function(){let t=e.getState();a.R7.getFullscreenElement()&&!t.appWindow.inFullScreenMode?e.dispatch(n()):t.appWindow.inFullScreenMode&&e.dispatch(o())}),document.addEventListener(a.R7.fullscreenErrorEventName,function(t){console.warn("failed to enter fullscreen:",t),e.getState().appWindow.inFullScreenMode&&e.dispatch(o())}))}},778126:(e,t,i)=>{var s=i(468882),a=i(536760);i(611290);var r=i(774531),n=i(553538),o=i(18611);i(496386),i(179236),i(789795);var l=i(7438);i(428444),i(939156);var d=(e=>(e[e.DISPATCH_WINDOW_OPEN=0]="DISPATCH_WINDOW_OPEN",e[e.SET_READY_FOR_MESSAGES=1]="SET_READY_FOR_MESSAGES",e[e.CLOSE_WINDOW=2]="CLOSE_WINDOW",e[e.REFRESH_WINDOW=3]="REFRESH_WINDOW",e))(d||{});function c(e){if(!e)return;e.presenterViewer=null;let t=new Set(["close","open","alert","confirm","prompt","focus","blur","postMessage","addEventListener","removeEventListener","dispatchEvent","setTimeout","clearTimeout","setInterval","clearInterval","requestAnimationFrame","cancelAnimationFrame","document","location","history","navigator","screen","innerWidth","innerHeight","outerWidth","outerHeight","scrollX","scrollY","pageXOffset","pageYOffset","localStorage","sessionStorage","console","performance","parent","top","self","window","frames","length","name","opener","origin","devicePixelRatio","crypto","isSecureContext","visualViewport","customElements","trustedTypes","onload","onunload","onbeforeunload","onerror","onresize","onmessage","onmessageerror","onfocus","onblur","Object","Array","Function","String","Number","Boolean","Date","RegExp","Error","Promise","Map","Set","WeakMap","WeakSet","JSON","Math","parseInt","parseFloat","isNaN","isFinite","encodeURI","decodeURI","encodeURIComponent","decodeURIComponent"]);for(let i of Object.keys(e))if(!t.has(i))try{let t=e[i];("object"==typeof t||"function"==typeof t)&&t&&t instanceof e.Object&&(e[i]=null)}catch(e){}}let u=(0,a.um)({readyForMessages:!1},(e,t)=>{switch(t.type){case 0:{c(e.avWindow);let i=function(e,t,i){if(""===t){e(n.F.enqueue({message:(0,s.t)("slides.presenter_view.unknown_error"),error:!0}));return}if(!i){e(n.F.enqueue({message:(0,s.t)("slides.presenter_view.network_error"),error:!0}));return}let l=t.split("/")[4],d=`audience-view-${l}`;new URL(t);let c=.8*window.screen.availHeight,m=(0,r.FJ)(t,d,`height=${c},width=${16*c/9},left=0,top=0,popup=yes`);if(null===m){let r={text:(0,s.t)("slides.presenter_view.open_popup"),action:()=>{a.zl.set(u,{type:0,dispatch:e,url:t,isOnline:i})}};e(n.F.enqueue({message:(0,s.t)("slides.presenter_view.pop_up_error"),error:!0,button:r})),a.zl.set(u,{type:2})}else e(n.F.enqueue({icon:o.zX.NOTES_ON_RECTANGLE,message:(0,s.t)("slides.presenter_view.visual_bells.opened_audience_view_in_separate_window")}));return m}(t.dispatch,t.url,t.isOnline);if(i)return{avWindow:i,readyForMessages:!1};return{readyForMessages:!1}}case 1:if(e.avWindow)return{avWindow:e.avWindow,readyForMessages:!0};return{readyForMessages:!1};case 3:return{avWindow:t.window,readyForMessages:!0};case 2:return c(e.avWindow),{readyForMessages:!1}}}),m=(0,l.Wh)(()=>(0,a.eU)(new Set));(0,l.Wh)(()=>(0,a.eU)(e=>e(m),(e,t,i)=>{let s=e(m);i&&t(m,new Set([...s,i]))}))},270721:(e,t,i)=>{i.d(t,{$:()=>p,C:()=>m});var s=i(653155),a=i(468882),r=i(762359),n=i(56857),o=i(553538),l=i(533222),d=i(838909),c=i(590195),u=i(864830);let m=(0,l.nF)((e,{id:t,resourceType:i},{loadingKey:l})=>{let m=n.Ay.post(`/api/${(0,d.n)(i)}/${t}/like`,{orgId:e.getState().currentUserOrgId});(0,c.N)(m,e,l),m.catch(t=>{e.dispatch(o.F.enqueue({message:i===u.vt.PLUGIN?(0,a.t)("community.actions.unable_to_like_this_plugin_error",{error:(0,s.J)(t,t.data.message)}):(0,a.t)("community.actions.unable_to_like_this_widget_error",{error:(0,s.J)(t,t.data.message)}),type:`${i.toUpperCase()}_LIKE_FAILED`,error:!0}))});let p=e.getState().user,h=p&&(0,d.sD)(p,e.getState().authedProfilesById);p?.id&&h&&(0,r.WB)().optimisticallyCreate({CommunityHubLike:{[`optimistic-${t}-${h.id}`]:{pluginId:t,hubFileId:null,resourceId:null,profileId:h.id,hiddenAt:null,createdAt:new Date,updatedAt:new Date,canRead:!0}}},m)},({id:e})=>`LIKE_RESOURCE_${e}`),p=(0,l.nF)((e,{id:t,resourceType:i,likeId:s},{loadingKey:l})=>{let m=n.Ay.del(`/api/${(0,d.n)(i)}/${t}/like`,{orgId:e.getState().currentUserOrgId});(0,c.N)(m,e,l),m.catch(t=>{e.dispatch(o.F.enqueue({message:i===u.vt.PLUGIN?(0,a.t)("community.actions.unable_to_unlike_this_plugin_error",{error:t.data.message}):(0,a.t)("community.actions.unable_to_unlike_this_widget_error",{error:t.data.message}),type:`${i.toUpperCase()}_UNLIKE_FAILED`,error:!0}))}),e.getState().user?.id&&s&&(0,r.WB)().optimisticallyDelete({CommunityHubLike:{[s]:null}},m)})},765617:(e,t,i)=>{i.d(t,{Nu:()=>p,Xw:()=>h,pE:()=>g,yJ:()=>_});var s=i(468882),a=i(562310),r=i(56857),n=i(622038),o=i(553538),l=i(533222),d=i(666737),c=i(590195),u=i(285539),m=i(19543);let p=(0,l.nF)((e,{licenseType:t,editorType:i,seatTypeKey:a,fileKey:l,message:d,teamId:c,entryPoint:u,onError:p,onSuccess:h,hideSuccessMessage:_,folderId:g})=>{r.Ay.post(`/api/teams/${c}/team_users/request_upgrade`,{editor_type:t,billable_product_key:a,file_key:l,message:d,team_id:c,entry_point:u,folder_id:g,entry_point_editor_type:i,entry_point_license_type:t}).then(function(t){if(200===t.status&&h?.(t.data.meta?.id),!_){let t;switch(u){case m.tc.IN_EDITOR_RESTRICTED_DRAFT:case m.tc.RESTRICTED_DRAFT_SHARED_EMAIL:t=(0,s.t)("team_user.actions.request_sent_well_let_you_know");break;case m.tc.ASK_TO_EDIT_ONE_CLICK:t=(0,s.t)("1_click_expansion.request_sent_well_let_you");break;case"create-file-project-view":case m.tc.USER_SETTINGS:t=(0,s.t)("upgrades.request_sent_toast");break;default:t=(0,s.t)("team_user.actions.team_members_request_to_upgrade_succeeded")}e.dispatch(o.F.enqueue({message:t,type:"pro-upgrade-request-sent"}))}}).catch(function(t){e.dispatch(n.s.error((0,s.t)("team_user.actions.team_members_request_to_upgrade_failed"))),p?.()})}),h=(0,l.nF)((e,{teamId:t},{loadingKey:i})=>{if(!t)return;let a=e.getState(),r="team"===a.selectedView.view&&("members"===a.selectedView.teamViewTab||"billing"===a.selectedView.teamViewTab)||"teamUpgrade"===a.selectedView.view||"eduReview"===a.selectedView.view;if(!(0,d.Sc)(a.loadingState,i)&&!r)return;let o=u.$.getTeamUsers({teamId:t});(0,c.N)(o,e,i),o.then(i=>{e.dispatch(g({teamUsers:i.data.meta,teamId:t}))},t=>{console.error(t),t&&403!==t.status&&e.dispatch(n.s.error((0,s.t)("team_user.actions.an_error_occurred_while_retrieving_fetching_the_list_of_users_on_this_team")))})},({teamId:e})=>`TEAM_USER_INITIALIZED_FOR_TEAM_${e}`),_=(0,a.NC)("TEAM_USER_PUT"),g=(0,a.NC)("TEAM_USER_INITIAL_SET")},854244:(e,t,i)=>{i.d(t,{Ao:()=>n,Ko:()=>l,LX:()=>r,c4:()=>d,xN:()=>o});var s=i(385446),a=i.n(s),r=(e=>(e[e.NORMAL=0]="NORMAL",e[e.ACTIVE=1]="ACTIVE",e[e.DIMMED=2]="DIMMED",e))(r||{});function n(e,t){return`${100*Math.round(e.x/100)},${100*Math.round(e.y/100)},${t}`}function o(e,t){if(e.isSinglePin&&t.isSinglePin){var i,s;return i=e.pins[0],s=t.pins[0],i.x!==s.x||i.y!==s.y||!a()(i.avatars,s.avatars)||!a()(i.previewMessageMeta,s.previewMessageMeta)||i.isUnread!==s.isUnread||i.numUnreadReplies!==s.numUnreadReplies||i.isResolved!==s.isResolved||!a()(i.selectionBoxAnchor,s.selectionBoxAnchor)||!a()(i.otherBoundingBoxes,s.otherBoundingBoxes)||!a()(i.isPinnedToFile,s.isPinnedToFile)}return e.pins.length!==t.pins.length||e.isUnread!==t.isUnread||e.isPinnedToFile!==t.isPinnedToFile}let l={length:0,leafNodes:new Set([]),all:()=>[],getById:()=>null,getParentOf:()=>null,zoomScale:-1};function d(e){let t=new Map,i=[];return e.forEach(e=>{if(t.has(e.user.id)){let s=t.get(e.user.id);i[s].num_unread_comments+=e.isUnread?1:0,i[s].num_comments+=1}else i.push({avatar_url:e.user.img_url,avatar_user_id:e.user.id,avatar_user_handle:e.user.handle,num_unread_comments:e.isUnread?1:0,num_comments:1}),t.set(e.user.id,i.length-1)}),i}},556862:(e,t,i)=>{i.d(t,{C1:()=>d,Nv:()=>u,TI:()=>m,rC:()=>l,z5:()=>c});var s=i(468882),a=i(431120),r=i(140739),n=i(481584);class o extends n.A{constructor(e={}){super(),this.options=e}parse(e,t,i=!1){let s=t?.a??1,r=(0,a.H0)(e,this.options.parseAlpha?s:void 0,i);if(!r)throw Error("Could not parse hex");return this.options.parseAlpha?r:(0,a.X9)(r,s)}format(e){if(!e)return"";let t=this.floatToHex(e.r),i=this.floatToHex(e.g),s=this.floatToHex(e.b);if(this.options.formatAlpha&&1!==e.a){let a=this.floatToHex(e.a);return`#${t}${i}${s}${a}`.toUpperCase()}return`#${t}${i}${s}`.toUpperCase()}formatForAndroid(e){if(1===e.a)return this.format(e);let t=this.floatToHex(e.a),i=this.floatToHex(e.r),s=this.floatToHex(e.g),a=this.floatToHex(e.b);return`#${t}${i}${s}${a}`.toUpperCase()}getIncrementTargets(e,t){let{start:i,end:s}=t,a=i===s,r={};return(i<=2||a&&3===i)&&(r.r=!0),(i<=4&&s>3||a&&5===i)&&(r.g=!0),(i<=6&&s>5||a&&7===i)&&(r.b=!0),r}getSelection(e,t){let i={start:1,end:1};return t.r?i.start=1:t.g?i.start=3:i.start=5,t.b?i.end=7:t.g?i.end=5:i.end=3,i}floatToHex(e){let t=this.normalize255(e).toString(16);return 1===t.length&&(t="0"+t),t}}class l extends o{constructor(e={}){super(e)}format(e,{withAlpha:t=!1,showDot:i=!1}={}){let s=this.floatToHex(e.r),a=this.floatToHex(e.g),r=this.floatToHex(e.b),n=this.floatToHex(e.a),o=(100*e.a).toLocaleString("en",{maximumFractionDigits:2})+"%";return t?i?`${s}${a}${r} \xb7 ${o}`.toUpperCase():`${s}${a}${r}${n}`.toUpperCase():`${s}${a}${r}`.toUpperCase()}getIncrementTargets(e,t){let{start:i,end:s}=t,a=i===s,r={};return(i<=1||a&&2===i)&&(r.r=!0),(i<=3&&s>2||a&&4===i)&&(r.g=!0),(i<=5&&s>4||a&&6===i)&&(r.b=!0),r}getSelection(e,t){let i={start:1,end:1};return t.r?i.start=1:t.g?i.start=3:i.start=5,t.b?i.end=7:t.g?i.end=5:i.end=3,i.start-=1,i.end-=1,i}}class d extends l{constructor(e={}){super(e)}parse(e,t,i=!1){return"auto".startsWith(e.toLowerCase())?r.Q8:super.parse(e,t,i)}format(e){return e?(0,r.gl)(e)?(0,s.t)("fullscreen.mixed"):(0,r.SX)(e)?(0,s.t)("fullscreen.properties_panel.stack_panel.auto"):super.format(e):""}clamp(e){return(0,r.SX)(e)?e:super.clamp(e)}}let c=new o,u=new o({parseAlpha:!0,formatAlpha:!0}),m=new l;new d},972865:(e,t,i)=>{i.d(t,{i:()=>r});var s=i(343116),a=(e=>(e[e.LEFT=0]="LEFT",e[e.MIDDLE=1]="MIDDLE",e[e.RIGHT=2]="RIGHT",e[e.BACK=3]="BACK",e[e.FORWARD=4]="FORWARD",e))(a||{});function r(e){return"which"in e?3===e.which||s.Ay.mac&&1===e.which&&e.ctrlKey:"button"in e&&(2===e.button||s.Ay.mac&&0===e.button&&e.ctrlKey)}},883245:(e,t,i)=>{let s;i.d(t,{_:()=>b,ky:()=>y});var a=i(716976),r=i(24989),n=i(258253),o=i(278995),l=i(78175),d=i(230279),c=i(778530),u=i(76687),m=i(125360),p=i(324247),h=i(641567),_=i(452062),g=i(728193),f=i(467660),x=i(328806);function b(){let e=(0,x.g)(),{addThemeListener:t}=(0,n.G)(),i=(0,g.E3)(),s=a.useRef(i);a.useEffect(()=>{s.current=i},[i]),a.useEffect(()=>{e&&o.SIf&&y.updateColorsInFullscreen(o.SIf.colorTokensState())},[e,i]),a.useEffect(()=>t(()=>{f.Y5.isReady()&&o.SIf&&y.updateColorsInFullscreen(o.SIf.colorTokensState())}),[t])}let y={getTokenValue:E,updateColorsInFullscreen:function(e){let t={},i=getComputedStyle(document.body),a=e.currentTokens.getCopy();for(let n in s||(s=function(){let e;let t=document.head.querySelector('link[href*="figma_app"][href*="css"]');try{t instanceof HTMLLinkElement&&(e=t.sheet?.cssRules)}catch{}return!!(e&&e.length>0)}()),a){let a=E(i,n),o=function(e){if(!e)return;let t=A(e);if(!t)return;let{r:i,g:s,b:a,alpha:r}=t;return((void 0===r?255:Math.round(255*r))<<24|Math.round(255*a)<<16|Math.round(255*s)<<8|Math.round(255*i))>>>0}(a);if(void 0!==o)t[n]=o;else if(s)(0,h.$D)(r.e.FPL,Error(`Failed to find valid value for color token ${n}, found ${a}`));else{(0,h.us)("Cannot fetch color tokens from CSS, CSS was not loaded"),e.hasRunTokenSync.set(!0);return}}e.currentTokens.set(t),e.hasRunTokenSync.set(!0)}};function E(e,t){let i;if(t.startsWith("fs"))i="color-"+t;else{let e="color"+t.charAt(0).toUpperCase()+t.slice(1);i=(0,_.VZ)(e).replace("desktop-backgrounded","desktopBackgrounded").replace("desktop-foreground","desktopForeground").replace("desktop-fullscreen","desktopFullscreen")}return e.getPropertyValue(`--${i}`)?.trim()||void 0}(0,l.b2)(d.A),(0,l.b2)(c.A),(0,l.b2)(u.A),(0,l.b2)(m.A);let A=(0,p.A)("rgb")},77752:(e,t,i)=>{i.d(t,{y:()=>c});var s=i(237420),a=i(219155),r=i(24989),n=i(641567),o=i(383553),l=i(554841),d=i(172123);function c(e,t){let i=(0,s.wA)();return(0,d.dh)(t)?()=>i((0,l.to)({type:o.V,data:{entrypoint:t,teamId:e,openCheckoutInNewTab:!0}})):((0,n.$D)(r.e.MONETIZATION_EXPANSION,Error("Missing upsell source for plan comparison modal."),void 0,!0),a.lQ)}},240875:(e,t,i)=>{i.d(t,{F:()=>l});var s=i(716976),a=i(147186),r=i(759095),n=i(428444),o=i(889323);function l(e){let[t]=(0,r.IT)((0,o.zqW)(e?.planParentId?{orgId:e.planParentId}:null),{enabled:e?.planType===n.OL.ORG&&!!e?.planParentId});return(0,s.useMemo)(()=>t.transform(e=>e.org?.activeOrgBillingPeriod?{...e.org.activeOrgBillingPeriod,effectiveEndAt:(0,a.A)(e.org.activeOrgBillingPeriod.effectiveEndAt).toDate(),startAt:(0,a.A)(e.org.activeOrgBillingPeriod.startAt).toDate()}:null),[t])}},291117:(e,t,i)=>{i.d(t,{d:()=>d,h:()=>l});var s=i(88839),a=i(759095),r=i(641567),n=i(807083),o=i(240875);function l({planType:e,planParentId:t}){let{status:i,errors:a,suspense:r,data:n}=(0,o.F)({planType:e,planParentId:t});switch(i){case"loading":return s.Qw.loadingSuspendable(r);case"loaded":return s.Qw.loadedSuspendable(n?.isEla??!1,a,r);case"disabled":return s.Qw.loadedSuspendable(!1,[],r);case"errors":return s.Qw.errorSuspendable(a,r)}}function d({reportErrorsToTeam:e}){let t=(0,n.XP)({reportErrorsToTeam:e}),i=l({planType:t.type,planParentId:t.key.parentId}),[s]=(0,a.Ad)(i);if("loaded"!==s.status){let t=Error("Error fetching isELA info");throw(0,r.$D)(e,t),t}return s.data}},904974:(e,t,i)=>{i.d(t,{c:()=>o,y:()=>n});var s=i(372045),a=i(780189);class r extends Error{}function n(e,t){if(0===e.product_prices.length)throw new r("Product price list is empty");let{tier:i,currency:s,renewalTerm:n,unit:o,billableProductKey:l,billableProductVariantId:d}=t,c=o;i===a.Ju.PRO&&n===a.IX.YEAR&&c===a.IX.MONTH&&(c=a.IX.YEAR),i===a.Ju.PRO&&n===a.IX.MONTH&&c===a.IX.YEAR&&(c=a.IX.MONTH),(i===a.Ju.ORG||i===a.Ju.ENTERPRISE)&&n===a.IX.YEAR&&c===a.IX.YEAR&&(c=a.IX.MONTH);let u=e.product_prices.filter(e=>e.tier===i&&e.currency===s&&e.renewal_term===n&&e.unit===c&&e.billable_product_key===l&&e.billable_product_variant_id===d);if(1===u.length){if(c===a.IX.YEAR&&o===a.IX.MONTH){let e=u[0].amount/12;return{...u[0],unit:o,amount:e}}if(c===a.IX.MONTH&&o===a.IX.YEAR){let e=12*u[0].amount;return{...u[0],unit:o,amount:e}}return u[0]}if(u.length>1)throw new r(`Multiple product prices available for: ${JSON.stringify(t)}`);throw new r(`No product price available for: ${JSON.stringify(t)})`)}let o={[s.OL.TEAM]:[a.IX.MONTH,a.IX.YEAR],[s.OL.ORG]:[a.IX.YEAR]}},142709:(e,t,i)=>{i.d(t,{O:()=>r});var s=i(468882),a=i(721959);function r(e){switch(e){case a.ud.EXPERT:return(0,s.t)("billing_modals.billing_remodel_edu.full_seat");case a.ud.DEVELOPER:return(0,s.t)("billing_modals.billing_remodel_edu.dev_seat");case a.ud.COLLABORATOR:return(0,s.t)("billing_modals.billing_remodel_edu.collab_seat");case a.ud.CONTENT:return(0,s.t)("billing_modals.billing_remodel_edu.content_seat");case a.Gu.VIEW:return(0,s.t)("billing_modals.billing_remodel_edu.view_seat");default:return""}}},423104:(e,t,i)=>{let s;i.d(t,{Q1:()=>_,SL:()=>s});var a=i(278995),r=i(536760),n=i(133363),o=i.n(n),l=i(59881),d=i(103846),c=i(302988),u=i(603280),m=i(847435),p=i(375333);class h{constructor(e){this.store=e}closeAiAssistantCanvasPromptBox(){(0,u.Sz)()}processSelectionChangeForAiAssistant(e){(0,c.Rd)(e)}startAiAssistant(e){if((0,u.UT)())return;let t=this.store.getState(),i=!o()(t.mirror.sceneGraphSelection);l.az.trackDefinedEvent("ai_assistant.start",{hasSelection:i,source:e?"keyboard_shortcut":"quick_action"}),i?(0,u._C)():(t.leftPanel.activeTab!==a.xae.CHAT&&(r.zl.set(d.qA,e=>"idle"===e?"shouldCreate":e),r.zl.set(d.hM,null),this.store.dispatch((0,m.FP)({tab:a.xae.CHAT}))),setTimeout(()=>{let e=r.zl.get(p.oy);e&&e.focus()},50))}}function _(e){s=new h(e)}},330228:(e,t,i)=>{let s;i.d(t,{BF:()=>s,fh:()=>p,tO:()=>g});var a=i(898035),r=i(818822),n=i(953941),o=i(536760),l=i(467660),d=i(7438),c=i(489966),u=i(154950);let m={[u.PW.CODE_COMPONENT]:{idl:r.PWo.CODE_COMPONENT,key:(0,a.Sm)(""),version:(0,a.j6)("")}},p={[u.PW.CODE_COMPONENT]:{subscribed:function(e){let t=m[e].idl,i=(0,d.Wh)(()=>(0,o.eU)({})),s=(0,o.FZ)(i,(t,i)=>{if("changed"in i){if(!(0,c.e)(e))return t;let s=i.changed;return{...t,...s.reduce((e,t)=>(e[t.key]={sourceLibraryKey:t.sourceLibraryKey,pagesByVersion:{...e[t.key]?.pagesByVersion,...function(e){let t={};for(let{version:i,consumingPages:s}of e)t[i]=s;return t}(t.pagesByVersion)}},e),{})}}return"reset"in i?{}:t}),a=`consumedAssetVersionsByKey(${r.PWo[t]})`;return s.debugLabel=a,s.onMount=i=>{var s;let a=()=>{(0,c.e)(e)&&i({changed:n.IX?.getAllSubscribedAssetConsumptions(t)??[]})};l.Y5.isReady()?a():l.Y5.onReady().then(a);let r=(s=e=>{i(e)},h[t]=s,()=>{h[t]=null});return()=>{r(),i({reset:!0})}},s}(u.PW.CODE_COMPONENT)}},h={[r.PWo.CODE_COMPONENT]:null};class _{syncChangedSubscribedConsumptions(e,t){h[e]?.({changed:t})}resetMirrorCache(){for(let e of Object.values(h))e?.({reset:!0})}}function g(){s=new _}},139296:(e,t,i)=>{let s;i.d(t,{Mk:()=>b,WY:()=>v,ki:()=>s});var a=i(818822),r=i(953941),n=i(536760),o=i(138116),l=i.n(o),d=i(922902),c=i(467660),u=i(7438),m=i(154950),p=i(378739),h=i(131258),_=i(27567),g=i(759812),f=i(842824);m.PW.RESPONSIVE_SET,a.PWo.RESPONSIVE_SET,m.PW.CODE_LIBRARY,a.PWo.CODE_LIBRARY,m.PW.CODE_FILE,a.PWo.CODE_FILE,m.PW.CODE_COMPONENT,a.PWo.CODE_COMPONENT,m.PW.MANAGED_STRING,a.PWo.MANAGED_STRING;let x={[a.PWo.RESPONSIVE_SET]:{[a.Ocq.LOCAL]:f.X1,[a.Ocq.SUBSCRIBED]:f._t},[a.PWo.CODE_LIBRARY]:{[a.Ocq.LOCAL]:_.V,[a.Ocq.SUBSCRIBED]:_.Q},[a.PWo.CODE_FILE]:{[a.Ocq.LOCAL]:h.y,[a.Ocq.SUBSCRIBED]:h.d},[a.PWo.CODE_COMPONENT]:{[a.Ocq.LOCAL]:p.rG,[a.Ocq.SUBSCRIBED]:p.Ir},[a.PWo.MANAGED_STRING]:{[a.Ocq.LOCAL]:g.f,[a.Ocq.SUBSCRIBED]:g.c}},b={[m.PW.RESPONSIVE_SET]:{local:y(a.PWo.RESPONSIVE_SET,a.Ocq.LOCAL),subscribed:y(a.PWo.RESPONSIVE_SET,a.Ocq.SUBSCRIBED)},[m.PW.CODE_LIBRARY]:{local:y(a.PWo.CODE_LIBRARY,a.Ocq.LOCAL),subscribed:y(a.PWo.CODE_LIBRARY,a.Ocq.SUBSCRIBED)},[m.PW.CODE_FILE]:{local:y(a.PWo.CODE_FILE,a.Ocq.LOCAL),subscribed:y(a.PWo.CODE_FILE,a.Ocq.SUBSCRIBED)},[m.PW.CODE_COMPONENT]:{local:y(a.PWo.CODE_COMPONENT,a.Ocq.LOCAL),subscribed:y(a.PWo.CODE_COMPONENT,a.Ocq.SUBSCRIBED)},[m.PW.MANAGED_STRING]:{local:y(a.PWo.MANAGED_STRING,a.Ocq.LOCAL),subscribed:y(a.PWo.MANAGED_STRING,a.Ocq.SUBSCRIBED)}};function y(e,t){let i=x[e][t],s=(0,u.Wh)(()=>(0,n.eU)({})),o=(0,n.FZ)(s,(e,t)=>{if("changed"in t){let i=t.changed;return{...e,...i.reduce((e,t)=>(e[t.assetId]=t,e),{})}}if("removed"in t){let i=new Set(t.removed);return l()(e,e=>e&&!i.has(e.assetId))}return"reset"in t?{}:e}),d=`assetByKeyAtom(${a.PWo[e]}, ${a.Ocq[t]})`;return o.debugLabel=d,o.onMount=s=>{var a;let n=()=>{s({changed:(r.P5?.getAllAssets(e,t)??[]).map(i).filter(e=>null!==e)})};c.Y5.isReady()?n():c.Y5.onReady().then(n);let o=(a=e=>{s(e)},E[e][t]=a,()=>{E[e][t]=null});return()=>{o(),s({reset:!0})}},o}let E={[a.PWo.RESPONSIVE_SET]:{[a.Ocq.LOCAL]:null,[a.Ocq.SUBSCRIBED]:null},[a.PWo.CODE_LIBRARY]:{[a.Ocq.LOCAL]:null,[a.Ocq.SUBSCRIBED]:null},[a.PWo.CODE_FILE]:{[a.Ocq.LOCAL]:null,[a.Ocq.SUBSCRIBED]:null},[a.PWo.CODE_COMPONENT]:{[a.Ocq.LOCAL]:null,[a.Ocq.SUBSCRIBED]:null},[a.PWo.MANAGED_STRING]:{[a.Ocq.LOCAL]:null,[a.Ocq.SUBSCRIBED]:null}};class A{syncAddedOrChangedAssets(e,t,i){if(t===a.Ocq.SUBSCRIBED){let s=x[e]?.[a.Ocq.SUBSCRIBED];if(!s){(0,d.x1)("design-systems",`No parser found for ${e} and ${t}`);return}E[e]?.[a.Ocq.SUBSCRIBED]?.({changed:i.map(s).filter(e=>null!==e)})}else if(t===a.Ocq.LOCAL){let s=x[e]?.[a.Ocq.LOCAL];if(!s){(0,d.x1)("design-systems",`No parser found for ${e} and ${t}`);return}E[e]?.[a.Ocq.LOCAL]?.({changed:i.map(s).filter(e=>null!==e)})}else(0,d.x1)("design-systems",`Invalid subscription status for AssetMirror: ${t}`)}syncRemovedAssets(e,t,i){E[e]?.[t]?.({removed:i})}resetMirrorCache(){for(let e of Object.values(E))for(let t of Object.values(e))t?.({reset:!0})}}function v(){s=new A}},773016:(e,t,i)=>{let s;i.d(t,{Qw:()=>s,mQ:()=>n});var a=i(725580);class r{logShadowReadSuggestionsOnPaste(e,t){(0,a.QO)(e,t)}}function n(){s=new r}},309232:(e,t,i)=>{let s;i.d(t,{X:()=>s,z4:()=>c});var a=i(278995),r=i(614291),n=i(922902),o=i(330801),l=i(317382);class d{readyToAcceptAutosaveChanges(){return!!o.ZG()?.session()?.readyToAcceptChanges()}hasOngoingCommitTask(){return!!o.ZG()?.session()?.hasOngoingCommitTask()}async enqueueAutosaveCommit(e,t,i,s,r,n){let d=(0,o.ZG)();if(!d)return(0,l.W6)("AutosaveManager should not be null when committing"),!0;let c=d.session();if(!c)return!0;if(!a.h3O)throw Error("Multiplayer bindings is not available");return await c.enqueueAutosaveCommit({changes:e,commitPolicy:t,fileVersion:i,fileKey:s,newSessionID:a.h3O.currentSessionID(),numberOfUncleanRegisters:r,reason:n}),!0}createAutosaveManager(e){let t=r.D.getState().user;if(!t){(0,n.Lo)("Autosave","Not creating manager for logged out user");return}(0,o.mu)(e,t.id)}destroyAutosaveManager(){(0,o.t)()}isConnected(){return o.ZG()?.managerState==="connected"}}function c(){s=new d}},656800:(e,t,i)=>{let s;i.d(t,{$W:()=>b,z5:()=>s});var a=i(872208),r=i(24989),n=i(278995),o=i(468882),l=i(611769),d=i(59881),c=i(614291),u=i(641567),m=i(553538),p=i(18611),h=i(97878);let _="text-suggestions-dismiss-count";class g{generateRequestId(){return(0,l.g)()}generateSessionId(){return(0,l.g)()}async getSuggestion(e,t,i,s){let n;try{n=await (0,h.O)(e,t,i,s)}catch(e){e instanceof a.Yh&&!(e instanceof a.M_)&&(0,u.$D)(r.e.AI_PRODUCTIVITY,e)}return{text:n?.text,inputTokens:n?.inputTokens,serializationLatencyMs:n?.serializationLatencyMs,requestLatencyMs:n?.requestLatencyMs}}onExplicitDismiss(e){let t=f()+1;if(t<50){localStorage.setItem(_,t.toString());return}c.D.dispatch(m.F.enqueue({type:"text-suggestion-nudge",message:(0,o.t)("fullscreen.text_suggestion_nudge_message"),icon:p.zX.SPARKLE,button:{text:(0,o.t)("fullscreen.text_suggestion_nudge_turn_off"),action:()=>{n.glU?.triggerActionEnum(n.rcl.TOGGLE_TEXT_SUGGESTIONS_PREFERENCE,{})}}})),(0,d.sx)("autosuggest_text.preference_nudge_shown",{sessionId:e}),x(e)}onFullOrPartialAccept(e){x(e)}}function f(){let e=Number(localStorage.getItem(_)??"0");return isNaN(e)?0:e}function x(e){let t=f();localStorage.removeItem(_),t>0&&(0,d.sx)("autosuggest_text.dismiss_count_reset",{sessionId:e,dismiss_count:t})}function b(){s=new g}},467660:(e,t,i)=>{let s,a,r,n;i.d(t,{$q:()=>g,BI:()=>a,QT:()=>x,Vv:()=>_,XT:()=>d,Y5:()=>s,ZP:()=>p,Zi:()=>h,_W:()=>u,fT:()=>m,lQ:()=>o,r1:()=>f,s$:()=>l,uF:()=>c,w8:()=>r});let o=new Promise(e=>{n=e});function l(e){s=e,window._fullscreen_=s,n()}function d(e){a=e}function c(e){u=e}let u=null;function m(e){p=e}let p=null;function h(e){_=e}let _=null;function g(e){f=e}let f=null;function x(e){r=e}},955650:(e,t,i)=>{i.d(t,{P:()=>ey});var s=i(556862),a=i(994166);i(589689),i(677881),i(987657),i(377298),i(194789),i(625947),i(741596),i(372113),i(337192),i(664740),i(609456),i(494523),i(912727),i(927576),i(947392);var r=i(818822);let n=s.z5.parse("#282A36"),o=s.z5.parse("#F8F8F2"),l=s.z5.parse("#AEAFAD"),d=s.z5.parse("#999"),c=s.z5.parse("#6272A4"),u=s.z5.parse("#8BE9FD"),m=s.z5.parse("#50FA7B"),p=s.z5.parse("#FFB86C"),h=s.z5.parse("#FF79C6"),_=s.z5.parse("#BD93F9"),g=s.z5.parse("#FF5555"),f=s.z5.parse("#F1FA8C"),x={backgroundColor:n,defaultColor:o,cursorColor:l,lineNumberColor:d,tokenColors:{atrule:m,attrName:m,attrValue:f,boolean:_,builtin:u,className:u,comment:c,constant:p,entity:h,function:m,important:h,keyword:h,number:_,operator:u,property:p,punctuation:o,regex:g,selector:h,string:f,symbol:p,tag:h,url:u,variable:c}},b=s.z5.parse("#322d29"),y=s.z5.parse("#88786d"),E=s.z5.parse("#bfa05a"),A=s.z5.parse("#ffdac2"),v=s.z5.parse("#bd987f"),T=s.z5.parse("#fcc440"),S={defaultColor:v,backgroundColor:b,lineNumberColor:y,cursorColor:v,tokenColors:{comment:y,prolog:y,doctype:y,cdata:y,punctuation:s.z5.parse("#da70d6"),namespace:{...v,a:.7},tag:E,operator:E,property:v,function:A,"tag-id":A,selector:A,"atrule-id":A,"attr-name":v,boolean:T,number:T,string:T,entity:T,url:T,"attr-value":T,keyword:T,control:T,directive:T,unit:T,statement:T,regex:T,atrule:T,placeholder:T,variable:T,important:v}},I=s.z5.parse("#2a2d2a"),w=s.z5.parse("#a1b5a2"),R=s.z5.parse("#535f53"),N=s.z5.parse("#a2b34d"),C=s.z5.parse("#f0fff0"),O=s.z5.parse("#b3d6b3"),k=s.z5.parse("#e5fb79"),L={defaultColor:w,backgroundColor:I,lineNumberColor:R,cursorColor:w,tokenColors:{comment:R,prolog:R,doctype:R,cdata:R,punctuation:N,namespace:{...w,a:.7},tag:N,operator:N,number:N,property:w,function:O,"tag-id":C,selector:C,"atrule-id":C,"attr-name":O,boolean:k,string:k,entity:k,url:k,"attr-value":k,keyword:k,control:k,directive:k,unit:k,statement:k,regex:k,atrule:k,placeholder:k,variable:k,important:O}},j=s.z5.parse("#faf8f5"),M=s.z5.parse("#728fcb"),F=s.z5.parse("#063289"),D=s.z5.parse("#93abdc"),P=s.z5.parse("#cdc4b1"),B=s.z5.parse("#b6ad9a"),U=s.z5.parse("#b29762"),V=s.z5.parse("#2d2006"),z=s.z5.parse("#896724"),H={defaultColor:z,backgroundColor:j,lineNumberColor:P,cursorColor:M,tokenColors:{comment:B,prolog:B,doctype:B,cdata:B,punctuation:B,namespace:{...M,a:.7},tag:F,operator:F,number:F,property:U,function:U,"tag-id":V,selector:V,"atrule-id":V,"attr-name":z,boolean:M,string:M,entity:M,url:M,"attr-value":M,keyword:M,control:M,directive:M,unit:M,statement:M,regex:M,atrule:M,placeholder:D,variable:D,important:z}},$=s.z5.parse("#1d262f"),G=s.z5.parse("#57718e"),W=s.z5.parse("#4a5f78"),q=s.z5.parse("#88b4e7"),K=s.z5.parse("#0aa370"),X=s.z5.parse("#ebf4ff"),Y=s.z5.parse("#7eb6f6"),Q=s.z5.parse("#47ebb4"),Z={defaultColor:q,backgroundColor:$,lineNumberColor:W,cursorColor:G,tokenColors:{comment:W,prolog:W,doctype:W,cdata:W,punctuation:s.z5.parse("#f3cd12"),namespace:{...G,a:.7},tag:K,operator:K,property:q,function:X,"tag-id":X,selector:X,"atrule-id":X,"attr-name":Y,boolean:Q,number:Q,string:Q,entity:Q,url:Q,"attr-value":Q,keyword:Q,control:Q,directive:Q,unit:Q,statement:Q,regex:Q,atrule:Q,placeholder:Q,variable:Q,important:Y}},J=s.z5.parse("#24242e"),ee=s.z5.parse("#8686cb"),et=s.z5.parse("#5b5b76"),ei=s.z5.parse("#dd672c"),es=s.z5.parse("#ebebff"),ea=s.z5.parse("#aaaaca"),er=s.z5.parse("#fe8c52"),en={defaultColor:ee,backgroundColor:J,lineNumberColor:et,cursorColor:ee,tokenColors:{comment:et,prolog:et,doctype:et,cdata:et,punctuation:et,namespace:{...ee,a:.7},tag:ei,operator:ei,number:ei,property:ea,function:ea,"tag-id":es,selector:es,"atrule-id":es,"attr-name":ea,boolean:er,string:er,entity:er,url:er,"attr-value":er,keyword:er,control:er,directive:er,unit:er,statement:er,regex:er,atrule:er,placeholder:er,variable:er,important:ea}},eo=s.z5.parse("#9A93AE"),el=s.z5.parse("#ED4F62"),ed=s.z5.parse("#EB8559"),ec=s.z5.parse("#F8D41C"),eu=s.z5.parse("#53E37C"),em=s.z5.parse("#1BCDF4"),ep=s.z5.parse("#C3AAFF"),eh=s.z5.parse("#FFFFFF"),e_={defaultColor:eh,backgroundColor:s.z5.parse("#2F2746"),lineNumberColor:{...eh,a:.5},cursorColor:eh,tokenColors:{comment:eo,prolog:eo,doctype:eo,cdata:eo,variable:el,constant:el,tag:el,selector:el,regexp:el,deleted:el,important:el,builtin:ed,url:ed,number:ec,property:ec,"attr-name":ec,"literal-property":ec,string:eu,"string-property":eu,char:eu,symbol:eu,inserted:ed,title:em,section:em,params:em,parameter:em,function:em,"class-name":em,keyword:ep,"selector-tag":ep,atrule:ep,"attr-value":ep,punctuation:eh,namespace:eh,operator:eh,entity:eh,"attr-equals":eh,decorator:eh,"generic-function":eh,generic:eh,"raw-string":eu,directive:em,macro:eh,"macro-name":eh,"directive-hash":eh,expression:eh,module:eh,"double-colon":eh,"base-clause":eh,"method-definition":em,interpolation:eh,delimiter:eh,spread:eh,"special-attr":eh,script:eh,"language-javascript":eh,"script-punctuation":eh,boolean:ep,null:ep,scalar:el,"property-query":ec,"definition-query":em,"definition-mutation":em,fragment:em,description:eh,"atom-input":eh,object:eh,"triple-quoted-string":eu,label:eu,annotation:ed}};function eg(e){switch(e){case r._3L.FIGJAM_DARK:return e_;case r._3L.DUOTONE_LIGHT:return H;case r._3L.DUOTONE_SEA:return Z;case r._3L.DUOTONE_SPACE:return en;case r._3L.DUOTONE_FOREST:return L;case r._3L.DUOTONE_EARTH:return S;case r._3L.DRACULA:return x}}let ef="token",ex=new Set(["tsx","cpp","ruby","css","jsx","markup","json","graphql","python","go","sql","swift","kotlin","rust","bash","plaintext"]);function eb(e,t){if(0===e.length){e.push(t);return}let i=e[e.length-1];if(i.color===t.color&&i.endIndex===t.startIndex){i.endIndex=Math.max(i.endIndex,t.endIndex);return}e.push(t)}let ey=new class{getParsedCodeTokens(e,t,i){return function(e,t,i){let r="";switch(t){case"typescript":t="tsx";break;case"javascript":t="jsx";break;case"html":t="markup"}r=ex.has(t)?a.highlight(e,a.languages[t],t):a.highlight(e,a.languages.tsx,"tsx");let n=[],o=new DOMParser().parseFromString(`<span id="code">${r}</span>`,"text/html"),l=[],d=eg(i),c=(e,t)=>{let{nodeType:i}=e;if(i===Node.TEXT_NODE){let i=[...e.textContent??""];1===t&&eb(n,{startIndex:l.length,endIndex:l.length+i.length,color:s.Nv.format(d.defaultColor),isItalic:!1}),l.push(...i);return}let a=[...e.innerText??e.textContent];if(e.classList.contains(ef))for(let t of e.classList)t!==ef&&eb(n,{startIndex:l.length,endIndex:l.length+a.length,color:s.Nv.format(d.tokenColors[t]||d.defaultColor),isItalic:"comment"===t});for(let i of e.childNodes)c(i,t+1)};return c(o.getElementById("code"),0),n}(e,t,i)}getBackgroundColor(e){return s.Nv.format(eg(e).backgroundColor)}getLineNumberColor(e){return s.Nv.format(eg(e).lineNumberColor)}getCursorColor(e){return s.Nv.format(eg(e).cursorColor)}}},153942:(e,t,i)=>{i.d(t,{f:()=>a});var s=i(152469);let a=new class{getObjectPath(e){let t=(0,s.N)(),i=t.getEntryByGUID(e);if(!i)throw Error(`No VFS entry found for Node with GUID: ${e}`);return t.getObjectPath(i)??""}}},761046:(e,t,i)=>{i.d(t,{l:()=>c});var s=i(278995),a=i(461180),r=i(614291),n=i(467660),o=i(799661),l=i(919849),d=i(20417);let c=new class{constructor(){this.canvasColorProfile=a.RY.SRGB}getDefaultDocumentColorProfile(){if((r.D?.getState()?.selectedView).editorType===o.nT.Whiteboard)return a.yw.SRGB;switch((0,l.YN)().colorProfilePreference){case d.M.DEFAULT:case d.M.SRGB:return a.yw.SRGB;case d.M.DISPLAY_P3:return a.yw.DISPLAY_P3}}getCanvasColorProfile(){return this.canvasColorProfile}setCanvasColorProfile(e){this.canvasColorProfile=e,s.glU?.updateImageColorspaceConversions(),n.Y5?.triggerAction("redraw-canvas",{})}getUserColorProfile(){switch((0,l.YN)().colorProfilePreference){case d.M.DEFAULT:case d.M.SRGB:return a.RY.SRGB;case d.M.DISPLAY_P3:return a.RY.DISPLAY_P3}}}},343832:(e,t,i)=>{i.d(t,{q:()=>l});var s=i(461180),a=i(394011),r=i(922902),n=i(999905),o=i(761046);let l=new class{constructor(){this.onFrameCb=null,this.switchWebglColorSpace=(e,t)=>{let i=e.drawingBufferColorSpace;switch(t){case s.RY.SRGB:if("srgb"===i)return;e.drawingBufferColorSpace="srgb",e.unpackColorSpace&&(e.unpackColorSpace="srgb"),o.l.setCanvasColorProfile(s.RY.SRGB);break;case s.RY.DISPLAY_P3:if("display-p3"===i)return;e.drawingBufferColorSpace="display-p3",e.unpackColorSpace&&(e.unpackColorSpace="display-p3"),o.l.setCanvasColorProfile(s.RY.DISPLAY_P3);break;default:(0,r.x1)("color management","unsupported color space",{targetColorSpace:t})}}}onFrame(){(0,n.L)(a.B3,n.K.DEFAULT,()=>{this.onFrameCb&&this.onFrameCb()})}queueSwitchWebglColorSpace(e,t,i,s){let a=()=>{this.switchWebglColorSpace(e,t),s&&s.invalidateCanvas()};"mirror"===i?a():this.onFrameCb=a}}},679159:(e,t,i)=>{let s;i.d(t,{C5:()=>s,YL:()=>o});var a=i(752488),r=i(544398);class n{calculateColorWithRampValue(e,t){let i=(0,r.jA)((0,a.aH)(e),t);return i?(0,a.oU)(i):null}calculateColorWithRelativeAdjustment(e,t){let i=(0,r.Hd)((0,a.aH)(e),t);return i?(0,a.oU)(i):null}getRampValueForColor(e){return(0,r.Wn)((0,a.aH)(e))}}function o(){s=new n}},415277:(e,t,i)=>{let s;i.d(t,{Tl:()=>s,pH:()=>l});var a=i(38989),r=i(428444),n=i(345777);class o{constructor(e){this.store=e}trackComponentAction(e,t,i){let s=this.state.openFile,o=s?.key,l=!!this.state.user;if(null==s||null==o||!l)return;let d=s.editorType;if(d===r._Y.SLIDES||d===r._Y.FIGMAKE||(0,a.kc)().dsa_restrict_actions_to_design&&!this.isInDesignFile())return;let c=Object.entries(t).map(([e,t])=>({key:e,count:t}));try{n.PT.recordComponentAction({action:e,action_source:i,fileKey:o,components:c})}catch(e){}}trackStyleAction(e,t,i){let s=!!this.state.user;if(!this.isInDesignFile()||!s)return;let a=[];for(let[e,i]of Object.entries(t))a.push({key:e,count:i});if(0!==a.length)try{n.PT.recordStylesAction({action:e,action_source:i,fileKey:this.state.openFile?.key,styles:a})}catch(e){}}trackVariableAction(e,t,i){let s=!!this.state.user;if(!this.isInDesignFile()||!s)return;let a=[];for(let[e,i]of Object.entries(t))a.push({key:e,count:i});if(0!==a.length)try{n.PT.recordVariablesAction({action:e,action_source:i,fileKey:this.state.openFile?.key,variables:a})}catch(e){}}isInDesignFile(){let e=this.state.openFile,t=e?.key;return null!=e&&null!=t&&e.editorType===r._Y.DESIGN}get state(){if(!this.store)throw Error("Calling _state without a valid store");return this.store.getState()}}function l(e){s=new o(e)}},724686:(e,t,i)=>{let s;i.d(t,{xo:()=>s,zs:()=>o}),i(611290);var a=i(56857);i(553538);var r=i(799661);class n{constructor(e){this.store=e,this.commentNotificationLogTimePerFile={},this.COMMENT_NOTIFICATION_LOG_INTERVAL_MS=36e5}showErrorBellInLocalDev(e){}onMissingEditScope(){this.showErrorBellInLocalDev("No edit scope is active")}onIntentionalEdit(e){this.maybeSubscribeToCommentNotifications(e)}resetCommentNotificationLogTimes(){this.commentNotificationLogTimePerFile={}}maybeSubscribeToCommentNotifications(e){let t=this.store.getState(),i=t.openFile?.key;if(!i||"fullscreen"===t.selectedView.view&&t.selectedView.editorType===r.nT.DevHandoff)return;let s=this.commentNotificationLogTimePerFile[i],n=Date.now();if(null!=s&&n-s<this.COMMENT_NOTIFICATION_LOG_INTERVAL_MS)return;let o=Array.from(e).find(e=>{if(e.includes("StampBehavior"))return!1;switch(e){case"set-visible":case"set-locked":case"cut":case"select-frame-preset":case"update-selection-export-settings-data":case"reorder-pages":return!1;default:return!0}});o&&(a.Ay.post(`/api/user_notifications/catfile_signup/${i}`,{action_type:o}),this.commentNotificationLogTimePerFile[i]=n)}}function o(e){s=new n(e)}},873541:(e,t,i)=>{let s;i.d(t,{Zc:()=>s,jx:()=>r});class a{constructor(e){this._store=e}get _state(){if(!this._store)throw Error("Calling _state without a valid store");return this._store.getState()}isInOrg(){return!!this._state.currentUserOrgId}}function r(e){s=new a(e)}},31162:(e,t,i)=>{let s;i.d(t,{ip:()=>s,qb:()=>n});var a=i(863173);class r{onFrameDistributionTrackedEvent(e){a.jp(e)}}function n(){s=new r}},568640:(e,t,i)=>{i.d(t,{Pp:()=>w,u1:()=>S,zi:()=>I});var s=i(24989),a=i(278995),r=i(711839),n=i(38989),o=i(59881),l=i(614291),d=i(641567),c=i(922902),u=i(266132),m=i(702650),p=i(365094);let h=null,_=0,g=!1,f=null,x=null,b=0;function y(){if(!a.cgc)throw Error("FullscreenWebSocketTsApi bindings not available");(0,m.II)(),a.cgc.connectFinished()}function E(e){if(!a.cgc)throw Error("FullscreenWebSocketTsApi bindings not available");(0,m.II)(),a.cgc.receive(e)}function A(e,t){let i=new URL(e),s=new URL(t);return i.searchParams.delete("recentReload"),s.searchParams.delete("recentReload"),i.toString()===s.toString()}function v(e){if(null!==h){h.onopen=null,h.onmessage=null,h.onclose=null,h.onerror=null;try{h.close()}catch(e){}h=null,function(e){if(!a.cgc)throw Error("FullscreenWebSocketTsApi bindings not available");(0,m.II)(),a.cgc.disconnect(e)}(e)}}let T=!1;function S(){if(h){T=!0;let e=h.url;v("breakMultiplayerWebsocketForTesting"),console.log(`breakMultiplayerWebsocketForTesting: disconnected from ${e}`)}}function I(e=!1){if(!h){if(T=!1,!a.h3O)throw Error("Multiplayer bindings not available");a.h3O.reconnect(e),console.log(`unbreakMultiplayerWebsocketForTesting: reconnected to ${h?h.url:null}`)}}let w={connect:function(e){if(T)return;function t(){null!==f&&(clearTimeout(f),f=null),x=null}_++,function(){if(g)return;let e=()=>{null!==f&&(clearTimeout(f),f=null,x=null)};window.addEventListener("offline",e),window.addEventListener("online",e),g=!0}(),v("connect");let i=mpGlobal.sock,m=mpGlobal.perfMetrics,S=mpGlobal.msgs;mpGlobal.sock=null,mpGlobal.msgs=[],mpGlobal.perfMetrics=[],p.xK.setWsUrl(e);let I=l.D?.getState();if(i&&A(i.url,e)&&(i.readyState===WebSocket.CONNECTING||i.readyState===WebSocket.OPEN)){for(let{key:e,ts:t,nBytes:s}of(h=i,b=0,m))p.xK.logWsMsg(e,s,t);y();let e=S.length;for(let[t,i]of S.entries())if((0,c.Lo)("multiplayer","Replaying websocket message",{i:t,total:e,len:i.byteLength}),E(i),!h)return;h.readyState===WebSocket.CONNECTING&&(h.onopen=()=>{p.xK.logWsMsg("mp-ws-onopen")})}else{if((0,u.ds)("multiplayer_connect_attempt_ws_start",I?.openFile?.key,I,{url:e,urlLength:e.length,connectAttemptId:_,isReconnect:!!r.qo&&-1!==(0,r.UN)().scene,isIncremental:a.h3O?.isIncrementalSession()}),null!==i){if(!A(i.url,e)&&((0,c.xi)("multiplayer","Preconnect URL doesn't match URL",{preconnectUrl:i.url,url:e}),(0,n.kc)().report_preconnect_mismatch&&(0,d.$D)(s.e.SCENEGRAPH_AND_SYNC,Error("Multiplayer preconnect URL mismatch"))),i.readyState!==WebSocket.CONNECTING&&i.readyState!==WebSocket.OPEN){let e=null;i.readyState===WebSocket.CLOSED?e="closed":i.readyState===WebSocket.CLOSING&&(e="closing"),(0,c.xi)("multiplayer","readyState is bad, skipping preconnect optimization",{readyState:e})}(0,o.sx)("preconnect_url_mismatch",{preconnectUrl:i.url,url:e,readyState:i.readyState},{forwardToDatadog:!0});try{i.close()}catch{}}let l=e.length;if(b>=3&&l>2e3&&navigator.onLine){let t=new URL(e);t.searchParams.delete("scenegraph-queries-initial-nodes"),e=t.toString()+"&use-incremental-for-editors=0";let i={connectAttemptId:_,originalUrlLength:l,newUrlLength:e.length,forced:!1,consecutiveInitFailureCount:b,shortened_url:!0};(0,u.ds)("multiplayer_connect_truncate_ws_url",I?.openFile?.key,I,i),(0,c.Lo)("multiplayer","Truncating websocket url to force full loading",i)}(h=new WebSocket(e)).binaryType="arraybuffer",null===f&&(x=navigator.onLine,f=setTimeout(()=>{let e=h?h.readyState:-1;if(e===WebSocket.OPEN)return;let t=I?.openFile?.key;t&&(0,u.GS)("scenegraph_and_sync.multiplayer_connect_ws_timeout",t,I,{connectAttemptId:_,online:navigator.onLine,startOnline:x??void 0,readyState:e,consecutiveInitFailureCount:b}),(0,c.Lo)("multiplayer","Websocket connect timeout",{connectAttemptId:_,online:navigator.onLine,startOnline:x,readyState:e,consecutiveInitFailureCount:b})},12e4)),h.onopen=()=>{t(),b=0,y(),p.xK.logWsMsg("mp-ws-onopen"),(0,u.ds)("multiplayer_connect_ws_open",I?.openFile?.key,I,{connectAttemptId:_}),(0,c.Lo)("multiplayer","Websocket opened")}}h.onmessage=e=>{let t=new Uint8Array(e.data);p.xK.logWsMsg("mp-ws-onmessage",t.length*t.BYTES_PER_ELEMENT),E(t)},h.onclose=e=>{t(),e.reason.startsWith("retry-quickly")?v("retry-quickly"):v("socket.onclose");let i=I?.openFile?.key;i&&(0,u.GS)("scenegraph_and_sync.multiplayer_connect_ws_close",i,I,{connectAttemptId:_,code:e.code,reason:e.reason,wasClean:e.wasClean})},h.onerror=()=>{navigator.onLine?b++:b=0,t(),v("socket.onerror"),(0,u.ds)("multiplayer_connect_ws_error",I?.openFile?.key,I,{connectAttemptId:_,consecutiveInitFailureCount:b,online:navigator.onLine}),(0,c.Lo)("multiplayer","Websocket error",{online:navigator.onLine,consecutiveInitFailureCount:b})}},disconnect:v,send:function(e){try{h.send(e)}catch(e){}},bufferedAmount:function(){return h?.bufferedAmount||0}}},192478:(e,t,i)=>{let s;i.d(t,{bJ:()=>o,ld:()=>s});var a=i(846303),r=i(903508),n=i(513022);function o(){s=new l}class l{constructor(){this.developerRelatedLinksManager=new a.GK}submitDeveloperRelatedLinks(e){this.developerRelatedLinksManager.addLinks(e)}didGetNodeStatusChange(){(0,r.Q)()}isVariableAvailableInLibraryAsset(e){return(0,n.y7)(e)}}},864006:(e,t,i)=>{i.d(t,{FF:()=>m,XT:()=>p,_I:()=>h});var s=i(278995),a=i(468882),r=i(38989),n=i(9189),o=i(59881),l=i(62591),d=i(908397),c=i(553538);let u="hardware_acceleration_disabled_warning_shown";var m=(e=>(e[e.UNKNOWN=0]="UNKNOWN",e[e.DISABLED=1]="DISABLED",e[e.ENABLED=2]="ENABLED",e))(m||{});function p(){if(l.eD)return 0;let e=s.CeL?.getGpuDeviceInfo()??null;return e?e.vendor.includes("Google Inc.")&&e.graphicsCardName.includes("SwiftShader")?1:2:0}function h(e,t){if(0!==e&&!(0,r.kc)().suppress_hardware_acceleration_notification){if(2===e){n.x4&&n.x4.getItem(u)&&((0,o.sx)("Hardware Acceleration Turned On"),delete n.x4[u]);return}if(!n.x4||!n.x4.getItem(u)){let e=()=>{n.x4.setItem(u,"1")};(0,o.sx)("Hardware Acceleration Warning Bell"),t(c.F.enqueue({type:"hardware_acceleration_disabled_warning",message:(0,a.t)("hardware_acceleration_detector.message"),button:{text:(0,a.t)("hardware_acceleration_detector.learn_more"),action:()=>{d.Ay.unsafeRedirect("https://help.figma.com/hc/articles/360039828614-Configure-your-browser-for-Figma#Advanced","_blank"),t(c.F.dequeue({})),e(),(0,o.sx)("Hardware Acceleration Warning Clicked",{dismissed:!1})}},timeoutOverride:1/0,onDismiss:()=>{(0,o.sx)("Hardware Acceleration Warning Clicked",{dismissed:!0}),e()}}))}}}},916464:(e,t,i)=>{let s;i.d(t,{B0:()=>U,DK:()=>M,Dl:()=>B,EC:()=>j,Nd:()=>D,YN:()=>V,d$:()=>f,w6:()=>P});var a=i(43256),r=i(461180),n=i(197299),o=i(38989),l=i(273369),d=i(343116),c=i(922902),u=i(56857),m=i(571694),p=i(841687),h=i(361885),_=i(454919);let g=document.createElement("canvas"),f=4096,x=g.getContext("2d"),b=document.createElement("canvas"),y=function(){try{return b.getContext("2d",{colorSpace:"display-p3"})}catch{return null}}();async function E(e,t,i,s){let a=r.RY.SRGB;if("image/png"===t){let t=(0,p.Ll)(e);if(e=t.withoutColorSpace,t.iccProfileRawData)try{a=(0,m.Y)(t.iccProfileRawData)}catch(e){}}let n=null;if("image/jpeg"===t){try{let t=(0,p.yy)(e);t&&(a=(0,m.Y)(t)??r.RY.SRGB)}catch(e){}n=l.f.getOrientation(e),C&&(n=null)}let o=!1;"image/gif"===t&&(o=(0,p.fB)(e));let d=URL.createObjectURL(new Blob([e],{type:t}));try{let e=await P({url:d,height:null,width:null});return{...A(e,i,s,n,o),colorProfile:a}}finally{URL.revokeObjectURL(d)}}function A(e,t,i,s,a){let{width:r,height:n,originalWidth:o,originalHeight:d,isRotated:c}=function(e,t,i,s,a){let r=l.f.angleFromOrientation(a),n=l.f.orientationIsFlipped(a),o=e,d=t,c=e,u=t;if(90===r||270===r){let i=t;t=e,e=i,i=u,u=c,c=i}return i>0&&s>0&&(e>i&&(t=Math.round(t*i/e),e=i),t>s&&(e=Math.round(e*s/t),t=s),e=Math.max(1,e),t=Math.max(1,t)),g.width=e,g.height=t,x.translate(e/2,t/2),x.scale(e/c,t/u),n&&x.scale(-1,1),x.rotate(Math.PI/180*r),x.translate(-o/2,-d/2),{originalHeight:u,originalWidth:c,width:e,height:t,isRotated:0!==r}}(e.width,e.height,t,i,s);return x.drawImage(e,0,0),{width:r,height:n,originalWidth:o,originalHeight:d,isMultiFrameGIF:a,isRotated:c,bitmap:null,rgba:new Uint8Array(x.getImageData(0,0,r,n).data.buffer)}}function v(e){return Uint8Array.from(atob(e),e=>e.charCodeAt(0))}async function T(){let e="/9j/4AAQSkZJRgABAgEASABIAAD/4QBiRXhpZgAATU0AKgAAAAgABQESAAMAAAABAAYAAAEaAAUAAAABAAAASgEbAAUAAAABAAAAUgEoAAMAAAABAAMAAAITAAMAAAABAAEAAAAAAAAAAAAcAAAAAQAAABwAAAAB/9sAhAABAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQH/wAARCAAQAAgDAREAAhEBAxEB/8QASwABAQAAAAAAAAAAAAAAAAAAAAsQAQAAAAAAAAAAAAAAAAAAAAABAQAAAAAAAAAAAAAAAAAAAAARAQAAAAAAAAAAAAAAAAAAAAD/2gAMAwEAAhEDEQA/AJ/4AP/Z";if(!N.works)return 16==(await P({url:`data:image/jpeg;base64,${e}`,height:null,width:null})).width;{let t=new Blob([v(e)],{type:"image/jpeg"});return 16==(await createImageBitmap(t)).width}}async function S(){if(!N.works)return!1;let e=document.createElement("canvas");e.width=16,e.height=8;let t=e.getContext("2d"),i=new Blob([Uint8Array.from(atob("/9j/4AAQSkZJRgABAgEASABIAAD/4QBiRXhpZgAATU0AKgAAAAgABQESAAMAAAABAAYAAAEaAAUAAAABAAAASgEbAAUAAAABAAAAUgEoAAMAAAABAAMAAAITAAMAAAABAAEAAAAAAAAAAAAcAAAAAQAAABwAAAAB/9sAhAABAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQH/wAARCAAQAAgDAREAAhEBAxEB/8QASwABAQAAAAAAAAAAAAAAAAAAAAsQAQAAAAAAAAAAAAAAAAAAAAABAQAAAAAAAAAAAAAAAAAAAAARAQAAAAAAAAAAAAAAAAAAAAD/2gAMAwEAAhEDEQA/AJ/4AP/Z"),e=>e.charCodeAt(0))],{type:"image/jpeg"});t.drawImage(await createImageBitmap(i),0,0);let s=t.getImageData(0,0,16,8);t.clearRect(0,0,e.width,e.height);let a=URL.createObjectURL(i),r=new Image;await new Promise(e=>{r.onload=e,r.src=a}),t.drawImage(await createImageBitmap(r),0,0);let n=t.getImageData(0,0,16,8);if(s.data.length!==n.data.length)return!1;for(var o=0;o<s.data.length;++o)if(s.data[o]!==n.data[o])return!1;return!0}async function I(e,t){if(!e)return!1;try{let s=await createImageBitmap(t),a=s.width,r=s.height,n=!1,o=e.getParameter(e.ACTIVE_TEXTURE);e.activeTexture(e.TEXTURE0);let l=e.getParameter(e.FRAMEBUFFER_BINDING),d=e.getParameter(e.TEXTURE_BINDING_2D),c=null,u=null;try{if(u=e.createTexture(),e.bindTexture(e.TEXTURE_2D,u),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,s),e.bindTexture(e.TEXTURE_2D,null),c=e.createFramebuffer(),e.bindFramebuffer(e.FRAMEBUFFER,c),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,u,0),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.RENDERBUFFER,null),e.checkFramebufferStatus(e.FRAMEBUFFER)===e.FRAMEBUFFER_COMPLETE){var i=new Uint8Array(4*a*r);e.readPixels(0,0,a,r,e.RGBA,e.UNSIGNED_BYTE,i),255===i[0]&&(n=!0)}}catch{}return e.bindFramebuffer(e.FRAMEBUFFER,l),e.bindTexture(e.TEXTURE_2D,d),e.deleteTexture(u),e.deleteFramebuffer(c),e.activeTexture(o),n}catch{return!1}}async function w(){C=await T(),d.Ay.webkit&&await S()}async function R(e){let t=new Blob([(0,a.D4)("iVBORw0KGgoAAAANSUhEUgAAAAEAAAAQBAMAAAAlsQiEAAAALVBMVEX///////////////////////////////////////////////////////8AAACgbBYXAAAAD3RSTlPx5NXDsJ2Ic19LOCgYDQAksqQSAAAAJklEQVQI12MAAQEGBQYDBgeGAIYEhgKGBoYJDAsYNjAcYHjAcAEAP7AGkQT7krEAAAAASUVORK5CYII=")],{type:"image/png"});try{try{return await createImageBitmap(t,{premultiplyAlpha:"none"}),{works:!0,allowsOptions:!0}}catch(i){return{works:await I(e,t),allowsOptions:!1}}}catch{return{works:!1,allowsOptions:!1}}}let N={works:!1,allowsOptions:!1},C=!1,O=!1,k=null,L=null,j={init(e){L=(async()=>{if(e===r.UF.YES)N={works:!0,allowsOptions:!0};else{let e=(s||(s=(0,n.iL)()),s).ctx;if(!e)throw Error("Cannot find GL context");N=await R(e)}await w()})()},reset(){null!==k&&k.forgetCallbacks()},prepareDataForEncodeInPlace(e,t,i,s,a=!1){let r=e*t*4;s&&(0,_.X)(i,r),a&&(0,_.e)(i,r)},encodeInPlace(e,t,i,s,n,o,l=r.RY.SRGB,d=!1){let c,u=g,m=x;l===r.RY.DISPLAY_P3&&b&&y&&(u=b,m=y),j.prepareDataForEncodeInPlace(e,t,i,o,d);let p=new ImageData(new Uint8ClampedArray(i.buffer),e,t);u.width=e,u.height=t,m.putImageData(p,0,0),c=s?u.toDataURL("image/jpeg",n):u.toDataURL();let h=";base64,";return(0,a.D4)(c.slice(c.indexOf(h)+h.length))},encode:(e,t,i,s,a,n,o=r.RY.SRGB,l=!1)=>(i=new Uint8Array(i),j.encodeInPlace(e,t,i,s,a,n,o,l)),async decodeAsync(e,t,i,s,a){if(await L,!N.works)return await E(e,t,i,s);if(k??=new h.o,O){if("image/jpeg"===t){let a=l.f.getOrientation(e);if(null!=a&&a!==l.a.ROTATE_0)return await E(e,t,i,s)}else if((0,o.kc)().webgpu_p3_bug&&"image/png"===t&&l.f.cICPIsDisplayP3(e))return await E(e,t,i,s)}let r=null,{bitmap:n,isMultiFrameGIF:c,colorProfile:u}=await F(t,e);if(!n)return console.warn("Something wrong in createImageBitmap thread.  Bitmap is null ... falling back to decode using image"),await E(e,t,i,s);let m=!1;"image/jpeg"===t&&(m=r!==l.a.ROTATE_0,null!==r&&r!==l.a.ROTATE_0&&C&&d.Ay.chrome&&0>d.Ay.compareVersions([d.Ay.version.toString(),"86"])&&(a=!1),C&&(r=null));let p=n.width,_=n.height;return a&&(null===r||r===l.a.ROTATE_0)&&(0===i||p<=i)&&(0===s||_<=s)?{width:p,height:_,originalWidth:p,originalHeight:_,isMultiFrameGIF:c,isRotated:m,bitmap:n,colorProfile:u}:{...A(n,i,s,r,c),colorProfile:u}},thumbnailSize(e,t){let i=Math.max(e,t),s=0;for(;i>512;)s++,i=Math.floor((i+1)/2);let a=j.dropMips(e,t,s);return{w:a[0],h:a[1],mipsToDrop:s}},dropMips(e,t,i){if(0===e||0===t)return(0,c.x1)("images","Width and height should not be zero"),[e,t];for(let s=0;s<i;++s)e=Math.floor((e+1)/2),t=Math.floor((t+1)/2);return[e,t]},scaleImageBitmap(e,t,i,s){g.width=t,g.height=i,x.translate(0,0),x.scale(1,1),x.rotate(0),x.drawImage(e,0,0,t,i);let a=g.toDataURL(s),r=a.indexOf(",");return v(a.slice(r+1))},async createCanvasAndDrawImage(e,t,i,s){let a,r;"undefined"!=typeof OffscreenCanvas?a=new OffscreenCanvas(e,t):a=B(e,t);let n=a.getContext("2d");if(!n)throw Error("Failed to get 2D context");return i(n),a instanceof OffscreenCanvas?r=await a.convertToBlob({type:s}):r=await new Promise((e,t)=>a.toBlob(i=>{i?e(i):t(Error("Failed to create blob from canvas"))},s)),{canvas:a,blob:r}},async generateThumbnail(e,t,i){if(e.bitmap){let{canvas:s,blob:a}=await this.createCanvasAndDrawImage(t,i,s=>{s.drawImage(e.bitmap,0,0,t,i)},e.mimeType),r=await a.arrayBuffer(),n=await createImageBitmap(s);return{compressedData:new Uint8Array(r),bitmap:n}}{let s=e.rgba;if(!s)throw Error("Failed to decode image");let a=new ImageData(new Uint8ClampedArray(s),e.width,e.height),{canvas:r}=await this.createCanvasAndDrawImage(e.width,e.height,e=>{e.putImageData(a,0,0)},e.mimeType),{canvas:n}=await this.createCanvasAndDrawImage(t,i,e=>{e.drawImage(r,0,0,t,i)},e.mimeType),o=n.getContext("2d");if(!o)throw Error("Failed to get context");let l=new Uint8Array(o.getImageData(0,0,t,i).data);return{compressedData:this.encodeInPlace(t,i,l,"image/jpeg"===e.mimeType,60,!1),decompressedData:l}}}},M=128;async function F(e,t){if("image/heic"===e)try{let e=await u.Ay.post("/api/upnode/heic_convert",t,{retryCount:3,headers:{...u.Ay.requiredHeaders,"Content-Type":"image/heic"},rawBody:!0,responseType:"arraybuffer"}),i=new Uint8Array(e.data),s=new Blob([i],{type:"image/jpeg"}),a=N.allowsOptions?{premultiplyAlpha:"none"}:void 0;return{bitmap:await createImageBitmap(s,a),isMultiFrameGIF:!1,colorProfile:r.RY.SRGB}}catch(e){return(0,c.x1)("image_io","HEIC conversion via Upnode failed",{error:e.message,reportAsSentryError:!0}),{bitmap:null,isMultiFrameGIF:!1,colorProfile:r.RY.SRGB}}else{if(!k)throw Error("Worker not initialized");return await k.sendMessage({type:e,array:t,supportsCreateBitmapOptions:N.allowsOptions})}}async function D(e){return new Uint8Array((await u.Ay.crossOriginGet(e,void 0,{responseType:"arraybuffer",retryCount:3})).data)}function P(e){return new Promise((t,i)=>{let s=new Image;e.height&&(s.height=e.height),e.width&&(s.width=e.width),s.crossOrigin="";let a=Error();s.onerror=e=>{e.cause=a,i(e)},s.onload=()=>t(s),s.src=e.url})}function B(e,t){let i=document.createElement("canvas");return i.width=e,i.height=t,i}function U(e){return`data:image/svg+xml;base64,${btoa(unescape(encodeURIComponent(e)))}`}let V={decodeImage:(e,t,i,s,a)=>j.decodeAsync(e,t,i,s,a),encodeImage:(e,t,i,s,a,r,n,o)=>j.encode(e,t,i,s,a,r,n,o),scaleImage:(e,t,i,s)=>j.scaleImageBitmap(e,t,i,s),cancelCurrentImageWorkers(){j.reset()},init(e){j.init(e),O=e===r.UF.YES}}},976602:(e,t,i)=>{let s;i.d(t,{SQ:()=>s,Y_:()=>n});var a=i(619377);class r{closeQuickActions(){(0,a.jD)(null,{forceClose:!1})}}let n=()=>{s=new r}},851919:(e,t,i)=>{let s;i.d(t,{Dt:()=>s,fG:()=>S});var a=i(332481),r=i(719432),n=i(466364),o=i(322550),l=i(884332),d=i(70752),c=i(595333),u=i(209438),m=i(575556),p=i(188629),h=i(751148),_=i(238366),g=i(764630),f=i(192396),x=i(622483),b=i(637293),y=i(661901),E=i(533884),A=i(688420);let v={ArrangeAsListBehavior:u.b,ConnectorToolBehavior:h.a,TableBehavior:b.H,TemplatePreviewBehavior:E.Z,VideoBehavior:A.s,SectionPresetBehavior:x.V,DevHandoffAnnotationsMouseBehavior:o.l,WebpageBehavior:f.O,ResponsiveNodeSetBehavior:g.l,SlideDeckAddBehavior:d.w,SlideDeckReorderRowBehavior:c.M,MoveEmbeddedPrototypeBehavior:l.W,BuzzGridAddBehavior:a.X,BuzzGridReorderRowBehavior:r.r,BuzzGridStateGroupErrorBehavior:n.A,FrameQuickAddBehavior:_._,CMSRepeaterCandidateBehavior:p.R,CMSFieldPickerCandidateBehavior:m.N};class T{createMouseBehavior(e){if(e in v)return new v[e](e);throw Error("unexpected mouse behavior name: "+e)}tableUiReorderHandleHoveredLength(){return y.Ro.reorderHandleHoveredLength}tableUiAddButtonHoveredRadius(){return y.Ro.addButtonHoveredRadius}}function S(){s=new T}},548982:(e,t,i)=>{let s;i.d(t,{F_:()=>s,dB:()=>d});var a=i(906338),r=i(38989),n=i(537550);class o{constructor(e,t,i){this.getFeatureFlags=e,this.observabilityClient=t,this.timerAPI=i,this.panVital=null,this.zoomVital=null,this.dragVital=null,this.panDebounceTimer=null,this.zoomDebounceTimer=null,this.dragDebounceTimer=null}onPan(){this.getFeatureFlags().critical_interaction_instrumentation_pan_zoom&&(this.panVital||(this.panVital=this.observabilityClient.createVital("viewport_pan_interaction",{level:a.$b.INFO,trackFps:!0,description:"Tracks FPS during viewport pan interactions"}),this.panVital.start()),null!==this.panDebounceTimer&&this.timerAPI.clearTimeout(this.panDebounceTimer),this.panDebounceTimer=this.timerAPI.setTimeout(()=>{this.stopPan()},100))}onZoom(){this.getFeatureFlags().critical_interaction_instrumentation_pan_zoom&&(this.zoomVital||(this.zoomVital=this.observabilityClient.createVital("viewport_zoom_interaction",{level:a.$b.INFO,trackFps:!0,description:"Tracks FPS during viewport zoom interactions"}),this.zoomVital.start()),null!==this.zoomDebounceTimer&&this.timerAPI.clearTimeout(this.zoomDebounceTimer),this.zoomDebounceTimer=this.timerAPI.setTimeout(()=>{this.stopZoom()},100))}stopPan(){this.panVital&&(this.panVital.stop(),this.panVital=null),null!==this.panDebounceTimer&&(this.timerAPI.clearTimeout(this.panDebounceTimer),this.panDebounceTimer=null)}stopZoom(){this.zoomVital&&(this.zoomVital.stop(),this.zoomVital=null),null!==this.zoomDebounceTimer&&(this.timerAPI.clearTimeout(this.zoomDebounceTimer),this.zoomDebounceTimer=null)}onDrag(){this.getFeatureFlags().critical_interaction_instrumentation_pan_zoom&&(this.dragVital||(this.dragVital=this.observabilityClient.createVital("viewport_drag_interaction",{level:a.$b.INFO,trackFps:!0,description:"Tracks FPS during viewport drag interactions"}),this.dragVital.start()),null!==this.dragDebounceTimer&&this.timerAPI.clearTimeout(this.dragDebounceTimer),this.dragDebounceTimer=this.timerAPI.setTimeout(()=>{this.stopDrag()},100))}stopDrag(){this.dragVital&&(this.dragVital.stop(),this.dragVital=null),null!==this.dragDebounceTimer&&(this.timerAPI.clearTimeout(this.dragDebounceTimer),this.dragDebounceTimer=null)}}let l={setTimeout:(e,t)=>window.setTimeout(e,t),clearTimeout:e=>window.clearTimeout(e)};function d(){s=new o(r.kc,n.J,l)}},989667:(e,t,i)=>{i.d(t,{j:()=>a});var s=i(987485);let a=new class{constructor(){this.counterAtom=(0,s.hR)({value:0},{changeFileBehavior:s.hW.RESET_VALUE_ON_FILE_CHANGE}),this.arrayAtom=(0,s.hR)([{value:0}],{changeFileBehavior:s.hW.RESET_VALUE_ON_FILE_CHANGE}),this.jsValueTestsCallback=null}jsEchoUintValue(e){if(e<0)throw Error("Unsigned value was negative");return e}jsEchoStringValue(e){return e}jsEchoInt64Value(e){return e}jsEchoUint64Value(e){return e}jsEchoInt64Struct(e){return e}jsEchoIntArrayValue(e){return e}jsEchoBoolArrayValue(e){return e}jsEchoJsonValue(e){return e}jsEchoJsValue(e){return e}jsEchoOptionalJsValue(e){return e}jsEchoDeeplyNestedJsValue(e){return e}jsEchoIntMapValue(e){return e}jsEchoFastParseableStructValue(e){return e}jsEchoNonFastParseableStructValue(e){return e}jsEchoIntSetValue(e){return e}jsEchoOptionalStringValue(e){return e}jsEchoOptionalStringStruct(e){return e}jsEchoCallbackValue(e){return e}getObservableCounter(){return this.counterAtom.observable}getObservableArray(){return this.arrayAtom.observable}jsValueTestsDone(e){this.jsValueTestsCallback?.(e),this.jsValueTestsCallback=null}setJsValueTestsCallback(e){this.jsValueTestsCallback=e}}},60274:(e,t,i)=>{let s;i.d(t,{LC:()=>o,zT:()=>s});var a=i(312932),r=i(110962);class n{onNodeUpdate(e){let t=(0,a.X5)();t&&t.onNodeUpdate(e)}onNodeDeleted(e){let t=(0,a.X5)();t&&t.onNodeDeleted(e)}onNodeCreated(e){let t=(0,a.X5)();t&&t.onNodeCreated(e)}async isDesignLinterEnabledForUser(){return await (0,r.kU)()}isDesignLinterEnabledForUser_UNSAFE(){return(0,r.Ki)()}}function o(){s=new n}},592757:(e,t,i)=>{i.d(t,{F4:()=>h,Yc:()=>y,aW:()=>b,bM:()=>f,cF:()=>c,dn:()=>p,le:()=>x,o_:()=>d});var s=i(513813),a=i(38989),r=i(908397),n=i(890),o=i(922902),l=i(467660);let d=1048576,c=0x40000000,u=(0,a.kc)().wasm_4gb&&r.Ay.location&&"1"===new URLSearchParams(r.Ay.location.search).get("wasm-4gb"),m=r.Ay.location&&"true"===new URLSearchParams(r.Ay.location.search).get("recovery"),p=u?s.rC.MAXIMUM:m?s.rC.RECOVERY:s.rC.DEFAULT;function h(e){let t=s.hM?.setHeapMemoryMode(e)??!1;return(0,o.Lo)("memory",`setHeapMemoryMode(${e}) ${t?"success":"failed"}`),t}let _=null,g=null;function f(e,t){"fullscreen-app"===e?_=t:g=t}function x(e){return"fullscreen-app"===e?_?.()??0:"prototype-lib"===e?g?.()??0:_?.()||g?.()||0}function b(){if(window.performance){let e=window.performance.memory;if(e)return e.usedJSHeapSize}return 0}function y(){return(s.hM?.getTotalUsedHeapMemory()||0)+l.Y5.memorySpikeOnFileLoadBytes()}(0,a.kc)().memory_profiling_local&&(0,n.b5)()&&(window.startMemoryProfile=async()=>{let e=await window.showSaveFilePicker(),t=await e.createWritable({keepExistingData:!0});window.memoryProfileOperationsWritable=t}),(0,n.b5)()&&(window.getTopMemoryFunctions=()=>{let e=s.Yy?.getAll()??[],t=new Map,i=new Map,a=new Map;for(let r of e)r.includes("allocCallCount")?t.set(r,s.Yy?.getCount(r)??0):r.includes("allocMaxDelta")?i.set(r,s.Yy?.getCount(r)??0):r.includes("allocTotalDelta")&&a.set(r,s.Yy?.getCount(r)??0);console.log("call count events",Array.from(t).sort((e,t)=>t[1]-e[1]).slice(0,10)),console.log("max delta events",Array.from(i).sort((e,t)=>t[1]-e[1]).slice(0,10)),console.log("total delta events",Array.from(a).sort((e,t)=>t[1]-e[1]).slice(0,10))},window.resetPerformanceEventCounters=()=>{s.Yy?.resetAll()})},57706:(e,t,i)=>{let s;i.d(t,{YN:()=>s,qZ:()=>p});var a=i(278995),r=i(468882),n=i(536760),o=i(65710),l=i(553538),d=i(293466),c=i(767440),u=i(467660);class m{setMentionsTypeaheadQuery(e){n.zl.set(c.h1,e)}clearMentionsTypeaheadQuery(e,t){if(e){let e=n.zl.get(c.h1),i=n.zl.get(c.LQ)?.index||null,s=n.zl.get(c.wm);(0,d.W)(e,t,i,s)}n.zl.set(c.h1,null),this.endSearchSession()}isShowingMentionsTypeaheadResults(){let e=n.zl.get(c.LQ);return!!e?.mentions?.length}setMentionsTypeaheadTargetRect(e,t,i){n.zl.set(c.MX,{x:e,y:t,height:i,width:0})}startSearchSession(){let e=(0,o.MZ)();return n.zl.set(c.wm,e),e}endSearchSession(){let e=n.zl.get(c.wm);return n.zl.set(c.wm,""),e}showVisualBellForPastedMentions(e,t){u.Y5.dispatch(l.F.enqueue({message:(0,r.t)("whiteboard.visual_bell.canvas_at_mentions_send_notifications_from_pasted_mentions",{numUsers:t}),button:{text:(0,r.t)("whiteboard.visual_bell.canvas_at_mentions_send_notifications_from_pasted_mentions_action"),action:()=>{a.fp8?.allowSendNotificationsForPastedMentions(e)}}}))}}function p(){s=new m}},696506:(e,t,i)=>{let s;i.d(t,{DI:()=>u,Ds:()=>g,ZO:()=>s,e8:()=>m,vS:()=>p});var a=i(818822),r=i(614291),n=i(266132);let o=!1,l=!1,d=!1,c=!1;function u(){l=!0,h()}function m(){o=!1,l=!1,d=!1,c=!1}function p(e,t){let i=r.D.getState(),s=i.openFile?.key;s&&!c&&((0,n.ds)("Show Missing Fonts Popover",s,i,{fontListLoaded:e,counts:t,timeNow:performance.now()}),c=!0)}function h(){if(o&&l&&!d){let e=r.D.getState(),t=new Set(Object.values(e.fonts).map(e=>Object.values(e)).flat().map(e=>e.source)),i=e.openFile?.key,s=e.figFileDuplicatedFromHubFile,o=!1;void 0!==i&&void 0!==s&&(o=null!=s[i]),(0,n.ds)("has_missing_font",i,e,{has_google_fonts:t.has(a.jXp.GOOGLE),has_local_fonts:t.has(a.jXp.LOCAL),has_shared_fonts:t.has(a.jXp.SHARED),is_community_duplicated_file:o}),d=!0}}class _{markMissingFontScannerAsComplete(){o=!0,h()}}function g(){s=new _}},341380:(e,t,i)=>{let s;i.d(t,{PU:()=>o,pY:()=>s});var a=i(536760),r=i(490384);class n{getOpenFileParentOrgId(){return a.zl.get(r.yV)?.parentOrgId??null}}function o(){s=new n}},631421:(e,t,i)=>{i.d(t,{Ts:()=>S,Z_:()=>y,yQ:()=>b});var s=i(513813),a=i(278995),r=i(38989),n=i(536760),o=i(611290),l=i(59881),d=i(62591),c=i(614291),u=i(343116),m=i(266132),p=i(592757),h=i(251800),_=i(65561),g=i(860159);let f={periodMs:36e5,frequentPeriodMs:6e4},x={periodMs:3e5,frequentPeriodMs:6e4};function b(e,t){return Object.keys(e).reduce((i,s)=>{let a=t[s],r=e[s];return null!=a&&null!=r&&(i[s]=a-r),i},{})}function y(){let e=E();if(!a.P2e)return{...e};let t=a.P2e.getHeapMemoryBreakdown(),i={};for(let e of Object.keys(t))i[`heap_breakdown_${e}`]=t[e];let s=a.P2e.getRendererMemoryBreakdown()||{};function r(e){return"number"==typeof e?e:parseInt(e)}return{...e,renderer_gpu_memory:r(a.P2e.getRendererGpuMemory()),renderer_textures_memory:r(s.textures),renderer_vertex_buffers_memory:r(s.vertexBuffers),renderer_render_buffers_memory:r(s.renderBuffers),renderer_uniform_buffers_memory:r(s.uniformBuffers),image_memory:r(a.P2e.getTotalImageMemory()),...i}}function E(){let e=(0,p.aW)()??0,t=s.hM;if(!t)return{process_memory:e,emscripten_reserved_memory:(0,p.le)()};let i=t.getTotalUsedHeapMemory();return{process_memory:e,cpp_memory:i,js_memory:e>i?e-i:void 0,cpp_max_memory:t.getMaxUsedHeapMemory(),alloc_total:t.getAllocTotal(),alloc_call_count:t.getAllocCallCount(),emscripten_reserved_memory:(0,p.le)(),indirect_buffer_memory:t.getJsBufferMemory(),texture_image_memory:t.getTextureMemStatsTotal(s.aD.IMAGE),texture_tile_atlas_memory:t.getTextureMemStatsTotal(s.aD.TILE_ATLAS),texture_tile_stack_memory:t.getTextureMemStatsTotal(s.aD.TILE_STACK),texture_glyph_data_memory:t.getTextureMemStatsTotal(s.aD.GLYPH_DATA),compressed_images:t.getImageMemStatsTotal(s.fL.BITMAP),uncompressed_images_arraybuffer:t.getImageMemStatsTotal(s.fL.COMPRESSED),uncompressed_images_imagebitmap:t.getImageMemStatsTotal(s.fL.BUFFER)}}async function A(){if(d.eD){let e=await d.eD.getCPUUsage();if(e)return e.percent}return null}async function v(e,t,i,r,d){let p="Fullscreen Periodic Metrics"===e;if(!(!s.hM||"ok"!==n.zl.get(_.h)||(0,o.PN)())){if(p){let s=y();i&&(s.cpu_usage=await A());let n=(0,g.dd)(),o=(0,g.PH)();(0,m.ds)(e,r,c.D.getState(),{reporting_interval:t,file_key:r,is_hidden:document.hidden,product_type:d,is64BitBrowser:u.Ay.is64BitBrowser,multiplayer_state:a.h3O&&(0,h.LD)(a.h3O.getSessionState()),...s,...n,...o},{forwardToDatadog:!0})}else{let s=E();i&&(s.cpu_usage=await A());let a=(0,g.dd)(),n=(0,g.PH)();(0,l.sx)(e,{reporting_interval:t,file_key:r,is_hidden:document.hidden,is64BitBrowser:u.Ay.is64BitBrowser,...s,...a,...n},{forwardToDatadog:!0})}}}let T=!1;function S(e,t,i){if(T)return;T=!0;let s=(0,r.kc)().cpu_monitoring_enabled||!1,a="Fullscreen Periodic Metrics"===e?f:x,n=a.periodMs;(0,r.kc)().frequent_periodic_metrics&&(n=a.frequentPeriodMs),setTimeout(()=>{v(e,0,s,t(),i())},3e5),setInterval(()=>{v(e,n,s,t(),i())},n)}},451796:(e,t,i)=>{let s;i.d(t,{LU:()=>o,Pu:()=>s});var a=i(916464),r=i(911899);class n{isRenderWorkerSupported(){return r.s.isRenderWorkerSupported()}convertToBitmapViaRenderWorker(e,t,i,s,a,n){let o=r.s.getInstance(),l=o.channel;if(!l)throw Error("Render worker channel not found");return o.beginExport(),new Promise(async(r,d)=>{o.registerExportRejection(d);try{let c=n.map(e=>this.sendImageDataToRenderWorker(e.imageHash,e.compressedData,e.mimeType,e.imageMetadata,e.isThumbnail,e.emojiIdString));await Promise.all(c);let u=await l.request("convertToBitmapFromRenderTree",{input:e,settings:t,renderTree:i,baseFilename:s,stopAfterTimeSeconds:a},[i.buffer]);o.unregisterExportRejection(d),r({imageBuffer:new Uint8Array(u.imageBuffer),cpuTimerTree:u.cpuTimerTree,gpuMetrics:u.gpuMetrics})}catch(e){o.unregisterExportRejection(d),d(e)}finally{o.endExport()}})}async sendImageDataToRenderWorker(e,t,i,s,n,o){let l=r.s.getInstance().channel;if(!l)throw Error("Render worker channel not found");let d=await a.EC.decodeAsync(t,i,0,0,!0);return o?l.request("sendEmojiDataToRenderWorker",{emojiIdString:o,imageBitmap:d.bitmap,width:d.width,height:d.height},[d.bitmap]):l.request("sendImageDataToRenderWorker",{imageHash:e,compressedData:t.buffer,decodedImage:d.bitmap,imageMetadata:s,isThumbnail:n},[t.buffer,d.bitmap]),!0}}function o(){s=new n}},876308:(e,t,i)=>{i.d(t,{m:()=>r});var s=i(818822),a=i(316151);let r=new class{readRichTextFromHtml(e){return(0,a.ln)(e)}createHtmlFromTextNodes(e){return(0,a.QJ)(e)}createHtmlFromTextData(e){if(-1===e)return"";let t=s.YMM.getOrCreateJsCopy(e),i={characters:t.characters,characterStyleIDs:t.characterStyleIDs,styleOverrideTable:t.styleOverrideTable,lines:t.lines};return(0,a.gv)([i])}}},871406:(e,t,i)=>{i.d(t,{M:()=>s,g:()=>a});let s=null;function a(e){s=e}},116716:(e,t,i)=>{i.d(t,{v:()=>r});var s=i(536760),a=i(199239);let r=new class{setSitesViewState(e){s.zl.set(a.s0,e)}getSitesViewState(){return s.zl.get(a.s0)}}},454949:(e,t,i)=>{i.d(t,{u:()=>J});var s=i(152469),a=i(943051);let r=`import { defineProperties } from "figma:react";

export default function Layer({ text }) {
  return (
    <div className="flex flex-wrap items-center justify-center size-full p-2 gap-1 bg-blue-600 text-white rounded-xl">
      <div className="text-md font-light truncate">{text}</div>
    </div>
  );
}

defineProperties(Layer, {
  text: {
    label: "Text",
    type: "string",
    defaultValue: "Code layer",
  },
});`,n=`import { Frame, Span } from "figma:react-scenegraph-components";
import { defineProperties } from "figma:react";

export default function Layer({ text }) {
  return (
    <Frame
      fill="#155dfc"
      cornerRadius={6}
      flex="vertical"
      spacing={10}
      verticalAlignItems="center"
      horizontalAlignItems="center"
      width={200}
      height={200}
    >
      <Span fill="#FFFFFF">{text}</Span>
    </Frame>
  );
}

defineProperties(Layer, {
  text: {
    label: "Text",
    type: "string",
    defaultValue: "Code layer",
  },
});`;var o=i(24989),l=i(278995),d=i(818822),c=i(711839),u=i(38989),m=i(536760),p=i(620076),h=i.n(p),_=i(529906),g=i.n(_),f=i(59881),x=i(614291),b=i(641567),y=i(596323),E=i(946242),A=i(884492),v=i(847435),T=i(490384),S=i(428444),I=i(726757),w=i(675430),R=i(375333),N=i(205863),C=i(580736),O=i(944882),k=i(49395),L=i(238134),j=i(468140),M=i(30129),F=i(611290),D=i(550527),P=i.n(D),B=i(238511),U=i(353794),V=i(5197),z=i(122258),H=i(218178),$=i(311826);let G=(e,t)=>{let i=e(W),s=e($.a);for(let e of i)t((0,z.Vg)({id:e})),(s=s.filter(t=>t!==e)).push(e);t(H._,e=>e+1),t(W,new Set),t($.R,s)},W=(0,m.eU)(new Set),q=P()(G,30),K=P()(G,3e3),X=(0,m.eU)(null,(e,t,i)=>{let s=e(W);for(let e of i)s.add(e);t(W,new Set(s)),e(V._b)?.mode==="modal"&&t(V.W,!0),e(B.oD)||e(U.eI)?(K.cancel(),q(e,t)):(q.cancel(),K(e,t)),(0,F.PN)()&&(q.flush(),K.flush())});var Y=i(316614),Q=i(871406);function Z(e,t){return"pending"!==e.status&&"error"!==e.status&&e.nodeGuid===t}let J=new class{constructor(){this._isUpdating=!1,this._dirtyNodes=new Set,this._codeNodeGUIDsWithSourceCodeToSync=new Set,this._codeMaterializationManager=new Y.O,this._derivedCodeFilesPendingRegeneration=new Map}setMakeThumbnail(e){let t=x.D?.getState(),i=t?.openFile?.key;if(!i){console.warn("No open file found when setting make thumbnail");return}l.Ez5?.canvasViewState().thumbnailNodeId.getCopy()!==e&&(0,A.FE)(i,e).catch(()=>console.warn("Unable to set thumbnail for make."))}updatePreview(e){if(this._isUpdating){for(let t of e)this._dirtyNodes.add(t);return}Q.M&&(this._isUpdating=!0,(0,Q.M)(e).finally(()=>{if(this._isUpdating=!1,this._dirtyNodes.size>0){let e=this._dirtyNodes;this._dirtyNodes=new Set,this.updatePreview(e)}}))}updateDirtyWebpages(e){m.zl.set(X,[...e])}setLeftPanelTabToCode(){x.D.dispatch(v.FP({tab:l.xae.CODE}))}setCodeWindowPanelToChat(){m.zl.set(w.hi,"chat")}setLeftPanelTabToChat(){x.D.dispatch(v.FP({tab:l.xae.CHAT}))}setNewCodeLayerState(e,t,i){m.zl.set(R.Vp,{newCodeInstanceNodeId:e,newEntryPointCodeFileNodeId:t,initializingNodeIds:i})}markNodeAsDesignToReact(e,t){this._codeMaterializationManager.markNodeAsDesignToReact(e,t)}markCodeNodesDirty(e){this._codeMaterializationManager.markCodeNodesDirty(e)}markCodeNodesDirtyWithOptions(e){this._codeMaterializationManager.markCodeNodesDirtyWithOptions(e)}setSelectedCodeInstancesAndReactFibers(e){this._codeMaterializationManager.setSelectedCodeInstancesAndReactFibers(e)}setAutoDeploySupabase(){m.zl.set(L.GV,!0)}showSupabaseDeployNudge(){m.zl.set(L.Xl,!0)}getCodeLayersDefaultEntryPointFile(e){return e===d.BXJ.NATIVE_LAYER?n:r}setSprigUserCreatedCodeLayerAtom(){m.zl.set(N.f,!0)}async syncCodeFileEntries(e,t){if(0===e.length)return;let i=(0,s.N)().updateEntries(e,t??void 0);0!==i.length&&(m.zl.set(M.mI,e=>e+1),await (0,O.fM)(i))}removeCodeFileEntries(e,t){for(let i of e)(0,s.N)().removeEntryByGUID(i,t??void 0);e.length>0&&(0,O.WS)(e)}getAutomaticCodeFileNameForNodeName(e,t,i=!1){let a=g()(h()(e))+".tsx",r=new Set((0,s.N)().listFiles().map(e=>e.name));if(!i&&!r.has(a))return a;let n=a.replace(".tsx",`-${t}.tsx`);if(!r.has(n))return n;let o=2,l=n.replace(".tsx",`-${o}.tsx`);for(;r.has(l);)o++,l=n.replace(".tsx",`-${o}.tsx`);return l}updateCodeSnapshotState(e,t,i,s,a){this._codeMaterializationManager.updateCodeSnapshotState(e,t,i,s,a)}cleanupCodeSnapshotOverlays(){this._codeMaterializationManager.cleanupCodeSnapshotOverlays()}clearCodeFileEntries(){(0,s.N)().clear(),(0,O.tI)(),this._codeMaterializationManager.clearBundleCache()}setAllowNestedObjects(e){(0,s.N)().setAllowNestedObjects(e)}getTimestampForCodeSnapshotInvalidatedAt(){return this._codeMaterializationManager.getTimestampForCodeSnapshotInvalidatedAt()}isCodeSnapshotStale(e,t){return this._codeMaterializationManager.isCodeSnapshotStale(e,t)}resnapshotIfStale(e,t,i){this._codeMaterializationManager.isCodeSnapshotStale(t,i)&&this.markCodeNodesDirty(new Set([e]))}pushAttachmentSourceCode(e,t,i){let s=performance.now(),a=(0,c.UN)(),r=t.reduce((e,t)=>{let i=a.get(t);return i&&e.push({code:i.sourceCode,codeFileGuid:t.toString()}),e},[]);if(0===r.length){this.pushAttachmentError(e,d.FDn.DESIGN_2_REACT_OTHER,i,d.doA.PUSH_ATTACHMENT_SOURCE_CODE,performance.now()-s,"no code files from d2r output");return}this.trackMakeAttachmentStep(d.doA.PUSH_ATTACHMENT_SOURCE_CODE,i,e,void 0,performance.now()-s),this.processAttachmentImageAsync(e,a.get(e),r,i)}removeAttachment(e){m.zl.set(C.Ah,t=>t.filter(t=>!Z(t,e)))}pushAttachmentError(e,t,i,s,a,r){let n=d.FDn[t];this.trackMakeAttachmentStep(s,i,e,r?`${n}:${r}`:n,a??void 0),m.zl.set(C.Ah,s=>s.map(s=>Z(s,e)?{...s,uniqueId:i,designToCodeErrors:[...s?.designToCodeErrors??[],t]}:s))}terminateOnePendingAttachment(e){(0,C._5)(e)}showErrorBellForAttachmentError(e){(0,C.hH)(e)}async processAttachmentImageAsync(e,t,i,s){if((0,b.Bc)({attachment_id:s}),(0,j.$L)([s]),t){if(0===i.length){this.pushAttachmentError(e,d.FDn.DESIGN_2_REACT_OTHER,s,d.doA.PROCESS_ATTACHMENT_IMAGE_ASYNC,null,"no code files found"),(0,b.Bc)({attachment_id:void 0});return}}else{this.pushAttachmentError(e,d.FDn.DESIGN_2_REACT_OTHER,s,d.doA.PROCESS_ATTACHMENT_IMAGE_ASYNC,null,"no node found"),(0,b.Bc)({attachment_id:void 0});return}try{let r=await (0,a.rt)(t);this.trackMakeAttachmentStep(d.doA.PROCESS_ATTACHMENT_IMAGE_ASYNC,s,e,r?void 0:"failed to generate thumbnail");let n={uniqueId:s,status:"success",nodeGuid:e,codeFiles:i,type:"FIGMA_NODE",image:r};m.zl.set(C.Ah,t=>t.map(t=>Z(t,e)?n:t)),this.trackMakeAttachmentStep(d.doA.FINISH_ATTACHMENT,s,e),f.az.trackDefinedEvent("ai_for_production.chat_attachment_added",{attachmentType:"FIGMA_NODE",fileKey:m.zl.get(T.ze)??void 0,imageSize:r?.length??0,attachmentId:s})}catch(t){(0,b.$D)(o.e.MAKE_EDITING,t),this.pushAttachmentError(e,d.FDn.OTHER,s,d.doA.PROCESS_ATTACHMENT_IMAGE_ASYNC,null,t.message)}finally{(0,b.Bc)({attachment_id:void 0})}}trackMakeAttachmentStep(e,t,i,s,a){f.az.trackDefinedEvent("ai_for_production.code_chat_figma_attachment_funnel",{step:d.doA[e],attachmentType:"FIGMA_NODE",attachmentId:t,fileKey:m.zl.get(T.yV)?.key??void 0,nodeGuid:i,error:s,elapsedMs:a||0})}regenerateDerivedCodeFileDebounced(e){let t,i;let s=(0,c.UN)().getCodeFileNode(e);if(!s)throw Error("CodeFile not found");let a=this._derivedCodeFilesPendingRegeneration.get(e);if(a)return clearTimeout(a.timeout),this._derivedCodeFilesPendingRegeneration.set(e,{timeout:setTimeout(a.callback,500),callback:a.callback}),Promise.resolve(null);let r=new Promise((e,s)=>{t=e,i=s}),n=()=>{let a=s.codeFileCanvasNode;a&&(0,I.Ts)(a).then(i=>{this._derivedCodeFilesPendingRegeneration.delete(e),t(i)}).catch(i)};return this._derivedCodeFilesPendingRegeneration.set(e,{callback:n,timeout:setTimeout(n,500)}),r}directManipulationCanvasEditor(){return this._codeMaterializationManager.directManipulationCanvasEditor()}prewarmSandboxPool(){(0,k.wn)()}enqueueCMSBindingResultVisualBell(e){let t=x.D.getState();return(0,y.M4)({status:e,cmsBindingState:l.Ez5?.cmsState()?.bindingModeState(),existingBell:t.visualBell.find(e=>e.type===y.On),isInBindingMode:t.mirror.appModel.activeCanvasEditModeType===d.m1T.CMS_BINDING_CONSTRAINED,dispatch:x.D.dispatch})}emphasizeCMSUserInstructions(){m.zl.set(E.xW,!0)}enableDerivedSubtreeInstancesForSites(){let e=m.zl.get(T.yV),t=e?.editorType;return!!t&&!!(t===S._Y.SITES&&(0,u.kc)().derived_subtree_instances_sites)}}},120670:(e,t,i)=>{let s;i.d(t,{e4:()=>n,mn:()=>s});var a=i(411030);class r{enableSlotsForOpenFile(){(0,a.m)()}}function n(){s=new r}},200369:(e,t,i)=>{let s;i.d(t,{Vm:()=>s,no:()=>d});var a=i(24989),r=i(711839),n=i(641567),o=i(175943);class l{getSummaryAsClipboardText(e){let t;let i=(0,r.UN)().get(e),s=i?.getWidgetSyncedState()["syncedState:ai-summary-items"],l=i?.getWidgetSyncedState()["syncedState:summarized-at"];try{t=JSON.parse(s)}catch(e){(0,n.$D)(a.e.AI_PRODUCTIVITY,Error(`Could not parse summary data, error: ${e}`))}return(0,o.Aq)(t,l)}}function d(){s=new l}},179289:(e,t,i)=>{let s;i.d(t,{hR:()=>n,we:()=>s});var a=i(886472);class r{rgbaToThumbhash(e,t,i){if(e>100||t>100){let s=e,a=t,r=e/t;e<t?e=Math.round((t=100)*r):t=Math.round((e=100)/r);let n=new OffscreenCanvas(s,a),o=n.getContext("2d"),l=new ImageData(new Uint8ClampedArray(i),s,a);o.putImageData(l,0,0);let d=new OffscreenCanvas(e,t).getContext("2d");d.drawImage(n,0,0,s,a,0,0,e,t),i=new Uint8Array(d.getImageData(0,0,e,t).data)}return(0,a.WB)(e,t,i)}thumbhashToRgba(e){let{w:t,h:i,rgba:s}=(0,a.Oe)(e);return{width:t,height:i,rgba:s}}}function n(){s=new r}},212204:(e,t,i)=>{i.d(t,{b:()=>eQ});var s=i(936209),a=i(649892),r=i(651183),n=i(675575),o=i(630384),l=i(473947),d=i(11171),c=i(706713),u=i(947135),m=i(641567),p=i(967955),h=i(205099),_=i(467660),g=i(359876),f=i(799220),x=i(54751),b=i(299476),y=i(568640),E=i(299247),A=i(283224),v=i(559407),T=i(702650),S=i(916464),I=i(814405),w=i(752700),R=i(666662),N=i(608027),C=i(689297),O=i(175615),k=i(354556),L=i(716959),j=i(619377),M=i(275159),F=i(422338),D=i(822137),P=i(309982),B=i(423104),U=i(330228),V=i(139296),z=i(116665),H=i(232087),$=i(773016),G=i(309232),W=i(656800),q=i(733353),K=i(209953),X=i(612502),Y=i(955650),Q=i(153942),Z=i(761046),J=i(679159),ee=i(705113),et=i(415277),ei=i(724686),es=i(367247),ea=i(873541),er=i(468882),en=i(614291),eo=i(908397),el=i(553538),ed=i(808655);let ec=new class{exportVideo(e,t){let i=function(e){let t=en.D.getState(),i=t.openFile?.key;if(!i||!e)return!1;let s=(0,ed.xS)(t,{view:"export",fileKey:i,nodeId:e});try{return eo.Ay.redirect(s,"_blank"),!0}catch{return!1}}(e);return(0,en.D.dispatch)(i?el.F.enqueueWithCloseButton("video-export-opened",!1,{message:(0,er.t)("video_export.toast_opened_in_new_tab")}):el.F.enqueueWithCloseButton("video-export-failed",!0,{message:(0,er.t)("video_export.error.failed_to_open_tab")})),Promise.reject(Error("Video export redirected to new tab"))}};var eu=i(576313),em=i(31162),ep=i(436669),eh=i(295937),e_=i(846303),eg=i(192478),ef=i(976602),ex=i(851919),eb=i(548982),ey=i(989667),eE=i(775089),eA=i(60274),ev=i(57706),eT=i(696506),eS=i(341380),eI=i(802645),ew=i(451796),eR=i(876308),eN=i(15972),eC=i(284235),eO=i(934210),ek=i(116716),eL=i(454949),ej=i(120670),eM=i(139712),eF=i(200369),eD=i(57211),eP=i(179289),eB=i(827634),eU=i(430571),eV=i(32627),ez=i(243516),eH=i(935742),e$=i(632143),eG=i(431731),eW=i(738111),eq=i(859102),eK=i(299430),eX=i(725707),eY=i(491635);let eQ={CommonApp:()=>({...eU.LO,...(0,q.N)(),appType:()=>c.uC.FullscreenApp}),AccessibleAreasBindings:()=>P.H,OOMHelpers:()=>_._W,WebReporting:()=>C.F,PlatformInfo:()=>eI.y,FontManagerJs:()=>eu.hB,Async:()=>z.V,JsBindingsTestHelpers:()=>ey.j,ImageTsBindings:()=>I.j5,PdfImportBindings:()=>b.IY,InteractionBindings:()=>ex.Dt,InteractionInstrumentationBindings:()=>eb.F_,SitesBindings:()=>ek.v,SitesJsBindings:()=>eL.u,SlidesTsBindings:()=>M.h,CooperTsBindings:()=>p.F,CodeVfsBindings:()=>Q.f,BoundsWatcherTs:g.Iu,ImageToolsBindingsJs:()=>ef.SQ,FigmaApp:()=>_.Y5,AutoLayoutBindings:()=>H.mX,CurrentUserInfo:()=>_.BI,WebSelection:()=>_.ZP,WebMultiplayer:()=>_.r1,WebUserSyncing:()=>w.R9,EmojiWheelBindings:()=>x.CB,Comments:()=>ee.lS,PluginCallbacks:()=>R.d1,WidgetBindings:()=>eX.x,VideoTsBindings:()=>eG.fm,JsKiwiSerialization:()=>new l.s,TsFontManualLoader:()=>new o.E,StylesCheckBindings:()=>_.Vv,AutosaveSessionBindings:()=>G.X,CanvasSearchBindings:()=>X.r,AccessibilityBindings:()=>D.Lj,HandoffScenegraphBindings:()=>eg.ld,RichTextBindings:()=>eR.m,SpellCheckAPIBindings:()=>eM.$4,VariablesBindingsWeb:()=>eH.WH,VariablesMirrorBindings:()=>e$.DQ,AssetMirrorBindings:()=>V.ki,AssetConsumptionMirrorBindings:()=>U.BF,HandoffBindings:()=>e_.z4,HandoffCallbacks:()=>h.rS,JSTextLayout:()=>eD.Q,ScaleToolAPIBindings:()=>eN.h,LinterBindings:()=>eA.zT,EmojiTsBindings:()=>es.jm,NodeChatMessageHelper:()=>a.sv,MentionsTsBindings:()=>ev.YN,EditScopeWebBindings:()=>ei.xo,StateManagementBindings:()=>L.XO,ColorManagementBindings:()=>Z.l,KeyboardShortcutBindings:()=>eE.Gm,WhiteboardTemplatePreviewTsBindings:()=>F.t7,FrameDistributionTrackerBindings:()=>em.ip,WhiteboardTsBindings:()=>eq.nz,AiAssistantTsBindings:()=>B.SL,CodeBlockBindings:()=>Y.P,ColorRampBindings:()=>J.C5,OpenFileBindings:()=>eS.pY,WhiteboardAnalyticsTsBindings:()=>eW.bN,ExperimentBuildersTsBindings:()=>ea.Zc,ZipImpl:()=>eY.m,CoreUtils:()=>new r.f,SummaryBindings:()=>eF.Vm,SceneGraphHookBindings:()=>eC.uo,MissingFontsTrackerJs:()=>eT.ZO,StatsigConfigBindings:()=>ep.gR,WhiteboardThemeTsBindings:()=>eV.rG,QuickActionsBindings:()=>j.ZO,BranchingWebBindings:()=>K.B,SafeModeOptions:()=>u.iw,DSAWebBindings:()=>et.Tl,WhiteboardDltConstantBindings:()=>eK.yu,DeprecatedXHRSendBindings:()=>eh.yx,ComponentPropBindings:()=>k.XA,ImageIo:()=>S.YN,HTMLWindowBindings:()=>T.IM,WebGPUTsContext:()=>v.NP,TsGlContextBindings:A.X,ScreenBindings:()=>E.N,FullscreenWebSocketTsCallbacks:()=>y.Pp,AutosuggestTextBindings:()=>W.z5,VariablesJsRuntimeAliasTsBindings:()=>_.w8,AutoSuggestAssetBindings:()=>$.Qw,UndoRedoEventsBindings:()=>ez.wV,ScenegraphStringManagementBindings:()=>eO.Bm,ThumbnailRequestManager:eB.Db,TsRequestPromiseManager:d.pL,UserActionTimingBindings:()=>O.st,PrototypingFormatter:()=>N.u,SlotsBindingsWeb:()=>ej.mn,ExportTsBindings:()=>s.v.getFeatureGate("panama_new_tab")?ec:new n.Gb,RenderWorkerExportBindings:()=>ew.Pu,jsHelpers:{reportError:m.Cp,preventEnteringCpp:()=>f.y.preventEnteringCpp(),fatalCppError(e,t){f.y.fatalCppError(e,t)}},ThumbhashBindings:()=>eP.we}},32627:(e,t,i)=>{let s;i.d(t,{fT:()=>o,rG:()=>s});var a=i(278995),r=i(38989);class n{showUI3Colors(){return a.Ez5?.uiState().showUI3Colors.getCopy()??!0}showUI3ColorsInitialValue(){return!!(0,r.kc)().figjam_ui3_color_palette}}function o(){s=new n}},243516:(e,t,i)=>{let s;i.d(t,{EA:()=>d,Zr:()=>c,wV:()=>s});var a=i(920802),r=i(614291),n=i(42421);class o{onUndo(e){l&&l.trigger("undo",{undoneCommitId:e})}onRedo(e){l&&l.trigger("redo",{redoneCommitId:e})}}let l=null;function d(){s=new o;let e=!1;r.D.subscribe(()=>{let t=(0,n.o)(r.D.getState());t!==e&&(t?(l&&l.removeAllListeners(),l=new a.b("fullscreen-undo-redo-events")):l&&(l.removeAllListeners(),l=null),e=t)})}function c(e,t){if(!l)return()=>{};let i=i=>{i.undoneCommitId===e&&t()};return l.on("undo",i),()=>{l?.removeListener("undo",i)}}},935742:(e,t,i)=>{let s;i.d(t,{WH:()=>s,_:()=>A});var a=i(278995),r=i(468882),n=i(38989),o=i(536760),l=i(59881),d=i(614291),c=i(908397),u=i(56857),m=i(553538),p=i(883975),h=i(554841),_=i(467660),g=i(142021),f=i(154950),x=i(407988),b=i(140628),y=i(476224);class E{async pasteVariablesWithLocalizationPopup(e,t,i){let s=[];for(let t=0;t<e.size;t+=25){let i=Array.from(e.entries()).slice(t,t+25).map(([e,t])=>`${e}|${t}`).join(","),a=`/api/variables/publish_state?keysAndLibrary=${i}`;s.push(u.Ay.post(a))}let E={};(await Promise.all(s)).forEach(e=>{Object.assign(E,e.data.meta)});let A=new Set;if(Object.keys(E).forEach(e=>!1===E[e]?A.add(e):null),A.size>0){if((0,l.sx)("prototype.variables_pasted",{numPublished:e.size-A.size,numUnpublished:A.size}),(0,n.kc)().variables_paste_remap_popup){if((0,y.YE)())return;d.D.dispatch(m.F.dequeue({matchType:"localize_unpublished_variables"})),d.D.dispatch(m.F.dequeue({matchType:"unpublished_variables_localized"})),d.D.dispatch(m.F.enqueue({message:(0,r.t)("proto.paste_unpublished_variable_localize"),type:"localize_unpublished_variables",button:{text:(0,r.t)("proto.paste_unpublished_variable_localize_cta"),action:()=>{let e=a.CWU?.performVariableLocalizationFromPopup(A,t,i);if(_.Y5.commit(),null!=e&&Object.keys(e).includes("numberOfNewVariables")){let t=e.numberOfNewVariables;t>0&&d.D.dispatch(m.F.enqueue({message:(0,r.t)("proto.unpublished_variables_localized",{numberOfVariables:t}),type:"unpublished_variables_localized"}))}}}}))}else d.D.dispatch(m.F.enqueue({message:(0,r.t)("proto.paste_unpublished_variable"),button:{text:(0,r.t)("proto.paste_unpublished_variable_cta"),action:()=>{c.Ay.unsafeRedirect("https://help.figma.com/hc/articles/14506821864087#copy_paste","_blank")}}}))}else{let t=d.D.getState(),i=t.openFile?.editorType,s=t.openFile?.key,a=t.openFile?.libraryKey;if("cooper"!==i||!(0,n.kc)().buzz_variable_modes||!s||!a)return{};let l=new Set(e.values()),c=o.zl.get(g.$p);if(c){let e=new Set(c.map(e=>e.libraryKey)),t=Array.from(l).filter(t=>t!==a&&!e.has(t));t.length>0&&(d.D.dispatch(m.F.dequeue({matchType:"paste_unadded_libraries"})),d.D.dispatch(m.F.enqueue({message:(0,r.t)("proto.paste_unadded_libraries"),type:"paste_unadded_libraries",button:{primary:{text:(0,r.t)("proto.paste_unadded_libraries_add_cta"),action:()=>{t.forEach(t=>{d.D.dispatch((0,p.am)({libraryFileSubscription:{file_key:s,library_key:t,is_subscribed:!0},userInitiated:!0,fileSubscribedLibraryKeys:e}))}),_.Y5.commit()}},secondary:{text:(0,r.t)("proto.paste_unadded_libraries_manage_cta"),action:()=>{d.D.dispatch(h.to({type:b.T,data:{entrypoint:x.r6.PASTE_UNADDED_LIBRARIES,initialTab:f.Wv.LIBRARIES}}))}}}})))}}return{}}}function A(){s=new E}},431731:(e,t,i)=>{i.d(t,{fm:()=>h,tG:()=>_});var s=i(932732),a=i(278995),r=i(38989),n=i(56857),o=i(528659),l=i(79074),d=i(467660),c=i(814405),u=i(263054),m=(e=>(e.FILE_KEY="fileKey",e.LIBRARY_KEY="libraryKey",e))(m||{});class p{constructor(){this.pendingPasteRequests={},this.pendingVideosToRecordByFileKey={},this.pendingVideosToRecordByLibraryKey={},this.pendingRecordVideosTasksByFileKey={},this.pendingRecordVideosTasksByLibraryKey={},this.allVideos={},this.flushPendingRecordVideos=(0,s.s)(async()=>{let e=this.pendingVideosToRecordByFileKey,t=this.pendingVideosToRecordByLibraryKey,i=this.pendingRecordVideosTasksByFileKey,s=this.pendingRecordVideosTasksByLibraryKey,r=Object.keys(e).map(e=>({fileKey:e,type:"fileKey"})).concat(Object.keys(t).map(e=>({libraryKey:e,type:"libraryKey"})));this.pendingVideosToRecordByFileKey={},this.pendingRecordVideosTasksByFileKey={},this.pendingVideosToRecordByLibraryKey={},this.pendingRecordVideosTasksByLibraryKey={};let o=await this.getEditingFileKey();r.forEach(async r=>{if("fileKey"===r.type&&r.fileKey===o){i[r.fileKey].resolve();return}if("fileKey"===r.type&&!r.fileKey){i[r.fileKey].reject("Invalid originFileKey");return}let l=1,d="fileKey"===r.type?e[r.fileKey]:t[r.libraryKey];if(a.tHB)for(;;){try{let e=await n.Ay.put(`/api/files/${o}`,{video_sha1s:[...new Set(d)],image_origin_file_key:"fileKey"===r.type?r.fileKey:void 0,image_origin_library_key:"libraryKey"===r.type?r.libraryKey:void 0}),{success:t,failed:l}=c.xY.parseFileUpdateResponseForImages(d,e);for(let e of(a.tHB.markVideoPermissionsCopied(t),l))a.tHB.videoIsMissing(e);for(let e of d)delete this.pendingPasteRequests[e];"fileKey"===r.type?i[r.fileKey].resolve():s[r.libraryKey].resolve(),this.getAllVideoUrls();return}catch(e){if(e.status>=400&&e.status<500){for(let e of d)a.tHB.videoIsMissing(e),delete this.pendingPasteRequests[e];"fileKey"===r.type?i[r.fileKey].resolve():s[r.libraryKey].resolve();return}}let e=1e3*l*Math.random();await new Promise(t=>setTimeout(t,e)),l=Math.min(2*l,64)}})},100),this.contextLostCallbacks=new Map,this.nextContextLostCallbackId=0}async getAllVideoUrls(){if(!(0,r.kc)().cross_env_paste)return;let e=await l.S.getVideos({fileKey:await this.getEditingFileKey()});this.allVideos=e.data.meta.videos}getSignedUrls(e){let t=new Map;for(let i of e)t.set(i,this.allVideos[i]);return t}recordVideos(e,t){if(0===t.length)return Promise.resolve();if(!e)throw Error("No originFileKey specified");if(this.pendingVideosToRecordByFileKey[e]=this.pendingVideosToRecordByFileKey[e]||[],this.pendingVideosToRecordByFileKey[e].push(...t),!this.pendingRecordVideosTasksByFileKey[e]){let t,i;let s=new Promise((e,s)=>{t=e,i=s});this.pendingRecordVideosTasksByFileKey[e]={promise:s,resolve:t,reject:i}}for(let i of t)this.pendingPasteRequests[i]=this.pendingRecordVideosTasksByFileKey[e].promise;let i=this.pendingRecordVideosTasksByFileKey[e].promise;return this.flushPendingRecordVideos(),i}recordVideosFromLibraryKey(e,t){if(0===t.length)return Promise.resolve();if(!e)throw Error("No sourceLibraryKey specified");if(this.pendingVideosToRecordByLibraryKey[e]??=[],this.pendingVideosToRecordByLibraryKey[e].push(...t),!this.pendingRecordVideosTasksByLibraryKey[e]){let t,i;let s=new Promise((e,s)=>{t=e,i=s});this.pendingRecordVideosTasksByLibraryKey[e]={promise:s,resolve:t,reject:i}}for(let i of t)this.pendingPasteRequests[i]=this.pendingRecordVideosTasksByLibraryKey[e].promise;let i=this.pendingRecordVideosTasksByLibraryKey[e].promise;return this.flushPendingRecordVideos(),i}getEditingFileKey(){return d.Y5.openFileKeyPromise()}contextLost(){for(let e of this.contextLostCallbacks.values())e()}subscribeToContextLost(e){let t=this.nextContextLostCallbackId++;return this.contextLostCallbacks.set(t,e),()=>{this.contextLostCallbacks.delete(t)}}}let h=new class{constructor(){this.videoManager=new p,this.thumbnailGenerator=u.t}copyVideoPermissions(e,t){return this.videoManager.recordVideos(e,t)}copyVideoPermissionsFromLibraryKey(e,t){return this.videoManager.recordVideosFromLibraryKey(e,t)}createVideo(){return this.thumbnailGenerator.createVideo()}deleteVideo(e){this.thumbnailGenerator.deleteVideo(e)}getWidth(e){return this.thumbnailGenerator.getWidth(e)}getHeight(e){return this.thumbnailGenerator.getHeight(e)}getCoverImage(e){return this.thumbnailGenerator.getCoverImage(e)}loadVideo(e,t,i){return this.thumbnailGenerator.loadVideo(e,t,i)}getSignedUrls(e){return this.videoManager.getSignedUrls(e)}async setExternalSource(e,t){let i=await fetch(t),s=new Uint8Array(await i.arrayBuffer()),a=await d.Y5.openFileKeyPromise();(0,o.C)([{sha1:e,bytes:s}],a)}loadAllVideos(){return this.videoManager.getAllVideoUrls()}contextLost(){this.videoManager.contextLost()}};function _(){return h.videoManager}},752700:(e,t,i)=>{let s;i.d(t,{R9:()=>s,pO:()=>h});var a=i(801070),r=i(278995),n=i(59881),o=i(705518),l=i(614291),d=i(93145),c=i(456401);let u=0;class m{constructor(){this._currentSessionId=-1,this._infoBySessionId=new d.N({}),this._voiceMetadataBySessionId=new d.B({},a.c2),this._reactionsBySessionId=new d.N({}),this._reactionTimeout=-1,this._onReactionsUpdated=void 0,this._onInfoBySessionIdUpdated=void 0,this._onOtherUserMouseMoved=void 0,this._cursorChatLoggerTimerID=null}infoBySessionId(){return{...this._infoBySessionId.get()}}voiceMetadataBySessionId(){return{...this._voiceMetadataBySessionId.get()}}reactionsBySessionId(){return{...this._reactionsBySessionId.get()}}handleConnect(e){-1!==this._currentSessionId&&this.removeUser(this._currentSessionId),this._currentSessionId=e,this.addUser(this._currentSessionId)}addUser(e){let t=this._infoBySessionId.get(),i={sessionId:e.toString(),mouse:null,isHoveringWidgetWithHiddenCursors:!1,chatMessage:[null,null],highFiveStatus:!1,cursorType:r.z7E.DEFAULT,lastMouseMoveMs:-1};this.setInfoBySessionId({...t,[e]:i});let s=this._voiceMetadataBySessionId.get();this._voiceMetadataBySessionId.set({...s,[e]:{connectedCallId:""}});let a=this._reactionsBySessionId.get();this.setReactionsBySessionId({...a,[e]:{}})}removeUser(e){let t={...this._infoBySessionId.get()};delete t[e],this.setInfoBySessionId(t);let i={...this._voiceMetadataBySessionId.get()};delete i[e],this._voiceMetadataBySessionId.set(i);let s={...this._reactionsBySessionId.get()};delete s[e],this.setReactionsBySessionId(s)}setMouseCursor(e,t){let i=this._infoBySessionId.get();this.setInfoBySessionId({...i,[e]:{...i[e],cursorType:t}})}setMousePosition(e,t,i,s){let a=this._infoBySessionId.get();if(e in a){let r=a[e],n={...r,mouse:{canvasSpacePosition:{x:i,y:s},pageId:t},lastMouseMoveMs:window.performance.now()};this.otherUserMouseMoved(e,n,r)&&this._onOtherUserMouseMoved?.(),this.setInfoBySessionId({...a,[e]:n})}}setIsHoveringWidgetWithHiddenCursors(e,t){let i=this._infoBySessionId.get();e in i&&this.setInfoBySessionId({...i,[e]:{...i[e],isHoveringWidgetWithHiddenCursors:t}})}otherUserMouseMoved(e,t,i){return e!==this._currentSessionId&&t.mouse?.canvasSpacePosition!==i.mouse?.canvasSpacePosition}setFocusOnTextCursor(e,t){let i=this._infoBySessionId.get();this.setInfoBySessionId({...i,[e]:{...i[e],focusOnTextCursor:t}})}setChatMessage(e,t,i){let s=this._infoBySessionId.get(),{eventName:a,sendToDataDogEveryMs:r}=p.CURSOR_CHAT;o.sn.start(`${a}_${e}_${t}`),null===this._cursorChatLoggerTimerID&&(this._cursorChatLoggerTimerID=setTimeout(()=>{let e=o.Vq.analyticsProperties(a);(0,n.sx)(a,e,{forwardToDatadog:!0}),o.Vq.reset(a),this._cursorChatLoggerTimerID=null},r)),e in s&&this.setInfoBySessionId({...s,[e]:{...s[e],chatMessage:[t,i]}})}setHighFiveStatus(e,t){let i=this._infoBySessionId.get();e in i&&this.setInfoBySessionId({...i,[e]:{...i[e],highFiveStatus:t}})}sendHighFiveStatus(e){r.h3O?.sendHighFiveStatus(e)}setVoiceMetadata(e,t){let i=this._voiceMetadataBySessionId.get();e in i&&this._voiceMetadataBySessionId.set({...i,[e]:{...i[e],connectedCallId:t}})}sendVoiceMetadata(e){r.h3O?.sendVoiceMetadata(e)}addReactionForSessionId(e,t,i,s){let a=++u+"",r=this._reactionsBySessionId.get();return e in r&&this.setReactionsBySessionId({...r,[e]:{...r[e],[a]:{localId:a,reactionId:t,canvasSpacePosition:i,pageId:s}}}),a}removeReactionWithId(e,t){let i=this._reactionsBySessionId.get();if(e in i){let s={...i[e]};delete s[t],this.setReactionsBySessionId({...i,[e]:s})}}setOnReactionsUpdatedCallback(e){this._onReactionsUpdated=e}setInfoBySessionIdUpdatedCallback(e){this._onInfoBySessionIdUpdated=e}setOtherUserMouseMovedCallback(e){this._onOtherUserMouseMoved=e}setReactionsBySessionId(e){this._reactionsBySessionId.set(e),this._onReactionsUpdated&&this._onReactionsUpdated()}setInfoBySessionId(e){this._infoBySessionId.set(e),this._onInfoBySessionIdUpdated&&this._onInfoBySessionIdUpdated()}resetReactions(){clearTimeout(this._reactionTimeout)}sendReaction(e){r.h3O&&(r.h3O.sendReaction(e),this.handleReactionForSession(r.h3O.currentSessionID(),e))}handleReactionFromServer(e,t){e!==r.h3O?.currentSessionID()&&this.handleReactionForSession(e,t)}handleReactionForSession(e,t){let i=this._infoBySessionId.get()[e],s=i?.mouse?.canvasSpacePosition,a=i?.mouse?.pageId;if(null==i||null==s||null==a)return null;let n=this.addReactionForSessionId(e,t,s,a);return setTimeout(()=>this.removeReactionWithId(e,n),2500),r.h3O&&e===r.h3O.currentSessionID()&&(this._reactionTimeout=setTimeout(()=>{0===Object.keys(this._reactionsBySessionId.get()[e+""]||[]).length&&l.D.dispatch(c.mu())},2500)),n}useInfoBySessionId(e){return this._infoBySessionId.use(e)}useInfoBySessionIdSubscription(e){return this._infoBySessionId.useSubscription(e)}useVoiceMetadataBySessionId(){return this._voiceMetadataBySessionId.use()}useReactionsBySessionId(){return this._reactionsBySessionId.use()}}let p={CURSOR_CHAT:{eventName:"view_cursor_chat_message",bins:[1,9,17,19,20,23,25,29,32,48,64,80,96,112,224,448,896,1792,3584,1e4],sendToDataDogEveryMs:6e4}};function h(){Object.entries(p).forEach(([e,t])=>{o.Vq.create(t.eventName,t.bins)}),s=new m}},738111:(e,t,i)=>{let s;i.d(t,{bJ:()=>d,bN:()=>s});var a=i(752488),r=i(536760),n=i(431120),o=i(453269);class l{isCustomPaletteColor(e,t){let i=r.zl.get(o.$R);if(i){let s=(0,a.aH)(e);for(let e of(0,o.Uh)(t))if(i[e].some(e=>(0,n.DA)(s,e)))return!0}return!1}}function d(){s=new l}},859102:(e,t,i)=>{let s;i.d(t,{nz:()=>s,pP:()=>c});var a=i(752488),r=i(536760),n=i(453269),o=i(124790),l=i(483215);class d{getEyedropperContext(){return r.zl.get(o.Bw)}updateEditPaletteModalColor(e){let t=r.zl.get(n.Jq),i=r.zl.get(n.rN),s=[...i.slice(0,t),(0,a.aH)(e),...i.slice(t+1)];r.zl.set(n.rN,s)}isCustomPaletteApplied(){return!!r.zl.get(n.$R)}showSectionPresets(){return r.zl.get(l.w)}}function c(){s=new d}},299430:(e,t,i)=>{let s;i.d(t,{A9:()=>n,yu:()=>s});var a=i(817251);class r{constructor(){this.getDefaultPencilStrokeWeight=()=>a.wv,this.getDefaultHighlighterStrokeWeight=()=>a.g5}}function n(){s=new r}},491635:(e,t,i)=>{i.d(t,{m:()=>l});var s=i(24989),a=i(513813),r=i(9378),n=i.n(r),o=i(641567);let l={readSync(e){let t=new(n());return t.load(e),Object.keys(t.files).map(e=>{let i=t.file(e).asUint8Array();return{name:e,contents:i}})},writeSync(e){try{let t=new(n());for(let i of e)t.file(i.name,i.contents,{compression:i.compressionLevel===a.uP.NONE?"STORE":"DEFLATE"});return t.generate({type:"uint8array"})}catch(e){return(0,o.$D)(s.e.SCENEGRAPH_AND_SYNC,e),new Uint8Array}}}},881815:(e,t,i)=>{i.d(t,{Z:()=>o});var s=i(468882),a=i(536760),r=i(330801),n=i(490384);function o(){let e=(0,n.q5)(),t=(0,a.md)(r.lu);return e?e.name:t?t.name:(0,s.t)("fullscreen.filename_view.title_placeholder")}},789795:(e,t,i)=>{i.d(t,{Bm:()=>d,Zt:()=>o,pz:()=>u,yw:()=>c});var s=i(344990),a=i(76404),r=i(536760),n=i(428444);let o="INTERACTION_TEST_FAKE_FILE_KEY";(0,s.l)("lk-9a75e874c6cf749cc3e2c2678c7687697c01c5ab6693bc56d8b2775f21b117c468ec00c2f338b97c6c7e12bc5c61cd87d215f492bb77fcd81e449651b080cf4b"),n.kU.STUDENT_TEAM_NULL;let l={};function d(e){delete l[e]}(0,r.eU)("unloaded"),(0,r.eU)("unloaded");let c=(0,r.eU)(!1);(0,r.eU)(40),(0,a.v)(),(0,a.v)();let u=null},323984:(e,t,i)=>{i.d(t,{b:()=>a,d:()=>s});var s=(e=>(e[e.BROWSER_ADDRESS_BAR=0]="BROWSER_ADDRESS_BAR",e[e.SHARE_MODAL=1]="SHARE_MODAL",e[e.SHARE_MODAL_HIERARCHY_SETTINGS_TAB=2]="SHARE_MODAL_HIERARCHY_SETTINGS_TAB",e[e.SIMPLE_SHARING_COPY_LINK_BUTTON=3]="SIMPLE_SHARING_COPY_LINK_BUTTON",e[e.FULLSCREEN_CONTEXT_MENU=4]="FULLSCREEN_CONTEXT_MENU",e[e.FULLSCREEN_BRANCH=5]="FULLSCREEN_BRANCH",e[e.FILE_TILE_CONTEXT_MENU=6]="FILE_TILE_CONTEXT_MENU",e[e.FAVORITED_FILE_CONTEXT_MENU=7]="FAVORITED_FILE_CONTEXT_MENU",e[e.PROTOTYPE_HIDE_UI_VISUAL_BELL=8]="PROTOTYPE_HIDE_UI_VISUAL_BELL",e[e.PROTOTYPE_FLOW_CONTEXT_MENU=9]="PROTOTYPE_FLOW_CONTEXT_MENU",e[e.WORKSHOP_VISUAL_BELL=10]="WORKSHOP_VISUAL_BELL",e[e.DESKTOP_KEYBOARD_SHORTCUT=11]="DESKTOP_KEYBOARD_SHORTCUT",e[e.DESKTOP_FILE_TAB_CONTEXT_MENU=12]="DESKTOP_FILE_TAB_CONTEXT_MENU",e[e.STATUS_DROPDOWN_MENU=13]="STATUS_DROPDOWN_MENU",e[e.AI_SUMMARY_COPY_LINK_BUTTON=14]="AI_SUMMARY_COPY_LINK_BUTTON",e[e.SHARE_MODAL_COPY_DEV_ROW=15]="SHARE_MODAL_COPY_DEV_ROW",e[e.SHARE_MODAL_COPY_PROTO_ROW=16]="SHARE_MODAL_COPY_PROTO_ROW",e[e.SHARE_MODAL_COPY_PRESENTATION_ROW=17]="SHARE_MODAL_COPY_PRESENTATION_ROW",e[e.ANNOTATION_CONTEXT_MENU=18]="ANNOTATION_CONTEXT_MENU",e[e.SHARE_ON_READY_FOR_DEV=19]="SHARE_ON_READY_FOR_DEV",e[e.SHARE_MODAL_MAKE_FULLSCREEN=20]="SHARE_MODAL_MAKE_FULLSCREEN",e[e.TEAM_JOIN_LINK_PERMISSIONS_MODAL=21]="TEAM_JOIN_LINK_PERMISSIONS_MODAL",e[e.TEAM_JOIN_LINK_NUX_INVITE=22]="TEAM_JOIN_LINK_NUX_INVITE",e))(s||{});function a(e,t){return e?`${e}-${t}`:null}},474961:(e,t,i)=>{i.d(t,{k:()=>r});var s=i(414393),a=i(59881);class r{constructor(e){this.eventName=e,this.fileKey=null,this.nodeChangesSizes=[],this.queries=[],this.replies=[],this.queriesTs=[],this.nodeChangesTs=[],this.repliesTs=[],this.alreadySent=!1,this.logEvent=e=>{if(this.fileKey&&!this.alreadySent)switch(e.type){case"sendSceneGraphQuery":this.queries.push(n(e.queries)),this.queriesTs.push(this.now());break;case"receiveNodeChanges":this.nodeChangesSizes.push(e.size),this.nodeChangesTs.push(this.now());break;case"receiveSceneGraphReply":this.replies.push(n(e.queries)),this.repliesTs.push(this.now());break;case"finishIncrementalLoading":if(e.fileKey===this.fileKey){if(this.nodeChangesSizes.length>0){let t={version:1,fileKey:e.fileKey,nodeChangesSizes:this.nodeChangesSizes,queries:this.queries,replies:this.replies,maxNodeChangesSize:Math.max.apply(null,this.nodeChangesSizes),...o(this.queriesTs,"query",5),...o(this.nodeChangesTs,"node",5),...o(this.repliesTs,"reply",5)};(0,a.sx)(this.eventName,t),this.alreadySent=!0}}else console.error(`IncrementalLoadTimer: file key mismatch ${e.fileKey} != ${this.fileKey}`);this.reset();break;default:(0,s.xb)(e)}}}reset(){this.fileKey=null,this.nodeChangesSizes=[],this.queries=[],this.replies=[],this.queriesTs=[],this.nodeChangesTs=[],this.repliesTs=[],this.alreadySent=!1}now(){return Math.round(performance.now())}setFileKey(e){this.fileKey=e}}function n(e){return[...e].sort().join(",")}function o(e,t,i){let s={};return e.forEach((e,a)=>{a<i&&(s[`${t}.${a}`]=e)}),s}},329545:(e,t,i)=>{i.d(t,{b:()=>l});var s=i(744350),a=i(19543),r=i(765617),n=i(721959),o=i(428444);async function l({dispatch:e,fileKey:t,folderId:i,plan:l,seatType:d}){return await new Promise((c,u)=>{if(l.key.type===o.OL.ORG){let r=l.key.parentId;e(s.$V({orgId:r,entryPoint:a.tc.NUX,licenseType:n.TI[d],seatTypeKey:d,fileKey:t??void 0,onError:()=>u(Error("Error requesting upgrade for org")),onSuccess:e=>{c(e)},suppressVisualBell:!0,folderId:i??void 0}))}else{let s=l.key.parentId;e(r.Nu({teamId:s,entryPoint:a.tc.NUX,licenseType:n.TI[d],seatTypeKey:d,fileKey:t??void 0,onError:()=>u(Error("Error requesting upgrade for team")),onSuccess:e=>{c(e)},hideSuccessMessage:!0,folderId:i??void 0}))}})}},754258:(e,t,i)=>{i.d(t,{Y:()=>a});let s=class e{static getInstance(t){if(!e.instance[t])throw Error("Running plugin before iframe sandbox started loading");return e.instance[t]}static getInstanceLoading(t){if(t in e.instanceLoading)return e.instanceLoading[t].promise;let i=()=>{},s=()=>{},a=new Promise((e,t)=>{i=e,s=t});return e.instanceLoading[t]={promise:a,resolve:i,reject:s},a}};s.instance={},s.instanceLoading={};let a=s},627390:(e,t,i)=>{i.d(t,{c:()=>s});let s={PENDING:"pending",APPROVED:"approved",DENIED:"denied",WITHDRAWN:"withdrawn"}},508866:(e,t,i)=>{i.d(t,{H:()=>n});var s=i(693181),a=i(449980),r=i(605400);let n=new class{constructor(){this.TemplatesSchemaValidator=(0,s.vh)(),this.StartingPointsTemplatesSchemaValidator=(0,s.vh)(),this.StartingPointsTemplatesAndAssetsSchemaValidator=(0,s.vh)(),this.VersionsSchemaValidator=(0,s.vh)(),this.StatusSchemaValidator=(0,s.vh)(),this.ProfileSchemaValidator=(0,s.vh)(),this.LibrariesSchemaValidator=(0,s.vh)(),this.PublishHubFileSchemaValidator=(0,s.vh)(),this.UpdateHubFileSchemeValidator=(0,s.vh)(),this.HubFileMultiImageUploadSchemaValidator=(0,s.vh)(),this.cachedPreviewUrlsResponseSchema=a.z.object({js_url:a.z.string(),css_url:a.z.string()}),this.GetCachedPreviewUrlsValidator=(0,s.YV)("GetCachedPreviewUrlsValidator",(0,r.D)(this.cachedPreviewUrlsResponseSchema),null)}getTemplates(e){return this.TemplatesSchemaValidator.validate(async({xr:t})=>await t.get("/api/hub_files/templates",{type:e.type}))}getStartingPointsTemplates(){return this.StartingPointsTemplatesSchemaValidator.validate(async({xr:e})=>await e.get("/api/hub_files/templates",{type:"starting_points"}))}getStartingPointsTemplatesAndAssets(){return this.StartingPointsTemplatesAndAssetsSchemaValidator.validate(async({xr:e})=>await e.get("/api/hub_files/starting_points"))}getVersions(e){return this.VersionsSchemaValidator.validate(async({xr:t})=>await t.get(`/api/hub_files/${e.id}/versions`))}getStatuses(e){return this.StatusSchemaValidator.validate(async({xr:t})=>await t.get(`/api/hub_files/${e.id}/status`))}getProfile(e){return this.ProfileSchemaValidator.validate(async({xr:t})=>await t.get(`/api/hub_files/profile/${e.profileId}`))}getLibraries(e){return this.LibrariesSchemaValidator.validate(async({xr:t})=>await t.get("/api/hub_files/libraries",{library_ids:e.libraryIds.join(",")}))}likeHubFile(e){return this.VersionsSchemaValidator.validate(async({xr:t})=>await t.post(`/api/hub_files/${e.id}/like`))}unlikeHubFile(e){return this.VersionsSchemaValidator.validate(async({xr:t})=>await t.del(`/api/hub_files/${e.id}/like`))}publishHubFile(e){return this.PublishHubFileSchemaValidator.validate(({xr:t})=>t.post("/api/hub_files",e))}updateHubFile(e,t){return this.UpdateHubFileSchemeValidator.validate(({xr:i})=>i.put(`/api/hub_files/${e}`,t))}setupMultiImageUploadForHubFile(e){return this.HubFileMultiImageUploadSchemaValidator.validate(({xr:t})=>t.post("/api/hub_files/upload",e))}getCachedPreviewUrls(e){return this.GetCachedPreviewUrlsValidator.validate(({xr:t})=>t.get(`/api/hub_files/${e.hubFileId}/cached_preview_urls`))}}},680731:(e,t,i)=>{i.d(t,{j:()=>a});var s=i(693181);let a=new class{constructor(){this.AutoAcceptResponseValidator=(0,s.vh)(),this.UpdateInviteBillableProductKeyValidator=(0,s.vh)()}putAcceptInvite(e){return this.AutoAcceptResponseValidator.validate(async({xr:t})=>await t.put("/api/invites/accept",e))}updateInviteBillableProductKey(e){let{inviteId:t,billableProductKey:i}=e;return this.UpdateInviteBillableProductKeyValidator.validate(async({xr:e})=>await e.patch(`/api/invites/${t}/billable_product_key`,{billable_product_key:i}))}}},459381:(e,t,i)=>{i.d(t,{G:()=>o,h:()=>n});var s=i(449980),a=i(693181),r=i(938523),n=(e=>(e.DEV_MODE_BETA_SUGGESTED_UPGRADES="dev_mode_beta_suggested_upgrades",e.MEMBERS_TAB="members_tab",e.FILE_PERMISSIONS_MODAL="file_permissions_modal",e))(n||{});let o=new class{constructor(){this.GuestResourcesSchemaValidator=(0,a.vh)(),this.OrgUserSchemaValidator=(0,a.YV)("OrgUserSchemaValidator",r.WU,null,!1),this.UpdateOrgUsersSchemaValidator=(0,a.YV)("UpdateOrgUsersSchemaValidator",s.z.array(r.WU),null,!1),this.CreateStarterTeamSchemaValidator=(0,a.vh)(),this.requestUpgradeSchemaValidator=(0,a.vh)()}getGuestResources(e){return this.GuestResourcesSchemaValidator.validate(async({xr:t})=>await t.get(`/api/org_user/${e.orgUserId}/guest_resources`))}updateOrgUser(e){let{id:t,changes:i}=e;return this.OrgUserSchemaValidator.validate(({xr:e})=>e.put(`/api/org_users/${t}`,a.td.toAPIParameters(i)))}updateOrgUsers(e){let{orgId:t,...i}=e;return this.UpdateOrgUsersSchemaValidator.validate(({xr:t})=>t.put(`/api/orgs/${e.orgId}/org_users`,a.td.toAPIParameters(i)))}createStarterTeam(){return this.CreateStarterTeamSchemaValidator.validate(({xr:e})=>e.post("/api/org_user/create_starter_team"))}postOrgUserFlags(e){let{orgUserId:t,flags:i}=e;return a._5.validate(({xr:e})=>e.post(`/api/org_users/${t}/flags`,{flags:i}))}requestOrgAccountTypeRequest(e){return this.requestUpgradeSchemaValidator.validate(async({xr:t})=>await t.post(`/api/orgs/${e.org_id}/org_users/request_upgrade`,e))}getMemberCSVExport(e){return a._5.validate(({xr:t})=>t.post(`/api/orgs/${e.orgId}/export_members`))}}},619388:(e,t,i)=>{i.d(t,{G:()=>a});var s=i(693181);let a=new class{constructor(){this.FileUsersSchemaValidator=(0,s.vh)(),this.TeamSchemaValidator=(0,s.vh)(),this.RolesSchemaValidator=(0,s.vh)()}getFileUsers(e){return this.FileUsersSchemaValidator.validate(async({xr:t})=>await t.get(`/api/roles/file_users/${e.fileKey}`))}getTeam(e){return this.TeamSchemaValidator.validate(async({xr:t})=>await t.get(`/api/roles/team/${e.teamId}`))}getRoles(e){return this.RolesSchemaValidator.validate(async({xr:t})=>await t.get(`/api/roles/${e.resourceType}/${e.resourceId}`))}}},43197:(e,t,i)=>{i.d(t,{z:()=>r});var s=i(449980),a=i(693181);let r=new class{constructor(){this.SitesBundleSchemaValidator=(0,a.vh)(),this.SitesCustomDomainDnsRecordsValidator=(0,a.YV)("SitesCustomDomainDnsRecordsValidator",s.z.array(s.z.object({type:s.z.string(),host:s.z.string(),value:s.z.string()})),null),this.SitesActivateCustomDomainValidator=(0,a.YV)("SitesActivateCustomDomainValidator",s.z.void(),null),this.SitesRemoveCustomDomainValidator=(0,a.YV)("SitesRemoveCustomDomainValidator",s.z.void(),null),this.SitesCustomDomainLimitReachedValidator=(0,a.YV)("SitesCustomDomainLimitReachedValidator",s.z.object({limit_reached:s.z.boolean(),num_domains_allowed:s.z.number(),num_domains:s.z.number()}),null),this.SitesUpdateBundleValidator=(0,a.YV)("SitesUpdateBundleValidator",s.z.void(),null),this.SitesUpdateSubdomainValidator=(0,a.YV)("SitesUpdateSubdomainValidator",s.z.object({domain:s.z.string()}),null),this.SitesValidateSubdomainValidator=(0,a.YV)("SitesValidateSubdomainValidator",s.z.void(),null),this.SitesFileKeyVideos=(0,a.YV)("SitesFileKeyVideosValidator",s.z.object({videos:s.z.record(s.z.string(),s.z.string())}),null),this.SitesFileKeyImages=(0,a.YV)("SitesFileKeyImagesValidator",s.z.object({images:s.z.record(s.z.string(),s.z.string())}),null),this.SitesSetPasswordValidator=(0,a.YV)("SitesSetPasswordValidator",s.z.object({success:s.z.boolean(),password_version:s.z.number()}),null),this.SitesUnsetPasswordValidator=(0,a.YV)("SitesUnsetPasswordValidator",s.z.object({success:s.z.boolean()}),null),this.SitesEnableSsoValidator=(0,a.YV)("SitesEnableSsoValidator",s.z.void(),null),this.SitesDisableSsoValidator=(0,a.YV)("SitesDisableSsoValidator",s.z.void(),null)}postSitesBundleAsync(e){return this.SitesBundleSchemaValidator.validate(async({xr:t})=>{let i={responsive_set_guids:e.responsiveSetGuids,font_index_hash:e.fontIndexHash};return i.file_version_id=e.fileVersionId,await t.post(`/api/sites/${e.fileKey}/async/upload`,i)})}unpublishSite(e){return this.SitesBundleSchemaValidator.validate(async({xr:t})=>await t.put(`/api/sites/${e.fileKey}/unpublish`))}addCustomDomain(e){return this.SitesCustomDomainDnsRecordsValidator.validate(async({xr:t})=>await t.post(`/api/sites/${e.fileKey}/custom_domain`,{domain:e.domain,create_paired_domain:e.createPairedDomain}))}configureRedirect(e){return this.SitesCustomDomainDnsRecordsValidator.validate(async({xr:t})=>await t.post(`/api/sites/${e.fileKey}/configure_redirect`))}activateCustomDomain(e){return this.SitesActivateCustomDomainValidator.validate(async({xr:t})=>await t.post(`/api/sites/${e.fileKey}/verify_custom_domain`))}getDomainDNSRecords(e){return this.SitesCustomDomainDnsRecordsValidator.validate(async({xr:t})=>await t.get(`/api/sites/${e.fileKey}/get_custom_domain_dns_records`))}removeCustomDomain(e){return this.SitesRemoveCustomDomainValidator.validate(async({xr:t})=>await t.del(`/api/sites/${e.fileKey}/remove_custom_domain`))}removeCustomDomainRedirect(e){return this.SitesRemoveCustomDomainValidator.validate(async({xr:t})=>await t.del(`/api/sites/${e.fileKey}/remove_custom_domain_redirect`))}customDomainLimitReached(e){return this.SitesCustomDomainLimitReachedValidator.validate(async({xr:t})=>await t.get(`/api/sites/${e.fileKey}/check_custom_domain_limit`))}updateBundle(e){return this.SitesUpdateBundleValidator.validate(async({xr:t})=>await t.put(`/api/sites/${e.fileKey}/update_bundle`,{bundle_id:e.bundleId}))}updateSubdomain(e){return this.SitesUpdateSubdomainValidator.validate(async({xr:t})=>await t.put(`/api/sites/${e.fileKey}/update_subdomain`,{new_base_domain:e.new_base_domain}))}validateSubdomain(e){return this.SitesValidateSubdomainValidator.validate(async({xr:t})=>await t.get(`/api/sites/${e.fileKey}/validate_subdomain`,{new_base_domain:e.new_base_domain}))}getFileVideos(e){return this.SitesFileKeyVideos.validate(async({xr:t})=>await t.get(`/api/sites/${e.fileKey}/videos`))}getFileImages(e){return this.SitesFileKeyImages.validate(async({xr:t})=>await t.get(`/api/sites/${e.fileKey}/images`,{shas:e.shas.join(",")}))}setPassword(e){return this.SitesSetPasswordValidator.validate(async({xr:t})=>await t.put(`/api/sites/${e.fileKey}/set_password`,{password:e.password,protected_webpage_guids:e.protectedWebpageGuids&&e.protectedWebpageGuids.length>0?e.protectedWebpageGuids:null}))}unsetPassword(e){return this.SitesUnsetPasswordValidator.validate(async({xr:t})=>await t.del(`/api/sites/${e.fileKey}/unset_password`))}enableSso(e){return this.SitesEnableSsoValidator.validate(async({xr:t})=>await t.put(`/api/sites/${e.fileKey}/enable_sso`))}disableSso(e){return this.SitesDisableSsoValidator.validate(async({xr:t})=>await t.del(`/api/sites/${e.fileKey}/disable_sso`))}}},830288:(e,t,i)=>{i.d(t,{B:()=>r,H:()=>n});var s=i(693181),a=i(556974),r=(e=>(e.DEV_MODE_BETA_SUGGESTED_UPGRADES="dev_mode_beta_suggested_upgrades",e.MEMBERS_TAB="members_tab",e.FILE_PERMISSIONS_MODAL="file_permissions_modal",e))(r||{});let n=new class{constructor(){this.UpdateTeamUsersSchemaValidator=(0,s.YV)("UpdateTeamUsersSchemaValidator",a.wF.array(),null)}updateTeamUsers(e){return this.UpdateTeamUsersSchemaValidator.validate(async({xr:t})=>await t.put(`/api/teams/${e.team_id}/team_user_batch`,e))}}},192832:(e,t,i)=>{i.d(t,{R:()=>r});var s=i(693181),a=i(298610);let r=new class{constructor(){this.UpgradeSchemaValidator=(0,s.vh)()}upgrade(e,t,i,r,n,o,l,d,c){let u=r===a.J.ADMIN_AUTO_PATHWAY;return this.UpgradeSchemaValidator.validate(async({xr:a})=>await a.post(`/api/upgrade/auto_pathway/${e}/${t}`,s.td.toAPIParameters({upgrade_reason:i,billable_product_key:n,file_key:o,folder_id:l,license_type:d,editor_type:c,is_admin_self_upgrade:u}))??null)}}},256774:(e,t,i)=>{i.d(t,{$L:()=>n,Xx:()=>o,sC:()=>r,us:()=>a});var s=i(392260);let a=[s.w3,s.dV,s.$r,s.JT,s.Me,s.$C,s.Wn];function r(e,t){if(!e)return t[0];try{let i=e.substring(e.length-4),s=parseInt(i);if(Number.isNaN(s))return t[Math.abs(function(e){var t=0;if(0===e.length)return t;for(var i=0;i<e.length;i++)t=(t<<5)-t+e.charCodeAt(i),t&=t;return t}(e)%t.length)];return t[s%t.length]}catch(e){return t[0]}}function n(e,t){return r(e,t)}function o(e){return e===s.$C?"var(--color-textonmultiplayeryellow)":"var(--color-textonmultiplayerblue)"}},193741:(e,t,i)=>{i.d(t,{Q:()=>m});var s=i(104076),a=i(237420),r=i(468882),n=i(959248),o=i(268912),l=i(962854),d=i(125735),c=i(838909),u=i(651376);let m=(0,n._d)(function(e){let{resource:t,viewContext:i,removeButtonBorder:n}=e,m=(0,a.d4)(e=>e.authedActiveCommunityProfile),p=(0,c.cs)(m),h=(0,l.B)(t.id),_=!!h.data?.[0],g=h.data?.[1],f=(0,d.w)(t,_,g||null,i);return p?(0,s.jsx)("div",{"data-tooltip-type":u.Ib.TEXT,"data-tooltip":(0,r.t)("community.likes.to_like_switch_to_your_personal_profile"),"data-tooltip-show-immediately":!0,children:(0,s.jsx)(o.b,{isResourceLiked:!1,disabled:!0})}):(0,s.jsx)(o.b,{onClick:f(),isResourceLiked:_,removeButtonBorder:n})},"LikeButtonTracked")},361405:(e,t,i)=>{i.d(t,{sF:()=>f,zJ:()=>g});var s=i(104076),a=i(716976),r=i(237420),n=i(709120),o=i(498020),l=i(235313),d=i(594251),c=i(38989),u=i(908397),m=i(553538);i(554841);var p=i(605020),h=i(363944);let _="figma_ff_bisector_state",g="FeatureFlagBisectorModal",f=(0,p.Ju)(function({open:e,onClose:t}){let i=n.hS({open:e,onClose:t}),p=(0,r.wA)(),[g,f]=a.useState(""),[x,b]=a.useState(""),[y,E]=a.useState(null);a.useEffect(()=>{let e=localStorage.getItem(_);if(e)try{let t=JSON.parse(e);Date.now()<t.expiry?E(t):localStorage.removeItem(_)}catch(e){localStorage.removeItem(_)}},[]);let A=a.useCallback(e=>{localStorage.setItem(_,JSON.stringify(e))},[]),v=a.useCallback(e=>{let{internal_only_debug_tools:t,internal_prototyping_debug_tool:i,...s}=e,a={expiration:Date.now()+144e5,flags:s};localStorage.setItem(c.MA,JSON.stringify(a)),u.Ay.reload("Feature flag bisector applying new flags")},[]),T=a.useCallback(()=>{try{let e=JSON.parse(g),t={};for(let[i,s]of Object.entries(e)){if("boolean"==typeof s){t[i]=s;continue}if("object"==typeof s&&s&&"value"in s&&"boolean"==typeof s.value)t[i]=s.value;else{b(`Value for "${i}" must be a boolean`);continue}}if(null===t){b("Input must be a JSON object");return}for(let[e,i]of Object.entries(t))if("boolean"!=typeof i){b(`Value for "${e}" must be a boolean`);return}b("");let i=Object.keys(t),s={originalFlags:t,currentSubset:i,currentComplement:[],testingComplement:!1,history:[],phase:"bisecting",expiry:Date.now()+144e5};E(s),A(s),v(t)}catch(e){b("Invalid JSON format")}},[g,A,v]),S=a.useCallback(e=>{let t,i;if(!y)return;let s=y.testingComplement?y.currentComplement:y.currentSubset,a=s.reduce((e,t)=>(void 0===y.originalFlags[t]?console.error(`Flag ${t} is undefined in the original flags`):e[t]=y.originalFlags[t],e),{}),r=[...y.history],n=r[r.length-1];if(n&&"pending"===n.result?n.result=e?"success":"failure":r.push({subset:[...s],isComplement:y.testingComplement,result:e?"success":"failure",testedFlags:a}),1===s.length&&e){let e={...y,history:r,phase:"complete",culpritFlag:s[0]};E(e),A(e),p(m.F.enqueue({message:`Culprit found: ${s[0]}`,type:"feature-flag-bisector-culprit-found"}));return}if(1===s.length&&y.testingComplement&&!e){let e={...y,history:r,phase:"complex_interaction",lastWorkingSet:y.originalFlags};E(e),A(e),p(m.F.enqueue({message:"Complex interaction detected - multiple flags may be involved",type:"feature-flag-bisector-complex-interaction"}));return}let o=!1;if(e){let e=Math.floor(s.length/2);t=s.slice(0,e),i=s.slice(e),o=!1}else{if(y.testingComplement){let e=r.slice().reverse().find(e=>"success"===e.result),t={...y,history:r,phase:"complex_interaction",lastWorkingSet:e?.testedFlags||y.originalFlags};E(t),A(t),p(m.F.enqueue({message:"Complex interaction detected - multiple flags may be involved",type:"feature-flag-bisector-complex-interaction"}));return}t=y.currentSubset,i=y.currentComplement,o=!0}let l=o?i:t,d=l.reduce((e,t)=>(void 0===y.originalFlags[t]?console.error(`Flag ${t} is undefined in the original flags`):e[t]=y.originalFlags[t],e),{}),c={...y,currentSubset:t,currentComplement:i,testingComplement:o,history:[...r,{subset:l,isComplement:o,result:"pending",testedFlags:d}]};E(c),A(c),v(d),p(m.F.enqueue({message:`Moving to next subset: ${l.length} flags, refreshing...`,type:"feature-flag-bisector-culprit-found"}))},[y,A,v,p]),I=a.useCallback(()=>{localStorage.removeItem(_),localStorage.removeItem(c.MA),E(null),f(""),b(""),p(m.F.enqueue({message:"Feature flag bisector reset successfully",type:"feature-flag-bisector-reset"})),u.Ay.reload("Feature flag bisector applying new flags")},[p]),w=a.useCallback(()=>{if(!y)return;let e={...y,timestamp:new Date().toISOString()};navigator.clipboard.writeText(JSON.stringify(e,null,2)).then(()=>{p(m.F.enqueue({message:"History copied to clipboard",type:"feature-flag-bisector-history-copied"}))}).catch(e=>{console.error("Failed to copy history:",e),p(m.F.enqueue({message:"Failed to copy history",type:"feature-flag-bisector-copy-failed",error:!0}))})},[y,p]),R=()=>(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(o.Y9,{children:(0,s.jsx)(o.hE,{children:"Feature Flag Bisector"})}),(0,s.jsx)(o.nB,{children:(0,s.jsxs)("div",{className:h.section,children:[(0,s.jsx)("h3",{className:h.sectionTitle,children:"Feature Flag Configuration"}),(0,s.jsx)("p",{className:h.description,children:"Enter a JSON object from the Feature Flag differ tool in the Admin Statsig plugin."}),(0,s.jsx)("textarea",{value:g,onChange:e=>f(e.target.value),placeholder:`{
  "flag_name_1": true,
  "flag_name_2": false,
  "flag_name_3": true
}`,rows:10,className:h.jsonInput,"aria-label":"Feature Flags JSON Input"}),x&&(0,s.jsx)("div",{className:h.error,children:x})]})}),(0,s.jsx)(o.wi,{children:(0,s.jsxs)(o.jk,{children:[(0,s.jsx)(l.$n,{variant:"secondary",onClick:t,children:"Cancel"}),(0,s.jsx)(l.$n,{variant:"primary",onClick:T,disabled:!g.trim(),children:"Start Bisection"})]})})]}),N=()=>{if(!y)return null;let e=y.testingComplement?y.currentComplement:y.currentSubset;return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(o.Y9,{children:(0,s.jsx)(o.hE,{children:"Feature Flag Bisector - Testing"})}),(0,s.jsx)(o.nB,{children:(0,s.jsxs)("div",{className:h.section,children:[(0,s.jsx)("h3",{className:h.sectionTitle,children:"Is the bug present with this set of feature flags?"}),(0,s.jsxs)("p",{className:h.description,children:['Test the current behavior and click "Yes" if the bug is present, or "No" if it\'s not.',y.testingComplement&&(0,s.jsx)("span",{className:h.complementNote,children:"(Testing complement - the other half of the previous split)"})]}),(0,s.jsxs)("div",{className:h.currentState,children:[(0,s.jsx)("h4",{children:`Current Test Set (${e.length} flags)${y.testingComplement?" - Complement":""}:`}),(0,s.jsx)("div",{className:h.flagList,children:e.map(e=>(0,s.jsx)("span",{className:h.flagItem,children:`${e}: ${y.originalFlags[e]?"true":"false"}`},e))})]}),y.history.length>0&&(0,s.jsxs)("div",{className:h.history,children:[(0,s.jsxs)("div",{className:h.historyHeader,children:[(0,s.jsx)("h4",{children:"Test History:"}),(0,s.jsx)(l.$n,{variant:"secondary",onClick:w,children:"Copy History"})]}),y.history.map((e,t)=>(0,s.jsxs)("div",{className:h.historyItem,children:[(0,s.jsx)("span",{className:h.historySubset,children:`${e.subset.length} flags${e.isComplement?" (complement)":""}`}),(0,s.jsx)("span",{className:`${h.historyResult} ${h[e.result]}`,children:"success"===e.result?"Bug Present":"failure"===e.result?"Bug Not Present":"Testing..."})]},t))]})]})}),(0,s.jsx)(o.wi,{children:(0,s.jsxs)(o.jk,{children:[(0,s.jsx)(l.$n,{variant:"secondary",onClick:I,children:"Reset"}),(0,s.jsx)(l.$n,{variant:"destructive",onClick:()=>S(!0),children:"Yes - Bug Present"}),(0,s.jsx)(l.$n,{variant:"primary",onClick:()=>S(!1),children:"No - Bug Not Present"})]})})]})},C=()=>y?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(o.Y9,{children:(0,s.jsx)(o.hE,{children:"Feature Flag Bisector - Complete"})}),(0,s.jsx)(o.nB,{children:(0,s.jsxs)("div",{className:h.section,children:[(0,s.jsx)("h3",{className:h.sectionTitle,children:"\u{1F389} Culprit Found!"}),(0,s.jsx)("p",{className:h.description,children:"The bisection algorithm has identified the feature flag responsible for the bug."}),(0,s.jsxs)("div",{className:h.currentState,children:[(0,s.jsx)("h4",{children:"Culprit Feature Flag:"}),(0,s.jsx)("div",{className:h.flagList,children:(0,s.jsx)("span",{className:`${h.flagItem} ${h.culpritFlag}`,children:`${y.culpritFlag}: ${y.originalFlags[y.culpritFlag]?"true":"false"}`})})]}),y.history.length>0&&(0,s.jsxs)("div",{className:h.history,children:[(0,s.jsxs)("div",{className:h.historyHeader,children:[(0,s.jsx)("h4",{children:"Test History:"}),(0,s.jsx)(l.$n,{variant:"secondary",onClick:w,children:"Copy History"})]}),y.history.map((e,t)=>(0,s.jsxs)("div",{className:h.historyItem,children:[(0,s.jsx)("span",{className:h.historySubset,children:`${e.subset.length} flags${e.isComplement?" (complement)":""}`}),(0,s.jsx)("span",{className:`${h.historyResult} ${h[e.result]}`,children:"success"===e.result?"Bug Present":"Bug Not Present"})]},t))]})]})}),(0,s.jsx)(o.wi,{children:(0,s.jsxs)(o.jk,{children:[(0,s.jsx)(l.$n,{variant:"secondary",onClick:I,children:"Start New Bisection"}),(0,s.jsx)(l.$n,{variant:"primary",onClick:t,children:"Close"})]})})]}):null,O=()=>y?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(o.Y9,{children:(0,s.jsx)(o.hE,{children:"Feature Flag Bisector - Complex Interaction"})}),(0,s.jsx)(o.nB,{children:(0,s.jsxs)("div",{className:h.section,children:[(0,s.jsx)("h3",{className:h.sectionTitle,children:"\u26A0\uFE0F Complex Feature Flag Interaction Detected"}),(0,s.jsx)("p",{className:h.description,children:"The bug appears to be caused by a complex interaction between multiple feature flags, rather than a single flag. This means the bug only occurs when specific combinations of flags are enabled together."}),(0,s.jsxs)("div",{className:h.currentState,children:[(0,s.jsx)("h4",{children:"Last Known Working Set:"}),(0,s.jsx)("div",{className:h.flagList,children:Object.entries(y.lastWorkingSet||{}).map(([e,t])=>(0,s.jsx)("span",{className:h.flagItem,children:`${e}: ${t?"true":"false"}`},e))})]}),y.history.length>0&&(0,s.jsxs)("div",{className:h.history,children:[(0,s.jsxs)("div",{className:h.historyHeader,children:[(0,s.jsx)("h4",{children:"Test History:"}),(0,s.jsx)(l.$n,{variant:"secondary",onClick:w,children:"Copy History"})]}),y.history.map((e,t)=>(0,s.jsxs)("div",{className:h.historyItem,children:[(0,s.jsx)("span",{className:h.historySubset,children:`${e.subset.length} flags${e.isComplement?" (complement)":""}`}),(0,s.jsx)("span",{className:`${h.historyResult} ${h[e.result]}`,children:"success"===e.result?"Bug Present":"Bug Not Present"})]},t))]})]})}),(0,s.jsx)(o.wi,{children:(0,s.jsxs)(o.jk,{children:[(0,s.jsx)(l.$n,{variant:"secondary",onClick:I,children:"Start New Bisection"}),(0,s.jsx)(l.$n,{variant:"primary",onClick:t,children:"Close"})]})})]}):null;return(0,c.kc)().internal_prototyping_debug_tool||(0,c.kc)().internal_only_debug_tools?(0,s.jsx)(d.bL,{manager:i,width:"lg",children:(0,s.jsx)(o.vo,{children:(()=>{if(y&&"input"!==y.phase){if("bisecting"===y.phase)return N();if("complete"===y.phase)return C();if("complex_interaction"===y.phase)return O()}return R()})()})}):null},g)},224821:(e,t,i)=>{i.d(t,{Zi:()=>_,py:()=>p,sC:()=>x});var s=i(289513),a=i(898035),r=i(449980),n=i(563055),o=i(428444),l=i(496052),d=i(833313),c=i(19644),u=i(842824);let m=(0,d.$B)("responsive_set");function p(e,t){if(t.assetType!==o.PW.RESPONSIVE_SET)return null;let i=(0,a.wF)(t.key),r=(0,a.Xe)(t.version);return{name:t.name,type:c.P.RESPONSIVE_SET,sourceLibraryKey:e,key:i,version:r,userFacingVersion:(0,a.Xe)(t.userFacingVersion),assetId:s.cd.fromRef({key:i,version:r}),sourceAssetId:s.cd.fromLocalNodeIdStr(t.nodeId),sourceAssetGuid:t.nodeId,subscriptionStatus:"LIBRARY",mainThumbnailInfo:{thumbnailUrl:(0,d.EU)(e,i,r),height:Number.parseInt((0,n.oA)(t.mainNodeHeight)??"0"),width:Number.parseInt((0,n.oA)(t.mainNodeWidth)??"0")},canvasUrl:(0,d.IV)(e,i,r),containingFrame:(0,l.U7)((0,n.oA)(t.containingFrame)??null)??null,updatedAt:t.updatedAt,fullPage:(0,u.dl)(t.name)}}let h=(0,d.$B)("code_component");function _(e,t){if(t.assetType!==o.PW.CODE_COMPONENT)return null;let i=(0,a.Sm)(t.key),r=(0,a.j6)(t.version);return{name:t.name,type:c.P.CODE_COMPONENT,sourceLibraryKey:e,key:i,version:r,userFacingVersion:(0,a.j6)(t.userFacingVersion),assetId:s._H.fromRef({key:i,version:r}),sourceAssetId:s._H.fromLocalNodeIdStr(t.nodeId),sourceAssetGuid:t.nodeId,subscriptionStatus:"LIBRARY",mainThumbnailInfo:{thumbnailUrl:(0,d.EU)(e,i,r),height:Number.parseInt((0,n.oA)(t.mainNodeHeight)??"0"),width:Number.parseInt((0,n.oA)(t.mainNodeWidth)??"0")},canvasUrl:(0,d.IV)(e,i,r),containingFrame:(0,l.U7)((0,n.oA)(t.containingFrame)??null)??null,updatedAt:(0,n.oA)(t.updatedAt)??new Date,codePresetMetadata:t.codePresetMetadata??null}}r.z.union([m.passthrough(),h.passthrough()]);let g=(0,d.Jw)("code_component"),f=(0,d.Jw)("responsive_set");r.z.union([g.passthrough(),f.passthrough()]);let x={[c.P.COMPONENT]:l.Qp,[c.P.MODULE]:l.uW,[c.P.RESPONSIVE_SET]:p,[c.P.STATE_GROUP]:l.SS,[c.P.STYLE]:l.KC,[c.P.VARIABLE]:l.GA,[c.P.VARIABLE_SET]:l.cE,[c.P.CODE_COMPONENT]:_}},442232:(e,t,i)=>{i.d(t,{v:()=>A});var s=i(104076),a=i(716976),r=i(754245),n=i(540446),o=i(513813),l=i(278995),d=i(705518),c=i(530076),u=i(867710),m=i(626660),p=i(592757),h=i(404343),_=i(976599);let g=[{label:"Time between frames (ms)",id:"inter-frame-time",max:100,barWidth:1},{label:"FPS",id:"fps",max:120,barWidth:1},{label:"React work (ms)",id:"react",max:100,barWidth:1},{label:"Frame handler (ms)",id:"frame",max:100,barWidth:1,children:[{label:"Scene render (ms)",id:"scene-render",max:100,barWidth:1,children:[{label:"Render tree creation (ms)",id:"render-tree-generation",max:100,barWidth:1}]},{label:"React + redux (ms)",id:"react-render",max:100,barWidth:1},{label:"Symbol updater (ms)",id:"symbol-updater",max:100,barWidth:1},{label:"Style updater (ms)",id:"style-updater",max:100,barWidth:1},{label:"Comments renderer (ms)",id:"comments-render",max:100,barWidth:1}]},{label:"C++ event handling (ms)",id:"fullscreen-handle-event",max:100,barWidth:1},{label:"malloc call count (#)",id:"cpp-malloc-call-count",autoResize:!0,max:100,barWidth:1},{label:"malloc size totals (KB)",id:"cpp-malloc-size-totals",autoResize:!0,max:1,barWidth:1},{label:"Used JS memory (MB)",id:"total-memory",max:10,autoResize:!0,barWidth:1},{label:"Used c++ heap memory (MB)",id:"cpp-heap-memory",max:10,autoResize:!0,barWidth:1},{label:"Graphics memory (MB)",id:"gpu-memory",max:128,autoResize:!0,barWidth:1},{label:"Render job queue length",id:"render-job-queue-length",max:4,autoResize:!0,barWidth:1},{label:"Time between render tree swaps (ms)",id:"render-tree-swap-time",max:300,autoResize:!0,barWidth:1},{label:"Stale content time (ms)",id:"render-tree-stale-time",max:500,autoResize:!0,barWidth:1},{label:"Est viewport coverage (ms)",id:"estimated-viewport-coverage",max:1,autoResize:!0,barWidth:1},{label:"Min viewport sharpness",id:"min-sharpness",max:1,autoResize:!0,barWidth:1},{label:"Avg viewport sharpness",id:"avg-sharpness",max:1,autoResize:!0,barWidth:1}];function f(e,t){var i=e.getBoundingClientRect();e.width=i.width*t,e.height=i.height*t,e.style.width=`${i.width}px`,e.style.height=`${i.height}px`;let s=e.getContext("2d");s&&(s.scale(t,t),s.imageSmoothingEnabled=!1)}class x extends a.PureComponent{constructor(e){super(e),this.ctx=null,this.lastDisplayedUpdateTime=0,this.displayedNumber=null,this.buffer=[],this.dpr=1,this.canvasRef=a.createRef(),this.lastRenderedHitCount=0,this.updateFromTimer=e=>{let t=e.hitCount-this.lastRenderedHitCount,i=0;for(let s=Math.max(0,e.elapsedTimes.length-t);s<e.elapsedTimes.length;s++)i+=e.elapsedTimes[s];this.append(i),this.lastRenderedHitCount=e.hitCount},this.yAxisMaxValue=e.max,this.bufferCapacity=Math.ceil(e.width/e.barWidth)}componentDidMount(){if(this.canvasRef.current){this.dpr=window.devicePixelRatio;let e=this.canvasRef.current;this.ctx=e.getContext("2d"),f(e,this.dpr)}}append(e){if(!this.ctx)return;let t=this.ctx.canvas,i=this.ctx;for(this.dpr!==window.devicePixelRatio&&(this.dpr=window.devicePixelRatio,f(t,this.dpr)),this.buffer.push(e);this.buffer.length>=this.bufferCapacity;)this.buffer.shift();let s=1/0,a=-1/0;for(let e of this.buffer)s=Math.min(s,e),a=Math.max(a,e);let r=this.props.width,n=this.props.height,o=this.props.barWidth,l=n-20;i.font="9px monospace",i.fillStyle=this.props.bg,i.textBaseline="top",i.fillRect(0,0,r,20),i.fillStyle=this.props.fg;let d=performance.now();if((null===this.displayedNumber||d-this.lastDisplayedUpdateTime>150)&&(this.displayedNumber=e,this.lastDisplayedUpdateTime=d),i.fillText(`sample: ${this.displayedNumber.toFixed(1)}`,0,0),i.fillText(`${s.toFixed(1)} - ${a.toFixed(1)}`,0,10),i.fillStyle=this.props.bg,this.props.autoResize){if(e>this.yAxisMaxValue){let s=Math.pow(2,Math.ceil(Math.log2(e/this.yAxisMaxValue)));this.yAxisMaxValue*=s,i.fillRect(0,n-l,r,(s-1)*l/s),i.drawImage(t,0,(n-l)*this.dpr,r*this.dpr,l*this.dpr,0,n-l/s,r,l/s)}else if(this.yAxisMaxValue>2*Math.max(this.props.max,a)){let e=Math.pow(2,Math.ceil(Math.log2(this.yAxisMaxValue/Math.max(this.props.max,a))));this.yAxisMaxValue/=e,i.drawImage(t,0,(n-l/e)*this.dpr,r*this.dpr,l/e*this.dpr,0,n-l,r,l)}}i.drawImage(t,o*this.dpr,(n-l)*this.dpr,(r-o)*this.dpr,l*this.dpr,0,n-l,r-o,l);let c=Math.floor(l*Math.min(1,e/this.yAxisMaxValue));i.fillRect(r-o,n-l,o,l),i.fillStyle=this.props.fg,i.fillRect(r-o,n-c,o,c)}render(){return(0,s.jsx)("canvas",{className:_.wP,ref:this.canvasRef,width:this.props.width,height:this.props.height})}}function b(e){return e/1048576}x.displayName="Sparkline";class y extends a.PureComponent{constructor(e){super(e),this.sparklines=new Map,this.lastFrameTime=null,this.tsmerMetrics=new u.s,this.updateTimers=()=>{if(this.tsmerMetrics.onFrame(),null==this.lastFrameTime)this.lastFrameTime=performance.now();else{let e=performance.now(),t=this.sparklines.get("inter-frame-time");t&&t.append(e-this.lastFrameTime);let i=this.sparklines.get("fps");i&&i.append(1e3/(e-this.lastFrameTime)),this.lastFrameTime=e}let e=this.sparklines.get("total-memory");e&&e.append(b((0,p.aW)()??0));let t=this.sparklines.get("cpp-heap-memory");t&&t.append(b(o.hM?.getTotalUsedHeapMemory()??0));let i=this.sparklines.get("gpu-memory");i&&o.hM?.getMemStatsTotal&&i.append(b(o.hM.getMemStatsTotal(o.YO.RENDERER)));let s=this.sparklines.get("cpp-malloc-call-count");s&&s.append(o.hM?.getAllocCallCount()??0);let a=this.sparklines.get("cpp-malloc-size-totals");a&&a.append((o.hM?.getAllocTotal()??0)/1024),o.hM?.resetAllocCountsAndTotal();let r=this.sparklines.get("render-job-queue-length");r&&r.append(l.CeL?.getRendererJobQueueLength()??0);let n=this.sparklines.get("render-tree-swap-time");n&&n.append(this.tsmerMetrics.lastEditFrameTime());let c=this.sparklines.get("render-tree-stale-time");c&&c.append(this.tsmerMetrics.lastFrameStaleness());let u=this.sparklines.get("estimated-viewport-coverage");u&&u.append(l.glU?.estimatedViewportRenderCoverage(l.pWM.DEFINITELY_COVERED_ONLY)??0);let m=this.sparklines.get("min-sharpness");m&&m.append(l.glU?.minViewportSharpness()??0);let h=this.sparklines.get("avg-sharpness");h&&h.append(l.glU?.avgViewportSharpness()??0);let _=d.rH.report(),g=[],f=e=>{g.push(e.name);let t=this.sparklines.get(g.join(","));for(let i of(t&&t.updateFromTimer(e),e.children))f(i);g.pop()};for(let e of _)f(e);requestAnimationFrame(this.updateTimers)},this.sparklineRef=e=>t=>{t&&this.sparklines.set(e.join(","),t)},this.frameRequest=null,this.renderHUDNode=(e,t=[])=>{let i=t.concat([e.id]),a=150-10*t.length,r=m.sx.add({color:"black"}).$.color,n=m.sx.add({backgroundColor:"white"}).$.backgroundColor,o=!!(this.state?.nodesHiddenState??{})[e.id];return(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:_.n5,children:(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("button",{style:{backgroundColor:"gray",display:"inline-block",marginRight:"2px"},onClick:()=>{this.toggleNodeHidden(e.id)},children:o?"(+)":"(-)"}),e.label]}),!o&&(0,s.jsx)(x,{ref:this.sparklineRef(i),fg:r,bg:n,barWidth:e.barWidth,max:e.max,height:40,autoResize:!!e.autoResize,width:a})]})}),e.children&&!o&&(0,s.jsx)("div",{className:_.Q3,children:e.children.map(e=>this.renderHUDNode(e,i))})]},e.id)},this.state={nodesHiddenState:e.showAllExpanded?{}:{fps:!0,react:!0,frame:!0,"fullscreen-handle-event":!0,"cpp-malloc-call-count":!0,"cpp-malloc-size-totals":!0,"total-memory":!0,"cpp-heap-memory":!0,"gpu-memory":!0,"render-job-queue-length":!0,"render-tree-swap-time":!0,"render-tree-stale-time":!0,"estimated-viewport-coverage":!0,"min-sharpness":!0,"avg-sharpness":!0}}}componentDidMount(){this.frameRequest=requestAnimationFrame(this.updateTimers)}componentWillUnmount(){this.frameRequest&&cancelAnimationFrame(this.frameRequest)}toggleNodeHidden(e){let t=this.state?.nodesHiddenState??{},i=!!t[e];this.setState({nodesHiddenState:{...t,[e]:!i}})}render(){let e=this.props.isFigjamFile?0:parseInt(h.uj0,10)+5,t=(0,c.bG)()+5;return(0,s.jsx)("div",{className:_.vY,style:{right:e,top:t},children:g.map(e=>this.renderHUDNode(e))})}}y.displayName="PerfHUD";let E=null;function A(e,t){return E?(r.unmountComponentAtNode(E),document.body.removeChild(E),E=null,!1):(E=document.createElement("div"),document.body.appendChild(E),(0,n.H)(E).render((0,s.jsx)(y,{isFigjamFile:e,showAllExpanded:t})),!0)}},178317:(e,t,i)=>{i.d(t,{JH:()=>g,Tu:()=>h,r2:()=>p,y5:()=>m});var s=i(104076),a=i(716976),r=i(765142),n=i(955262),o=i(536760),l=i(511570),d=i.n(l),c=i(612798),u=i(929300);function m(e){let t=(0,a.useMemo)(()=>(0,o.eU)(!0),[]),[i,s]=(0,o.fp)(e||t);return(0,a.useCallback)(()=>{e&&s(!1)},[e,s])}function p({isPanelBodyCollapsedAtom:e}){let t=(0,a.useMemo)(()=>(0,o.eU)(!0),[]),i=(0,o.md)(e||t);return(0,s.jsx)("div",{className:d()(u.Kk,{[u.Sq]:null===e}),children:i?(0,s.jsx)(r.k,{}):(0,s.jsx)(n.O,{})})}function h({isPanelBodyCollapsedAtom:e,children:t,recordingKey:i}){return e?(0,s.jsx)(_,{isPanelBodyCollapsedAtom:e,children:t,recordingKey:i}):(0,s.jsx)(s.Fragment,{children:t})}function _({isPanelBodyCollapsedAtom:e,children:t,recordingKey:i}){let[a,r]=(0,o.fp)(e);return(0,s.jsx)(c.GG,{className:d()(u.jA,{[u.MJ]:a}),onMouseDown:()=>{r(!a)},recordingKey:i,children:t})}function g({isPanelBodyCollapsedAtom:e,children:t}){return e?(0,s.jsx)(f,{isPanelBodyCollapsedAtom:e,children:t}):(0,s.jsx)(s.Fragment,{children:t})}function f({isPanelBodyCollapsedAtom:e,children:t}){let i=(0,o.md)(e);return(0,s.jsx)("div",{className:i?u.RO:void 0,children:t})}},181452:(e,t,i)=>{i.d(t,{A:()=>r});var s=i(104076);i(224433);var a=i(703876);function r({borderRadiusStyle:e}){return(0,s.jsx)("div",{className:"x10l6tqk x13vifvy xu96u03 xh8yej3 x5yr21d x78zum5 x6s0dn4 xl56j7k xkszdks x1c6el4k xz4fkyq x17t6hpn x1ewlznk x1c74tu6 x1esw782 xa4qsjk xfo81ep x47corl xb3r6kr",style:e,children:(0,s.jsx)(a.H,{})})}},930519:(e,t,i)=>{i.d(t,{D:()=>j});var s=i(104076),a=i(716976),r=i(237420),n=i(24989),o=i(709120),l=i(594251),d=i(498020),c=i(920983),u=i(468882);i(224433);var m=i(322801),p=i(115479),h=i(157339),_=i(626660),g=i(553538),f=i(256112),x=i(136123),b=i(554841),y=i(19543),E=i(143020),A=i(932119),v=i(848755),T=i(889148),S=i(214721),I=i(266132),w=i(226271),R=i(69185),N=i(448160),C=i(605020),O=i(903968),k=i(760413),L=i(980497);let j=(0,C.Ju)(function({licenseType:e,seatType:t,onRequest:i,onClose:C,open:j,afterRequest:M,trackingProperties:F,planName:D,planKey:P,isEduTeam:B,entryPoint:U,planDataForSocialProof:V}){let z=(0,r.wA)(),H=(0,T.L)(n.e.MONETIZATION_EXPANSION),$=(0,x.k)(),G=(0,E.I4)(P,U),W=(0,S.R)({licenseType:e,planDataForSocialProof:V,entryPoint:U??"admin-auto-upgrade-confirmation-modal"}),q=()=>{z(b.Lo())},K=async e=>{await i(e,q),M?.(e)},X=o.hS({open:j,onClose:()=>{(0,I.Cu)({...F,trackingContext:N.e0.ADMIN_AUTO_UPGRADE_CONFIRMATION_MODAL,trackingDescriptor:A.c.CANCEL}),C()}}),Y=(0,a.useMemo)(()=>B?null:$?(0,u.t)("admin_auto_upgrade_confirmation_modal.body.proration_mechanics"):(0,u.t)("admin_auto_upgrade_confirmation_modal.body.legacy_mechanics"),[B,$]),Q=(0,R.k0)(t),Z=(0,s.jsx)(h.o,{href:"https://www.figma.com/pricing/",trusted:!0,newTab:!0,style:_.sx.colorTextBrand.cursorPointer.$,trackingProperties:{...F,trackingContext:N.e0.ADMIN_AUTO_UPGRADE_CONFIRMATION_MODAL,trackingDescriptor:A.c.OTHER_PRODUCTS},children:(0,u.t)("admin_auto_upgrade_confirmation_modal.body.other_products")}),J=(0,R.So)(e,D,Z,t,U);return G()?(0,s.jsx)(m.tH,{boundaryKey:"AdminAutoUpgradeConfirmationModal",fallback:m.H4.NONE_I_KNOW_WHAT_IM_DOING,sentryTags:{area:n.e.MONETIZATION_EXPANSION},onError:()=>{z(g.F.enqueue({message:(0,u.t)("admin_auto_upgrade_confirmation_modal.error"),error:!0}))},children:(0,s.jsx)(L.G,{afterRequest:M,appendageText:Y??void 0,buttonText:(0,u.t)("auto_upgrade_confirmation_modal.seat_centric.cta_text"),buttonTrackingDescriptor:A.c.UPGRADE_SEAT,entryPoint:U??y.tc.ASK_TO_EDIT,licenseType:e,onClickRequestAsync:i,onClose:C,open:j,planName:D,seatType:t,trackedContextName:N.e0.ADMIN_AUTO_UPGRADE_CONFIRMATION_MODAL,trackingProperties:F})}):(0,s.jsx)(m.tH,{boundaryKey:"AdminAutoUpgradeConfirmationModal",fallback:m.H4.NONE_I_KNOW_WHAT_IM_DOING,sentryTags:{area:n.e.MONETIZATION_EXPANSION},onError:()=>{z(g.F.enqueue({message:(0,u.t)("admin_auto_upgrade_confirmation_modal.error"),error:!0}))},children:(0,s.jsx)(v.fu,{name:N.e0.ADMIN_AUTO_UPGRADE_CONFIRMATION_MODAL,properties:F,trackingOptions:H,children:(0,s.jsx)(c.J,{brand:(0,w.ju)(e),children:(0,s.jsxs)(l.bL,{manager:X,width:360,children:[(0,s.jsxs)(d.vo,{children:[(0,s.jsx)(d.Y9,{children:(0,s.jsx)(d.hE,{children:Q})}),(0,s.jsxs)(d.nB,{padding:0,children:[(0,s.jsx)(k.T,{licenseType:e}),(0,s.jsx)(f.Y,{padding:{top:8,bottom:8,left:16,right:16},children:(0,s.jsxs)("div",{className:"x13faqbe",children:[J," ",Y]})})]}),(0,s.jsx)(d.wi,{children:(0,s.jsx)(d.jk,{children:(0,s.jsx)(p.$z,{onClick:K,trackingProperties:{trackingDescriptor:A.c.UPGRADE},trackingOptions:H,children:(0,u.tx)("auto_upgrade_confirmation_modal.cta_text")})})})]}),W.seatType&&(0,s.jsx)(d.vo,{className:"x1xmf6yo xh8yej3",children:(0,s.jsx)(d.nB,{padding:0,children:(0,s.jsx)(O.w,{seatType:W.seatType,licenseType:W.licenseType,entryPoint:W.entryPoint,planData:W.planData})})})]})})})})},"AdminAutoUpgradeConfirmationModal")},31241:(e,t,i)=>{i.d(t,{$:()=>g});var s=i(104076),a=i(709120),r=i(594251),n=i(498020),o=i(468882);i(224433);var l=i(115479),d=i(932119),c=i(848755),u=i(428444),m=i(605020),p=i(242239),h=i(760413);function _(e){let t=a.hS({open:e.open,onClose:e.onClose});return(0,p.r)(),(0,s.jsx)(r.bL,{manager:t,width:340,children:(0,s.jsxs)(n.vo,{children:[(0,s.jsx)(n.r1,{children:(0,s.jsx)("div",{children:(0,o.tx)("1_click_expansion.you_now_have_full_access")})}),(0,s.jsxs)(n.nB,{children:[(0,s.jsx)("div",{className:"x1v4kod4 x14p8jc9 x13ktmxq x1n2onr6",children:(0,s.jsx)(h.T,{licenseType:u.G_.DESIGN})}),(0,s.jsx)("div",{className:"x1vi7shn",children:e.children})]}),(0,s.jsx)(n.wi,{children:(0,s.jsx)(n.jk,{children:(0,s.jsx)(l.$z,{autoFocus:!0,variant:"primary",onClick:e.onRequestUpgrade||e.onClose,trackingProperties:{trackingDescriptor:d.c.CONTINUE},children:(0,o.tx)("request_upgrade.continue_button")})})})]})})}let g=(0,m.Ju)(function(e){return(0,s.jsx)(c.fu,{name:"Ask To Edit One Click Auto Confirmation Modal",children:(0,s.jsxs)(_,{...e,children:[(0,s.jsx)("div",{className:"xxrns5j x1q8tae1 x1vg90ec x1eab18d x1yyillh",children:(0,o.tx)("1_click_expansion.you_now_have_full_access")}),(0,s.jsx)("div",{className:"x1vi7shn",children:(0,o.tx)("1_click_expansion.you_now_have_a_full",{planName:e.planName})})]})})})},98815:(e,t,i)=>{i.d(t,{t:()=>k});var s=i(104076),a=i(716976),r=i(237420),n=i(24989),o=i(709120),l=i(594251),d=i(498020),c=i(920983),u=i(468882);i(224433);var m=i(322801),p=i(115479),h=i(553538),_=i(256112),g=i(554841),f=i(19543),x=i(143020),b=i(932119),y=i(848755),E=i(889148),A=i(214721),v=i(266132),T=i(226271),S=i(69185),I=i(448160),w=i(605020),R=i(903968),N=i(760413),C=i(272361),O=i(980497);let k=(0,w.Ju)(function({licenseType:e,seatType:t,onRequest:i,onClose:w,open:k,afterRequest:L,trackingProperties:j,planName:M,planKey:F,entryPoint:D,planDataForSocialProof:P}){let B=(0,r.wA)(),[U,V]=a.useState(!1),z=(0,E.L)(n.e.MONETIZATION_EXPANSION),H=(0,x.I4)(F,D),$=()=>{B(g.Lo())},G=(0,A.R)({licenseType:e,planDataForSocialProof:P,entryPoint:D??"auto-upgrade-confirmation-modal"}),W=async e=>{U||(V(!0),await i(e,$),L?.(e),V(!1))},q=o.hS({open:k,onClose:()=>{(0,v.Cu)({...j,trackingContext:I.e0.AUTO_UPGRADE_CONFIRMATION_MODAL,trackingDescriptor:b.c.CANCEL}),w()}}),K=(0,S.qS)(e),X=(0,C.KL)(e,M);return(D&&D===f.tc.USER_SETTINGS&&(K=(0,S.k0)(t),X=(0,C.m3)(e,M)),H())?(0,s.jsx)(m.tH,{boundaryKey:"AutoUpgradeConfirmationModal",fallback:m.H4.NONE_I_KNOW_WHAT_IM_DOING,sentryTags:{area:n.e.MONETIZATION_EXPANSION},onError:()=>{B(h.F.enqueue({message:(0,u.t)("request_upgrade.modal.error"),error:!0}))},children:(0,s.jsx)(O.G,{afterRequest:L,buttonText:(0,u.t)("auto_upgrade_confirmation_modal.seat_centric.cta_text"),buttonTrackingDescriptor:b.c.UPGRADE_SEAT,entryPoint:D??f.tc.ASK_TO_EDIT,licenseType:e,onClickRequestAsync:i,onClose:w,open:k,planName:M,seatType:t,trackedContextName:I.e0.AUTO_UPGRADE_CONFIRMATION_MODAL,trackingProperties:j})}):(0,s.jsx)(m.tH,{boundaryKey:"AutoUpgradeConfirmationModal",fallback:m.H4.NONE_I_KNOW_WHAT_IM_DOING,sentryTags:{area:n.e.MONETIZATION_EXPANSION},onError:()=>{B(h.F.enqueue({message:(0,u.t)("request_upgrade.modal.error"),error:!0}))},children:(0,s.jsx)(y.fu,{name:I.e0.AUTO_UPGRADE_CONFIRMATION_MODAL,properties:j,trackingOptions:z,children:(0,s.jsx)(c.J,{brand:(0,T.ju)(e),children:(0,s.jsxs)(l.bL,{manager:q,width:360,children:[(0,s.jsxs)(d.vo,{children:[(0,s.jsx)(d.Y9,{children:(0,s.jsx)(d.hE,{children:K})}),(0,s.jsxs)(d.nB,{padding:0,children:[(0,s.jsx)(N.T,{licenseType:e}),(0,s.jsx)(_.Y,{padding:{top:8,bottom:8,left:16,right:16},children:(0,s.jsx)("div",{className:"x13faqbe",children:X})})]}),(0,s.jsx)(d.wi,{children:(0,s.jsx)(d.jk,{children:(0,s.jsx)(p.$z,{disabled:U,onClick:W,trackingProperties:{trackingDescriptor:b.c.UPGRADE},trackingOptions:z,children:(0,u.tx)("auto_upgrade_confirmation_modal.cta_text")})})})]}),G.seatType&&(0,s.jsx)(d.vo,{className:"x1xmf6yo xh8yej3",children:(0,s.jsx)(d.nB,{padding:0,children:(0,s.jsx)(R.w,{seatType:G.seatType,licenseType:G.licenseType,entryPoint:G.entryPoint,planData:G.planData})})})]})})})})},"AutoUpgradeConfirmationModal")},272361:(e,t,i)=>{i.d(t,{HY:()=>u,KL:()=>h,m3:()=>p,sp:()=>m});var s=i(414393),a=i(468882),r=i(19543),n=i(721959),o=i(226271),l=i(69185),d=i(428444),c=i(876425);let u={type:"RequestUpgradeModal"};function m(e,t,i,s,u){if(s===r.tc.USER_SETTINGS)switch(u){case n.ud.COLLABORATOR:return(0,a.tx)("request_upgrade_modal.body.collab");case n.ud.CONTENT:return(0,a.tx)("request_upgrade_modal.body.content");case n.ud.DEVELOPER:return(0,a.tx)("request_upgrade_modal.body.dev");case n.ud.EXPERT:return(0,a.tx)("request_upgrade_modal.body.full")}return s===r.tc.PUBLISH_SITES&&e===d.G_.FIGMAKE?(0,a.tx)("request_upgrade_modal.body.figmake.publish"):s===r.tc.CODE_CHAT_LIMIT&&u===n.ud.EXPERT?(0,c.T3)()?(0,a.tx)("request_upgrade_modal.body.higher_ai_credit_limits",{planName:t}):(0,a.tx)("request_upgrade_modal.body.ai_ga.higher_limits",{productName:(0,o.VG)(e)}):(0,l.hA)(e,t,i,s)}function p(e,t){switch(e){case d.G_.DESIGN:case d.G_.SITES:case d.G_.FIGMAKE:return(0,a.tx)("auto_upgrade_confirmation_modal.body.full",{planName:t});case d.G_.DEV_MODE:return(0,a.tx)("auto_upgrade_confirmation_modal.body.dev",{planName:t});case d.G_.SLIDES:case d.G_.WHITEBOARD:return(0,a.tx)("auto_upgrade_confirmation_modal.body.collab",{planName:t});case d.G_.COOPER:case d.G_.CMS_STRUCTURE:case d.G_.CMS_CONTENT:return null;default:(0,s.xb)(e)}}function h(e,t){switch(e){case d.G_.DESIGN:return(0,a.tx)("auto_upgrade_confirmation_modal.body.design",{planName:t});case d.G_.WHITEBOARD:return(0,a.tx)("auto_upgrade_confirmation_modal.body.figjam",{planName:t});case d.G_.SLIDES:return(0,a.tx)("auto_upgrade_confirmation_modal.body.slides",{planName:t});case d.G_.SITES:return(0,a.tx)("auto_upgrade_confirmation_modal.body.sites",{planName:t});case d.G_.FIGMAKE:return(0,a.tx)("auto_upgrade_confirmation_modal.body.figmake",{planName:t});case d.G_.COOPER:case d.G_.CMS_STRUCTURE:case d.G_.CMS_CONTENT:case d.G_.DEV_MODE:return null;default:(0,s.xb)(e)}}},649258:(e,t,i)=>{i.d(t,{L:()=>o});var s=i(716976),a=i(875276),r=i(360271),n=i(954357);function o(){let e=(0,n.o)(),t=(0,r.XG)()===a.A5.APPROVE_SEAT_REQUEST?a.A5.REQUESTS:a.A5.INVITE;return(0,s.useCallback)(()=>{e(t)},[e,t])}},360271:(e,t,i)=>{i.d(t,{Fv:()=>l,Pl:()=>p,Rw:()=>m,XG:()=>c,hJ:()=>u});var s=i(237420),a=i(558789),r=i(728193),n=i(875276),o=i(145522);function l(){return(0,s.d4)(e=>{var t;return t=e.selectedView,(0,a.Wl)(t)||(0,o.$A)(t)})}function d(e){return"filePermissionsModalTab"in e&&e.filePermissionsModalTab||n.A5.INVITE}function c(){return(0,s.d4)(e=>d(e.selectedView))}function u(e){return(0,s.d4)(t=>d(t.selectedView)===e)}function m(e){let t=(0,r.HW)();return"design"===e.editor_type&&t}function p(e){let t=(0,r.HW)();return"slides"===e.editor_type&&t}},913242:(e,t,i)=>{i.d(t,{k:()=>h});var s=i(104076),a=i(716976),r=i(495030),n=i(665108),o=i(955262),l=i(468882);i(224433);var d=i(115479),c=i(157339),u=i(982009),m=i(679638),p=i(932119);function h({seatType:e,userInfo:t,priceString:i}){let[h,_]=(0,a.useState)(!1),g=(0,s.jsx)("div",{className:"x1g2dr8m xiqqdae xkezfkh x14kxzw3 x1giz659",children:(0,l.t)("file_permissions_modal.update_seat_tab.this_may_impact_your_costs")}),f=()=>_(!h),x=(0,s.jsx)(c.Ph,{href:m.Z,trusted:!0,newTab:!0,trackingProperties:{trackingDescriptor:p.c.LEARN_MORE},children:(0,l.t)("file_permissions_modal.update_seat_tab.learn_more")}),b=i?(0,l.tx)("file_permissions_modal.update_seat_tab.if_there_is_an_available_seat_proration_enabled",{userString:t,seatType:(0,u.JT)(e),priceString:i,learnMoreLink:x}):(0,l.tx)("file_permissions_modal.update_seat_tab.if_there_is_an_available_seat_proration_not_enabled",{userString:t,seatType:(0,u.JT)(e),learnMoreLink:x});return(0,s.jsx)(r.Yy,{variant:"default",children:h?(0,s.jsxs)(n.Q,{children:[(0,s.jsxs)(d.e6,{onClick:f,trackingProperties:{trackingDescriptor:p.c.SEAT_COST_MESSAGING},className:"x78zum5 x1q0g3np x1qughib xh8yej3",children:[g,(0,s.jsx)(o.O,{className:"x19jd1h0"})]}),(0,s.jsx)("div",{className:"x1rmmofs",children:b})]}):(0,s.jsxs)(d.e6,{onClick:f,trackingProperties:{trackingDescriptor:p.c.SEAT_COST_MESSAGING},className:"x78zum5 x1q0g3np x1qughib xh8yej3",children:[(0,s.jsx)(n.Q,{children:g}),(0,s.jsx)(o.O,{})]})})}},681036:(e,t,i)=>{i.d(t,{dU:()=>f});var s=i(104076),a=i(716976);i(237420);var r=i(823242);i(468882);var n=i(38989);i(511570);var o=i(154500);i(967164);var l=i(120986);i(73218),i(393017),i(439206),i(691138);let d="accessibilitytree--node--xYG8O",c="accessibilitytree--disabled--m1ByR accessibilitytree--node--xYG8O",u="accessibilitytree--scrollContainer--TNuEw accessibilitytree--node--xYG8O";function m({parentId:e,nodeId:t,enabled:i=!0,focusRef:r,accessibilityScope:g,viewer:b}){let y;let E=(0,l.W)(t,g),A=b.getPrototypeNode(t);if(!E||!A)return null;let{isClickable:v,tag:T="div",role:S,label:I}=E,w=_.get(T)||{};switch(b.nodeType(A)){case"TABLE":y=function(e,t){let i=e.nodeTableCells(t).map(t=>({text:e.nodeTableCellContent(t),pos:e.nodeDisplayBounds(t)})).sort((e,t)=>e.pos.x<t.pos.x?-1:1),a={};for(let e of i)a[e.pos.y]?a[e.pos.y].push(e):a[e.pos.y]=[e];let r=Object.keys(a).sort((e,t)=>parseFloat(e)-parseFloat(t));return[(0,s.jsx)("div",{role:"rowgroup",children:a[r[0]].map((e,t)=>(0,s.jsx)("span",{role:"columnheader",style:{left:e.pos.x,top:e.pos.y,width:e.pos.width,height:e.pos.height}},`header-${t}`))},"table-header"),(0,s.jsx)("div",{role:"rowgroup",children:r.map((e,t)=>(0,s.jsx)("div",{role:"row","aria-rowindex":t,children:a[e].map((t,i)=>(0,s.jsx)("span",{role:"cell",className:d,style:{display:"inline-block",left:t.pos.x,top:t.pos.y,width:t.pos.width,height:t.pos.height},children:t.text},`${e}-${i}`))},e))},"table-body")]}(b,A);break;case"CODE_BLOCK":(0,n.kc)().slides_viewer_a11y_2&&(y=function(e,t){let i=e.mapChildren(t,e=>e)?.[0];if(!i)return[];let a=x(e,i,"Line numbers"),r=x(e,i,"Text");if(!a||!r)return[];let n=(e.nodeText(a)||"").split("\n"),o=e.nodeText(r)||"";return n.length&&o.length?[(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("pre",{children:(0,s.jsx)("code",{children:o})}),(0,s.jsx)("div",{className:"line-numbers",children:n.map(e=>(0,s.jsx)("span",{children:e},e))})]})]:[]}(b,A));break;case"TEXT":y=f(b.nodeText(A)||"",b.nodeLineData(A)||[],b.nodeCharacterStyles(A),b.navigateToFrameAndCloseOverlays);break;default:y=E.childIds.map(e=>(0,s.jsx)(m,{nodeId:e,accessibilityScope:g,focusRef:void 0,viewer:b,parentId:t},e))}let R=b.nodeScrollBounds(A),N=e&&b.getPrototypeNode(e),C=!i&&"none"||N||"canvas",O=h(b,A,R?"scrollContainer":C),k=v?{onClick:e=>{(0,o.f)(o.h.PROTOTYPE_BUTTON_CLICKED,{isMouseEvent:e?.screenX!==0&&e?.screenY!==0}),b.nodeTriggerInteraction(A,"ON_CLICK")},onFocus:()=>void b.nodeHover(A),onBlur:()=>void b.nodeReverseHover(A)}:{},L=a.createElement(T,{className:!i&&c||!!R&&u||d,style:O,tabIndex:r?0:void 0,ref:r,role:S,key:t,"aria-label":I,...w,...k},y);return R&&(L=(0,s.jsx)(p,{displayRect:h(b,A,C),enabled:i,scrollRect:R,onScrolled:(e,t)=>b.nodeScrollTo(A,e,t),scrollAreaContent:L})),L}function p({displayRect:e,enabled:t,onScrolled:i,scrollRect:r,scrollAreaContent:n}){let o=a.useRef(null),l=a.useRef(!1),d=a.useCallback(e=>{let t=e.target;("number"==typeof t?.scrollLeft||"number"==typeof t?.scrollTop)&&(l.current?l.current=!1:i?.(t.scrollLeft*r.width/t.scrollWidth,t.scrollTop*r.height/t.scrollHeight))},[i,r.height,r.width]);return a.useEffect(()=>{let e=o.current;if(e)return e.addEventListener("scrollend",d),()=>e.removeEventListener("scrollend",d)},[d]),a.useEffect(()=>{let e=o.current;e&&(l.current=!0,r.width&&(e.scrollLeft=r.x*e.scrollWidth/r.width),r.height&&(e.scrollTop=r.y*e.scrollHeight/r.height))},[r.x,r.y,r.width,r.height]),(0,s.jsx)("div",{className:t?u:c,style:e,ref:o,children:n})}function h(e,t,i){switch(i){case"none":return{};case"canvas":{let{x:i,y:s,width:a,height:r}=e.nodeDisplayBounds(t);return{left:i,top:s,width:a,height:r}}case"scrollContainer":{let i=e.nodeCanvasSpaceBounds(t),s=e.nodeScrollBounds(t);if(!s)return{};{let e="100%",t="100%";return 0!==s.height&&(e=`${100*s.height/i.height}%`),0!==s.width&&(t=`${100*s.width/i.width}%`),{height:e,width:t}}}default:{let s=e.nodeCanvasSpaceBounds(i),a=e.nodeScrollBounds(i),r=e.nodeCanvasSpaceBounds(t),n=a?a.width:s.width,o=a?a.height:s.height,l=s.x,d=s.y,c=(r.x-l)/n,u=(r.y-d)/o,m=r.width/n,p=r.height/o;return{top:`${100*u}%`,left:`${100*c}%`,height:`${100*p}%`,width:`${100*m}%`}}}}a.memo(function({accessibilityScope:e,autofocus:t,setAutofocus:i,viewer:r}){let[n,o]=a.useState(void 0),l=function(e,t){let i=a.useRef(null),s=i.current,r=s?.contains(s?.ownerDocument?.activeElement);return a.useLayoutEffect(()=>{if(!e&&!r)return;let s=i.current;s&&(e||!s.contains(s.ownerDocument.activeElement))&&(s.focus(),e&&t?.(!1))}),i}(t,i);return(a.useEffect(()=>{let e=()=>{let e=r.getTopmostFrameNode();e&&o(r.nodeId(e))};return r.on("topLevelFrameChange",e),()=>{r.off("topLevelFrameChange",e)}},[r]),a.useEffect(()=>{let e=r.getTopmostFrameNode();o(e?r.nodeId(e):void 0)},[r]),n)?(0,s.jsx)(m,{nodeId:n,parentId:void 0,enabled:!0,focusRef:l,accessibilityScope:e,viewer:r},n):null});let _=new Map([["form",{onSubmit:e=>e.preventDefault()}],["button",{type:"button"}],["input",{readonly:"readonly"}]]);function g(e,t){let i=e.nodeFillTypes(t);return 1===i.length&&"IMAGE"===i[0]}function f(e,t,i,n){let o=e.split(/\n/mu),l=[];function d(e){for(;l.length>e+1;){let e,t,i;let[s,r]=l.pop();switch(s){case"UNORDERED_LIST":e="ul",t="li",i="list";break;case"ORDERED_LIST":e="ol",t="li",i="list";break;default:e="p",t="span"}let n=l[l.length-1];if(n&&n.length>1){let s=n[1];s.push(a.createElement(e,{key:s.length,...i&&{role:i}},r.map((e,i)=>a.createElement(t,{key:i},e))))}}}let c=0;for(let e=0;e<o.length;e++){let a=o[e],u=t[e]||{type:"PLAIN",indentLevel:0};for("PLAIN"===u.lineType&&(u.indentLevel=0),d(u.indentLevel),l.length>1&&l[l.length-1][0]!==u.lineType&&d(u.indentLevel-1);l.length<u.indentLevel+1;)l.push([u.lineType,[]]);l[l.length-1][1].push(function(e,t){let a=[];for(let o of i){let{start:i,end:l,props:d}=o,c=[...t].length;if(i>e+c)break;if(l<=e)continue;i=Math.max(0,i-e),l=Math.min(c,l-e);let u=RegExp(`(?:[^]{${i}})([^]{${l-i}})`,"u"),m=t.match(u)?.[1],p=d?.get?.("HYPERLINK"),h=d?.get?.("FONT_STYLE"),_=h?.toLowerCase()?.includes("italic"),g=h?.toLowerCase()?.includes("bold"),f=d?.get?.("FONT_SIZE"),x=d?.get?.("TEXT_DECORATION"),b={fontWeight:g?"bold":void 0,fontStyle:_?"italic":void 0,fontSize:f?`${f}px`:void 0,textDecoration:new Map([["UNDERLINE","underline"],["STRIKETHROUGH","line-through"]]).get(x)};if("string"==typeof p?.url)a.push((0,s.jsx)(r._,{style:b,href:p.url,newTab:!0,trusted:!0,children:m},i+e));else if(n&&"object"==typeof p?.guid){let t=p.guid;a.push((0,s.jsx)("button",{type:"button",role:"link",onClick:()=>n(`${t.sessionID}:${t.localID}`),children:m},i+e))}else g||_||f||x?a.push((0,s.jsx)("span",{style:b,children:m},i+e)):a.push(m)}return a}(c,a)),a?c+=[...a].length+1:c+=1}return d(0),l[0][1].map((e,t)=>"string"!=typeof e?e:(0,s.jsx)("p",{children:e},t))}function x(e,t,i){let s=e.mapChildren(t,e=>e);return s?.find(t=>e.nodeName(t)===i)??null}},407672:(e,t,i)=>{var s=i(45753),a=i(128212),r=i(343116),n=i(530076),o=i(754121);let l=class e{constructor(t,i){this._isUIShown=t,this._inCommentsMode=!1,this._rcsUserFlags=[],this._hideUITask=new s.W,this.handleProgressBarStoppedShowing=()=>{this.showUiAndScheduleFade()},this.onWindowFocus=()=>{this.showUiAndScheduleFade()},this.didEnterCommentsMode=()=>{this._hideUITask.reset(),this._setUIShown(!0),this._inCommentsMode=!0},this.didLeaveCommentsMode=()=>{this._inCommentsMode&&(this._inCommentsMode=!1,this.showUiAndScheduleFade())},this.didRscUserFlagsUpdate=e=>{this._rcsUserFlags=e},this.handleUnhideUI=()=>{this.showUiAndScheduleFade()},this.handlePageMouseDownOrTouchStart=e=>{"CURRENT_TLF"===e.type||"DEVICE_FRAME"===e.type?this._setUIShown(!1):"PROTOTYPE_BACKGROUND"===e.type&&(this._hideUITask.reset(),this._isUIShown()?this._setUIShown(!1):this.showUiAndScheduleFade())},this.handleHotspotClicked=()=>{this._setUIShown(!1)},this.handlePageMouseMove=(e,t)=>{let i=e.clientY,s=window.innerHeight-e.clientY,a=85>Math.abs(window.innerWidth/2+t/2-e.clientX)&&s<60;i<(0,n.bG)()?this.showUiAndScheduleFade():a?this.showUiAndScheduleFade():this.scheduleFadeIfNecessary()},this.handleHeaderOrFooterMove=e=>{this._hideUITask.reset(),this._isUIShown()||this._setUIShown(!0),e.stopPropagation()},this.handleHeaderOrFooterBlur=e=>{this.scheduleFadeIfNecessary()},this.handleHeaderOrFooterFocus=e=>{this._hideUITask.reset(),this._setUIShown(!0)},this.handleKeyDown=(e,t)=>{(t&&this._isUIShown()||e.keyCode===a.Uz.ESCAPE)&&this.showUiAndScheduleFade()},this.teardown=()=>{this._hideUITask.reset()},this.showUiAndScheduleFade=()=>{this._isUIShown()||this._setUIShown(!0),this._hideUITask.reset(),this.scheduleFadeIfNecessary()},this.scheduleFadeIfNecessary=()=>{this._hideUITask.isScheduled()||this._hideUITask.scheduleOnce(()=>{this._setUIShown(!1)},e.FADE_DELAY_MS)},this._setUIShown=t=>{let s=!t&&this._inCommentsMode,a=!t&&this._rcsUserFlags.reduce((t,i)=>t||e.RCS_SHOWN_ON_UI.has(i),!1);s||a||i(t)}}};l.FADE_DELAY_MS=r.Ay.isMobileBrowser?1e3:2e3,l.RCS_SHOWN_ON_UI=new Set([o.e])},765597:(e,t,i)=>{i(104076),i(716976),i(237420),i(468882),i(38989),i(612798),i(610784),i(251931),i(927903),i(47972),i(361405),i(442232)},177713:(e,t,i)=>{i.d(t,{Md:()=>o,z2:()=>r});var s=i(536760),a=i(674727),r=(e=>(e[e.NOT_LOADED=0]="NOT_LOADED",e[e.LOADED=1]="LOADED",e))(r||{}),n=(e=>(e[e.LOAD_LIVEGRAPH=0]="LOAD_LIVEGRAPH",e[e.LOAD_VIEWER_INSTANCE=1]="LOAD_VIEWER_INSTANCE",e))(n||{});let o=(0,s.um)({status:0,livegraphLoaded:!1,viewerInstanceLoaded:!1},(e,t)=>{if(1===e.status)return e;switch(t.type){case 0:if(e.viewerInstanceLoaded)return a.Su.handleViewerLoaded("livegraph"),{status:1,lastLoaded:"livegraph"};if(e.livegraphLoaded)return e;return{...e,livegraphLoaded:!0};case 1:if(e.livegraphLoaded)return a.Su.handleViewerLoaded("multiplayer"),{status:1,lastLoaded:"multiplayer"};if(e.viewerInstanceLoaded)return e;return{...e,viewerInstanceLoaded:!0}}})},660952:(e,t,i)=>{i.d(t,{u:()=>D});var s=i(104076),a=i(716976),r=i(237420),n=i(414393),o=i(24989),l=i(258253),d=i(920983),c=i(724600),u=i(468882),m=i(224433),p=i(359081),h=i(890),_=i(959248),g=i(641567),f=i(748399),x=i(553538),b=i(9251),y=i(554841),E=i(932119),A=i(848755),v=i(721959),T=i(490384),S=i(428444),I=i(170350),w=i(605020),R=i(209585),N=i(272787);let C="cb2673de5dce908e59e849955b564818efb747a6",O={noteInput:{kZKoxP:"x1peatla",kmVPX3:"xf7z5ut",kaIpWk:"x19y5rnk",kC7eKd:"x1sjmt1f",kHenm0:"xtt52l0",k8Qsv1:"xuggh6c",$$css:!0}};function k(e){let{note:t,onChange:i}=e;return(0,s.jsxs)("div",{className:"x4ygwfs x78zum5 xdt5ytf x1nfngrj",children:[(0,s.jsx)("span",{...m.xk(c.g.textBodyMedium),children:(0,u.tx)("seat_selection_in_nux.note_prompt")}),(0,s.jsx)("textarea",{...m.xk(O.noteInput,c.g.textBodyMedium),placeholder:(0,u.t)("seat_selection_in_nux.note_placeholder",{seat_type:(0,b.tI)(e.seatType)}),value:t,onChange:e=>i(e.target.value),rows:3})]})}let L={[v.ud.COLLABORATOR]:"whiteboard",[v.ud.DEVELOPER]:"dev-handoff",[v.ud.EXPERT]:"design",[v.ud.CONTENT]:"cooper"},j=(e,t)=>{if(e)switch(t){case v.ud.COLLABORATOR:return(0,u.tx)("seat_selection_in_nux.collab_seat_auto_approved");case v.ud.DEVELOPER:return(0,u.tx)("seat_selection_in_nux.dev_seat_auto_approved");case v.ud.EXPERT:return(0,u.tx)("seat_selection_in_nux.full_seat_auto_approved");case v.ud.CONTENT:return(0,u.tx)("seat_selection_in_nux.content_seat_auto_approved");default:(0,n.xb)(t)}else switch(t){case v.ud.COLLABORATOR:return(0,u.tx)("seat_selection_in_nux.collab_seat_manual_request");case v.ud.DEVELOPER:return(0,u.tx)("seat_selection_in_nux.dev_seat_manual_request");case v.ud.EXPERT:return(0,u.tx)("seat_selection_in_nux.full_seat_manual_request");case v.ud.CONTENT:return(0,u.tx)("seat_selection_in_nux.content_seat_manual_request");default:(0,n.xb)(t)}},M=(e,t)=>{if(e)switch(t){case v.ud.COLLABORATOR:return(0,h.ck)(C);case v.ud.DEVELOPER:return(0,h.ck)("bb9c1da4623599a5b504821d08933e4a62f77738");case v.ud.EXPERT:case v.ud.CONTENT:return(0,h.ck)("e64c10dbcf541d5c046e504238332a5a4e6c3936");default:(0,n.xb)(t)}else switch(t){case v.ud.COLLABORATOR:return(0,h.ck)(C);case v.ud.DEVELOPER:return(0,h.ck)("c01e13ea74266be4e3bd04138f24580a366f34db");case v.ud.EXPERT:case v.ud.CONTENT:return(0,h.ck)("8ccf73b4d60956f75e7d328f2f84303814551671");default:(0,n.xb)(t)}};function F(e){let[t,i]=(0,a.useState)(""),{color:n}=(0,l.G)(),c=(0,r.wA)(),m=(0,N.U)("nux_seat_request_confirmation_modal"),_=(0,T.q5)();(0,p.h)(()=>{e.autoApproved||e.requestId||function(e){if((0,h.b5)())throw e;(0,g.$D)(o.e.ACTIVATION,e),c(y.ES(D)),c(x.F.enqueue({message:"Something went wrong.",error:!0}))}(Error("No request ID for post-NUX seat request confirmation modal"))});let b=async i=>{let s=!1;if(!e.autoApproved&&i&&t.length>0){if(e.requestId)try{let i=e.requestId;i?await I.w.updateRequestMessage({request_id:i,message:t}):s=!0}catch(e){s=!0}else s=!0}c(y.ES(D)),e.seatType===v.ud.DEVELOPER&&_?.editorType===S._Y.DESIGN&&m("handoff"),s&&c(x.F.enqueue({message:"Error updating request message.",error:!0}))};return(0,s.jsx)(d.J,{brand:L[e.seatType],children:(0,s.jsx)(A.fu,{name:"Post NUX Seat Request Confirmation Modal Outer",children:(0,s.jsx)(R.xx,{title:(0,u.tx)("seat_selection_in_nux.welcome_to_figma"),media:(0,s.jsx)("div",{className:"x78zum5 x2lah0s x13a6bvl x6s0dn4 x1jgvi1y xg80ozm x1bifzbx",children:(0,s.jsx)(f.oW,{alt:"",className:"xh8yej3 xgmxx4u x14vqqas",src:M("dark"===n,e.seatType)})}),primaryCta:{type:"button",label:(0,u.tx)("seat_selection_in_nux.continue"),onClick:b,ctaTrackingDescriptor:E.c.CONTINUE},onClose:()=>c(y.ES(D)),trackingContextName:"Post NUX Seat Request Confirmation Modal",description:(0,s.jsxs)(s.Fragment,{children:[j(e.autoApproved,e.seatType),!e.autoApproved&&(0,s.jsx)(k,{note:t,onChange:i,seatType:e.seatType})]})})})})}let D=(0,w.Ju)(function(e){return(0,s.jsx)(_.u9,{label:"SeatRequestConfirmationModal",children:(0,s.jsx)(F,{...e})})},"NuxSeatRequestConfirmationModal")},570480:(e,t,i)=>{i.d(t,{AH:()=>m,jY:()=>u}),i(24989),i(513813);var s=i(278995);i(90947);var a=i(818822),r=i(59881),n=i(705518),o=i(587513),l=i(799220),d=i(752700);i(177713);var c=i(186619);function u(e){switch(e){case a.IPZ.SWT_CREATED:return"shapeWithTextCreated";case a.IPZ.SWT_EDITED:return"shapeWithTextEdited";case a.IPZ.SWT_DELETED:return"shapeWithTextDeleted";case a.IPZ.SWT_RESIZED:return"shapeWithTextResized";case a.IPZ.STICKY_EDITED:return"stickyEdited";case a.IPZ.STICKY_DELETED:return"stickyDeleted";case a.IPZ.STICKY_RESIZED:return"stickyResized";case a.IPZ.SCENEGRAPH_UPDATER_PERFORMED_UPDATES:return"scenegraphUpdaterPerformedUpdates"}}i(641567),i(851087);class m{constructor(e,t,i,a=1,n=!1,d=null,u=()=>{},m=null){this._analyticsEventName=e,this._processTimersForLogging=t,this._slowFrameTracker=i,this._timerDepth=a,this._forwardToDatadog=n,this._tsmerMetrics=d,this._customLogMetricsCallbackHistogram=u,this._collectorSlowFrameTracker=m,this._isRecording=!1,this._isCanceled=!1,this._isFirstLogForTab=!0,this._imagesLoadingState=null,this._ongoingSpotlight=!1,this._multiplayerUserCount=1,this._numberOfRenderedCommentsWatermark=0,this._lastRecordedNumberOfRenderedComments=0,this._distributionByWorkName=new Map,this._lastKnownFrameMs=null,this._lastKnownMetricsFrameMs=null,this._lastLogTime=null,this._scheduledLogAtMs=null,this._lastRecordedHitCountByName={},this._lastRecordedDurationSinceLastFrame={},this._fileKey=null,this._productType="unknown",this._planTier="unknown",this._gpuDeviceInfo=(0,c.l)(),this._activeNamedEvents=new Set,this._singleFrameNamedEvents=new Set,this._eventTrackers=new Map,this._contextRestoredCount=0,this._maxRenderLayerCount=0,this._maxRenderedTileBytesUsed=0,this._numAnimationsFromCpp=0,this._numAnimationsFromTs=0,this._tileRenderersUsed=new Set,this._currentTileRenderer="",this.scheduleLogTwoMinutesFromNow=()=>{null===this._scheduledLogAtMs&&(this._scheduledLogAtMs=performance.now()+12e4)},this._onDocumentVisibilityChange=()=>{this.handleDocumentVisibilityChange(document.visibilityState)},this.updateLastKnownFrameMs=e=>{this._lastKnownFrameMs=e},this.startRecording=e=>{this._isRecording=!0,this._resetLogState(),this._lastKnownFrameMs=performance.now(),null===this._lastLogTime&&(this._lastLogTime=this._lastKnownFrameMs),e&&this.scheduleLogTwoMinutesFromNow()},this.stopRecordingAndLog=e=>{let t={};return this._distributionByWorkName.forEach((e,i)=>{t[i]=e.toPOJO()}),this._shouldLogToAnalytics()&&(this._logToAnalytics(e),this._resetLogState()),this._isRecording=!1,t},this.setFileInfo=(e,{productType:t,planTier:i})=>{(e!==this._fileKey||t!==this._productType)&&this._resetLogState(),this._fileKey=e,this._productType=t,this._planTier=i},this._startRecordingNamedEvent=e=>{this._activeNamedEvents.add(e)},this.recordSingleFrameNamedEvent=e=>{this._singleFrameNamedEvents.add(e)},this._stopRecordingNamedEvent=e=>{this._activeNamedEvents.delete(e)},this.handleZoomStart=()=>{this._startRecordingNamedEvent("zoomActive")},this.handleZoomStop=()=>{this._stopRecordingNamedEvent("zoomActive")},this.handleScrollEvent=()=>{this.recordSingleFrameNamedEvent("scrollActive")},this.onNodeDragStart=()=>{this._startRecordingNamedEvent("nodeDragActive")},this.onNodeDragEnd=()=>{this._stopRecordingNamedEvent("nodeDragActive")},this.onTileRendererChanged=e=>{this._tileRenderersUsed.add(e),this._currentTileRenderer=e},this.onContextRestored=()=>{this._contextRestoredCount++},this.updateMaxRenderLayerCount=e=>{this._maxRenderLayerCount=Math.max(this._maxRenderLayerCount,e)},this.updateMaxRenderedTileBytesUsed=e=>{this._maxRenderedTileBytesUsed=Math.max(this._maxRenderedTileBytesUsed,e)},this.incrementNumAnimationsFromCpp=()=>{this._numAnimationsFromCpp++},this.incrementNumAnimationsFromTs=()=>{this._numAnimationsFromTs++},this.handleDocumentVisibilityChange=e=>{"hidden"===e&&this._shouldLogToAnalytics()&&(this._logToAnalytics("tab-hidden"),this._resetLogState()),"hidden"!==e&&this._resetLogState()},this._logToAnalytics=(e,t=!1)=>{let i={};i.schema=new o.UP().schema(),i.reason=e,i.isFirstLogAfterLoad=this._isFirstLogForTab,i.imagesLoading="loading"===this._imagesLoadingState,i.multiplayerUserCount=this._multiplayerUserCount,i.ongoingSpotlight=this._ongoingSpotlight,i.fileKey=this._fileKey,i.productType=this._productType,i.planTier=this._planTier,i.refreshRate=this.refreshRate(),i.commentsRenderCount=this._numberOfRenderedCommentsWatermark,i.contextRestoredCount=this._contextRestoredCount,i.maxRenderLayerCount=this._maxRenderLayerCount,i.maxRenderedTileBytesUsed=this._maxRenderedTileBytesUsed,(0,c.q)(this._gpuDeviceInfo,i),i.lastCheckpointSize=s.CeL?.getServerSideLoadTimeMetadata()?.lastCheckpointSize,i.numAnimationsFromCpp=this._numAnimationsFromCpp,i.numAnimationsFromTs=this._numAnimationsFromTs,this._isFirstLogForTab=!1,null!==this._tsmerMetrics&&(i.editFrames=this._tsmerMetrics.editFrameDistribution().toLogParams(),i.editFramesWhileNotPanningOrZooming=this._tsmerMetrics.editFrameDistributionWhileNotPanningOrZooming().toLogParams(),i.remoteFrames=this._tsmerMetrics.remoteFrameDistribution().toLogParams(),i.remoteFramesWhileNotPanningOrZooming=this._tsmerMetrics.remoteFrameDistributionWhileNotPanningOrZooming().toLogParams()),this._customLogMetricsCallbackHistogram(i),i.tileRenderersUsed=JSON.stringify(Array.from(this._tileRenderersUsed)),this._tileRenderersUsed.clear(),this._tileRenderersUsed.add(this._currentTileRenderer),this._distributionByWorkName.forEach((e,t)=>{if(t in i)throw Error(`attempt to track performance for a work item with a reserved name: ${t}`);i[t]=e.toLogParams()}),i.totalBatchTime=performance.now()-this._lastLogTime,this._lastLogTime=performance.now(),i.hasCmsBoundCollections=s.CeL?.getHasCmsBoundCollections(),i.hasCmsBoundFields=s.CeL?.getHasCmsBoundFields(),t?setTimeout(()=>{this._sendLogRequest(i)},0):this._sendLogRequest(i)},this._sendLogRequest=e=>{let t={forwardToDatadog:this._forwardToDatadog,batchRequest:!0};(0,r.sx)(this._analyticsEventName,e,t)},this._processTimerTree=(e,t,i)=>{if(t>=this._timerDepth)return[];let s=[];for(let a of e){let e=[...i,a.name],r=e.join(".");if(!(r in this._lastRecordedHitCountByName)||!(r in this._lastRecordedDurationSinceLastFrame)){this._lastRecordedHitCountByName[r]=a.hitCount,this._lastRecordedDurationSinceLastFrame[r]=a.totalElapsedTime;continue}let n=a.hitCount-this._lastRecordedHitCountByName[r];if(0===n)continue;n>a.elapsedTimes.length&&console.warn(`Logged performance for ${r} too many times in one animation frame`);let o=a.totalElapsedTime-this._lastRecordedDurationSinceLastFrame[r];this._lastRecordedHitCountByName[r]=a.hitCount,this._lastRecordedDurationSinceLastFrame[r]=a.totalElapsedTime,s.push({path:e,elapsedTime:o});let l=t+1;l<this._timerDepth&&a.children.length>0&&(s=s.concat(this._processTimerTree(a.children,l,e)))}return s},this.checkNotVisibleOrRecording=()=>"visible"!==document.visibilityState||!this._isRecording,this.onMetricsEventLoopFrame=()=>{if("ok"!==l.y.getFullscreenCrashState()||this.checkNotVisibleOrRecording()||this._isCanceled){this._lastKnownMetricsFrameMs=null;return}let e=performance.now();if(null!=this._lastKnownMetricsFrameMs){let t=e-this._lastKnownMetricsFrameMs;t<6e4&&this._getOrCreateDistribution("metrics_loop").add(t)}this._lastKnownMetricsFrameMs=e},this.onFrame=()=>{if("ok"!==l.y.getFullscreenCrashState())return"canceled";try{if(this._isCanceled)return"canceled";if(this.checkNotVisibleOrRecording())return"not-recording";let e=performance.now();if(null!=this._lastKnownFrameMs){let t=e-this._lastKnownFrameMs;if(t<6e4){this._getOrCreateDistribution("all").add(t);let{trackersHitThisFrame:e,trackerTotalTimeMs:i}=this.writeEventTrackerDistributions(t);s.glU?.updatePerfMode(e),null!==this._scheduledLogAtMs&&this._slowFrameTracker?.checkSlowFrameAndSample(t,e,i,{fileKey:this._fileKey,productType:this._productType,planTier:this._planTier},this._gpuDeviceInfo)}}if(this._lastKnownFrameMs=e,this.cancelIfTimersOpen())return"canceled";return this.writeAppTimerDistributions(),this._tsmerMetrics?.onFrame(),this.logIfTwoMinutesElapsed(),"success"}finally{this._slowFrameTracker?.clearPerFrameMetricsAndIncrementFrameCounter()}},this.testOnlyGetDistribution=(e="all")=>this._getOrCreateDistribution(e),this.pendingImagesChanged=e=>{if("loaded"===this._imagesLoadingState)return;let t=e>0?"loading":"loaded";t!==this._imagesLoadingState&&("loading"===this._imagesLoadingState&&(this._logToAnalytics("images-loaded"),this._resetLogState()),this._imagesLoadingState=t)},document.addEventListener("mousemove",this.scheduleLogTwoMinutesFromNow,!0),document.addEventListener("keydown",this.scheduleLogTwoMinutesFromNow,!0),document.addEventListener("touchdown",this.scheduleLogTwoMinutesFromNow,!0),document.addEventListener("touchstart",this.scheduleLogTwoMinutesFromNow,!0),document.addEventListener("touchmove",this.scheduleLogTwoMinutesFromNow,!0),document.addEventListener("visibilitychange",this._onDocumentVisibilityChange)}uninstall(){document.removeEventListener("mousemove",this.scheduleLogTwoMinutesFromNow,!0),document.removeEventListener("keydown",this.scheduleLogTwoMinutesFromNow,!0),document.removeEventListener("touchdown",this.scheduleLogTwoMinutesFromNow,!0),document.removeEventListener("touchstart",this.scheduleLogTwoMinutesFromNow,!0),document.removeEventListener("touchmove",this.scheduleLogTwoMinutesFromNow,!0),document.removeEventListener("visibilitychange",this._onDocumentVisibilityChange)}hasScheduledLog(){return null!=this._scheduledLogAtMs}_shouldLogToAnalytics(){return this._isRecording&&null!=this._scheduledLogAtMs}productTypeForTests(){return this._productType}_resetLogState(){this._lastKnownFrameMs=null,this._imagesLoadingState=null,this._ongoingSpotlight=!1,this._multiplayerUserCount=1,this._distributionByWorkName=new Map,this._scheduledLogAtMs=null,this._lastRecordedHitCountByName={},this._lastRecordedDurationSinceLastFrame={},this._activeNamedEvents.clear(),this._singleFrameNamedEvents.clear(),this._numberOfRenderedCommentsWatermark=this._lastRecordedNumberOfRenderedComments,this._contextRestoredCount=0,this._maxRenderLayerCount=0,this._maxRenderedTileBytesUsed=0,this._numAnimationsFromCpp=0,this._numAnimationsFromTs=0,this._tsmerMetrics?.resetLogState()}getSlowFrameTracker(){return this._slowFrameTracker}refreshRate(){let e=this._distributionByWorkName.get("all");if(e){let t=e.getMode();if(t){if(t.min<9)return"120FPS";if(t.min<32)return"60FPS";if(t.min<48)return"30FPS"}}return"UNKNOWN"}estimatedRefreshRate(){let e=this._distributionByWorkName.get("all");if(e){let t=e.getMode();if(t){if(t.min<9)return{frameLength:1e3/120,fps:120};if(t.min<32)return{frameLength:1e3/60,fps:60};t.min}}return{frameLength:1e3/30,fps:30}}tsmerMetrics(){return this._tsmerMetrics}_getOrCreateDistribution(e){let t=this._distributionByWorkName.get(e);return t||(t=new o.UP,this._distributionByWorkName.set(e,t)),t}addEventTracker(e,t){this._eventTrackers.set(e,t)}addTimeEvent(e,t){this._getOrCreateDistribution(e).add(t)}trackCollectorFrameAndSample(e,t){if("ok"!==l.y.getFullscreenCrashState()||this.checkNotVisibleOrRecording()||this._isCanceled)return;let i=this._collectorSlowFrameTracker;e<6e4&&(this._getOrCreateDistribution("app_frame_time_collector").add(e),t?this._getOrCreateDistribution("collector_fullscreen_frame_time").add(e):this._getOrCreateDistribution("collector_fullscreen_idle_frame_time").add(e),i?.checkSlowFrameAndSample(e,[],0,{fileKey:this._fileKey,productType:this._productType,planTier:this._planTier,ranFullscreenLoop:t},this._gpuDeviceInfo)),i?.clearPerFrameMetricsAndIncrementFrameCounter()}writeEventTrackerDistributions(e){for(let t of this._activeNamedEvents)this._getOrCreateDistribution(t).add(e);let t=performance.now(),i=[];for(let[t,s]of this._eventTrackers)s.didEventOccur()&&(i.push(t),this._getOrCreateDistribution(t).add(e));let s=performance.now()-t;for(let t of this._singleFrameNamedEvents)this._getOrCreateDistribution(t).add(e);return this._singleFrameNamedEvents.clear(),{trackersHitThisFrame:i,trackerTotalTimeMs:s}}cancelIfTimersOpen(){return!!n.rH.areTimersOpen()&&(this._isCanceled=!0,!0)}writeAppTimerDistributions(){let e=this._processTimerTree(n.rH.report(),0,[]);for(let t of this._processTimersForLogging(e))this._getOrCreateDistribution(t.path.join(".")).add(t.elapsedTime)}logIfTwoMinutesElapsed(){null!==this._scheduledLogAtMs&&performance.now()>this._scheduledLogAtMs&&(this._logToAnalytics("two-minutes-elapsed",!0),this._resetLogState())}setNumberOfRenderedComments(e){this._lastRecordedNumberOfRenderedComments=e,this._numberOfRenderedCommentsWatermark=Math.max(e,this._numberOfRenderedCommentsWatermark)}setMultiplayerPerfInfo(e){let{multiplayerUserCount:t,ongoingSpotlight:i}=e;this._ongoingSpotlight=i,this._multiplayerUserCount=t}trackOtherUserCursorMoved(){d.R9?.setOtherUserMouseMovedCallback(()=>{this.recordSingleFrameNamedEvent("otherUserCursorMoved")})}}},394255:(e,t,i)=>{i.d(t,{C:()=>n});var s=i(716976),a=i(490094);let r=1/60*1e3;function n(e,t){let[i,n]=s.useState(0),o=s.useRef(-1);s.useEffect(()=>{t||n(0)},[t]),s.useEffect(()=>{let t;return 0===i?()=>{}:(function s(){if(!e||o.current<0)return;let a=new Date().getTime(),n=a-o.current;e.scrollTop+=n/r*i,o.current=a,t=requestAnimationFrame(s)}(),()=>{cancelAnimationFrame(t)})},[i,e]),(0,a.U3)("mousemove",s.useCallback(i=>{if(!t||!e)return;let s=e.scrollTop,{top:a,height:r}=e.getBoundingClientRect();if(r<=0)return;let l=i.clientY-a+s;l<s?(n((l-s)*.5),o.current=new Date().getTime()):l>s+r?(n((l-s-r)*.5),o.current=new Date().getTime()):(n(0),o.current=-1)},[t,e]))}},773671:(e,t,i)=>{i.d(t,{El:()=>_,T:()=>m,cL:()=>u,j_:()=>h,mH:()=>f});var s=i(356138),a=i(983016),r=i(960630),n=i(129215),o=i(321259),l=i(996262),d=i(801519),c=i(817617);let u=[d.Ey,o.v5,o.YW,n.Db,s.iK,l.jL];function m(e){let t=(0,r.g)(e),i=(0,c.W)(t,["class","dir"]);return function(e){let t=new DOMParser().parseFromString(e,"text/html");return t.querySelectorAll("ol > li").forEach(e=>{e.setAttribute("data-list","ordered")}),t.querySelectorAll("ul").forEach(e=>{let t=document.createElement("ol");t.innerHTML=(0,c.z)(e.innerHTML),e.replaceWith(t),t.querySelectorAll("li").forEach(e=>{e.setAttribute("data-list","bullet")})}),t.body.innerHTML}(i=function(e){let t=new DOMParser().parseFromString(e,"text/html");return t.querySelectorAll("pre").forEach(e=>{let t=document.createElement("div");t.classList.add("ql-code-block-container"),t.setAttribute("spellcheck","false"),e.innerHTML.replace(/<br\s*\/?>/gi,"\n").split("\n").forEach(e=>{let i=document.createElement("div");i.classList.add("ql-code-block"),i.innerHTML=(0,c.z)(e),t.appendChild(i)}),e.replaceWith(t)}),t.body.innerHTML}(i))}function p(e,t){let i=document.createElement("ordered"===t?"ol":"ul"),s=e.map(e=>e.outerHTML).join("");return i.innerHTML=(0,c.z)(s),i}function h(e){try{JSON.parse(e);let t=(0,a.D)({nodes:u});return t.setEditorState(t.parseEditorState(e)),"lexical"}catch{return"html"}}function _(e){return(0,a.D)({nodes:u,onError:e=>{console.error(e)}}).parseEditorState(e).read(()=>(0,d.Ni)().getTextContent())}function g(e){if(!e)return"";let t=new DOMParser().parseFromString(e,"text/html");return t.body.childNodes.forEach(e=>{if(e.nodeType===Node.TEXT_NODE){let t=e.textContent;if(!t||""===t.trim()){e.remove();return}let i=e.previousSibling;if(i?.nodeType===Node.ELEMENT_NODE&&"P"===i.nodeName){i.innerHTML=(0,c.z)(i.innerHTML+t),e.remove();return}let s=e.nextSibling;if(s?.nodeType===Node.ELEMENT_NODE&&"P"===s.nodeName){s.innerHTML=(0,c.z)(t+s.innerHTML),e.remove();return}let a=document.createElement("p");a.textContent=t.trim(),e.replaceWith(a)}else if(e.nodeType===Node.ELEMENT_NODE&&["STRONG","I","EM","S","CODE","BR"].includes(e.tagName)){let t=document.createElement("p");e.replaceWith(t),t.appendChild(e)}}),t.body.innerHTML.replace(/(\r\n|\n|\r)/gm,"<br>")}function f(e){let t=new DOMParser,i=(0,c.z)(g(e)),s=(0,c.z)(g(i)),a=t.parseFromString(s,"text/html");return!function(e){e.querySelectorAll("div.ql-code-block-container").forEach(e=>{let t=document.createElement("pre"),i=e.querySelectorAll("div.ql-code-block");i.forEach((e,s)=>{let a=document.createElement("span");a.innerHTML=(0,c.z)(e.innerHTML),t.appendChild(a),s<i.length-1&&t.appendChild(document.createElement("br"))}),e.replaceWith(t)})}(a),!function(e){e.querySelectorAll("ol").forEach(e=>{let t=[],i=e.querySelectorAll("li"),s=[],a=null;for(let e of i){if(!a&&!(a=e.getAttribute("data-list")))return;a!==e.getAttribute("data-list")&&(t.push(p(s,a)),s=[],a=e.getAttribute("data-list")),s.push(e)}s&&t.push(p(s,a)),e.replaceWith(...t)})}(a),!function(e){let t=e.body.lastElementChild;t&&"P"===t.nodeName&&"<br>"===t.innerHTML&&t.remove()}(a),a}},279774:(e,t,i)=>{i.d(t,{H:()=>s.H,Qw:()=>s.Qw});var s=i(88839)},355448:(e,t,i)=>{i.d(t,{BO:()=>h,I:()=>x,Rh:()=>m,S3:()=>p,aD:()=>g,oY:()=>b,rI:()=>_,rw:()=>f});var s=i(716976),a=i(572913),r=i(936209),n=i(24989),o=i(890),l=i(641567),d=i(56857),c=i(524088);let u=(0,o.Ay)().figma_url??"";async function m(e,t={}){await d.Ay.crossOriginPost(`${u}/api/web_logger/metrics/${e}`,{tags:[...(0,c.Z)(),...(0,c.J)(t)].join(",")},{rawResponse:!0})}function p(e,t,i={}){d.Ay.crossOriginPost(`${u}/api/web_logger/histogram/${e}`,{value:t,tags:[...(0,c.Z)(),...(0,c.J)(i)].join(",")},{rawResponse:!0}).catch(e=>{e.status>=400&&e.status<500&&(0,l.$D)(n.e.DATA_INFRA,e)})}async function h(e){e.length>0&&await d.Ay.crossOriginPost(`${u}/api/web_logger/metrics_batched`,e.map(e=>({metric:e.metric,tags:[...(0,c.Z)(),...(0,c.J)(e.tags)].join(",")})),{rawResponse:!0})}async function _(e){if(e.length>0)return await d.Ay.crossOriginPost(`${u}/api/web_logger/histogram_batched`,e.map(e=>({metric:e.metric,value:e.value,tags:[...(0,c.Z)(),...(0,c.J)(e.tags)].join(",")})),{rawResponse:!0})}let g=p;class f{constructor(e={},t){if(this._startTime=performance.now(),this._timerId=null,this.metadata=null,this.finished=!1,this.onVisibilityChange=()=>{"hidden"===document.visibilityState&&(this._backgrounded=!0)},this.onOffline=()=>{this._offlined=!0},this.stop=(e,t)=>{let i,s;let r=t?.skipIfIdle===void 0||!0===t.skipIfIdle;if(this.finished)return;this._timerId&&clearTimeout(this._timerId),this.finished=!0,this._usePageStateMonitor||(document.removeEventListener("visibilitychange",this.onVisibilityChange),document.removeEventListener("offline",this.onOffline));let n=Math.round(performance.now()-this._startTime);if(this._usePageStateMonitor?(i=a.Z.getInstance().wasBackgrounded(this._startTime,n),s=a.Z.getInstance().wasOffline(this._startTime,n)):(i=this._backgrounded,s=this._offlined),!i&&!s||!r)return e(n,i,s)},this._usePageStateMonitor=r.v.getFeatureGate("page_state_monitor_metrics_timer"),this._usePageStateMonitor?(this._backgrounded=a.Z.getInstance().wasBackgrounded(this._startTime),this._offlined=a.Z.getInstance().wasOffline(this._startTime)):(this._backgrounded="hidden"===document.visibilityState,this._offlined=!1===navigator.onLine,document.addEventListener("visibilitychange",this.onVisibilityChange),document.addEventListener("offline",this.onOffline)),t&&(this.metadata=t),e.onTimeout){if(!e.timeoutMs)throw Error("onTimeout specified without timeoutMs");this._timerId=setTimeout(()=>{let t,i;this.finished||(this._usePageStateMonitor?(t=a.Z.getInstance().wasBackgrounded(this._startTime,e.timeoutMs),i=a.Z.getInstance().wasOffline(this._startTime,e.timeoutMs)):(t=this._backgrounded,i=this._offlined),e.onTimeout(t,i))},e.timeoutMs)}}get backgrounded(){return this._usePageStateMonitor&&!this._backgrounded&&(this._backgrounded=a.Z.getInstance().wasBackgrounded(this._startTime)),this._backgrounded}get offlined(){return this._usePageStateMonitor&&!this._offlined&&(this._offlined=a.Z.getInstance().wasOffline(this._startTime)),this._offlined}}function x(e,t,i){let a=i?.enabled??!0,r=s.useRef(null);a&&!r.current&&(r.current=new f(i));let n=s.useRef(!1);!n.current&&e&&r.current&&(r.current.stop(t,{skipIfIdle:!1}),n.current=!0)}function b(e,t,i){let a=s.useRef(void 0);a.current||(a.current=new f);let r=s.useRef(!1);s.useEffect(()=>{!r.current&&e&&(a.current.stop(e=>t(e),i),r.current=!0)},[e,t,i])}},851087:(e,t,i)=>{i.d(t,{N:()=>c});var s=i(906338),a=i(24989),r=i(278995),n=i(59881),o=i(537550),l=i(186619);let d=class e{constructor(e,t,i,s=null,a=!1,r="slow_frame_tracker"){this.isPrototypingFrameTracker=e,this.addPerFrameMetricsCallback=t,this.clearPerFrameMetricsCallback=i,this.isImageExportFrameCallback=s,this.enableRumTracking=a,this.analyticsEventName=r,this.frameNumber=0,this.lastSampledFrame=0,this.forceNextFrameToBeSampled=!1}incrementFrameCounter(){this.frameNumber++}checkSlowFrameAndSample(t,i,s,a,r){let n=this.isImageExportFrameCallback?.()??!1,o=this.forceNextFrameToBeSampled||n,l=1;t<300&&!o&&(l=t<1?e.sampleRateUpTo1ms:t<9?e.sampleRateUpTo9ms:t<17?e.sampleRateUpTo17ms:t<19?e.sampleRateUpTo19ms:t<20?e.sampleRateUpTo20ms:t<23?e.sampleRateUpTo23ms:t<25?e.sampleRateUpTo25ms:t<29?e.sampleRateUpTo29ms:t<32?e.sampleRateUpTo32ms:t<48?e.sampleRateUpTo48ms:t<64?e.sampleRateUpTo64ms:t<80?e.sampleRateUpTo80ms:t<100?e.sampleRateUpTo100ms:e.sampleRateUpTo300ms),this.forceNextFrameToBeSampled=t>=e.unsampledFrameTimeMs,(o||this.forceNextFrameToBeSampled||l>Math.random())&&this.sampleFrame(t,l,o,n,i,s,a,t>=e.unsampledFrameTimeMs,r)}clearPerFrameMetricsAndIncrementFrameCounter(){this.incrementFrameCounter(),this.clearPerFrameMetricsCallback()}sampleFrame(t,i,d,c,u,m,p,h,_){let g={};g.frameTimeMs=t,g.frameSamplingRate=i,g.protoSlowFrameTracker=this.isPrototypingFrameTracker,g.frameNumber=this.frameNumber,g.frameWasForceSampled=d,g.isImageExportFrame=c,g.trackersHit=u,g.trackerTotalTimeMs=m,g.fileKey=p.fileKey,g.productType=p.productType,g.planTier=p.planTier,"ranFullscreenLoop"in p&&(g.ranFullscreenLoop=p.ranFullscreenLoop),g.lastCheckpointSize=r.CeL?.getServerSideLoadTimeMetadata()?.lastCheckpointSize,(0,l.q)(_,g);let f=this.lastSampledFrame<this.frameNumber-1;this.addPerFrameMetricsCallback(g,f),this.lastSampledFrame=this.frameNumber,setTimeout(()=>{(0,n.sx)(this.analyticsEventName,g,{...e.loggerOptions,forwardToDatadog:h}),this.enableRumTracking&&t>=e.unsampledFrameTimeMs&&o.J.addAction("slowFrameThresholdExceeded",a.e.PRODUCTION_ENGINEERING,s.$b.WARN,{slowFrame:{...g,frameTimeMs:t,frameTimeThresholdMs:e.unsampledFrameTimeMs}})},0)}getDrawCallsForGuardrails(){return 0}};d.optimizationExposuresKey="optimizationExposures",d.gpuMetricsCurrentFrameKey="gpuMetricsCurrentFrame",d.gpuMetricsPreviousFrameKey="gpuMetricsPreviousFrame",d.cpuTimerTreeCurrentFrameKey="cpuTimerTreeCurrentFrame",d.cpuTimerTreePreviousFrameKey="cpuTimerTreePreviousFrame",d.activeAnimationsKey="activeAnimations",d.numberOfDevAnnotationsVisibleKey="numberOfDevAnnotationsVisible",d.sampleRateUpTo1ms=.00224,d.sampleRateUpTo9ms=7e-4/15,d.sampleRateUpTo17ms=4e-4/15,d.sampleRateUpTo19ms=.0016/15,d.sampleRateUpTo20ms=58e-5,d.sampleRateUpTo23ms=.0076/15,d.sampleRateUpTo25ms=.00186,d.sampleRateUpTo29ms=.00156,d.sampleRateUpTo32ms=.0338/15,d.sampleRateUpTo48ms=.0113/15,d.sampleRateUpTo64ms=.0585/15,d.sampleRateUpTo80ms=.1204/15,d.sampleRateUpTo100ms=.2134/15,d.sampleRateUpTo300ms=.2134/30,d.unsampledFrameTimeMs=300,d.loggerOptions={forwardToDatadog:!1,batchRequest:!0};let c=d},361044:(e,t,i)=>{i.d(t,{Fe:()=>a,aB:()=>r,o$:()=>o,uz:()=>n});var s=i(38989);async function a(){return{videoJs:((0,s.kc)().slides_videojs_upgrade?await i.e(3997).then(i.t.bind(i,147926,23)):await i.e(7225).then(i.t.bind(i,892228,23))).default}}class r extends Error{}function n(e,t,i){return new Promise((s,a)=>e?i?(i.one("loadedmetadata",s),i.one("error",()=>{let e=i.error();a(new r(e?`(${e.code}) ${e.message}`:void 0))}),void i.src({type:t?"application/x-mpegURL":"video/mp4",src:e})):a(new r("Invalid video player")):a(new r("Missing video src")))}function o(e,t,i,s){return e?.videoJs?e.videoJs(t,i,s):null}},834934:(e,t,i)=>{i.d(t,{O:()=>d,J:()=>c});var s=i(104076),a=i(716976),r=i(152089),n=i(468882);let o="devtools_error_overlay--title--lz3QU",l="devtools_error_overlay--subtitle--5P0ak";var d=(e=>(e.STALE="stale",e.ERROR="error",e.SOFT_DELETED="soft_deleted",e))(d||{});function c({location:e,message:t,type:i}){let[d,c]=a.useState(!1),u=a.useRef(null);return a.useEffect(()=>{if(!u.current)return;let e=new ResizeObserver(e=>{for(let t of e){let{width:e,height:i}=t.contentRect;c(e<196||i<100)}});return e.observe(u.current),()=>{e.disconnect()}},[]),(0,s.jsxs)("div",{ref:u,className:`devtools_error_overlay--error--F5t0F ${d?"devtools_error_overlay--smallSize--aMlgI":""}`,"data-testid":"devtools-error-overlay",children:[(0,s.jsx)(r.i,{}),"window"===e?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:o,children:t??(0,n.tx)("sites.code_component.error_overlay_title")}),(0,s.jsx)("div",{className:l,children:(0,n.tx)("sites.code_component.error_overlay_subtitle_window")})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:o,children:["stale"===i&&(0,n.tx)("sites.code_component.error_overlay_title_stale"),"error"===i&&(0,n.tx)("sites.code_component.error_overlay_title"),"soft_deleted"===i&&(0,n.tx)("sites.code_component.error_overlay_title_soft_deleted")]}),(0,s.jsxs)("div",{className:l,children:["stale"===i&&(0,n.tx)("sites.code_component.error_overlay_subtitle_canvas_stale"),"error"===i&&(0,n.tx)("sites.code_component.error_overlay_subtitle_canvas")]})]})]})}},153305:(e,t,i)=>{i.d(t,{d:()=>r,n:()=>a});var s=i(152469);function a(e,t){if(!e)return;let i=(0,s.N)().getEntryByGUID(t.guid);return i?.entrypointIdentifier??void 0}function r(e){return e.isCodeInstance||e.isCodeBehavior||e.isAnimationPresetInstance?e.backingCodeComponent?.codeExportName||"default":e.codeExportName||"default"}},241207:(e,t,i)=>{i.d(t,{t:()=>a});var s=i(38989);function a(){let e=(0,s.kc)();return!!(e.make_foundry_ui_org||e.make_foundry_ui_pro||e.make_foundry_ui_starter)}},527578:(e,t,i)=>{i.d(t,{x:()=>r});var s=i(414393),a=i(367773);function r(e,t){switch(e?.state){case void 0:case a.TT.FAILED:case a.TT.PROVISIONING:case a.TT.REPROVISIONING:return null;case a.TT.CACHED_PREVIEW:return{type:"snapshot",jsUrl:e.cachedPreview.jsUrl,cssUrl:e.cachedPreview.cssUrl,codeFileExportName:t||"default"};case a.TT.PROVISIONED:return{type:"sandbox",jsUrl:e.url,codeFileExportName:t||"default"};default:return(0,s.S9)(e,null)}}},109021:(e,t,i)=>{i.d(t,{_n:()=>r,eC:()=>a,yg:()=>n});var s=i(541870);let{bundleCode:a,fileSaveLocalCopySemaphore:r,fileImportSemaphore:n}={bundleCode:new s.j(3),fileSaveLocalCopySemaphore:new s.j(5),fileImportSemaphore:new s.j(20)}},196941:(e,t,i)=>{i.d(t,{Kf:()=>r,_G:()=>n,nb:()=>a});var s=i(536760);let a=(0,s.eU)(""),r=(0,s.eU)(!1),n=(0,s.eU)(null)},590062:(e,t,i)=>{i.d(t,{Iu:()=>U,MZ:()=>I,Ng:()=>k,P8:()=>w,PG:()=>O,cT:()=>R,f1:()=>L,mI:()=>F,qF:()=>N,q_:()=>B,vr:()=>P});var s=i(653155),a=i(468882),r=i(38989),n=i(536760),o=i(59881),l=i(422411),d=i(300987),c=i(908397),u=i(377899),m=i(890),p=i(791261),h=i(211898),_=i(452062),g=i(56857),f=i(375048),x=i(196941),b=i(453901),y=i(797950),E=i(624707),A=i(622038),v=i(533222),T=i(448160),S=i(887389);function I(){return null===document.querySelector('[data-component-name="auth-view"]')}let w=(0,v.nF)((e,{resp:t})=>{let i,r;let n=e.getState(),o=t.data;if(o&&o.reason&&"object"==typeof o.reason){if("mfa_required_by_org"===o.reason.missing&&o.reason.mfa_setup_token){c.Ay.redirect(`/mfa_auth?mfa_setup_token=${o.reason.mfa_setup_token}`);return}if("two_factor"===o.reason.missing){let t;e.dispatch(f.IY(o.reason.sms)),o.reason.phone_number&&(t=(0,a.t)("auth.two-factor.sms-hint",{phoneNumber:o.reason.phone_number}),e.dispatch(f.kQ({hint:t})));let i=n.auth.formState===b.qB.SIGN_IN||n.auth.formState===b.qB.RESET_PASSWORD?n.auth.formState:b.qB.SIGN_IN;e.dispatch(f.LP({kind:i}));return}}let l=(0,s.J)(t,o?.message||(0,a.t)("auth.default-error"));if(o?.reason==="account_unverified"){e.dispatch(f.E({formState:b.qB.VALIDATE_EMAIL}));return}if(o?.reason==="account_suspended"){window.location.href="/blocked.html";return}t&&401===t.status?i=b.By.UNAUTHORIZED:t&&400===t.status?i=b.By.BAD_REQUEST:t&&404===t.status&&"no_saml"===o.reason?i=b.By.NO_SAML:t&&404===t.status&&"magic_link_login_no_account"===o.reason?i=b.By.MAGIC_LINK_LOGIN_NO_ACCOUNT:t&&403===t.status&&"saml_required"===o.reason&&(i=b.By.SAML_REQUIRED),n.auth.formState===b.qB.TWO_FACTOR&&n.auth.twoFactorPromptedBy===b.qB.SIGN_IN?r=b.RE.TOTP_KEY:n.auth.formState===b.qB.RESET_PASSWORD?r=b.RE.PASSWORD:o&&o.reason&&"object"==typeof o.reason&&("password"===o.reason.missing||"password"===o.reason.invalid)?r=b.RE.PASSWORD:n.auth.formState===b.qB.SAML_START&&(r=b.RE.EMAIL),n.auth.formState===b.qB.VERIFY_HUMAN&&n.auth.prevForm!==b.qB.VERIFY_HUMAN&&e.dispatch(f.E({formState:n.auth.prevForm})),e.dispatch(f.Qg({message:l,errorType:i,invalidInput:r}))}),R=(0,v.nF)((e,{data:t})=>{let i=e.getState();if((0,E.p)("sign_in_user_pass"),(0,y.g)("sign_in_success",i.auth.origin,{user_id:t?.meta?.id}),(0,m.tl)().integration_host&&(0,o.sx)("Integration Login Success",{user_id:t?.meta?.id,integrationHost:(0,m.tl)().integration_host,trackedContext:T.e0.MS_TEAMS_TAB}),N(t,i.auth.redirectUrl)){let i=t.meta.id;e.dispatch(f.Em({userId:i}))}else"design_pricing"===i.auth.signupSource&&e.dispatch(f.WY({redirectUrl:"/upgrade-team"})),e.dispatch(f.My({userId:t.meta.id})),e.dispatch(A.s.flash((0,a.t)("auth.sign-in-success",{email:t.meta.email}))),new p.P().sendToOtherTabs(u.Rg,t.meta.email)});function N(e,t){if(t?.includes("/email/validate"))return!1;let i="email_validated_at";return e.meta.hasOwnProperty(i)&&null===e.meta[i]}let C=["logged_out_footer_continue_with_google","logged_out_footer","request_permissions_entry","google_one_tap_logged_out_file","logged_out_main_menu_toolbar","prototype_header_nav","prototype_comment_signed_out","team_invite_link","claim_invite","account_picker","signed_out_edit","saml_sso","figma_rev_logged_out_footer_continue_with_google","figma_rev_logged_out_header","figma_rev_logged_out_header_with_google","figma_rev_logged_out_footer","google_one_tap_prototype","prototype_header_nav_google_sso","slides_presentation_header_nav_google_sso","mobile_viewer_logged_out_footer"];function O(e){let t=e.email&&e.email.trim();return M(e.password&&e.password.trim(),t)}function k(e){let t=e.email&&e.email.trim(),i=e.password&&e.password.trim(),s=e.name&&e.name.trim(),a=M(i,t);return a.message||(a=D(i,t,s)),a}function L(e){return j(e.email&&e.email.trim())}let j=e=>e?(0,l.xf)(e)?{message:"",invalidInput:null}:{message:(0,a.t)("auth.input-validation.invalid-email"),invalidInput:b.RE.EMAIL}:{message:(0,a.t)("auth.input-validation.no-email"),invalidInput:b.RE.EMAIL},M=(e,t)=>{let i=j(t);return i.message?i:e?{message:"",invalidInput:null}:{message:(0,a.t)("auth.input-validation.no-password"),invalidInput:b.RE.PASSWORD}},F=(e="")=>!!(0,h.qg)(c.Ay.location.search).is_not_gen_0||e&&C.includes(e),D=(e,t,i)=>{let s="";return(0,_.YH)(e).length>500&&(s=(0,a.t)("auth.input-validation.long-password")),Array.from(e).length<8&&(s=(0,a.t)("auth.input-validation.short-password")),e===t&&(s=(0,a.t)("auth.input-validation.email-is-password")),i&&e===i&&(s=(0,a.t)("auth.input-validation.name-is-password")),s?{message:s,invalidInput:b.RE.PASSWORD}:{message:"",invalidInput:null}};function P({url:e,cont:t}){let i=new URL(e);i.searchParams.set("cont",t),c.Ay.redirect(i.toString())}let B=(0,v.nF)((e,{formId:t})=>{(0,y.g)("sms_recover_attempt",e.getState().auth.origin);let i=document.getElementById(t),s=(0,d.t)(i),o=null,l=n.zl.get(x._G);o=l?{name:l.name,token:l.token,token_type:l.tokenType,google_fed_cm_enabled:(0,r.kc)().google_federated_cm??!1}:s,g.Ay.post("/api/session/sms_recover",o).then(({data:t})=>{(0,y.g)("sms_recover_success",e.getState().auth.origin),t&&t.meta&&e.dispatch(f.kQ({hint:(0,a.t)("auth.two-factor.code-hint-confirmation",{phoneNumber:t.meta.phone_number})}))}).catch(t=>e.dispatch(w({resp:t})))});async function U(e,t){let{data:{meta:{available_methods:i}}}=await (0,S.L)().getAuthMethods(e,t);if(1===i.length&&"google"===i[0])return"google";if(1===i.length&&"saml"===i[0])return"saml";if(i.includes("sign_in"))return"sign_in";if(i.includes("sign_up"))return"sign_up";throw Error("Unknown authentication action")}},852455:(e,t,i)=>{let s;i.d(t,{Hc:()=>H,p8:()=>P,sT:()=>$});var a=i(104076),r=i(716976),n=i(24989),o=i(611290),l=i(473824),d=i(59881),c=i(359081),u=i(890),m=i(641567),p=i(458432),h=i(872798),_=i(734378),g=i(644276),f=(e=>(e.FRAME_MOUNTED="frame-mounted",e.JS_LOADED="js-loaded",e.CHALLENGE_LOADED="loaded",e.CHALLENGE_SUPPRESSED="suppressed",e.CHALLENGE_SHOWN="challenged",e.IFRAMESIZE="iframesize",e.COMPLETED="completed",e.ERRORED="errored",e.LOAD_TIMED_OUT="timed-out",e.ARKOSE_IS_OFF_FOR_USER="arkose-is-off-for-user",e))(f||{}),x=(e=>(e.FRAME_FAILED_TO_LOAD_IN_TIME="frame failed to load in time",e.GETTING_ARKOSE_TOKEN_FAILED_BECAUSE_ARKOSE_FRAME_NOT_MOUNTED="getArkoseToken failed because Arkose frame was never mounted",e.GETTING_ARKOSE_TOKEN_FAILED_BECAUSE_ARKOSE_FAILED="getArkoseToken failed because Arkose failed",e.GETTING_ARKOSE_TOKEN_FAILED_BECAUSE_ARKOSE_IS_OFF_FOR_USER="getArkoseToken failed because Arkose is off for user",e.MISSING_ARKOSE_TOKEN_WHEN_GETTING_ARKOSE_TOKEN="getArkoseToken missing token despite frame being ready",e.GETTING_ARKOSE_TOKEN_SUCCEEDED="success",e))(x||{}),b=(e=>(e.ERROR_HANDLING_MESSAGE="error handling message",e))(b||{}),y=(e=>(e.REACHABILITY="reachability",e))(y||{}),E=(e=>(e.IS_ARKOSE_ON_API_CALL_FAILED="Is Arkose On API call failed",e.IS_ARKOSE_ON="Is Arkose On",e))(E||{});let A={...f,...x,...b,...y,...E};var v=(e=>(e.CHALLENGE_JS_LOADED="challenge-js-loaded",e.CHALLENGE_LOADED="challenge-loaded",e.CHALLENGE_SUPPRESSED="challenge-suppressed",e.CHALLENGE_SHOWN="challenge-shown",e.CHALLENGE_IFRAMESIZE="challenge-iframesize",e.CHALLENGE_COMPLETE="challenge-complete",e.CHALLENGE_ERROR="challenge-error",e))(v||{});let T={"challenge-js-loaded":"js-loaded","challenge-loaded":"loaded","challenge-suppressed":"suppressed","challenge-shown":"challenged","challenge-iframesize":"iframesize","challenge-complete":"completed","challenge-error":"errored"},S=()=>!I()&&!w()&&!N(),I=()=>"undefined"==typeof window||void 0===window.arkose,w=()=>"frame-mounted"===window.arkose,R=()=>"arkose-is-off-for-user"===window.arkose,N=()=>C()||O(),C=()=>"errored"===window.arkose,O=()=>"timed-out"===window.arkose,k=()=>"completed"===window.arkose,L=new l.eu,j=(0,_.Do)(e=>e?864e5:1e4),M=(0,_.Do)(()=>new Date().getTime()),F=(0,_.Do)(()=>!(0,o.Lg)()),D=({event:e,prevFormState:t,getArkoseTokenAction:i,error:s,reachability:a,isArkoseOnAPICheckError:r,arkoseIsOnForUserProperties:n})=>{if("iframesize"===e)return;let o=e.toString();(e===A.ERRORED||e===A.ERROR_HANDLING_MESSAGE)&&s&&(o=`${e}: ${s}`);let l={arkose_event:o};void 0!==window.mountTime&&(l.elapsed_time_since_mount_in_ms=M()-window.mountTime),t&&(l.prev_form_state=t.toString()),i&&(l.get_arkose_token_action=String(i)),r&&(l.is_arkose_on_api_check_action=String(r.action),l.is_arkose_on_api_check_auth_param=r.authParam,l.is_arkose_on_api_check_error=r.error,l.is_arkose_on_api_check_error_status=r.status),n&&(l.arkose_is_on_for_user_action=String(n.action),l.arkose_is_on_for_user_result_from_api=n.resultFromAPI,l.arkose_is_required_from_api=n.requiredFromAPI),e===A.REACHABILITY&&a&&(l.reachability=Object.entries(a).map(e=>`${e[0]}|${e[1]}`).join(",")),F()&&(0,d.sx)("Arkose",l,{forwardToDatadog:!0,batchRequest:!1})};function P(e){let t,i;let s=r.useRef(null),n=t=>{let i;if(N())return;let s=JSON.parse(t.data);if(!Object.values(v).includes(s.eventId))return;let a=T[i=s.eventId];switch(window.arkose=a.toString(),D({event:a,prevFormState:e.prevFormState,error:s.payload.error?.error}),i){case"challenge-loaded":e.onLoaded();break;case"challenge-shown":e.onChallenge();break;case"challenge-iframesize":let r=document.getElementById("arkoseFrame");r&&(r.width=s.payload.frameWidth,r.height=s.payload.frameHeight);break;case"challenge-complete":window.arkoseResult=s.payload.sessionToken,e.onCompleted();break;case"challenge-error":window.arkoseResult=a.toString()}},o=t=>{t.origin===(0,u.tl)().arkose_origin&&L.runExclusive(()=>{n(t)}).catch(t=>{D({event:A.ERROR_HANDLING_MESSAGE,prevFormState:e.prevFormState,error:t})})},l=async(s,a)=>await L.runExclusive(async()=>{if(i)throw i;if(t)return t;try{t=await G(s,e.prevFormState,a)}catch(e){throw i=e,e}return D({event:A.IS_ARKOSE_ON,arkoseIsOnForUserProperties:{action:s,resultFromAPI:t.arkose_on_for_user,requiredFromAPI:t.arkose_required_for_user}}),t});(0,c.h)(()=>{l(e.arkoseAction,e.onFailed).then(t=>{t.arkose_on_for_user&&B(e.prevFormState)}).catch(e=>{})}),(0,c.h)(()=>{let t=()=>{window.removeEventListener("message",o)};return l(e.arkoseAction,e.onFailed).then(t=>{t.arkose_on_for_user?(window.addEventListener("message",o),V(e,s,t.arkose_required_for_user)):(window.arkose="arkose-is-off-for-user",e.onCompleted())}).catch(e=>{if(t(),(0,u.b5)())throw e}),t});let d=(0,h.Gq)().getPrimaryLocale(!1),m=(0,u.tl)().arkose_challenge_public_key,p=(0,u.tl)().arkose_frame_url+"?publicKey="+m+"&locale="+d;return(0,a.jsx)("div",{className:g.i,children:(0,a.jsx)("iframe",{id:"arkoseFrame",height:0,width:0,src:p,title:"Arkose Frame",className:g.$})})}let B=(0,_.Do)(e=>{let t=(0,u.tl)().arkose_challenge_public_key,i=["https://www.arkoselabs.com","https://status.arkoselabs.com","https://status.arkoselabs.com/api/v2/status.json",`https://figma-api.arkoselabs.com/v2/${t}/api.js`,(0,u.tl)().arkose_frame_url,"https://verify.figma.com/arkose_frame.html"];Promise.allSettled(i.map(e=>U(e))).then(t=>{let s={};t.forEach((e,t)=>{s[i[t]]="fulfilled"===e.status}),D({event:A.REACHABILITY,prevFormState:e,reachability:s})})}),U=(0,_.Do)(async e=>{try{return await fetch(e,{method:"HEAD",mode:"no-cors"}),Promise.resolve()}catch(e){return Promise.reject()}}),V=(0,_.Do)((e,t,i)=>{Object.defineProperty(window,"mountTime",{value:M(),configurable:!0,enumerable:!0}),Promise.race([new Promise((s,a)=>{t.current=setTimeout(()=>{L.runExclusive(()=>{S()?s(window.arkose):(delete window.arkose,window.arkose="timed-out",D({event:A.FRAME_FAILED_TO_LOAD_IN_TIME,prevFormState:e.prevFormState}),a(Error("Arkose script failed to load.")))}).then(null)},j(i))}),new Promise((e,t)=>{Object.defineProperty(window,"arkose",{get:()=>"frame-mounted",set:i=>{L.runExclusive(()=>{delete window.arkose,window.arkose=i,N()?t(Error("Arkose script failed to load.")):e(i)}).then(null)},configurable:!0,enumerable:!0})})]).then(null,t=>{window.arkoseResult=window.arkose,e.onCompleted()}).finally(()=>{z(t)})}),z=(0,_.Do)(e=>{null!==e.current&&(clearTimeout(e.current),e.current=null)});async function H(e,t){let i;return await L.runExclusive(()=>{i=R()?(D({event:A.GETTING_ARKOSE_TOKEN_FAILED_BECAUSE_ARKOSE_IS_OFF_FOR_USER,prevFormState:t,getArkoseTokenAction:e}),Promise.reject(Error("Can't get token because Arkose is off for the user"))):I()?(D({event:A.GETTING_ARKOSE_TOKEN_FAILED_BECAUSE_ARKOSE_FRAME_NOT_MOUNTED,prevFormState:t,getArkoseTokenAction:e}),Promise.reject(Error("Can't get token because Arkose frame was never mounted"))):N()?(D({event:A.GETTING_ARKOSE_TOKEN_FAILED_BECAUSE_ARKOSE_FAILED,prevFormState:t,getArkoseTokenAction:e}),Promise.reject(Error("Can't get token because Arkose challenge failed"))):k()?void 0===window.arkoseResult||null===window.arkoseResult?(D({event:A.MISSING_ARKOSE_TOKEN_WHEN_GETTING_ARKOSE_TOKEN,prevFormState:t,getArkoseTokenAction:e}),Promise.reject(Error("Arkose token missing despite challenge being completed!"))):(D({event:A.GETTING_ARKOSE_TOKEN_SUCCEEDED,prevFormState:t,getArkoseTokenAction:e}),Promise.resolve(window.arkoseResult)):new Promise((i,s)=>{Object.defineProperty(window,"arkoseResult",{set:a=>{L.runExclusive(()=>{null!=a&&(N()?(D({event:A.GETTING_ARKOSE_TOKEN_FAILED_BECAUSE_ARKOSE_FAILED,prevFormState:t,getArkoseTokenAction:e}),s(Error("Can't get token because Arkose challenge failed"))):(delete window.arkoseResult,window.arkoseResult=a,D({event:A.GETTING_ARKOSE_TOKEN_SUCCEEDED,prevFormState:t,getArkoseTokenAction:e}),i(a)))}).then(null)},configurable:!0,enumerable:!0})})}),i}async function $(e){await L.runExclusive(()=>{s="email"in e?{email:e.email}:{token:e.googleUserInfo.token,token_type:e.googleUserInfo.tokenType}})}async function G(e,t,i){let a,r;if(s&&0!==Object.keys(s).length)try{return(await p._.isArkoseOn({...s,captcha_action:e})).data.meta}catch(t){a=t,r=t.cause?.message||t.data?.message||t.message||"Arkose API call failed",D({event:A.IS_ARKOSE_ON_API_CALL_FAILED,isArkoseOnAPICheckError:{action:e,authParam:"email"in s?"email":"google_token",error:r,status:t.status}})}else a=Error(r=`Arkose API param is not set or empty for '${t}' form state.`),D({event:A.IS_ARKOSE_ON_API_CALL_FAILED,isArkoseOnAPICheckError:{action:e,error:r}});throw i(a,r),(0,m.$D)(n.e.PRODUCT_SECURITY,Error(r)),a}},624707:(e,t,i)=>{i.d(t,{p:()=>r});var s=i(59881),a=i(341922);async function r(e){(0,s.sx)("passkey_support",{flow:e,supports_webauthn:(0,a.D)(),supports_mediation:await (0,a.r)()},{batchRequest:!1})}},764059:(e,t,i)=>{i.d(t,{T:()=>n});var s=i(104076),a=i(716976),r=i(872798);let n=a.memo(function(e){let t=e.locale||(0,r.Gq)().getPrimaryLocale(!1),i=a.useMemo(()=>new Intl.ListFormat(t,{style:e.formatStyle||"long",type:e.formatType||"conjunction"}),[t,e.formatStyle,e.formatType]),n=a.Children.toArray(e.children),o=i.formatToParts(n.map((e,t)=>`${t}`)).map((e,t)=>"element"===e.type?n[Number(e.value)]:"literal"===e.type?(0,s.jsx)("span",{children:e.value},`${t}_literal`):null);return(0,s.jsx)("span",{className:e.className||"",children:o})})},52667:(e,t,i)=>{i.d(t,{V:()=>b});var s=i(104076),a=i(716976),r=i(730275),n=i(536760),o=i(511570),l=i.n(o),d=i(147186),c=i(34108),u=i(748399),m=i(153367),p=i(293675),h=i(818727),_=i(213242),g=i(892283),f=i(845788);let x=(0,n.eU)({});function b({thumbnailUrl:e,thumbnailType:t,lastTouchedAt:i,clientMeta:o,size:b,borderRadius:y,noBorder:E,addtlStyles:A,draggable:v,disableSmartBackground:T,hideUntilLoaded:S=!0,overlay:I}){let w=!T&&t!==h.F.DEFAULT_DESIGN&&t!==h.F.DEFAULT_WHITEBOARD&&t!==h.F.SLIDES&&t!==h.F.COOPER,{latestThumbnailUrl:R,smartBackgroundColor:N}=function({touchedAt:e,thumbnailUrl:t,needsSmartBackground:i}){let[s,r]=(0,n.fp)(x),o=!e||(0,d.A)(e).isBefore((0,d.A)().subtract(4,"seconds")),l=!i||t&&!!s[t],[c,u]=a.useState(o&&t&&l?t:null),m=a.useCallback(e=>{if(!i||s[e])u(e);else{let t=new Image;t.crossOrigin="anonymous",t.className=_.s.fixed.hidden.$,t.onload=()=>{let i=(0,g.J)(t);i&&r(t=>({...t,[e]:i})),u(e),t.remove()},t.src=e,document.body.appendChild(t)}},[u,i,s,r]);a.useLayoutEffect(()=>{if(t){if(e){let i=(0,d.A)(e).diff((0,d.A)().subtract(4,"seconds"));if(i<=0){m(t);return}{let e=setTimeout(()=>{m(t)},i);return()=>clearTimeout(e)}}m(t)}else u(null)},[e,t,m]);let p=i&&c?s[c]:void 0;return{latestThumbnailUrl:c,smartBackgroundColor:p}}({thumbnailUrl:e,touchedAt:i,needsSmartBackground:w});if(t===h.F.OFFLINE)return(0,s.jsx)(m.A,{size:b,borderRadius:y,noBorder:E});let C=t!==h.F.SLIDES?(0,r.C)(o):void 0,O=t===h.F.DEFAULT_DESIGN||t===h.F.DEFAULT_WHITEBOARD||t===h.F.COOPER;return(0,s.jsxs)(p.q,{borderRadius:y,backgroundClassName:l()({[f.Kf]:t===h.F.WHITEBOARD||t===h.F.DEFAULT_WHITEBOARD,[f._k]:t===h.F.DEFAULT_DESIGN&&(!C||"transparent"===C),[f.gc]:t===h.F.PROTOTYPE||t===h.F.SLIDES||t===h.F.SITES&&!(w&&N)&&(!C||"transparent"===C)}),noBorder:E,backgroundColor:w?N:C,children:[null!==R&&(0,s.jsx)(c.B,{enabled:S,children:(0,s.jsx)(u.oW,{src:R,alt:"",draggable:!!v,className:l()(_.s.hFull.wFull.$,f.pQ,{[_.s.p10.$]:O&&b!==h.y.SMALL,[_.s.p4.$]:O&&b===h.y.SMALL,[_.s.py12.$]:O&&t===h.F.COOPER,[_.s.px6.$]:O&&t===h.F.COOPER}),...T?{}:{crossOrigin:"anonymous"},additionalTrackingProperties:{thumbnailFileType:t},style:A})}),I]})}},713309:(e,t,i)=>{i.d(t,{Y:()=>u,d:()=>m});var s=i(104076),a=i(716976),r=i(567252),n=i(920983),o=i(139537),l=i(626660);let d="184px";function c({height:e,width:t}){return(0,s.jsx)("div",{style:l.sx.flex.itemsCenter.justifyCenter.add({width:t??d,height:e??"100px"}).$,"data-testid":"popover-loading-state",children:(0,s.jsx)(o.k,{size:"sm"})})}function u({offset:e,type:t="dialog",placement:i="bottom"}){let[s,n]=a.useState(!1);return r.fP({isOpen:s,onOpenChange:n,type:t,openOnHover:!0,offset:e,placement:i,softDismiss:!0})}function m({getContainerProps:e,getArrowProps:t,setToMaxWidth:i,popoverText:o,children:u,loadingStateStyle:m}){return(0,s.jsx)(r.mc,{...e({style:l.sx.colorTextTooltip.colorBgTooltip.fontMedium.radiusMedium.add({boxShadow:"var(--elevation-300-tooltip)",letterSpacing:"0.055px",lineHeight:"var(--body-medium-lineHeight, 16px)",maxWidth:d}).if(i,{minWidth:d}).if(o,{padding:"var(--spacer-1, 0.3rem) var(--spacer-2, 0.5rem)"},{padding:"var(--spacer-2, 0.5rem)"}).$}),children:(0,s.jsxs)(n.J,{mode:"dark",children:[!!t&&(0,s.jsx)(r.i3,{...t()}),(0,s.jsx)(a.Suspense,{fallback:(0,s.jsx)(c,{height:m?.height,width:m?.width}),children:u})]})})}},703193:(e,t,i)=>{i.d(t,{v:()=>l});var s=i(536760),a=i(790627),r=i(7438),n=i(428444),o=i(889323);let l=(0,r.Wh)(e=>(0,s.eU)(t=>{let i=t(o.Htb.Query({fileKey:e||""}));if("loaded"!==i.status)return!1;let s=(0,a.oA)(i.data?.file?.plan?.tier);return s===n.Ag.ENTERPRISE||s===n.Ag.ORG}))},122258:(e,t,i)=>{i.d(t,{Vg:()=>c,uh:()=>d});var s=i(711839),a=i(536760),r=i(490384),n=i(7438),o=i(344156),l=i(5197);let d=(0,n.Wh)(()=>(0,a.eU)(e=>{let t=e(l.Qy);return t?e(c({id:t})):[]})),c=((0,a.Rq)(d),(0,a.Iz)(({id:e,onlyFirstViolation:t=!1})=>(0,n.Wh)(()=>(0,a.eU)(i=>(0,o.N0)(i(r.ze),(0,s.UN)(),e,"sites_preview",t),()=>{c.remove({id:e,onlyFirstViolation:t})}))))},221651:(e,t,i)=>{i.d(t,{g:()=>l});var s=i(536760),a=i(790627),r=i(7438),n=i(889323),o=i(703193);let l=(0,r.Wh)(e=>(0,s.eU)(t=>{let i=t(n.Htb.Query({fileKey:e||""})),s=t(o.v);return"loaded"===i.status&&!!s&&(0,a.oA)(i.data?.siteMount?.hasSso)}))},448775:(e,t,i)=>{i.d(t,{C:()=>l});var s=i(536760),a=i(790627),r=i(7438),n=i(889323),o=i(221651);let l=(0,r.Wh)(e=>(0,s.eU)(t=>{let i=t(n.Htb.Query({fileKey:e||""})),s=t(o.g);if("loaded"!==i.status)return!1;let r=(0,a.oA)(i.data?.file?.org);if(r?.sitesPublishingDisabled)return!1;let l=(0,a.oA)(i.data?.siteMount?.hasPassword)??!1,d=(0,a.oA)(i.data?.file?.sharedContainerSetting?.webPublishingRequiresPassword)??!1;return!s&&!l&&d}))},860626:(e,t,i)=>{i.d(t,{b:()=>d});var s=i(11311),a=i(38989),r=i(762359),n=i(758333),o=i(43197),l=i(514354);async function d(e,{fileKey:t,publishedByUserId:i,responsiveSetGuids:s}){await (0,l.rg)();let a=u(e,t,s);(0,r.WB)().optimisticallyCreate({SiteBundle:{[`optimistic-id-${t}`]:{fileKey:t,canRead:!0,canReadV2:!0,completedAt:null,createdAt:new Date,publishedByUserId:i,publishedByUser:null,status:"pending",updatedAt:new Date,fileVersionId:null,responsiveSetGuids:s,errorType:null,pathToWebpageGuid:null}}},a);let{site_bundle_id:n}=(await a).data.meta;return n}async function c(e,t){let i=null;try{i=await (0,n.m)(t,void 0,void 0,e,!0)}catch(e){throw Error(`error creating savepoint: ${e}`)}if(!i)throw Error("error creating savepoint: savepoint is nullish");return i}async function u(e,t,i){let r;let n=await c(e,t),l=(0,s.Dg)({shouldUse250317Index:!!(0,a.kc)().font_index_250317});try{r=await o.z.postSitesBundleAsync({fileKey:t,responsiveSetGuids:i,fontIndexHash:l,fileVersionId:n.id})}catch(e){throw Error(`error posting sites bundle: ${e}`)}return r}},344156:(e,t,i)=>{i.d(t,{uU:()=>L,N0:()=>U});var s=i(104076),a=i(927193),r=i(95229),n=i(876740),o=i(93207),l=i(485813),d=i(165300),c=i(942444),u=i(946410),m=i(477385),p=i(361543),h=i(76553),_=i(15565),g=i(528851),f=i(329371),x=i(960933),b=i(50308);let y=(0,i(716976).memo)(function(e){return(0,s.jsxs)("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e,"data-fpl-icon-size":"24L",children:[(0,s.jsx)("path",{fill:"var(--fpl-icon-color-3, var(--color-icon-tertiary))",fillRule:"evenodd",d:"M7.43 5.434A7.99 7.99 0 0 0 4 12a7.99 7.99 0 0 0 3.43 6.567 7.003 7.003 0 0 0 0-13.133",clipRule:"evenodd"}),(0,s.jsx)("path",{fill:"var(--fpl-icon-color, var(--color-icon))",fillRule:"evenodd",d:"M20 12a8 8 0 0 1-11.5 7.196A8 8 0 0 0 13 12a8 8 0 0 0-4.5-7.196A8 8 0 0 1 20 12M4 12a7.99 7.99 0 0 1 3.43-6.567 7.003 7.003 0 0 1 0 13.134A7.99 7.99 0 0 1 4 12m-1 0a9 9 0 1 1 4.287 7.669A9 9 0 0 1 3 12",clipRule:"evenodd"})]})});var E=i(289513),A=i(898035),v=i(278995),T=i(958816),S=i(855272),I=i(468882),w=i(38989),R=i(59881),N=i(213242),C=i(714081),O=i(62904),k=i(722188);let L=()=>({access:{label:(0,I.t)("sites.panel.sites_issues.access"),icon:(0,s.jsx)(n.P,{})},all:{label:(0,I.t)("sites.panel.sites_issues.all_properties"),icon:void 0},autoLayout:{label:(0,I.t)("fullscreen.properties_panel.stack_panel.auto_layout"),icon:(0,s.jsx)(o.v,{})},position:{label:(0,I.t)("sites.panel.position_panel.position"),icon:(0,s.jsx)(l.P,{})},appearance:{label:(0,I.t)("fullscreen.appearance_panel.appearance"),icon:void 0},typography:{label:(0,I.t)("fullscreen.type_panel.typography"),icon:(0,s.jsx)(d.B,{})},stroke:{label:(0,I.t)("fullscreen.properties_panel.fill.stroke"),icon:(0,s.jsx)(c.E,{})},fill:{label:(0,I.t)("fullscreen.properties_panel.fill.fill"),icon:(0,s.jsx)(u.J,{})},effects:{label:(0,I.t)("properties_panel.effects.effects"),icon:(0,s.jsx)(m.A,{})},accessibility:{label:(0,I.t)("sites.panel.accessibility_header"),icon:(0,s.jsx)(p.u,{})},interactions:{label:(0,I.t)("sites.panel.interactions_panel.interactions"),icon:(0,s.jsx)(h.N,{})},link:{label:(0,I.t)("sites.lint.link"),icon:(0,s.jsx)(_.h,{})},objects:{label:(0,I.t)("sites.lint.objects"),icon:(0,s.jsx)(g.x,{})}}),j="a11y/image-is-missing-alt-text",M="a11y/interactive-object-is-missing-label";function F({text:e}){return(0,s.jsx)("span",{className:N.s.colorText.$,children:e})}let D=[{name:"layout/frame/rotated-child-with-stretch-constraints",category:"position",label:(0,I.tx)("sites.lint.layout/frame/rotated-child-with-stretch-constraints"),description:(0,I.tx)("sites.lint.layout/frame/rotated-child-with-stretch-constraints-description",{topBottom:(0,s.jsx)(F,{text:(0,I.tx)("fullscreen.properties_panel.constraints_panel.select.top_plus_bottom")}),leftRight:(0,s.jsx)(F,{text:(0,I.tx)("fullscreen.properties_panel.constraints_panel.select.left_plus_right")})}),recommendations:[{label:(0,I.tx)("sites.lint.set-position-constraints-center"),action:v.$XN.SET_POSITION_CONSTRAINTS_CENTER},{label:(0,I.tx)("sites.lint.remove-rotation"),action:v.$XN.REMOVE_ROTATION}],isViolation:e=>{let t="STRETCH"===e.horizontalConstraint||"STRETCH"===e.verticalConstraint,i=!!e.parentNode,s=e.rotation;return t&&i&&Math.abs(s)>.01}},{name:"styles/autolayout-negative-item-spacing",label:(0,I.tx)("sites.lint.styles/autolayout-negative-item-spacing"),description:(0,I.tx)("sites.lint.styles/autolayout-negative-item-spacing-description",{gap:(0,s.jsx)(F,{text:(0,I.tx)("fullscreen.properties_panel.section_autoLayout.label_gap")})}),category:"autoLayout",recommendations:[],isViolation:e=>{if("FRAME"!==e.type||"NONE"===e.stackMode||e.stackSpacing>=0)return!1;let t="STRETCH"===e.stackChildAlignSelf&&e.childrenNodes.every(e=>e.stackChildPrimaryGrow>0),i=e.childrenNodes.some(e=>e.isGroup),s=e.childrenNodes.some(t=>"INSTANCE"===t.type&&"NONE"!==t.stackMode&&(t.stackMode===e.stackMode&&"RESIZE_TO_FIT_WITH_IMPLICIT_SIZE"===t.stackPrimarySizing||"RESIZE_TO_FIT_WITH_IMPLICIT_SIZE"===t.stackCounterSizing));return t||i||s||"WRAP"===e.stackWrap}},{name:"styles/autolayout-alignment-on-scrollable-horizontal-axis",category:"autoLayout",label:(0,I.tx)("sites.lint.styles/autolayout-alignment-on-scrollable-axis"),description:(0,I.tx)("sites.lint.styles/autolayout-alignment-on-scrollable-horizontal-axis-description"),recommendations:[{label:(0,I.tx)("sites.lint.remove-scrollable-axis-alignment"),action:v.$XN.REMOVE_SCROLLABLE_AXIS_ALIGNMENT}],isViolation:e=>"HORIZONTAL"===e.stackMode&&[{overflow:"VERTICAL"===e.scrollDirection||"BOTH"===e.scrollDirection,alignItems:e.stackCounterAlignItems},{overflow:"HORIZONTAL"===e.scrollDirection||"BOTH"===e.scrollDirection,alignItems:e.stackPrimaryAlignItems}].some(e=>("CENTER"===e.alignItems||"MAX"===e.alignItems)&&e.overflow)},{name:"styles/autolayout-alignment-on-scrollable-vertical-axis",category:"autoLayout",label:(0,I.tx)("sites.lint.styles/autolayout-alignment-on-scrollable-axis"),description:(0,I.tx)("sites.lint.styles/autolayout-alignment-on-scrollable-vertical-axis-description"),recommendations:[{label:(0,I.tx)("sites.lint.remove-scrollable-axis-alignment"),action:v.$XN.REMOVE_SCROLLABLE_AXIS_ALIGNMENT}],isViolation:e=>"VERTICAL"===e.stackMode&&[{overflow:"VERTICAL"===e.scrollDirection||"BOTH"===e.scrollDirection,alignItems:e.stackPrimaryAlignItems},{overflow:"HORIZONTAL"===e.scrollDirection||"BOTH"===e.scrollDirection,alignItems:e.stackCounterAlignItems}].some(e=>("CENTER"===e.alignItems||"MAX"===e.alignItems)&&e.overflow)},{name:"layout/autolayout-only-absolutely-positioned-children",category:"autoLayout",label:(0,I.tx)("sites.lint.layout/resizing-position-conflict"),description:(0,I.tx)("sites.lint.layout/autolayout-only-absolutely-positioned-children-description",{hugContents:(0,s.jsx)(F,{text:(0,I.tx)("fullscreen.properties_panel.stack_panel.al.hug")}),absolute:(0,s.jsx)(F,{text:(0,I.tx)("sites.panel.position_panel.absolute")})}),recommendations:[{label:(0,I.tx)("sites.lint.remove-autolayout"),action:v.$XN.REMOVE_AUTOLAYOUT}],isViolation:e=>"NONE"!==e.stackMode&&0!==e.childCount&&("RESIZE_TO_FIT_WITH_IMPLICIT_SIZE"===e.stackPrimarySizing||"RESIZE_TO_FIT_WITH_IMPLICIT_SIZE"===e.stackCounterSizing)&&e.childrenNodes.every(e=>"ABSOLUTE"===e.stackPositioning)},{name:"styles/autolayout-baseline-alignment",category:"autoLayout",label:(0,I.tx)("sites.lint.styles/autolayout-baseline-alignment"),description:(0,I.tx)("sites.lint.styles/autolayout-baseline-alignment-description",{alignTextBaseline:(0,s.jsx)(F,{text:(0,I.tx)("fullscreen.properties_panel.stack_panel.align_text_baseline")})}),recommendations:[{label:(0,I.tx)("sites.lint.remove-alignment"),action:v.$XN.REMOVE_BASELINE_ALIGNMENT}],isViolation:e=>{if("HORIZONTAL"!==e.stackMode||"BASELINE"!==e.stackCounterAlignItems)return!1;let t=e=>e.childrenNodes.some(e=>"TEXT"===e.type||"FRAME"===e.type&&t(e));return e.childrenNodes.some(e=>"FRAME"===e.type&&t(e))}},{name:"scrolling/scrolling-enabled-with-clipped-content",category:"autoLayout",label:(0,I.tx)("sites.lint.scrolling/scrolling-enabled-with-clipped-content"),description:(0,I.tx)("sites.lint.scrolling/scrolling-enabled-with-clipped-content-description",{clipContent:(0,s.jsx)(F,{text:(0,I.tx)("fullscreen.properties_panel.transform_panel.clip_content")})}),recommendations:[{label:(0,I.tx)("sites.lint.set-clip-content"),action:v.$XN.SET_CLIP_CONTENT},{label:(0,I.tx)("sites.lint.remove-scrolling"),action:v.$XN.REMOVE_SCROLLING}],isViolation:e=>!e.isResponsiveSetBreakpoint&&!e.isWebpageBreakpoint&&"NONE"!==e.scrollDirection&&!0===e.frameMaskDisabled},{name:"layout/autolayout/rotated-frame-with-hug-contents",category:"autoLayout",label:(0,I.tx)("sites.lint.layout/resizing-position-conflict"),description:(0,I.tx)("sites.lint.layout/rotated-frame-with-hug-contents-description",{hugContents:(0,s.jsx)(F,{text:(0,I.tx)("fullscreen.properties_panel.stack_panel.al.hug")}),absolute:(0,s.jsx)(F,{text:(0,I.tx)("sites.panel.position_panel.absolute")}),fixed:(0,s.jsx)(F,{text:(0,I.tx)("sites.panel.position_panel.fixed")})}),recommendations:[{label:(0,I.tx)("sites.lint.fix-issue"),action:v.$XN.SET_AUTOLAYOUT_SIZING_FIXED}],isViolation:e=>{let t="ABSOLUTE"===e.stackPositioning,i="STRETCH"===e.horizontalConstraint||"MIN"===e.horizontalConstraint||"MAX"===e.horizontalConstraint||"STRETCH"===e.verticalConstraint||"MIN"===e.verticalConstraint||"MAX"===e.verticalConstraint,s="NONE"!==e.stackMode,a="RESIZE_TO_FIT_WITH_IMPLICIT_SIZE"===e.stackPrimarySizing||"RESIZE_TO_FIT_WITH_IMPLICIT_SIZE"===e.stackCounterSizing,r=Math.abs(e.rotation)>=.01;return t&&i&&s&&a&&r}},{name:"layout/autolayout-child-with-fill-and-rotation",category:"autoLayout",label:(0,I.tx)("sites.lint.layout/autolayout-child-with-fill-and-rotation"),description:(0,I.tx)("sites.lint.layout/autolayout-child-with-fill-and-rotation-description",{fill:(0,s.jsx)(F,{text:(0,I.tx)("fullscreen.properties_panel.fill.fill")})}),recommendations:[{label:(0,I.tx)("sites.lint.remove-fill-container"),action:v.$XN.REMOVE_FILL_CONTAINER},{label:(0,I.tx)("sites.lint.remove-rotation"),action:v.$XN.REMOVE_ROTATION}],isViolation:e=>!!e.parentNode&&"NONE"!==e.parentNode.stackMode&&"ABSOLUTE"!==e.stackPositioning&&("STRETCH"===e.stackChildAlignSelf||0!==e.stackChildPrimaryGrow)&&Math.abs(e.rotation)>=45&&135>=Math.abs(e.rotation)},{name:"layout/gap/space-between-legacy",category:"autoLayout",label:(0,I.tx)("sites.lint.version-out-of-date"),description:(0,I.tx)("sites.lint.version-out-of-date-description"),recommendations:[{label:(0,I.tx)("sites.lint.set-spacing-auto"),action:v.$XN.SET_AUTOLAYOUT_SPACING_AUTO}],isViolation:e=>"NONE"!==e.stackMode&&"SPACE_EVENLY"===e.stackPrimaryAlignItems},{name:"layout/autolayout-fill-and-hug",category:"autoLayout",label:(0,I.tx)("sites.lint.autolayout-fill-and-hug"),description:(0,I.tx)("sites.lint.autolayout-fill-and-hug-description",{hugContents:(0,s.jsx)(F,{text:(0,I.tx)("fullscreen.properties_panel.stack_panel.al.hug")}),fill:(0,s.jsx)(F,{text:(0,I.tx)("fullscreen.properties_panel.fill.fill")})}),isViolation:e=>"NONE"!==e.stackMode&&0!==e.childCount&&!(("RESIZE_TO_FIT_WITH_IMPLICIT_SIZE"!==e.stackCounterSizing||e.childrenNodes.some(e=>"STRETCH"!==e.stackChildAlignSelf&&e.visible))&&("RESIZE_TO_FIT_WITH_IMPLICIT_SIZE"!==e.stackPrimarySizing||e.childrenNodes.some(e=>e.visible&&0===e.stackChildPrimaryGrow))),recommendations:[{label:(0,I.tx)("sites.lint.set-autolayout-sizing-fixed"),action:v.$XN.SET_AUTOLAYOUT_SIZING_FIXED},{label:(0,I.tx)("sites.lint.remove-autolayout"),action:v.$XN.REMOVE_AUTOLAYOUT}]},{name:"blendmode/plus-darker",category:"appearance",icon:(0,s.jsx)(f.q,{}),label:(0,I.tx)("sites.lint.blendmode/plus-darker"),description:(0,I.tx)("sites.lint.blendmode/plus-darker-description",{multiply:(0,s.jsx)(F,{text:(0,I.tx)("fullscreen.properties_panel.blend_mode.multiply")})}),recommendations:[{label:(0,I.tx)("sites.lint.fix-issue"),action:v.$XN.USE_BLEND_MODE_MULTIPLY}],isViolation:e=>{let t="LINEAR_BURN";return e.blendMode===t||$(e,e=>e.blendMode===t)}},{name:"strokes/corner-smoothing",category:"appearance",icon:(0,s.jsx)(x.Q,{}),label:(0,I.tx)("sites.lint.strokes/corner-smoothing"),description:(0,I.tx)("sites.lint.strokes/corner-smoothing-description",{cornerSmoothing:(0,s.jsx)(F,{text:(0,I.tx)("fullscreen.properties_panel.transform_panel.corner_smoothing")})}),recommendations:[{label:(0,I.tx)("sites.lint.fix-issue"),action:v.$XN.SET_CORNER_SMOOTHING_ZERO}],isViolation:e=>!H(e)&&!!e.cornerSmoothing&&0!==e.cornerRadius},{name:"text/vertical-trim",category:"typography",label:(0,I.tx)("sites.lint.text/vertical-trim"),description:(0,I.tx)("sites.lint.text/vertical-trim-description",{capHeight:(0,s.jsx)(F,{text:(0,I.tx)("type_settings.leading_trim.cap_height")})}),recommendations:[{label:(0,I.tx)("sites.lint.remove-vertical-trim"),action:v.$XN.REMOVE_VERTICAL_TRIM}],isViolation:e=>"TEXT"===e.type&&"CAP_HEIGHT"===e.leadingTrim},{name:"text/stroke",category:"typography",label:(0,I.tx)("sites.lint.text/stroke"),description:(0,I.tx)("sites.lint.text/stroke-description"),recommendations:[{label:(0,I.tx)("sites.lint.remove-stroke"),action:v.$XN.REMOVE_STROKE}],isViolation:e=>"TEXT"===e.type&&G(e)},{name:"styles/texture-pattern-fill",category:"fill",label:(0,I.tx)("sites.lint.styles/texture-pattern-fill"),description:(0,I.tx)("sites.lint.styles/texture-pattern-fill-description"),recommendations:[{label:(0,I.tx)("sites.lint.remove-texture"),action:v.$XN.REMOVE_TEXTURE_PATTERN_FILL}],isViolation:e=>!H(e)&&$(e,e=>"PATTERN"===e.type)},{name:"styles/texture-noise-fill",category:"fill",label:(0,I.tx)("sites.lint.styles/texture-noise-fill"),description:(0,I.tx)("sites.lint.styles/texture-noise-fill-description"),recommendations:[{label:(0,I.tx)("sites.lint.remove-texture"),action:v.$XN.REMOVE_TEXTURE_NOISE_FILL}],isViolation:e=>!H(e)&&$(e,e=>"NOISE"===e.type)},{name:"styles/strokes-blend-mode",category:"stroke",label:(0,I.tx)("sites.lint.styles/strokes-blend-mode"),description:(0,I.tx)("sites.lint.styles/strokes-blend-mode-description",{normal:(0,s.jsx)(F,{text:(0,I.tx)("fullscreen.properties_panel.blend_mode.normal")})}),recommendations:[{label:(0,I.tx)("sites.lint.fix-issue"),action:v.$XN.REMOVE_STROKE_BLEND_MODE}],isViolation:e=>G(e,e=>e.blendMode&&"NORMAL"!==e.blendMode)},{name:"styles/strokes-gradient",category:"stroke",label:(0,I.tx)("sites.lint.styles/strokes-gradient"),description:(0,I.tx)("sites.lint.styles/strokes-gradient-description"),recommendations:[{label:(0,I.tx)("sites.lint.remove-gradient"),action:v.$XN.REMOVE_STROKE_GRADIENT}],isViolation:e=>!H(e)&&G(e,z)},{name:"styles/strokes-join-miter",category:"stroke",label:(0,I.tx)("sites.lint.styles/strokes-join-miter"),description:(0,I.tx)("sites.lint.styles/strokes-join-miter-description",{miter:(0,s.jsx)(F,{text:(0,I.tx)("fullscreen.properties_panel.stroke_settings.miter")})}),recommendations:[{label:(0,I.tx)("sites.lint.fix-issue"),action:v.$XN.REMOVE_CUSTOM_JOIN}],isViolation:e=>!e.isInImmutableFrame&&(e.strokeGeometry?.length>0&&"MITER"!==e.strokeJoin||4!==e.strokeMiterLimit)},{name:"styles/strokes-image",category:"stroke",label:(0,I.tx)("sites.lint.styles/strokes-image"),description:(0,I.tx)("sites.lint.styles/strokes-image-description"),recommendations:[{label:(0,I.tx)("sites.lint.remove-image"),action:v.$XN.REMOVE_STROKE_IMAGE}],isViolation:e=>!e.isInImmutableFrame&&G(e,e=>"IMAGE"===e.type)},{name:"styles/video-stroke",category:"stroke",label:(0,I.tx)("sites.lint.styles/video"),description:(0,I.tx)("sites.lint.video-stroke-description"),recommendations:[{label:(0,I.tx)("sites.lint.remove-video"),action:v.$XN.REMOVE_VIDEO_STROKE}],isViolation:e=>G(e,e=>"VIDEO"===e.type)},{name:"styles/texture-dynamic-stroke",category:"stroke",label:(0,I.tx)("sites.lint.styles/texture-dynamic-stroke"),description:(0,I.tx)("sites.lint.styles/texture-dynamic-stroke-description"),recommendations:[{label:(0,I.tx)("sites.lint.remove-texture-stroke"),action:v.$XN.REMOVE_TEXTURE_DYNAMIC_STROKE}],isViolation:e=>{if(!G(e))return!1;let t=1!==e.dynamicStrokeSettings.interval||0!==e.dynamicStrokeSettings.wiggle||0!==e.dynamicStrokeSettings.smoothen;return!H(e)&&t}},{name:"styles/texture-brush-stroke",category:"stroke",label:(0,I.tx)("sites.lint.styles/texture-brush-stroke"),description:(0,I.tx)("sites.lint.styles/texture-brush-stroke-description"),recommendations:[{label:(0,I.tx)("sites.lint.remove-texture-stroke"),action:v.$XN.REMOVE_TEXTURE_BRUSH_STROKE}],isViolation:e=>{if(!G(e))return!1;let t=e.strokeBrushGuid!==S.AD;return!H(e)&&t}},{name:"effects/frames-no-fills",label:(0,I.tx)("sites.lint.effects/frames-no-fills"),description:(0,I.tx)("sites.lint.effects/frames-no-fills-description"),category:"effects",recommendations:[{label:(0,I.tx)("sites.lint.remove-effect"),action:v.$XN.REMOVE_EFFECTS}],isViolation:e=>["FRAME","RECTANGLE","ROUNDED_RECTANGLE","INSTANCE"].includes(e.type)&&!$(e)&&W(e)},{name:"styles/text-background-blur",category:"effects",label:(0,I.tx)("sites.lint.styles/text-background-blur"),description:(0,I.tx)("sites.lint.styles/text-background-blur-description",{backgroundBlur:(0,s.jsx)(F,{text:(0,I.tx)("fullscreen.properties_panel.effects.background_blur")})}),recommendations:[{label:(0,I.tx)("sites.lint.remove-blur"),action:v.$XN.REMOVE_TEXT_BACKGROUND_BLUR}],isViolation:e=>"TEXT"===e.type&&W(e,e=>"BACKGROUND_BLUR"===e.type)},{name:"styles/text-inner-shadows",category:"effects",label:(0,I.tx)("sites.lint.styles/text-inner-shadows"),description:(0,I.tx)("sites.lint.styles/text-inner-shadows-description",{innerShadow:(0,s.jsx)(F,{text:(0,I.tx)("fullscreen.properties_panel.effects.inner_shadow")})}),recommendations:[{label:(0,I.tx)("sites.lint.remove-shadow"),action:v.$XN.REMOVE_TEXT_INNER_SHADOW}],isViolation:e=>"TEXT"===e.type&&W(e,e=>"INNER_SHADOW"===e.type)},{name:"styles/shadow-blend-mode",label:(0,I.tx)("sites.lint.styles/shadow-blend-mode"),description:(0,I.tx)("sites.lint.styles/shadow-blend-mode-description",{normal:(0,s.jsx)(F,{text:(0,I.tx)("fullscreen.properties_panel.blend_mode.normal")})}),category:"effects",recommendations:[{label:(0,I.tx)("sites.lint.fix-issue"),action:v.$XN.SET_BLEND_MODE_NORMAL}],isViolation:e=>W(e,e=>("DROP_SHADOW"===e.type||"INNER_SHADOW"===e.type)&&e.blendMode&&"NORMAL"!==e.blendMode)},{name:M,category:"accessibility",label:(0,I.tx)("sites.lint.a11y/interactive-object-is-missing-label"),description:(0,I.tx)("sites.lint.a11y/action/add-label-to-interactive-object-params",{aria_label_option:(0,s.jsx)(F,{text:(0,s.jsx)(s.Fragment,{children:k.kp})})}),recommendations:[],isViolation:e=>{if(e.ariaAttributes&&e.ariaAttributes[k.Iz]?.value===!0||e.isDecorativeImage||!e.isAccessibilityAnnotatable||en(e))return!1;let t=(0,O.xb)(e);return!(t&&(0,O.pQ)(e))&&t}},{name:j,category:"accessibility",label:(0,I.tx)("sites.lint.a11y/image-is-missing-alt-text"),description:(0,I.tx)("sites.lint.a11y/images-have-no-alt-text-description",{alt_text:(0,s.jsx)(F,{text:(0,s.jsx)(s.Fragment,{children:k.XM})})}),recommendations:[],isViolation:e=>!!e.isAccessibilityAnnotatable&&(!e.ariaAttributes||e.ariaAttributes[k.Iz]?.value!==!0)&&!e.isDecorativeImage&&!!(!en(e)&&(0,O.pQ)(e))},{name:"interactions/close_overlay",category:"interactions",label:(0,I.tx)("sites.lint.interactions/unsupported-action"),description:(0,I.tx)("sites.lint.is-not-supported",{action:(0,s.jsx)(F,{text:(0,I.tx)("proto.action_close_overlay")})}),recommendations:[{label:(0,I.tx)("sites.lint.remove-action"),action:v.$XN.REMOVE_CLOSE_OVERLAY_ACTIONS}],isViolation:e=>q(e,"CLOSE")},{name:"interactions/open_overlay",category:"interactions",label:(0,I.tx)("sites.lint.interactions/unsupported-action"),description:(0,I.tx)("sites.lint.is-not-supported",{action:(0,s.jsx)(F,{text:(0,I.tx)("proto.action_open_overlay")})}),recommendations:[{label:(0,I.tx)("sites.lint.remove-action"),action:v.$XN.REMOVE_OPEN_OVERLAY_ACTIONS}],isViolation:e=>K(e,"OVERLAY")},{name:"interactions/set_variable_mode",category:"interactions",label:(0,I.tx)("sites.lint.interactions/unsupported-action"),description:(0,I.tx)("sites.lint.is-not-supported",{action:(0,s.jsx)(F,{text:(0,I.tx)("proto.action_set_variable_mode")})}),recommendations:[{label:(0,I.tx)("sites.lint.remove-action"),action:v.$XN.REMOVE_SET_VARIABLE_MODE_ACTIONS}],isViolation:e=>q(e,"SET_VARIABLE_MODE")},{name:"interactions/links",category:"interactions",label:(0,I.tx)("sites.lint.trigger-conflict"),description:(0,I.tx)("sites.lint.interactions/links",{onClick:(0,s.jsx)(F,{text:(0,I.tx)("proto.interaction.type.on_click")})}),recommendations:[{label:(0,I.tx)("sites.lint.remove-trigger"),action:v.$XN.REMOVE_ON_CLICK_ACTIONS}],isViolation:e=>ea(e)},{name:"interactions/nested",category:"interactions",label:(0,I.tx)("sites.lint.nested_interactions_title"),description:(0,I.tx)("sites.lint.nested_interactions_description"),recommendations:[],enabled:()=>!!(0,w.kc)().sts_a11y_nested_interaction_lint,isViolation:(e,t)=>{let i=er(e),s=t?.ancestorIsInteractive??!1,a={...t,ancestorIsInteractive:i||s};return[i&&s,a]}},{name:"animation/smart_animate_navigate_to",category:"interactions",label:(0,I.tx)("sites.lint.unsupported-animation"),description:(0,I.tx)("sites.lint.animation/smart_animate_navigate_to_description",{smartAnimate:(0,s.jsx)(F,{text:(0,I.tx)("proto.transition_behavior.smart_animate")})}),recommendations:[{label:(0,I.tx)("sites.lint.fix-issue"),action:v.$XN.REMOVE_NAVIGATE_ACTIONS_WITH_SMART_ANIMATE}],isViolation:e=>es(e,"NAVIGATE","SMART_ANIMATE")},{name:"interactions/gamepad",category:"interactions",label:(0,I.tx)("sites.lint.unsupported-trigger"),description:(0,I.tx)("sites.lint.is-not-supported",{action:(0,s.jsx)(F,{text:(0,I.tx)("proto.interaction.type.key_gamepad")})}),recommendations:[{label:(0,I.tx)("sites.lint.remove-trigger"),action:v.$XN.REMOVE_GAMEPAD_ACTIONS}],isViolation:e=>Q(e)},{name:"interactions/mouse_in",category:"interactions",label:(0,I.tx)("sites.lint.unsupported-trigger"),description:(0,I.tx)("sites.lint.is-not-supported",{action:(0,s.jsx)(F,{text:(0,I.tx)("proto.interaction.type.mouse_enter_deprecated")})}),recommendations:[{label:(0,I.tx)("sites.lint.replace-trigger"),action:v.$XN.REMOVE_MOUSE_IN_ACTIONS}],isViolation:e=>Y(e,"MOUSE_IN")},{name:"interactions/mouse_out",category:"interactions",label:(0,I.tx)("sites.lint.unsupported-trigger"),description:(0,I.tx)("sites.lint.is-not-supported",{action:(0,s.jsx)(F,{text:(0,I.tx)("proto.interaction.type.mouse_leave_deprecated")})}),recommendations:[{label:(0,I.tx)("sites.lint.replace-trigger"),action:v.$XN.REMOVE_MOUSE_OUT_ACTIONS}],isViolation:e=>Y(e,"MOUSE_OUT")},{name:"behaviors/marquee_without_autolayout",category:"interactions",label:(0,I.tx)("sites.lint.interactions/unsupported-action"),description:(0,I.tx)("sites.lint.behaviors/marquee-without-autolayout-description",{marquee:(0,s.jsx)(F,{text:(0,I.tx)("sites.panel.interactions_panel.marquee_behavior")})}),recommendations:[{label:(0,I.tx)("sites.lint.fix-issue"),action:v.$XN.ADD_AUTOLAYOUT}],isViolation:e=>"FRAME"===e.type&&!e.isStack&&Z(e,a.Xc.Marquee)},{name:"behaviors/reveal_and_parallax",category:"interactions",label:(0,I.tx)("sites.lint.interactions/action-conflict"),description:(0,I.tx)("sites.lint.behaviors/conflicting-actions-description",{actions:(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(F,{text:(0,I.tx)("sites.panel.interactions_panel.appear_behavior")}),(0,s.jsxs)("span",{children:[" ",(0,I.tx)("sites.lint.interactions.and")," "]}),(0,s.jsx)(F,{text:(0,I.tx)("sites.code_behaviors.mouse_parallax.name")})]})}),recommendationLabelOverride:(0,I.tx)("sites.lint.interactions.remove"),recommendations:[{label:(0,I.tx)("sites.panel.interactions_panel.appear_behavior"),action:v.$XN.REMOVE_APPEAR_BEHAVIOR},{label:(0,I.tx)("sites.code_behaviors.mouse_parallax.name"),action:v.$XN.REMOVE_CODE_BEHAVIORS}],isViolation:e=>{let t=Z(e,a.Xc.Appear),i=J(e,"MouseParallax");return t&&i}},{name:"behaviors/cursor_and_typewriter",category:"interactions",label:(0,I.tx)("sites.lint.interactions/action-conflict"),description:(0,I.tx)("sites.lint.behaviors/conflicting-actions-description",{actions:(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(F,{text:(0,I.tx)("sites.panel.interactions_panel.cursor_behavior")}),(0,s.jsxs)("span",{children:[" ",(0,I.tx)("sites.lint.interactions.and")," "]}),(0,s.jsx)(F,{text:(0,I.tx)("sites.code_behaviors.typewriter.name")})]})}),recommendationLabelOverride:(0,I.tx)("sites.lint.interactions.remove"),recommendations:[{label:(0,I.tx)("sites.panel.interactions_panel.cursor_behavior"),action:v.$XN.REMOVE_CURSOR_BEHAVIOR},{label:(0,I.tx)("sites.code_behaviors.typewriter.name"),action:v.$XN.REMOVE_CODE_BEHAVIORS}],isViolation:e=>{let t=Z(e,a.Xc.Cursor),i=J(e,"Typewriter");return t&&i}},{name:"behaviors/cursor_and_scramble_text",category:"interactions",label:(0,I.tx)("sites.lint.interactions/action-conflict"),description:(0,I.tx)("sites.lint.behaviors/conflicting-actions-description",{actions:(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(F,{text:(0,I.tx)("sites.panel.interactions_panel.cursor_behavior")}),(0,s.jsxs)("span",{children:[" ",(0,I.tx)("sites.lint.interactions.and")," "]}),(0,s.jsx)(F,{text:(0,I.tx)("sites.code_behaviors.text_scramble.name")})]})}),recommendationLabelOverride:(0,I.tx)("sites.lint.interactions.remove"),recommendations:[{label:(0,I.tx)("sites.panel.interactions_panel.cursor_behavior"),action:v.$XN.REMOVE_CURSOR_BEHAVIOR},{label:(0,I.tx)("sites.code_behaviors.text_scramble.name"),action:v.$XN.REMOVE_CODE_BEHAVIORS}],isViolation:e=>{let t=Z(e,a.Xc.Cursor),i=J(e,"ScrambleText");return t&&i}},{name:"behaviors/reveal_and_typewriter",category:"interactions",label:(0,I.tx)("sites.lint.interactions/action-conflict"),description:(0,I.tx)("sites.lint.behaviors/conflicting-actions-description",{actions:(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(F,{text:(0,I.tx)("sites.panel.interactions_panel.appear_behavior")}),(0,s.jsxs)("span",{children:[" ",(0,I.tx)("sites.lint.interactions.and")," "]}),(0,s.jsx)(F,{text:(0,I.tx)("sites.code_behaviors.typewriter.name")})]})}),recommendationLabelOverride:(0,I.tx)("sites.lint.interactions.remove"),recommendations:[{label:(0,I.tx)("sites.panel.interactions_panel.appear_behavior"),action:v.$XN.REMOVE_APPEAR_BEHAVIOR},{label:(0,I.tx)("sites.code_behaviors.typewriter.name"),action:v.$XN.REMOVE_CODE_BEHAVIORS}],isViolation:e=>{let t=Z(e,a.Xc.Appear),i=J(e,"Typewriter");return t&&i}},{name:"behaviors/reveal_and_scramble",category:"interactions",label:(0,I.tx)("sites.lint.interactions/action-conflict"),description:(0,I.tx)("sites.lint.behaviors/conflicting-actions-description",{actions:(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(F,{text:(0,I.tx)("sites.panel.interactions_panel.appear_behavior")}),(0,s.jsxs)("span",{children:[" ",(0,I.tx)("sites.lint.interactions.and")," "]}),(0,s.jsx)(F,{text:(0,I.tx)("sites.code_behaviors.text_scramble.name")})]})}),recommendationLabelOverride:(0,I.tx)("sites.lint.interactions.remove"),recommendations:[{label:(0,I.tx)("sites.panel.interactions_panel.appear_behavior"),action:v.$XN.REMOVE_APPEAR_BEHAVIOR},{label:(0,I.tx)("sites.code_behaviors.text_scramble.name"),action:v.$XN.REMOVE_CODE_BEHAVIORS}],isViolation:e=>{let t=Z(e,a.Xc.Appear),i=J(e,"ScrambleText");return t&&i}},{name:"behaviors/mouse_and_scroll_parallax",category:"interactions",label:(0,I.tx)("sites.lint.interactions/action-conflict"),description:(0,I.tx)("sites.lint.behaviors/conflicting-actions-description",{actions:(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(F,{text:(0,I.tx)("sites.code_behaviors.mouse_parallax.name")}),(0,s.jsxs)("span",{children:[" ",(0,I.tx)("sites.lint.interactions.and")," "]}),(0,s.jsx)(F,{text:(0,I.tx)("sites.panel.interactions_panel.scroll_parallax_behavior")})]})}),recommendationLabelOverride:(0,I.tx)("sites.lint.interactions.remove"),recommendations:[{label:(0,I.tx)("sites.code_behaviors.mouse_parallax.name"),action:v.$XN.REMOVE_CODE_BEHAVIORS},{label:(0,I.tx)("sites.panel.interactions_panel.scroll_parallax_behavior"),action:v.$XN.REMOVE_SCROLL_PARALLAX_BEHAVIOR}],isViolation:e=>{let t=J(e,"MouseParallax"),i=Z(e,a.Xc.ScrollParallax);return t&&i}},{name:"behaviors/reveal_and_scroll_transform",category:"interactions",label:(0,I.tx)("sites.lint.interactions/action-conflict"),description:(0,I.tx)("sites.lint.behaviors/conflicting-actions-description",{actions:(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(F,{text:(0,I.tx)("sites.panel.interactions_panel.appear_behavior")}),(0,s.jsxs)("span",{children:[" ",(0,I.tx)("sites.lint.interactions.and")," "]}),(0,s.jsx)(F,{text:(0,I.tx)("sites.panel.interactions_panel.scroll_transform_behavior")})]})}),recommendationLabelOverride:(0,I.tx)("sites.lint.interactions.remove"),recommendations:[{label:(0,I.tx)("sites.panel.interactions_panel.appear_behavior"),action:v.$XN.REMOVE_APPEAR_BEHAVIOR},{label:(0,I.tx)("sites.panel.interactions_panel.scroll_transform_behavior"),action:v.$XN.REMOVE_SCROLL_TRANSFORM_BEHAVIOR}],isViolation:e=>{let t=Z(e,a.Xc.Appear),i=Z(e,a.Xc.ScrollTransform);return t&&i}},{name:"behaviors/scroll_transform_and_scroll_parallax",category:"interactions",label:(0,I.tx)("sites.lint.interactions/action-conflict"),description:(0,I.tx)("sites.lint.behaviors/conflicting-actions-description",{actions:(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(F,{text:(0,I.tx)("sites.panel.interactions_panel.scroll_transform_behavior")}),(0,s.jsxs)("span",{children:[" ",(0,I.tx)("sites.lint.interactions.and")," "]}),(0,s.jsx)(F,{text:(0,I.tx)("sites.panel.interactions_panel.scroll_parallax_behavior")})]})}),recommendationLabelOverride:(0,I.tx)("sites.lint.interactions.remove"),recommendations:[{label:(0,I.tx)("sites.panel.interactions_panel.scroll_transform_behavior"),action:v.$XN.REMOVE_SCROLL_TRANSFORM_BEHAVIOR},{label:(0,I.tx)("sites.panel.interactions_panel.scroll_parallax_behavior"),action:v.$XN.REMOVE_SCROLL_PARALLAX_BEHAVIOR}],isViolation:e=>{let t=Z(e,a.Xc.ScrollTransform),i=Z(e,a.Xc.ScrollParallax);return t&&i}},{name:"behaviors/on_hover_and_hover",category:"interactions",label:(0,I.tx)("sites.lint.interactions/action-conflict"),description:(0,I.tx)("sites.lint.behaviors/conflicting-actions-description",{actions:(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(F,{text:(0,I.tx)("sites.lint.behaviors/hover-behavior")}),(0,s.jsxs)("span",{children:[" ",(0,I.tx)("sites.lint.interactions.and")," "]}),(0,s.jsx)(F,{text:(0,I.tx)("sites.lint.behaviors/hover-interaction-trigger")})]})}),recommendationLabelOverride:(0,I.tx)("sites.lint.interactions.remove"),recommendations:[{label:(0,I.tx)("sites.lint.behaviors/hover-behavior"),action:v.$XN.REMOVE_HOVER_BEHAVIOR},{label:(0,I.tx)("sites.lint.behaviors/hover-interaction-trigger"),action:v.$XN.REMOVE_ON_HOVER_ACTIONS}],isViolation:e=>{let t=Z(e,a.Xc.Hover),i=Y(e,"ON_HOVER");return t&&i}},{name:"behaviors/on_press_and_press",category:"interactions",label:(0,I.tx)("sites.lint.interactions/action-conflict"),description:(0,I.tx)("sites.lint.behaviors/conflicting-actions-description",{actions:(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(F,{text:(0,I.tx)("sites.lint.behaviors/press-behavior")}),(0,s.jsxs)("span",{children:[" ",(0,I.tx)("sites.lint.interactions.and")," "]}),(0,s.jsx)(F,{text:(0,I.tx)("sites.lint.behaviors/press-interaction-trigger")})]})}),recommendationLabelOverride:(0,I.tx)("sites.lint.interactions.remove"),recommendations:[{label:(0,I.tx)("sites.lint.behaviors/press-behavior"),action:v.$XN.REMOVE_PRESS_BEHAVIOR},{label:(0,I.tx)("sites.lint.behaviors/press-interaction-trigger"),action:v.$XN.REMOVE_ON_PRESS_ACTIONS}],isViolation:e=>{let t=Z(e,a.Xc.Press),i=Y(e,"ON_PRESS");return t&&i}},{name:"interactions/swap_overlay",category:"interactions",label:(0,I.tx)("sites.lint.interactions/unsupported-action"),description:(0,I.tx)("sites.lint.is-not-supported",{action:(0,s.jsx)(F,{text:(0,I.tx)("proto.action_swap_overlay")})}),recommendations:[{label:(0,I.tx)("sites.lint.remove-action"),action:v.$XN.REMOVE_SWAP_OVERLAY_ACTIONS}],isViolation:e=>K(e,"SWAP")},{name:"interactions/on_drag",category:"interactions",label:(0,I.tx)("sites.lint.unsupported-trigger"),description:(0,I.tx)("sites.lint.is-not-supported",{action:(0,s.jsx)(F,{text:(0,I.tx)("proto.interaction.type.on_drag")})}),recommendations:[{label:(0,I.tx)("sites.lint.remove-trigger"),action:v.$XN.REMOVE_ON_DRAG_ACTIONS}],isViolation:e=>Y(e,"DRAG")},{name:"animation/dissolve",category:"interactions",label:(0,I.tx)("sites.lint.unsupported-animation"),description:(0,I.tx)("sites.lint.is-not-supported",{action:(0,s.jsx)(F,{text:(0,I.tx)("proto.transition_behavior.dissolve")})}),recommendations:[{label:(0,I.tx)("sites.lint.remove-animation"),action:v.$XN.REMOVE_DISSOLVE_ANIMATIONS}],isViolation:e=>X(e,"DISSOLVE")},{name:"nodetype/connector",category:"objects",label:(0,I.tx)("sites.lint.nodetype/unsupported"),description:(0,I.tx)("sites.lint.are-not-supported",{action:(0,I.tx)("sites.lint.nodetype/connector")}),recommendations:[{label:(0,I.tx)("sites.lint.remove-object"),action:v.$XN.REMOVE_CONNECTOR}],isViolation:e=>"CONNECTOR"===e.type},{name:"nodetype/shape-with-text",category:"objects",label:(0,I.tx)("sites.lint.nodetype/unsupported"),description:(0,I.tx)("sites.lint.are-not-supported",{action:(0,I.tx)("sites.lint.nodetype/shape-with-text")}),recommendations:[{label:(0,I.tx)("sites.lint.remove-object"),action:v.$XN.REMOVE_SHAPE_WITH_TEXT}],isViolation:e=>"SHAPE_WITH_TEXT"===e.type},{name:"nodetype/sticky",category:"objects",label:(0,I.tx)("sites.lint.nodetype/unsupported"),description:(0,I.tx)("sites.lint.are-not-supported",{action:(0,I.tx)("sites.lint.nodetype/sticky")}),recommendations:[{label:(0,I.tx)("sites.lint.remove-object"),action:v.$XN.REMOVE_STICKY}],isViolation:e=>"STICKY"===e.type},{name:"nodetype/washi-tape",category:"objects",label:(0,I.tx)("sites.lint.nodetype/unsupported"),description:(0,I.tx)("sites.lint.is-not-supported",{action:(0,I.tx)("sites.lint.nodetype/washi-tape")}),recommendations:[{label:(0,I.tx)("sites.lint.remove-object"),action:v.$XN.REMOVE_WASHI_TAPE}],isViolation:e=>"WASHI_TAPE"===e.type},{name:"nodetype/highlight",category:"objects",label:(0,I.tx)("sites.lint.nodetype/unsupported"),description:(0,I.tx)("sites.lint.are-not-supported",{action:(0,I.tx)("sites.lint.nodetype/highlight")}),recommendations:[{label:(0,I.tx)("sites.lint.remove-object"),action:v.$XN.REMOVE_HIGHLIGHT}],isViolation:e=>"HIGHLIGHT"===e.type},{name:"nodetype/stamp",category:"objects",label:(0,I.tx)("sites.lint.nodetype/unsupported"),description:(0,I.tx)("sites.lint.are-not-supported",{action:(0,I.tx)("sites.lint.nodetype/stamp")}),recommendations:[{label:(0,I.tx)("sites.lint.remove-object"),action:v.$XN.REMOVE_STAMP}],isViolation:e=>"STAMP"===e.type},{name:"nodetype/table",category:"objects",label:(0,I.tx)("sites.lint.nodetype/unsupported"),description:(0,I.tx)("sites.lint.are-not-supported",{action:(0,I.tx)("sites.lint.nodetype/table")}),recommendations:[{label:(0,I.tx)("sites.lint.remove-object"),action:v.$XN.REMOVE_TABLE}],isViolation:e=>"TABLE"===e.type},{name:"nodetype/widget",category:"objects",label:(0,I.tx)("sites.lint.nodetype/unsupported"),description:(0,I.tx)("sites.lint.are-not-supported",{action:(0,I.tx)("sites.lint.nodetype/widget")}),recommendations:[{label:(0,I.tx)("sites.lint.remove-object"),action:v.$XN.REMOVE_WIDGET}],isViolation:e=>"WIDGET"===e.type&&!e.isHTMLWidget},{name:"vector/variable-binding",category:"interactions",label:(0,I.tx)("sites.lint.interactions/unsupported-action"),description:(0,I.tx)("sites.lint.vectors/variable-binding-unsupported-description",{setVariable:(0,s.jsx)(F,{text:(0,I.tx)("proto.action_set_variable")}),fill:(0,s.jsx)(F,{text:(0,I.tx)("proto.frame_preset_panel.fill")}),stroke:(0,s.jsx)(F,{text:(0,I.tx)("fullscreen.properties_panel.fill.stroke")})}),recommendations:[{label:(0,I.tx)("sites.lint.remove-action"),action:v.$XN.REMOVE_VECTOR_SET_VARIABLE_ACTIONS}],isViolation:e=>{let t=e.prototypeInteractions.flatMap(e=>e.actions).filter(e=>e?.connectionType==="SET_VARIABLE").map(e=>e?.targetVariable?.id).filter(e=>void 0!==e);if(0===t.length)return!1;let i=new Set(["fills","strokes"]),s=[];for(let e of t){let t;t=e.assetRef&&e.assetRef.key&&e.assetRef.version?E.sD.fromRef({key:(0,A.ey)(e.assetRef.key),version:(0,A.nK)(e.assetRef.version)}):E.sD.fromLocalNodeIdObj(e.guid??S.Hr);let i=v.glU?.transitiveConsumersOfVariable(t);i&&(s=s.concat(Array.from(i)))}let a=t.map(e=>{let t=E.sD.INVALID;return e.guid?t=E.sD.fromLocalNodeIdObj(e.guid):e.assetRef&&void 0!==e.assetRef.key&&void 0!==e.assetRef.version&&(t=E.sD.fromRef({key:(0,A.ey)(e.assetRef.key),version:(0,A.nK)(e.assetRef.version)})),t?.toString()});for(let t of s){let s=e.sceneGraph.get(t);if(s?.type==="VECTOR")for(let e of Object.entries(s?.boundVariables)){let[t,s]=e;if(Array.isArray(s))for(let e=0;e<s.length;e++){let r=s[e];if(r&&!i.has(t)&&a.includes(r.id))return!0}else if(!i.has(t)&&a.includes(s.id))return!0}}return!1}},{name:"nodetype/text-path",category:"objects",label:(0,I.tx)("sites.lint.nodetype/unsupported"),description:(0,I.tx)("sites.lint.are-not-supported",{action:(0,I.tx)("sites.lint.nodetype/text-path")}),recommendations:[],isViolation:e=>"TEXT_PATH"===e.type},{name:"effects/grain",category:"effects",label:(0,I.tx)("sites.lint.effects/grain"),description:(0,I.tx)("sites.lint.effects/grain-description"),recommendations:[{label:(0,I.tx)("sites.lint.remove-effect"),action:v.$XN.REMOVE_GRAIN_EFFECT}],isViolation:e=>!H(e)&&W(e,e=>"GRAIN"===e.type)},{name:"effects/noise",category:"effects",label:(0,I.tx)("sites.lint.effects/noise"),description:(0,I.tx)("sites.lint.effects/noise-description"),recommendations:[{label:(0,I.tx)("sites.lint.remove-effect"),action:v.$XN.REMOVE_NOISE_EFFECT}],isViolation:e=>!H(e)&&W(e,e=>"NOISE"===e.type)},{name:"effects/progressive-blur",category:"effects",label:(0,I.tx)("sites.lint.effects/progressive-blur"),description:(0,I.tx)("sites.lint.effects/progressive-blur-description"),recommendations:[{label:(0,I.tx)("sites.lint.remove-effect"),action:v.$XN.REMOVE_PROGRESSIVE_BLUR}],isViolation:e=>!H(e)&&W(e,e=>("FOREGROUND_BLUR"===e.type||"BACKGROUND_BLUR"===e.type)&&"PROGRESSIVE"===e.blurOpType)},{name:"effects/glass",category:"effects",label:(0,I.tx)("sites.lint.effects/glass"),description:(0,I.tx)("sites.lint.effects/glass-description"),recommendations:[{label:(0,I.tx)("sites.lint.remove-effect"),action:v.$XN.REMOVE_GLASS}],isViolation:e=>!H(e)&&W(e,e=>"GLASS"===e.type)},{name:"link/link-to-deleted-object",category:"link",label:(0,I.tx)("sites.lint.missing_hyperlink"),description:(0,I.tx)("sites.lint.missing_hyperlink_description"),recommendations:[{label:(0,I.tx)("sites.lint.missing_hyperlink.remove_link"),action:v.$XN.REMOVE_LINKS_TO_DELETED_NODES}],isViolation:e=>{if(!e.hyperlink)return!1;if("mixed"===e.hyperlink){let t=e.textData?.characters;if(!t)return!1;let i=0,s=null;for(;i<t.length;){let t=e.getRangeHyperlink(i,i+1);if(t!==s&&null!==t&&(s=t,"NODE"===t.type&&null==e.sceneGraph.get(t.value)))return!0;i++}}else if("NODE"===e.hyperlink.type){let t=e.hyperlink.value;return null==e.sceneGraph.get(t)}return!1}},{name:"interactions/scroll_to_in_component_instance",label:(0,I.tx)("sites.lint.interactions/unsupported-action"),description:(0,I.tx)("sites.lint.interactions/scroll-to-in-component-instance-unsupported"),category:"interactions",recommendations:[{label:(0,I.tx)("sites.lint.remove-action"),action:v.$XN.REMOVE_SCROLL_TO_ACTIONS}],isViolation:e=>ee(e,t=>{if("SCROLL_TO"!==t.navigationType)return!1;let i=t.transitionNodeID;if(!i)return!1;let s=e.sceneGraph.get(S.dI(i));return!!s&&!!s.isInstanceSublayer})},{name:"appearance/image-adjustments",category:"appearance",icon:(0,s.jsx)(b.s,{}),label:(0,I.tx)("sites.lint.appearance/image-adjustments"),description:(0,I.tx)("sites.lint.appearance/image-adjustments-description"),recommendations:[{label:(0,I.tx)("sites.lint.remove-image-adjustments"),action:v.$XN.REMOVE_IMAGE_ADJUSTMENTS}],isViolation:e=>$(e,e=>{if("IMAGE"!==e.type||!e.paintFilter)return!1;let t=e.paintFilter;return!!t&&["exposure","contrast","vibrance","temperature","tint","highlights","shadows"].some(e=>{let i=t[e];return void 0!==i&&!(0,r.xN)(i,0)})})},{name:"appearance/transformed-mask",category:"appearance",label:(0,I.tx)("sites.lint.appearance/transformed-mask"),description:(0,I.tx)("sites.lint.appearance/transformed-mask-description"),icon:(0,s.jsx)(y,{}),recommendations:[{label:(0,I.tx)("sites.lint.appearance/remove-mask-transform"),action:v.$XN.REMOVE_MASK_TRANSFORM}],isViolation:e=>{if(!(e.childrenNodes&&e.childrenNodes.some(e=>e.mask)))return!1;let t=T.s.identity().toFigMatrix(),i=e=>{let{m00:i,m01:s,m10:a,m11:n}=e.relativeTransform;return!(((0,r.xN)(i,1)||(0,r.xN)(i,-1))&&((0,r.xN)(n,1)||(0,r.xN)(n,-1))&&(0,r.xN)(s,0)&&(0,r.xN)(a,0))&&(!(0,r.xN)(i,t.m00)||!(0,r.xN)(s,t.m01)||!(0,r.xN)(a,t.m10)||!(0,r.xN)(n,t.m11))};return!!i(e)||e.childrenNodes.some(i)}},{name:"fills/rotated-image",category:"fill",label:(0,I.tx)("sites.lint.fills/rotated-image"),description:(0,I.tx)("sites.lint.fills/rotated-image-description"),recommendations:[{label:(0,I.tx)("sites.lint.remove-rotation"),action:v.$XN.REMOVE_IMAGE_ROTATION},{label:(0,I.tx)("sites.lint.fills/remove-fill"),action:v.$XN.REMOVE_ROTATED_IMAGE_FILL}],isViolation:e=>$(e,e=>{if("IMAGE"!==e.type)return!1;if(0!==e.rotation)return!0;if("STRETCH"===e.imageScaleMode&&e.transform){let t=T.s.fromFigMatrix(e.transform);if(!(0,r.xN)(t.toRadians(),0))return!0}return!1})},{name:"fills/rotated-video",category:"fill",label:(0,I.tx)("sites.lint.fills/rotated-video"),description:(0,I.tx)("sites.lint.fills/rotated-video-description"),recommendations:[{label:(0,I.tx)("sites.lint.remove-rotation"),action:v.$XN.REMOVE_VIDEO_ROTATION},{label:(0,I.tx)("sites.lint.fills/remove-fill"),action:v.$XN.REMOVE_ROTATED_VIDEO_FILL}],isViolation:e=>$(e,e=>{if("VIDEO"!==e.type)return!1;if(0!==e.rotation)return!0;if("STRETCH"===e.imageScaleMode&&e.transform){let t=T.s.fromFigMatrix(e.transform);if(!(0,r.xN)(t.toRadians(),0))return!0}return!1})},{name:"fills/video-fill-exclusive",category:"fill",label:(0,I.tx)("sites.lint.fills/video-fill-exclusive"),description:(0,I.tx)("sites.lint.fills/video-fill-exclusive-description"),recommendations:[],isViolation:e=>{let t=$(e,e=>"VIDEO"===e.type),i=e.fills.filter(e=>V(e)).length>1;return t&&i}},{name:"fills/video-fill-unsupported-node",category:"fill",label:(0,I.tx)("sites.lint.fills/video-fill-unsupported-node"),description:(0,I.tx)("sites.lint.fills/video-fill-unsupported-node-description"),recommendations:[],isViolation:e=>{let t=["RECTANGLE","ROUNDED_RECTANGLE","FRAME"].includes(e.type);return $(e,e=>"VIDEO"===e.type)&&!t}},{name:"fills/video-fill-invalid-scale-mode",category:"fill",label:(0,I.tx)("sites.lint.fills/video-fill-invalid-scale-mode"),description:(0,I.tx)("sites.lint.fills/video-fill-invalid-scale-mode-description",{Tile:(0,s.jsx)(F,{text:(0,I.tx)("fullscreen.properties_panel.image_scale.tile")})}),recommendations:[{label:(0,I.tx)("sites.lint.fix-issue"),action:v.$XN.SET_VIDEO_FILL_SCALE_MODE_FILL}],isViolation:e=>$(e,e=>"VIDEO"===e.type&&"TILE"===e.imageScaleMode)},{name:"fills/video-settings-controls-autoplay-invalid",category:"fill",label:(0,I.tx)("sites.lint.fills/video-playback-warning"),description:(0,I.tx)("sites.lint.fills/video-settings-controls-autoplay-invalid-description"),recommendations:[{label:(0,I.tx)("sites.lint.turn-on-autoplay"),action:v.$XN.SET_VIDEO_AUTOPLAY},{label:(0,I.tx)("sites.lint.show-controls"),action:v.$XN.SET_VIDEO_CONTROLS}],isViolation:e=>$(e,t=>{if("VIDEO"!==t.type)return!1;let i=e.videoPlayback;return!e.videoPlayback.showControls&&!i.autoplay})},{name:"fills/video-settings-muted-autoplay-invalid",category:"fill",label:(0,I.tx)("sites.lint.fills/video-playback-warning"),description:(0,I.tx)("sites.lint.fills/video-settings-muted-autoplay-invalid-description"),recommendations:[],isViolation:e=>$(e,t=>{if("VIDEO"!==t.type)return!1;let i=e.videoPlayback;return!i.muted&&i.autoplay})},{name:"nodetype/component-set-in-responsive-set",category:"objects",label:(0,I.tx)("sites.lint.nodetype/unsupported"),description:(0,I.tx)("sites.lint.component-sets-in-pages"),recommendations:[],isViolation:e=>e.isStateGroup},{name:"nodetype/component-in-responsive-set",category:"objects",label:(0,I.tx)("sites.lint.nodetype/unsupported"),description:(0,I.tx)("sites.lint.components-in-pages"),recommendations:[],isViolation:e=>e.isLooseComponent&&e.isInResponsiveSetOrWebpage},{name:"layout/fixed-child-outside-of-tlf",category:"position",label:(0,I.tx)("sites.lint.layout/fixed-child-outside-of-tlf"),description:(0,I.tx)("sites.lint.layout/fixed-child-outside-of-tlf-description"),recommendations:[{label:(0,I.tx)("sites.lint.set-position-absolute"),action:v.$XN.SET_POSITION_ABSOLUTE}],isViolation:e=>{if("FIXED_WHEN_CHILD_OF_SCROLLING_FRAME"!==e.scrollBehavior)return!1;if(e.parentGuid){let t=e.sceneGraph.get(e.parentGuid);if(t&&t.parentGuid){let e=t.parentNode;if(!e?.isResponsiveSetOrWebpage)return!0}}return!1}},{name:"fills/cms-rich-text-gradient-fill",category:"fill",label:(0,I.tx)("sites.lint.fills/cms-rich-text-gradient-fill"),description:(0,I.tx)("sites.lint.fills/cms-rich-text-gradient-fill-description"),recommendations:[{label:(0,I.tx)("sites.lint.fills/remove-fill"),action:v.$XN.REMOVE_GRADIENT_FILL}],enabled:()=>!!(0,w.kc)().dakota,isViolation:e=>"CMS_RICH_TEXT"===e.type&&$(e,e=>z(e))},{name:"fills/cms-rich-text-image-fill",category:"fill",label:(0,I.tx)("sites.lint.fills/cms-rich-text-image-fill"),description:(0,I.tx)("sites.lint.fills/cms-rich-text-image-fill-description"),recommendations:[{label:(0,I.tx)("sites.lint.fills/remove-fill"),action:v.$XN.REMOVE_IMAGE_FILL}],enabled:()=>!!(0,w.kc)().dakota,isViolation:e=>"CMS_RICH_TEXT"===e.type&&$(e,e=>"IMAGE"===e.type)},{name:"fills/cms-bound-image-with-mask",category:"fill",label:(0,I.tx)("sites.lint.fills/cms-bound-image-with-mask"),description:(0,I.tx)("sites.lint.fills/cms-bound-image-with-mask-description"),icon:(0,s.jsx)(y,{}),recommendations:[],enabled:()=>!!(0,w.kc)().dakota,isViolation:e=>!!$(e,C.i2)&&!!(!0===e.mask||e.parentNode?.childrenNodes?.some(e=>e.mask))},{name:"fills/cms-bound-image-on-vector",category:"fill",label:(0,I.tx)("sites.lint.fills/cms-bound-image-on-vector"),description:(0,I.tx)("sites.lint.fills/cms-bound-image-on-vector-description"),icon:(0,s.jsx)(g.x,{}),recommendations:[],enabled:()=>!!(0,w.kc)().dakota,isViolation:e=>H(e)&&$(e,C.i2)}],P=e=>{let t=new Set,i=[e];for(;i.length>0;){let e=i.pop();t.add(e),i.push(...e.childrenNodes)}return t};function B(e,t){if(!e)return!1;let i=e.containingCanvas,s=i&&t.get(i);return!!s&&!s.isInternalOnlyNode}async function U(e,t,i,s,a=!1){let r=[];for(let e of D){if(!(!("enabled"in e)||e.enabled()))continue;let s=t.get(i),n=function(e,t,i,s,a=!1){if(!t)return[];let r=[{node:t,context:s}],n=new Set,o=new Set,l=new Set;for(;r.length>0;){let{node:t,context:s}=r.shift();if(!(t.visible||t.boundVariables.visible)||o.has(t.guid))continue;let d=i.isViolation(t,s),[c,u]="boolean"==typeof d?[d,void 0]:d,m=t.isInstanceSublayer||"INSTANCE"===t.type,p=t.isInstance?t.symbolId:t.isInstanceSublayer?t.overrideKey:null;if(c&&(m&&p?(l.has(p)&&!n.has(p)?n.add(t.guid):function(e,t,i,s){let a=t.get(e);if(!B(a,t))return!1;let r=i.isViolation(a,s),[n]="boolean"==typeof r?[r,void 0]:r;return n}(p,e,i,s)&&n.add(p),l.add(p)):n.add(t.guid)),a&&n.size>0)break;if(["INSTANCE","SYMBOL"].includes(t.type)){if(p){let t=e.get(p);B(t,e)&&r.push({node:t,context:s})}[...P(t)].flatMap(t=>et(t,e=>"SWAP_STATE"===e.navigationType).map(t=>{if(!t.transitionNodeID)return;let i=S.dI(t.transitionNodeID);if(B(e.get(i),e))return i}).filter(Boolean)).forEach(t=>{let i=e.get(t);i&&r.push({node:i,context:s})})}o.add(t.guid),t.childrenNodes.forEach(e=>{r.push({node:e,context:u})})}let d=Array.from(n);return(i.name===j||i.name===M)&&d.length>1?d.slice(0,1):d}(t,s,e,void 0,a);if(n.length>0&&(r.push({...e,nodeIds:n}),a))break;await new Promise(e=>setTimeout(e,0))}return function(e,t){Object.entries(e.reduce((e,t)=>(e[t.name]=(e[t.name]||0)+1,e),{})).map(([e,i])=>{R.az.trackDefinedEvent("sites.linting_errors",{lintRule:e,count:i,source:t})})}(r,s),r}let V=e=>!!e.visible&&0!==(e.opacity||1)&&(!!("SOLID"===e.type&&(e.color?.a||1)>0)||!z(e)||e.stops?.some(e=>e.color.a>0));function z(e){return"GRADIENT_ANGULAR"===e.type||"GRADIENT_DIAMOND"===e.type||"GRADIENT_LINEAR"===e.type||"GRADIENT_RADIAL"===e.type}function H(e){return"ELLIPSE"===e.type||"REGULAR_POLYGON"===e.type||"STAR"===e.type||"VECTOR"===e.type||"LINE"===e.type||"BOOLEAN_OPERATION"===e.type}function $(e,t=()=>!0){return e.fills.length>0&&e.fills.some(e=>t(e)&&V(e))}function G(e,t=()=>!0){return e.strokePaints.data.length>0&&e.strokePaints.data.some(e=>t(e)&&V(e))}function W(e,t=()=>!0){return e.effects.some(e=>t(e)&&e.visible)}let q=(e,t)=>ee(e,e=>e.connectionType===t),K=(e,t)=>ee(e,e=>e.navigationType===t),X=(e,t)=>ee(e,e=>e.transitionType===t),Y=(e,t)=>ei(e,e=>e.event?.interactionType===t),Q=e=>ei(e,e=>e.event?.interactionType==="ON_KEY_DOWN"&&e.event?.keyTrigger?.triggerDevice!=="KEYBOARD"),Z=(e,t)=>!!e.behaviors&&t in e.behaviors;function J(e,t){if(!e.behaviors?.code||0===e.behaviors.code.length)return!1;let i=E._H.fromString(e.behaviors.code[0].codeComponentId);if(!i)return!1;let s=e.sceneGraph.getCodeComponentNode(i);return!!s?.isCodeBehavior&&s?.name===t}let ee=(e,t)=>e.prototypeInteractions.some(e=>e.actions?.some(e=>t(e)||e.conditionalActions?.some(e=>e.actions?.some(t)))),et=(e,t)=>{let i=[];return e.prototypeInteractions.forEach(e=>{e.actions?.forEach(e=>{t(e)&&i.push(e),e.conditionalActions?.forEach(e=>{e.actions?.forEach(e=>{t(e)&&i.push(e)})})})}),i},ei=(e,t)=>e.prototypeInteractions.some(e=>t(e)),es=(e,t,i)=>ee(e,e=>{let s="ANY"===i?"INSTANT_TRANSITION"!==e.transitionType:e.transitionType===i;return e.navigationType===t&&s}),ea=e=>!!e.hyperlink&&Y(e,"ON_CLICK"),er=e=>!!e.hyperlink||Y(e,"ON_CLICK")||"BUTTON"===e.accessibleHTMLTag;function en(e){let t=[e];for(;t.length>0;){let e=t.pop();if(e.characters&&e.characters.length>0||e.accessibleLabel&&e.accessibleLabel.length>0||e.fills.some(e=>"IMAGE"===e.type&&e.imageVar?.dataType==="CMS_ALIAS"&&e.imageVar?.value?.cmsAliasValue&&e.altText&&e.altText.length>0))return!0;e.childrenNodes&&t.push(...e.childrenNodes)}return!1}},518998:(e,t,i)=>{i.d(t,{CS:()=>u,pq:()=>h,iF:()=>p});var s=i(468882),a=i(536760),r=i(670430),n=i(7438),o=i(889323);let l=(0,i(944976).d)(null,e=>{let t=e.getCurrentPage();return t?.siteHomepageId??null}),d=(0,n.Wh)(e=>(0,a.eU)(t=>{let i=t(o.Vny.Query({fileKey:e||""}));if("loaded"!==i.status)return!1;let s=i.data?.siteMount,a=s?.pwdConfig?.webpageGuids||[];if(0===a.length)return!1;let r=t(l);return!!r&&a.includes(r)}));var c=i(448775);let u="_site_wide";function m(){setTimeout(()=>{window.dispatchEvent(new CustomEvent("scrollToSiteAccessSection"))},300)}let p=(0,a.eU)(e=>{let t=[];e(c.C)&&t.push({name:"access/password-required",category:"access",publishBlocking:!0,label:(0,s.tx)("sites.lint.access/password-required"),description:(0,s.tx)("sites.lint.access/password-required-description"),recommendations:[{label:(0,s.tx)("sites.lint.add_password"),action:m,shouldOpenSettings:!0}],nodeIds:[],hideSelectionTarget:!0}),e(d)&&t.push({name:"access/homepage-protected",category:"access",publishBlocking:!0,label:(0,s.tx)("sites.lint.access/homepage-protected"),description:(0,s.tx)("sites.lint.access/homepage-protected-description"),recommendations:[{label:(0,s.tx)("sites.lint.remove_homepage_protection"),action:m,shouldOpenSettings:!0}],nodeIds:[],hideSelectionTarget:!0});let i=e(r.Z6);return i&&t.push(i),t});function h(e){let t=e(p);return t.length>0?[u,t]:null}},311826:(e,t,i)=>{i.d(t,{R:()=>n,a:()=>r});var s=i(536760),a=i(7438);let r=(0,i(944976).d)([],e=>e.getRoot().childrenNodes.filter(e=>!e.isInternalOnlyNode).flatMap(e=>e.childrenNodes.filter(e=>e.isResponsiveSetOrWebpage).map(e=>e.guid))),n=(0,a.Wh)(()=>(0,s.eU)([]),{preserveValue:!0})},703876:(e,t,i)=>{i.d(t,{H:()=>n});var s=i(104076),a=i(858959);let r={default:{duration:1,ease:"linear",repeat:1/0},rotate:{duration:2,ease:[.6,-1,.4,2],repeat:1/0}};function n(){return(0,s.jsxs)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",children:[(0,s.jsx)(a.P.ellipse,{animate:{ry:[2.5,0,2.5],strokeDashoffset:[-10,10],rotate:[0,45,90]},cx:"12",cy:"12",fill:"transparent",initial:{strokeDashoffset:-10,ry:2.5,rotate:0},rx:"8.5",ry:"2.5",stroke:"var(--color-icon)",strokeDasharray:"14 5",strokeDashoffset:"-10",strokeLinecap:"round",strokeWidth:"1",transition:r}),(0,s.jsx)(a.P.ellipse,{animate:{ry:[2.5,0,2.5],strokeDashoffset:[-10,10],rotate:[-90,-45,0]},cx:"12",cy:"12",fill:"transparent",initial:{strokeDashoffset:-8,ry:4,rotate:-45},rx:"8.5",ry:"2.5",stroke:"var(--color-icon)",strokeDasharray:"14 5",strokeDashoffset:"-10",strokeLinecap:"round",strokeWidth:"1",transition:r})]})}},679572:(e,t,i)=>{i.d(t,{d:()=>n,k:()=>d});var s=i(536760),a=i(7438),r=i(751475),n=(e=>(e.INITIAL="initial",e.BUILDING="building",e.LOADED="loaded",e.BUILD_ERROR="build_error",e.RUNTIME_ERROR="runtime_error",e))(n||{});let o=(0,r.H)("initial"),l=(0,a.Wh)(()=>(0,s.eU)("initial"));function d(e){let t=e?o(e):null,[i,a]=(0,s.fp)(t??l);return{componentPreviewState:i,setComponentPreviewState:a}}},142315:(e,t,i)=>{let s;i.d(t,{qm:()=>h});var a=i(414393),r=i(318037);let n=0,o=new Map,l=new Map;function d(){if(!s){let e=Fig.codeSandboxWorkerURL;e&&((s=(0,r.x)(e)).onmessage=e=>{switch(e.data.type){case"SNAPSHOT_LAYERS_FOR_CANVAS_RESULT":u(e.data.messageId,{operationBatch:e.data.operationBatch});break;case"SNAPSHOT_ANIMATION_PRESET_FOR_TARGETS_RESULT":u(e.data.messageId,{result:e.data.result});break;case"ERROR_RESULT":!function(e,t){let i=l.get(e);i&&(i(t),o.delete(e),l.delete(e))}(e.data.messageId,Error(e.data.error));break;default:(0,a.xb)(e.data)}})}return s}function c(e){let t=n++,i=new Promise((e,i)=>{o.set(t,e),l.set(t,i)});return!function(e){let t=d();if(!t)throw Error("Sandbox worker not available");t.postMessage(e)}({...e,messageId:t}),i}function u(e,t){let i=o.get(e);i&&(i(t),o.delete(e),l.delete(e))}let m=[],p=[];function h(){function e(){let e=new _;return m.push(e),e}return m.length<4?Promise.resolve(e()):new Promise(t=>{p.push(()=>{t(e())})})}class _{constructor(){if(this.isConsumed=!1,this.isDestroyed=!1,!d())throw Error("Sandbox worker not available")}async snapshotLayersForCanvas({guid:e,code:t,codeBuildId:i,exportName:s,props:a}){try{return this.consume(),await function({guid:e,code:t,codeBuildId:i,exportName:s,props:a}){return c({type:"SNAPSHOT_LAYERS_FOR_CANVAS",guid:e,code:t,codeBuildId:i,exportName:s,props:a})}({guid:e,code:t,codeBuildId:i,exportName:s,props:a})}finally{this.destroy()}}async snapshotAnimationPresetForTargets({guid:e,code:t,codeBuildId:i,exportName:s,targetNodeIds:a,props:r}){try{return this.consume(),await function({guid:e,code:t,codeBuildId:i,exportName:s,targetNodeIds:a,props:r}){return c({type:"SNAPSHOT_ANIMATION_PRESET_FOR_TARGETS",guid:e,code:t,codeBuildId:i,exportName:s,targetNodeIds:a,props:r})}({guid:e,code:t,codeBuildId:i,exportName:s,targetNodeIds:a,props:r})}finally{this.destroy()}}consume(){if(this.isConsumed)throw Error("Attempting to reuse a sandbox worker instance");this.isConsumed=!0}destroy(){this.isConsumed&&!this.isDestroyed&&(this.isDestroyed=!0,function(e){let t=m.indexOf(e);-1!==t&&m.splice(t,1),p.length>0&&p.shift()()}(this))}}},49395:(e,t,i)=>{i.d(t,{hB:()=>b,wn:()=>x});var s=i(350478),a=i(536760),r=i(814405),n=i(204060),o=i(724125),l=i(944882),d=i(804200),c=i(302329),u=i(290002),m=i(927193);let p=[],h=[],_=[],g=[],f=[];function x(){let e=2-(p?.length??0)-(h?.length??0);if(e<=0)return;let t=Array.from({length:e},()=>new y({previewSurfaceForLogging:"offscreen_sandbox",productType:"unknown"}));p.push(...t)}function b({renderOptions:e,usePlaygroundScene:t=!1,d2rSessionId:i,assets:s,activeBreakpoint:a,previewSurfaceForLogging:r,productType:n}){if(e?.preset==="mcp"||e?.preset==="code_layer"){let o=function(){let o=new y({assets:s,renderOptions:e,usePlaygroundScene:t,previewSurfaceForLogging:r,productType:n,d2rSessionId:i});return o.configure(void 0,a),g.push(o),o};return g.length<4?Promise.resolve(o()):new Promise(e=>{f.push(()=>{e(o())})})}{let e=function(){let e=p.pop();return h.push(e),x(),e.configure(s,a),e.updateLoggingContext(r,n),e};return(x(),p.length>0)?Promise.resolve(e()):new Promise(t=>{_.push(()=>{t(e())})})}}class y{constructor({renderOptions:e,usePlaygroundScene:t,assets:i,previewSurfaceForLogging:s,productType:r,d2rSessionId:n}){this.isConsumed=!1,this.isDestroyed=!1,this.renderOptions=e,this.usingD2R=e?.preset==="mcp"||e?.preset==="code_layer",this.assets=i??new Map,this.usePlaygroundScene=t,this.history=new d.a({url:"/_snapshot"}),this.previewSurfaceForLogging=s,this.productType=r,this.d2rSessionId=n,this.sitePreviewIframeManager=new c.fj({productType:r,previewSurfaceForLogging:s}),this.usingD2R?this.sitesPreview=this.sitePreviewIframeManager.createSitesPreview({history:this.history,options:{renderOptions:this.renderOptions,useGuidUrls:!0,skipPreviewUpdateListener:!0,ignorePreviewClosedWhenGeneratingAssets:!0,neverCombineSVGAndPNG:!0,onlyFlattenSVGIfVectorLike:!0,generateFullAssets:!0,labs:{runtimeDebugTools:!1}},imageAssetsHolder:this.assets,skipSetPreviewedNode:!0,skipInitialHeartbeat:!0}):this.sitesPreview=this.sitePreviewIframeManager.createSitesPreview({history:this.history,options:{skipPreviewUpdateListener:!0,generateFullAssets:!0,labs:{runtimeDebugTools:!1}},imageAssetsHolder:this.assets,skipSetPreviewedNode:!0,skipInitialHeartbeat:!0}),this.iframe=document.createElement("iframe"),this.iframe.style.position="fixed",this.iframe.style.pointerEvents="none",this.iframe.style.opacity="0",this.iframe.style.top="0px",this.iframe.style.left="0px",this.iframe.allow=(0,u.P)({minimalPermissions:!0}),this.iframe.src=a.zl.get(c.jD),this.sitePreviewIframeManager.mountIframe(this.iframe,{preset:this.renderOptions?.preset,useReactDev:!0}),document.body.appendChild(this.iframe)}configure(e,t){for(let[i,s]of(this.activeBreakpoint=t,this.iframe.style.width=`${this.activeBreakpoint?.width??1200}px`,this.iframe.style.height=`${this.activeBreakpoint?.height??1080}px`,e??[]))this.assets.set(i,s)}updateLoggingContext(e,t){this.previewSurfaceForLogging=e,this.productType=t,this.sitePreviewIframeManager.updateTrackingContext(e,t)}async snapshot({guid:e,entrypoint:t,codeBuildId:i,exportName:s,width:a,height:o,minWidth:l,maxWidth:d,minHeight:c,maxHeight:u,props:m,styles:p,instanceSwapProps:h,isDirectManipulationOnCanvasEnabled:_}){try{this.consume();let g=await E(e,h??{}),f=g.bundle,x=g.assetInstructions,b=await (0,n.Ct)(x);f.files={...f.files,...b};let y=new Blob([p??""],{type:"text/css"}),A=await this.sitesPreview.snapshotDOMToPNG({entrypoint:t,codeBuildId:i,codeInstanceGuid:e,exportName:s,width:a,height:o,minWidth:l,maxWidth:d,minHeight:c,maxHeight:u,props:m,activeBreakpoint:this.activeBreakpoint,styles:y,instanceSwapProps:h,referencedWebsiteBundle:f,isDirectManipulationOnCanvasEnabled:_});return{imageSet:await (0,r.UD)(new Uint8Array(await A.png.arrayBuffer()),"image/png","Code Component Preview "+Date.now()),totalWidth:A.totalWidth,totalHeight:A.totalHeight,layoutWidth:A.layoutWidth,layoutHeight:A.layoutHeight,offsetX:A.offsetX,offsetY:A.offsetY,directManipulationSnapshot:A.directManipulationSnapshot}}finally{this.destroy()}}async analyzeCodeFile({code:e,codeBuildId:t}){try{return this.consume(),await this.sitesPreview.analyzeCodeFile({code:e,codeBuildId:t})}finally{this.destroy()}}async serializeHTMLMulti(e){if(!this.usingD2R)throw Error("Attempting to serialize HTML from a non-compact DOM sandbox");try{this.consume();let t=await (0,o.LE)(e,{neverCombineSVGAndPNG:!0,onlyFlattenSVGIfVectorLike:!0,skipCodeFilesystem:!0,includeRootUntrackedSublayers:this.renderOptions?.preset==="mcp",usePlaygroundScene:this.usePlaygroundScene,skipInstanceUpdate:!0,runId:this.d2rSessionId}),i=await (0,n.Ct)(t.assetInstructions),s=await this.sitesPreview.getHTMLForD2R({bundle:t.bundle,assets:i,renderOptions:this.renderOptions});for(let e of Object.keys(s)){let t=s[e];t&&(t.styles=t.styles.filter(e=>e.id!==m.Tl))}return s}finally{this.destroy()}}async serializeHTMLForH2D(e){if(!this.usingD2R)throw Error("Attempting to serialize HTML from a non-compact DOM sandbox");try{return this.consume(),this.history.restartAt({url:e}),await this.sitesPreview.getHTMLForH2D()}finally{this.destroy()}}async serializeHTMLForLinguaFigma(e,t,i){try{this.consume();let a=(0,s.ft)(),r=(await (0,l.pS)({entrypointsOrIdentifierToFileName:[e],tailwind:!1,shadcn:!1,noWrapper:!1,minify:!1,jsxDev:!1,filesystem:t,codeLibraryFormat:a})).esm;return await this.sitesPreview.renderComponent({entrypoint:{type:"local",code:r},codeBuildId:i,props:{}}),(await this.sitesPreview.getHTMLForElement()).html}finally{this.destroy()}}async unsafeEval(e,...t){try{return await this.sitesPreview.unsafeEval(e,...t)}finally{this.destroy()}}consume(){if(this.isConsumed)throw Error("Attempting to reuse an offscreen sandbox");this.isConsumed=!0}destroy(){this.isConsumed&&(this.isDestroyed=!0,this.sitePreviewIframeManager.reset(),document.body.removeChild(this.iframe),function(e){if(e.usingD2R){let t=g.indexOf(e);-1!==t&&g.splice(t,1),f.length>0&&f.shift()()}else{let t=h.indexOf(e);-1!==t&&h.splice(t,1),x(),_.length>0&&_.shift()()}}(this))}}async function E(e,t){return await (0,o.LE)(Object.entries(t??{}).filter(([e,t])=>"-1:-1"!==t).map(([e,t])=>t).concat([e]),{skipCodeFilesystem:!0,skipInstanceUpdate:!0})}},966836:(e,t,i)=>{i.d(t,{Ae:()=>c});var s=i(716976),a=i(152469),r=i(565698),n=i(490384),o=i(889323);i(214099);var l=i(672080);i(391060);var d=i(145427);function c(){let e=(0,n.q5)(),t=(0,l.Vc)(e?.key??null),i=(0,s.useMemo)(()=>"loaded"===t.status&&t.data?.planRecordId?t.data.planRecordId:null,[t.status,t.data?.planRecordId]),c=(0,r.Rs)((0,o.StJ)({planId:i}),{enabled:!!i}).transform(({npmPrivateRegistry:e})=>e&&"loaded"===e.status?e.data?.scope??null:null).unwrapOr(null);return(0,s.useMemo)(()=>!!c&&!!e&&function(e){let t;let i=(0,a.N)().getFileByPath(`/${d.mO}`);if(!i?.contents)return!1;try{t=JSON.parse(i.contents)}catch(e){return!1}return[...Object.keys(t.dependencies||{}),...Object.keys(t.devDependencies||{}),...Object.keys(t.peerDependencies||{}),...Object.keys(t.optionalDependencies||{})].some(t=>!!t.startsWith("@")&&t.split("/")[0]===e)}(c),[c,e])}},260959:(e,t,i)=>{i.d(t,{O:()=>a});var s=i(237420);function a(){return(0,s.d4)(e=>e.mirror.appModel.pagesList[0]?.nodeId||e.mirror.appModel.currentPage)}},4863:(e,t,i)=>{i.d(t,{C:()=>r});var s=i(750709),a=i(260959);function r(){let e=(0,a.O)();return(0,s.Fk)((e,t)=>e.get(t)?.siteHomepageId||null,e)}},921876:(e,t,i)=>{i.d(t,{QG:()=>p,_I:()=>_,r$:()=>h});var s=i(278995),a=i(818822),r=i(536760),n=i(133202),o=i(224996),l=i(852142),d=i(875283),c=i(424996),u=i(199239),m=i(404343);let p=8,h=12;function _(){let e=(0,c.GQ)()+(0,l.B)(),t=(0,r.md)(u.s0),i=(0,d.ut)(s.Ez5?.editorPreferences().renderRulers,!1)&&t===a.Nfd.FILE,_=(0,n.jz)(m.y9S);return[new o.Mi((i?_:0)+p+e,(i?_:0)+h),{x:"left",y:"top"}]}},301398:(e,t,i)=>{i.d(t,{B:()=>n,H:()=>r});var s=i(536760),a=i(7438);let r=(0,a.Wh)(()=>(0,s.eU)(null)),n=(0,a.Wh)(()=>(0,s.eU)(!1))},390904:(e,t,i)=>{i.d(t,{l:()=>d,x:()=>l});var s=i(104076),a=i(511570),r=i.n(a),n=i(213242),o=i(302051),l=(e=>(e.SECONDARY="secondary",e.DANGER="danger",e.WARNING="warning",e))(l||{});function d({icon:e,bannerType:t,title:i,children:a,legacyMargin:l,inLine:d}){return(0,s.jsxs)("div",{className:r()(n.s.case([["secondary"===t,n.s.colorBgSecondary],["danger"===t,n.s.colorBgDangerTertiary],["warning"===t,n.s.colorBgWarningTertiary]]).if(l,n.s.mx16.mt16.mb20,n.s.mb12).if(d,n.s.flex.flexRow.itemsCenter.p8,n.s.pt4.pb8.px8).bRadius5.$),children:[e&&(0,s.jsx)("div",{className:r()(o.N_,n.s.if(d,n.s.mbAuto,n.s.mb4).$),children:e}),i&&(0,s.jsx)("h4",{className:n.s.textBodyMediumStrong.$,children:i}),a]})}},139159:(e,t,i)=>{i.d(t,{Q:()=>n});var s=i(528191),a=i(794134),r=i(750709);function n(){let e=(0,a.p8)("currentPage");return(0,r.Fk)((e,t)=>(0,s.Pv)(e,t).map(e=>e.guid),e)}},811813:(e,t,i)=>{i.d(t,{$D:()=>T,HB:()=>E,MT:()=>A,up:()=>y});var s=i(716976),a=i(237420),r=i(414393),n=i(38989),o=i(536760),l=i(59881),d=i(847863),c=i(553538),u=i(520356),m=i(7438),p=i(43197),h=i(860626),_=i(410561),g=i(610057),f=i(476224),x=i(819777),b=i(488295);let y=(0,m.Wh)(()=>(0,o.eU)({inProgress:!1,bundleId:null,error:!1}));function E({fileKey:e}){let t=(0,x.JW)(e),{allWebpageGuids:i,selectedWebpageGuids:s}=(0,b.P)(t),a=(0,n.kc)().sts_ppp?Array.from(s||[]):i,r={fileKey:e,responsiveSetsToPublish:a},{onPublishChanges:o}=A(r);return{publishStatus:t,publishPayload:r,onPublishChanges:()=>o(a)}}function A({fileKey:e}){let t=(0,o.Xr)(y),i=(0,a.wA)(),r=u.iZ()?.id,n=(0,f.Oc)();return{onPublishChanges:(0,s.useCallback)(async s=>{let a;(0,l.sx)("sites_publish_started",{fileKey:e,productType:n?"figmake":"sites"}),t({inProgress:!0,bundleId:null,error:!1});try{a=await (0,h.b)(i,{fileKey:e,publishedByUserId:r||"",responsiveSetGuids:s})}catch(e){t({inProgress:!1,bundleId:null,error:!0});return}t({inProgress:!0,bundleId:a,error:!1})},[i,e,n,t,r]),onUpdateBundle:(0,s.useCallback)(async i=>{if(i.siteBundle?.id&&e){try{t({inProgress:!0,bundleId:null,error:!1}),await p.z.updateBundle({fileKey:e,bundleId:i.siteBundle.id})}catch(e){console.error(e),t({inProgress:!1,bundleId:null,error:!0});return}t({inProgress:!0,bundleId:i.siteBundle.id,error:!1})}},[e,t])}}var v=(e=>(e.None="None",e.Publishing="Publishing",e.Published="Published",e.Failed="Failed",e))(v||{});function T({fileKey:e}){let{Sprig:t}=(0,d.A)(),i=(0,_._t)(e),r=(0,x.JW)(e),n=(0,o.md)(y),l=(0,o.Xr)(y),u=(0,a.wA)(),m=(0,s.useCallback)(()=>{l({inProgress:!1,bundleId:null,error:!1})},[l]),p=(0,s.useCallback)(()=>{Object.values(g.V7).forEach(e=>{u(c.F.dequeue({matchType:e}))})},[u]),h=(0,f.Oc)();(0,s.useEffect)(()=>{let e=S({publishProgress:n,publishStatus:r,domainInfo:i});("Published"===e||"Failed"===e)&&m(),I({visualBellManagerState:e,domainInfo:i,dequeuePublishVisualBells:p,Sprig:t,isFigmakeFile:h,publishStatus:r})},[t,p,u,i,n,r,m,h]),(0,s.useEffect)(()=>()=>{p()},[p])}let S=({publishProgress:e,publishStatus:t,domainInfo:i})=>t.isLoading?"None":e.error?"Failed":e.inProgress&&!e.bundleId?"Publishing":e.inProgress&&e.bundleId&&t.lastAttemptedPublish?.id===e.bundleId?t.lastAttemptedPublish?.status==="succeeded"&&i?.fullURL?"Published":t.lastAttemptedPublish?.status==="failed"?"Failed":"Publishing":"None",I=({visualBellManagerState:e,domainInfo:t,dequeuePublishVisualBells:i,Sprig:s,isFigmakeFile:a,publishStatus:o})=>{switch(e){case"Publishing":i();break;case"Published":t?.fullURL&&((0,n.kc)().sts_sprig_targeted_feedback&&s("track","sites_publish",{source:a?"make":"sites"}),(0,g.TI)({domainInfo:t,onDismiss:()=>{i()},isFigmake:a}));break;case"Failed":let l=null;!o.isLoading&&o?.lastPublishFailedErrorType&&(l=(0,x.w6)(o?.lastPublishFailedErrorType)),(0,g.uV)({onDismiss:()=>{i()},isFigmake:a,errorMessage:l});break;case"None":break;default:(0,r.xb)(e)}}},819777:(e,t,i)=>{i.d(t,{JW:()=>l,w6:()=>o});var s=i(468882),a=i(790627),r=i(759095),n=i(889323);function o(e){return"total_video_asset_size_limit_error"===e?(0,s.t)("sites.toolbar.publish_modal.sites_publish_video_asset_size_limit_exceeded"):null}function l(e){let[t]=(0,r.IT)(n.DuV.Query(e?{fileKey:e}:null)),[i]=(0,r.IT)(n.lPt.Query(e?{fileKey:e}:null));if("loaded"!==t.status||"loaded"!==i.status)return{isLoading:!0};let s=(0,a.oA)(t.data?.siteBundles),o=(0,a.oA)(i.data?.siteMount),l=s?.find(e=>"succeeded"===e.status)||null,d=s?.find(e=>"pending"===e.status)||null,c=o?.status==="published",u=o?.publishEvents??[],m=function(e,t){let i=null;t.length>0&&(i=t.find(e=>["publish_new_bundle","publish_preexisting_bundle"].includes(e.action)));let s=e?.find(e=>null!=e.completedAt)||null;return i?s&&s.completedAt?i.createdAt>=s.completedAt?i.siteBundle:i.createdAt<s.completedAt?s:null:i.siteBundle:s}(s||[],u);return{isLoading:!1,isPublishing:null!==d,lastPublishedAt:function(e,t){if(!e)return null;let i=e?.publishEvents??[];if(i.length>0){let e=i.find(e=>["publish_new_bundle","publish_preexisting_bundle"].includes(e.action));if(e)return e.createdAt}return t?t.completedAt:null}(o||null,l),publishedBy:function(e,t){if(!e)return null;let i=e?.publishEvents??[];if(i.length>0){let e=i.find(e=>["publish_new_bundle","publish_preexisting_bundle"].includes(e.action));if(e)return e.actor}return t?.publishedByUser||null}(o||null,l),lastAttemptedPublish:m,lastSuccessfulPublishedResponsiveSetGuids:function(e,t,i){if(e)return null;if(t.length>0){let e=t.find(e=>["publish_new_bundle","publish_preexisting_bundle"].includes(e.action));if(e)return e.siteBundle?.responsiveSetGuids??null}return i?.responsiveSetGuids??null}(!o,u,l),isPublished:c,hasPublishEvents:u.length>0,lastPublishEvent:u[0]||null,lastPublishFailedErrorType:m?.errorType||null}}},488295:(e,t,i)=>{i.d(t,{P:()=>c});var s=i(716976),a=i(38989),r=i(536760),n=i(7438),o=i(4863),l=i(139159);let d=(0,n.Wh)(()=>(0,r.eU)(new Map));function c(e){let[t,i]=(0,s.useState)(null),n=(0,l.Q)(),c=(0,s.useMemo)(()=>new Set(n),[n]),u=(0,r.Xr)(d),m=(0,r.md)(d),p=!e.isLoading,h=p&&!!e.lastSuccessfulPublishedResponsiveSetGuids,_=(0,o.C)(),g=null;e.isLoading||(g=e.lastSuccessfulPublishedResponsiveSetGuids);let f=null;e.isLoading||(f=e.lastPublishedAt);let x=(0,s.useCallback)((e,t)=>{u(i=>(i.set(e,t),new Map(i)))},[u]);return(0,s.useEffect)(()=>{e.isLoading||f===t||(u(new Map),i(f))},[e,t,f,u]),(0,s.useMemo)(()=>{let e=new Set;return(0,a.kc)().sts_ppp?p?(h?(g?.forEach(t=>{c.has(t)&&e.add(t)}),m.forEach((t,i)=>{!0===t?e.add(i):e.delete(i)})):n.forEach(t=>{!1!==m.get(t)&&e.add(t)}),_&&(e.add(_),m.set(_,!0)),{allWebpageGuids:n,selectedWebpageGuids:e,updateGuidSelectionState:x}):{allWebpageGuids:n,selectedWebpageGuids:new Set,updateGuidSelectionState:x}:{allWebpageGuids:n,selectedWebpageGuids:c,updateGuidSelectionState:x}},[p,_,h,n,x,c,m,g])}},252612:(e,t,i)=>{i.d(t,{Z:()=>b,s:()=>x});var s=i(104076),a=i(479600),r=i(468882),n=i(38989),o=i(536760),l=i(213242),d=i(157339),c=i(848755),u=i(448775),m=i(162524),p=i(679572),h=i(616657),_=i(720156),g=i(390904);function f(){let{componentPreviewState:e}=(0,p.k)(),t=(0,o.md)(u.C);return{hasBuildErrors:e===p.d.BUILD_ERROR,isPasswordRequiredAndMissing:t}}function x(){let{hasBuildErrors:e,isPasswordRequiredAndMissing:t}=f();return(0,n.kc)().make_block_publish_on_build_error&&e||t}function b({onClose:e}){let{hasBuildErrors:t,isPasswordRequiredAndMissing:i}=f(),u=(0,h.y2)(_.p.WEBSITE),p=(0,o.Xr)(m.YD);return(0,n.kc)().make_block_publish_on_build_error&&t||i?(0,s.jsx)(c.fu,{name:"Make Publish Modal Error Banner",properties:{hasBuildErrors:t,isPasswordRequiredAndMissing:i},children:(0,s.jsx)(g.l,{bannerType:g.x.DANGER,children:(0,s.jsxs)("p",{className:l.s.pt4.flex.itemsCenter.gap8.fontMedium.$,children:[(0,s.jsx)(a.z,{style:{flexShrink:0}}),(0,s.jsxs)("span",{children:[(0,r.tx)(t?"figmake.publish_modal.console_errors_banner.message":"figmake.publish_modal.password_required_banner.message")," ",(0,s.jsx)(d.Ph,{href:"#",onClick:i=>{i.preventDefault(),t?p(!0):u(),e()},children:(0,r.tx)(t?"figmake.publish_modal.console_errors_banner.cta":"figmake.publish_modal.password_required_banner.cta")})]})]})})}):null}},471341:(e,t,i)=>{i.d(t,{P:()=>b});var s=i(104076),a=i(716976),r=i(971741),n=i(861208),o=i(383492),l=i(923656),d=i(374099),c=i(468882),u=i(536760),m=i(922902),p=i(213242),h=i(750709),_=i(651376),g=i(4863),f=i(811813),x=i(378435);function b({isSitePublished:e,allResponsiveSetGuids:t,selectedResponsiveSetGuids:i,lastSuccessfulPublishedResponsiveSetGuids:a,updateGuidSelectionState:r}){let n=(0,g.C)();return(0,s.jsxs)("div",{className:p.s.maxH400.$,children:[(0,s.jsx)("div",{className:p.s.h32.flex.itemsCenter.colorTextSecondary.$,children:(0,c.t)("sites.toolbar.publish_modal.ready_to_publish")}),n&&(0,s.jsx)(E,{guid:n,isHomepage:!0,isSelected:i.has(n),onChange:r,isSitePublished:e,isPagePublished:a?.includes(n)??!1}),Array.from(i).filter(e=>e!==n).map(t=>(0,s.jsx)(E,{guid:t,isSelected:!0,onChange:r,isSitePublished:e,isPagePublished:a?.includes(t)??!1},t)),t.some(e=>!i.has(e))&&(0,s.jsx)("div",{className:p.s.h32.flex.itemsCenter.colorTextSecondary.$,children:(0,c.t)("sites.toolbar.publish_modal.hide_from_publish")}),t.filter(e=>!i.has(e)).map(t=>(0,s.jsx)(E,{guid:t,isSelected:!1,onChange:r,isSitePublished:e,isPagePublished:a?.includes(t)??!1},t))]})}function y({isSitePublished:e,isPagePublished:t}){return e?(0,s.jsx)("div",{className:p.s.ml8.$,children:(0,s.jsx)(x.x,{isPublished:t,dataTestId:"sitesPagePublishStatusBadge"})}):null}function E({guid:e,isSelected:t,onChange:i,isHomepage:g=!1,isSitePublished:x,isPagePublished:b}){let y=(0,h.Fk)(t=>t.get(e)?.name,e),E=(0,h.Fk)(t=>t.get(e)?.webMetadata?.title??"",e),v=(0,u.md)(f.up).inProgress,T=`checkbox-${(0,a.useId)()}`,S=`label-${(0,a.useId)()}`;return y?(0,s.jsxs)("div",{className:p.s.h48.flex.flexRow.itemsCenter.$,children:[(0,s.jsx)(r.W,{htmlAttributes:{"data-testid":`${y}-checkbox`},id:T,disabled:v||g,checked:t,onChange:t=>i(e,t),"aria-describedby":S}),(0,s.jsx)("div",{className:p.s.ml4.$,children:g?(0,s.jsx)(o.L,{}):(0,s.jsx)(l.p,{})}),(0,s.jsx)(n.J,{htmlAttributes:{id:S},className:p.s.maxW250.ml4.$,children:E?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(A,{labelText:E,isSitePublished:x,isPagePublished:b}),(0,s.jsx)("div",{className:p.s.colorTextSecondary.maxW250.truncate.$,children:y})]}):(0,s.jsx)(A,{labelText:y,isSitePublished:x,isPagePublished:b})}),!t&&x&&b&&(0,s.jsx)(d.M,{className:p.s.mlAuto.colorIconWarningPressed.$,"data-tooltip-type":_.Ib.TEXT,"data-tooltip":(0,c.t)("sites.toolbar.publish_modal.page_will_unpublish_at_next_update"),"data-tooltip-show-above":!0,"data-tooltip-max-width":300,"data-testid":"page-unpublish-warning"})]},e):((0,m.x1)("sites_publish_modal","node_not_found",{guid:e}),null)}function A({labelText:e,isSitePublished:t,isPagePublished:i}){return(0,s.jsxs)("div",{className:p.s.flex.flexRow.itemsCenter.$,children:[(0,s.jsx)("div",{className:p.s.truncate.maxW150.$,children:e}),(0,s.jsx)("div",{children:(0,s.jsx)(y,{isSitePublished:t,isPagePublished:i})})]})}},498460:(e,t,i)=>{i.d(t,{a:()=>N});var s=i(104076),a=i(716976),r=i(237420),n=i(922251),o=i(203515),l=i(283002),d=i(468882),c=i(38989),u=i(224433),m=i(59881),p=i(790627),h=i(759095),_=i(279774),g=i(251931),f=i(139537),x=i(790476),b=i(47972),y=i(554841),E=i(64994),A=i(490384),v=i(889323),T=i(337018),S=i(661435),I=i(476224),w=i(811813),R=i(819777);function N({fileKey:e,onClose:t}){let[i]=(0,h.IT)(v.lPt.Query({fileKey:e}));if(i.status===_.H.LOADING)return(0,s.jsx)(f.k,{"data-testid":"loading-spinner"});if(i.status===_.H.ERRORS)return(0,s.jsx)("div",{children:(0,d.t)("sites.toolbar.publish_modal.error_loading_publish_history")});let a=(0,p.oA)(i.data?.siteMount),r=a?.publishEvents??[];return 0===r.length?(0,s.jsx)("div",{children:(0,d.t)("sites.toolbar.publish_modal.no_publish_history")}):(0,s.jsx)("div",{children:r.map(e=>(0,s.jsx)(C,{publishEvent:e,isLatest:e.id===r[0]?.id,isOldest:e.id===r[r.length-1]?.id,onClose:t},e.id))})}function C({publishEvent:e,isLatest:t,isOldest:i,onClose:p}){let h;let _=(0,I.Oc)(),f=_?(0,d.t)("figmake.publish_modal.publish_history_dropdown.published_app"):(0,d.t)("sites.toolbar.publish_modal.publish_history_dropdown.published_site"),v=_?(0,d.t)("figmake.toolbar.publish_modal.publish_history_dropdown.unpublished_app"):(0,d.t)("sites.toolbar.publish_modal.publish_history_dropdown.unpublished_site"),N=()=>{if("unpublish"!==e.action&&e.siteBundle?.fileVersion?.label)return e.siteBundle.fileVersion.label;switch(e.action){case"publish_new_bundle":return i?f:(0,d.t)("sites.toolbar.publish_modal.publish_history_dropdown.published_changes");case"publish_preexisting_bundle":return(0,d.t)("sites.toolbar.publish_modal.publish_history_dropdown.republished_previous_version");case"unpublish":return v;default:return console.error(`Unknown publish event action: ${e.action}`),null}},C=(0,r.wA)(),k=(0,E.Um)(),L=a.useRef(null),j=`site-publish-history-dropdown-${e.id}`,M=k?.type===j,F=(0,A.tS)(),{onUpdateBundle:D}=(0,w.MT)({fileKey:F??""}),P=(0,R.JW)(F);if((0,w.$D)({fileKey:F??""}),!N()||!F)return null;let B=()=>{(0,m.sx)("sites_publish_history_republish_clicked",{fileKey:F,siteBundleId:e.siteBundle?.id,productType:_?"figmake":"sites"}),D(e),p()},U=[];"unpublish"!==e.action&&(0,c.kc)().sites_named_versions&&U.push((0,s.jsx)(g.c$,{onClick:()=>{let{label:t,description:i,id:s}=e.siteBundle?.fileVersion??{};s&&C((0,y.to)({type:S.y,data:{label:t??void 0,description:i??void 0,savepointID:s,hideShowFullVersionHistoryCTA:!0}}))},children:(0,s.jsx)("span",{"data-testid":"name-this-version-button",children:(0,d.t)("sites.toolbar.publish_modal.publish_history_dropdown.name_this_version")})},0)),"unpublish"!==e.action&&!t&&e.siteBundle?.id&&U.push((0,s.jsx)(g.c$,{onClick:()=>B(),children:(0,s.jsx)("span",{"data-testid":"republish-button",children:(0,d.t)("sites.toolbar.publish_modal.publish_history_dropdown.republish")})},1));let V=U.length>0;return h=t?O.timelineLineFirst:i?O.timelineLineLast:O.timelineLine,(0,s.jsxs)("div",{className:"x1n2onr6",children:[(0,s.jsx)("div",{...u.xk(h)}),(0,s.jsxs)("div",{className:"x78zum5 x1nhvcw1 x1qjc9v5 x1jnr06f x1n2onr6 x12nagc","data-testid":"publish-event-row",children:[(0,s.jsx)("div",{className:"x78zum5 xdt5ytf x1nhvcw1 x5yr21d xkh2ocl x1vjfegm",children:(0,s.jsx)("div",{className:"x78zum5 x6s0dn4 xl56j7k xezl2tj xlrawln x167g77z x2lah0s x1d36bvo x1v8gsql x1gslohp",children:(0,s.jsx)(o.z,{})})}),(0,s.jsxs)("div",{className:"x78zum5 x1qughib x19y5rnk xt0e3qv x163pfp xmzs88n x1iorvi4 xjkvuk6 xh8yej3 xv2f06h",children:[(0,s.jsxs)("div",{className:"x78zum5 xdt5ytf x1jnr06f",children:[(0,s.jsxs)("div",{className:"x78zum5 x1nhvcw1 x6s0dn4 xbcm6b9",children:[(0,s.jsx)("div",{className:"x1j6dyjg x6xwguf x1akne3o",children:N()}),"\xb7",(0,s.jsx)("div",{className:"x1j6dyjg x1n0bwc9",children:t?(0,d.t)("sites.toolbar.publish_modal.publish_history_dropdown.latest"):(0,d.t)("sites.toolbar.publish_modal.publish_history_dropdown.published_date",{publishedDate:e.createdAt})})]}),(0,s.jsx)("div",{className:"x1j6dyjg x1n0bwc9",children:"unpublish"!==e.action&&e.siteBundle?.fileVersion?.description?e.siteBundle.fileVersion.description:t?(0,d.t)("sites.toolbar.publish_modal.publish_history_dropdown.from_date",{publishedDate:e.createdAt}):null}),(0,s.jsxs)("div",{className:"x78zum5 x6s0dn4 x1jnr06f",children:[(0,s.jsx)(x.H8,{size:x.Pf.SMALL,user:e.actor||{handle:" "}}),(0,s.jsx)("span",{children:e.actor?.handle})]})]}),M&&L.current&&(0,s.jsx)(T.Jz,{options:U,hideDropdown:()=>{C(b.oB())},targetRect:L.current.getBoundingClientRect(),lean:"left"}),V&&(0,s.jsx)(n.E,{ref:L,className:"x1717udv xvy4d1p xxk0z11 x1epfdc xwbv1nw","aria-label":(0,d.t)("sites.toolbar.publish_modal.version_operations",{publishedDate:e.createdAt,user:e.actor?.handle??(0,d.t)("sites.toolbar.publish_modal.unknown_user")}),onClick:e=>{C(b.j7({type:j,data:{targetRect:e.currentTarget.getBoundingClientRect()}}))},"data-testid":"more-button",disabled:P.isLoading||P.isPublishing,children:(0,s.jsx)(l.J,{})})]})]})]})}let O={timelineLine:{kVAEAm:"x10l6tqk",kWkggS:"x1v8gsql",kzqmXN:"x1i1rx1s",koQZXg:"x1tpqehw",keTefX:null,k71WvV:null,kGO01o:"xjkvuk6",kY2c9j:"x1ja2u2z",kZKoxP:"x5yr21d",$$css:!0},timelineLineFirst:{kVAEAm:"x10l6tqk",kWkggS:"x1v8gsql",kzqmXN:"x1i1rx1s",koQZXg:"x1tpqehw",keTefX:null,k71WvV:null,keoZOQ:"x1xmf6yo",kY2c9j:"x1ja2u2z",kZKoxP:"x5yr21d",$$css:!0},timelineLineLast:{kVAEAm:"x10l6tqk",kWkggS:"x1v8gsql",kzqmXN:"x1i1rx1s",koQZXg:"x1tpqehw",keTefX:null,k71WvV:null,kY2c9j:"x1ja2u2z",kZKoxP:"x1kpxq89",$$css:!0}}},200210:(e,t,i)=>{i.d(t,{j:()=>_});var s=i(104076),a=i(716976),r=i(51091),n=i(239268),o=i(468882),l=i(38989),d=i(536760),c=i(213242),u=i(635233),m=i(518998),p=i(238511);function h(e){let{selectedResponsiveSetGuids:t}=e,i=(0,d.md)(u.Yj),{blockingErrorsByGuid:a,warningsByGuid:h,accessibilityErrorsByGuid:_}=(0,u.DS)(i),g=new Set(t);g.add(m.CS);let f=Array.from(g).reduce((e,t)=>e+(a[t]?.length??0),0),x=Array.from(g).reduce((e,t)=>e+(h[t]?.length??0),0),b=Array.from(g).reduce((e,t)=>e+(_[t]?.length??0),0),y=f>0,E=x>0,A=b>0,v=!y&&!E&&!A,T=(0,l.kc)().sites_publish_blocking_lints,S=y?"errors":E?"warnings":"accessibility",[I,w,R]=r.t.useTabs({errors:y,warnings:E,accessibility:A},{defaultActive:S}),N=0===f,C=0===x,O=0===b;return(0,s.jsx)(s.Fragment,{children:v?(0,s.jsx)(p.tE,{title:(0,o.t)("sites.toolbar.publish_modal.no_issues.title"),description:(0,o.t)("sites.toolbar.publish_modal.no_issues.description")}):(0,s.jsx)(s.Fragment,{children:T?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{style:{padding:8},children:(0,s.jsxs)(r.t.TabStrip,{manager:R,children:[y&&(0,s.jsx)(r.t.Tab,{...I.errors,children:(0,s.jsxs)("div",{className:c.s.flex.itemsCenter.gap4.$,children:[(0,o.tx)("sites.toolbar.publish_modal.errors_tab"),(0,s.jsx)(n.E,{variant:"dangerFilled",children:f})]})}),E&&(0,s.jsx)(r.t.Tab,{...I.warnings,children:(0,s.jsxs)("div",{className:c.s.flex.itemsCenter.gap4.$,children:[(0,o.tx)("sites.toolbar.publish_modal.warnings_tab"),(0,s.jsx)(n.E,{variant:"warningFilled",children:x})]})}),A&&(0,s.jsx)(r.t.Tab,{...I.accessibility,children:(0,s.jsxs)("div",{className:c.s.flex.itemsCenter.gap4.$,children:[(0,o.tx)("sites.toolbar.publish_modal.accessibility_tab"),(0,s.jsx)(n.E,{children:b})]})})]})}),(0,s.jsx)("div",{className:c.s.h1.wFull.colorBgTertiary.$}),y&&(0,s.jsx)(r.t.TabPanel,{...w.errors,children:N?(0,s.jsx)(p.tE,{title:(0,o.t)("sites.toolbar.publish_modal.no_issues.title"),description:(0,o.t)("sites.toolbar.publish_modal.no_issues.description")}):(0,s.jsx)(p.F8,{lintingResults:a,onlyShowWebpageGuids:Array.from(t),recordingKey:"sites-publish-modal-errors"})}),E&&(0,s.jsx)(r.t.TabPanel,{...w.warnings,children:C?(0,s.jsx)(p.tE,{title:(0,o.t)("sites.toolbar.publish_modal.no_issues.title"),description:(0,o.t)("sites.toolbar.publish_modal.no_issues.description")}):(0,s.jsx)(p.F8,{lintingResults:h,onlyShowWebpageGuids:Array.from(t),recordingKey:"sites-publish-modal-warnings"})}),A&&(0,s.jsx)(r.t.TabPanel,{...w.accessibility,children:O?(0,s.jsx)(p.tE,{title:(0,o.t)("sites.toolbar.publish_modal.no_issues.title"),description:(0,o.t)("sites.toolbar.publish_modal.no_issues.description")}):(0,s.jsx)(p.F8,{lintingResults:_,onlyShowWebpageGuids:Array.from(t),recordingKey:"sites-publish-modal-accessibility"})})]}):(0,s.jsx)(p.F8,{lintingResults:i,onlyShowWebpageGuids:Array.from(t),recordingKey:"sites-publish-modal-all"})})})}function _(e){return(0,s.jsx)(a.Suspense,{fallback:(0,s.jsx)(p.j$,{}),children:(0,s.jsx)(h,{selectedResponsiveSetGuids:e.selectedResponsiveSetGuids})})}},187489:(e,t,i)=>{i.d(t,{Y2:()=>g});var s=i(104076),a=i(223776),r=i(278995),n=i(818822),o=i(468882),l=i(38989),d=i(536760);i(224433);var c=i(872935),u=i(807083),m=i(476224),p=i(301398);let h="/legal/creator-agreement/",_="https://www.figma.com/product-specific-terms/";function g({isPublishing:e,isUpdating:t}){let i=null;return(e?i=(0,s.jsx)(f,{}):t||(i=(0,s.jsxs)("div",{children:[(0,s.jsx)(b,{}),(0,s.jsx)(x,{})]})),i)?(0,s.jsx)("div",{className:"xrlp15q x1nmd3yn xm735u9 xkbmbem x3wk4up xod5an3 x1n0bwc9","data-testid":"publishing-subtext",children:i}):null}function f(){return(0,o.tx)("sites.toolbar.publish_modal.publish_in_progress_description")}function x(){let e=(0,d.md)(p.H),t=(0,m.Oc)(),i=(0,u.No)(),a=(0,u.iW)(i).unwrapOr(!0);return t&&e&&(0,l.kc)().cmty_make_publishing?a?(0,o.tx)("sites.toolbar.publish_modal.community_publish_disclaimer",{creator_agreement:(0,s.jsx)(c.CY,{href:h,target:"_blank",trusted:!0,children:(0,o.tx)("sites.toolbar.publish_modal.creator_agreement")})}):(0,o.tx)("sites.toolbar.publish_modal.community_publish_disclaimer_with_web",{creator_agreement:(0,s.jsx)(c.CY,{href:h,target:"_blank",trusted:!0,children:(0,o.tx)("sites.toolbar.publish_modal.creator_agreement")}),beta_terms:(0,s.jsx)(c.CY,{href:_,target:"_blank",trusted:!0,children:(0,o.tx)("sites.toolbar.publish_modal.beta_terms")})}):(0,o.tx)("sites.toolbar.publish_modal.terms_agreement",{figmas_beta_terms:(0,s.jsx)(c.CY,{href:_,target:"_blank",trusted:!0,children:(0,o.tx)("sites.toolbar.publish_modal.beta_terms")}),acceptable_use_policy:(0,s.jsx)(c.CY,{href:"https://www.figma.com/legal/aup/",target:"_blank",trusted:!0,children:(0,o.tx)("sites.toolbar.publish_modal.acceptable_use_policy")})})}function b(){return(0,m.Oc)()&&0!==(r.t8O?.getLocalTextStyleFontInfo()||[]).filter(e=>e.source!==n.jXp.GOOGLE).length?(0,s.jsxs)("div",{className:"x78zum5 x1q0g3np x1jnr06f",children:[(0,s.jsx)(a.B,{style:{"--color-icon":"var(--color-icon-secondary)"}}),(0,s.jsx)("div",{className:"xrlp15q x1nmd3yn xm735u9 xkbmbem x3wk4up xod5an3 x1n0bwc9",children:(0,o.tx)("sites.toolbar.publish_modal.make_fonts_warning")})]}):null}},31869:(e,t,i)=>{i.d(t,{C:()=>l});var s=i(104076),a=i(374099),r=i(468882),n=i(213242),o=i(390904);function l({isSitePublished:e}){return(0,s.jsx)(o.l,{bannerType:e?o.x.DANGER:o.x.SECONDARY,children:(0,s.jsxs)("p",{className:n.s.pt4.flex.itemsCenter.gap8.fontMedium.$,children:[(0,s.jsx)(a.M,{style:{minWidth:"24px"}}),(0,r.tx)("sites.toolbar.publish_modal.publish_disabled_incident")]})})}},409475:(e,t,i)=>{i.d(t,{T:()=>E});var s=i(104076),a=i(498020),r=i(258253),n=i(468882);i(224433);var o=i(890),l=i(759095),d=i(748399),c=i(203031),u=i(651594),m=i(229483),p=i(954402),h=i(389727),_=i(848755),g=i(448160),f=i(193741),x=i(618037),b=i(660046);function y({hubFileId:e}){let[t]=(0,l.IT)((0,h.Z)({apiResourceType:"file",id:e})),i=t.data?.creator.name||t.data?.creator.handle,a=t.data?(0,m.K2)(t.data):"";return"errors"===t.status?null:(0,s.jsx)("div",{className:"show_love_modal--rowContainer--0t7nv",children:"loaded"===t.status&&t.data&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"show_love_modal--leftColumn--4BFPf",children:[(0,s.jsx)(c.e,{size:16,entity:t.data.creator}),(0,s.jsx)("div",{children:(0,s.jsxs)("a",{href:(0,p.Sv)(t.data)?(0,u.VJ)({resource:t.data}):(0,u._t)({resource:t.data}),target:"_blank",className:"show_love_modal--resourceLink--FS7mF",tabIndex:0,children:[(0,s.jsx)("span",{className:"show_love_modal--resourceName--TDRVA",children:a}),(0,s.jsx)("span",{className:"show_love_modal--creatorName--Gklrz",children:(0,n.tx)("community.figma_make.show_love.attribution_row",{author:i})})]})})]}),(0,s.jsx)("div",{className:"show_love_modal--rightColumn--VCAkU",children:(0,s.jsx)(_.fu,{name:g.e0.FIGMA_MAKE_COMMUNITY_ATTRIBUTION,children:(0,s.jsx)(f.Q,{resource:t.data,viewContext:"Figma Make Community Attribution",removeButtonBorder:!0})})})]})})}function E(){let e=(0,x.YP)({}),t=(0,r.G)(),i=(0,b.yj)(e),c=i.map(({hubFileId:e})=>(0,h.Z)({apiResourceType:"file",id:e})),u=(0,l.En)(c);if(0===i.length||u.some(e=>"loading"===e.status)||u.every(e=>"errors"===e.status))return null;let m="dark"===t.color;return(0,s.jsxs)(a.Wk,{className:"x1w7iyvz xdz8niu xa3vuyk x10e4vud",children:[(0,s.jsxs)("div",{className:"show_love_modal--header--5nCB3",children:[(0,s.jsx)("div",{className:"show_love_modal--imgContainer--LA7Fk",children:(0,s.jsx)(d.oW,{src:(0,o.ck)(m?"8c5f36e7686970472553e5da4650c78cb52673b0":"5181875ecee4c670077941a2e262b305b425f77b")})}),(0,s.jsx)("div",{className:"show_love_modal--headerText--fVEG9",children:(0,n.t)("community.figma_make.show_love.header")})]}),i.map(e=>(0,s.jsx)(y,{hubFileId:e.hubFileId},e.hubFileId))]})}},786131:(e,t,i)=>{i.d(t,{F:()=>eE});var s=i(104076),a=i(716976),r=i(237420),n=i(748716),o=i(289157),l=i(908719),d=i(610678),c=i(861208),u=i(376124),m=i(479600),p=i(468882),h=i(38989),_=i(536760);i(224433);var g=i(908397),f=i(872935),x=i(213242),b=i(852130),y=i(229483),E=i(533546),A=i(245320),v=i(554841),T=i(932119),S=i(114962),I=i(562709),w=i(273149),R=i(77752),N=i(781090),C=i(490384),O=i(520356),k=i(511612),L=i(397617),j=i(428444),M=i(807083),F=i(770462),D=i(937683),P=i(880462),B=i(30129),U=i(966836),V=i(476224),z=i(301398),H=i(390904),$=i(801070),G=i(133363),W=i.n(G),q=i(890),K=i(748399),X=i(519639),Y=i(341701),Q=i(920511),Z=i(880283),J=i(772321),ee=i(503158),et=i(214099);function ei({name:e,authorName:t,imageUrl:i,isLoading:a=!1,handleThumbnailChange:r}){return a||!i?(0,s.jsxs)("div",{className:"x35muul x185x1x2 x1yjdb4r x330v8y xf7z5ut x3nfvp2 xdt5ytf x1cy8zhl xsik4n6 x67bb7w",children:[(0,s.jsx)("div",{className:"xh8yej3 x1xjupan x176lpz5 x192jxwq x1iyjqo2 xs83m0k x1t1x2f9 x2lwn1j"}),(0,s.jsx)("div",{className:"x78zum5 xdt5ytf x1cy8zhl x1ed6fcf x1ta3ar0"})]}):(0,s.jsxs)("div",{className:"x35muul x185x1x2 x1yjdb4r x330v8y xf7z5ut x3nfvp2 xdt5ytf x1cy8zhl xsik4n6 x67bb7w",children:[(0,s.jsx)("div",{className:"xb3r6kr x192jxwq x176lpz5 xh8yej3 x8nyqqu x1iyjqo2 xs83m0k x1t1x2f9 x2lwn1j",children:(0,s.jsx)(X.v,{size:"small",defaultImageUrl:i,onThumbnailChange:r})}),(0,s.jsxs)("div",{className:"x78zum5 xdt5ytf x1cy8zhl x1ed6fcf",children:[e&&(0,s.jsx)("div",{className:"xb3r6kr x1akne3o xlyipyv x122x9cr x6ijxsv x1j61x8r xk50ysn x1emllf5 x1tabuse xuxw1ft",children:e}),t&&(0,s.jsx)("div",{className:"xb3r6kr x1n0bwc9 xlyipyv x122x9cr x3ek0n1 x1j61x8r x10p5zqr x4ei82o x1117g4y xuxw1ft",children:(0,p.t)("community.publishing.by_author",{authorName:t})})]})]})}function es({fileKey:e,setCommunityPublishingState:t}){let{data:i}=et.M4.useFile(e),n=(0,O.Pc)(),o=(0,Y.DP)(),l=function(e){let t=(0,r.d4)(t=>(0,Q.Rv)(e?.team_id??null,t,null,e?.parent_org_id??null),$.c2),{status:i,allowedAuthors:s}=(0,Q.d0)(e?.team_id??null,null,e?.parent_org_id??null),n=(0,ee.u8)({oldValue:t,oldValueReady:!0,newValue:s,newValueReady:"loaded"===i,label:J.A.UseAuthorNameForPreview.CommunityMakeCollectionPreview,enableFullRead:(0,Z.UZ)(Z.CF.GROUP_5),enableShadowRead:(0,Z.hc)(Z.CF.GROUP_5)}),o=(0,r.d4)(e=>e.authedActiveCommunityProfile??void 0);return a.useMemo(()=>{if(W()(n))return null;let e=(0,Q.Tn)(o);if(e&&n.some(t=>(0,Q.f7)(t,e)))return Q.j4(e)?.name??null;let t=n.find(Q.jr);if(t)return Q.j4(t)?.name??null;let i=n.find(Q.MO);if(i)return Q.j4(i)?.name??null;let s=n.find(Q.Z7);return s?Q.j4(s)?.name??null:null},[n,o])}(i??void 0),[d,c]=a.useState(""),[u,m]=a.useState(null),[h,_]=a.useState(!0),g=a.useCallback(e=>{t(t=>({...t,customThumbnailMedium:e}))},[t]);return(a.useEffect(()=>{i&&n&&(c(i?.name||""),(0,S.DM)(i,n).then(e=>{m(e?.url??null),_(!1)}))},[i,n]),n&&i)?(0,s.jsxs)("div",{className:"x19y5rnk xi4r6k5 x1vamu9a xkh2ocl x78zum5 xdt5ytf x7hzu26 x1n2onr6 xi48r6d",children:[(0,s.jsx)("div",{className:"x10l6tqk x13vifvy xu96u03 x3m8u43 x1ey2m1c x1ja2u2z x47corl","aria-hidden":!0,children:(0,s.jsx)(K.oW,{className:"xh8yej3 x5yr21d xl1xv1r x1lliihq x12oqio5",src:"dark"===o?(0,q.ck)("4fe99e99b6a48341b63d11ce5bc04027aad155fc"):(0,q.ck)("ac076abed86197d3d44d544606669829ab45bd47"),alt:(0,p.t)("sites.toolbar.publish_modal.make_collection_label")})}),(0,s.jsx)("div",{className:"x10l6tqk x1wpqvuw x1uk3ckw xvxbajc x1iawlzt x1vjfegm x47corl",children:(0,s.jsx)(ei,{name:d,authorName:l,imageUrl:u,isLoading:h,handleThumbnailChange:g})})]}):null}var ea=i(178150),er=i(612195);function en({existingHubFile:e,onThumbnailChange:t}){let i=(0,y.lT)(e)?(0,p.t)("sites.toolbar.publish_modal.blocked_community_status"):(0,y.AC)(e)?(0,p.t)("sites.toolbar.publish_modal.in_review_community_status"):(0,p.t)("sites.toolbar.publish_modal.published_community_status"),a=!(0,y.lT)(e)&&!(0,y.AC)(e);return(0,s.jsxs)("div",{className:"x78zum5 xdt5ytf x1pulhmw",children:[(0,s.jsxs)("div",{className:"xf7z5ut x1mxnbhz x1yjdb4r x1vqtdw0 x78zum5 xdt5ytf x1nfngrj",children:[(0,s.jsx)(X.v,{size:"large",existingHubFile:e,onThumbnailChange:a?t:void 0}),(0,s.jsxs)("div",{className:"x78zum5 x1qughib x6s0dn4 xh8yej3",children:[(0,s.jsxs)("div",{className:"x78zum5 xdt5ytf x1iyjqo2 xs83m0k x1t1x2f9",children:[(0,s.jsx)("div",{className:"x1w7y96w x1akne3o x78zum5 xb3r6kr xuxw1ft xlyipyv x152haby",children:(0,er.oA)(e)}),(0,s.jsx)("div",{className:"x1w7y96w x1n0bwc9 x78zum5 xb3r6kr xuxw1ft xlyipyv x152haby",children:(0,p.t)("community.publishing.by_author",{authorName:e.publisher.name})})]}),(0,s.jsx)("div",{className:"x78zum5 x6s0dn4 x2lah0s xv2w18j",children:(0,s.jsx)(ea.F,{...{0:{className:"x1rg5ohu x8rdmch xctkrei x19y5rnk x17akokd x1qxcl5b xno9bf3 x1mt81i5 x12fzf0q"},1:{className:"x1rg5ohu x8rdmch xctkrei x19y5rnk x17akokd x1qxcl5b xno9bf3 xcr9a89 x1quhyk7"}}[!!a<<0],children:i})})]})]}),(0,s.jsx)(eo,{existingHubFile:e})]})}function eo({existingHubFile:e}){return(0,y.lT)(e)?(0,s.jsxs)("div",{className:"x1n0bwc9 x17akokd x1qxcl5b xno9bf3",children:[(0,p.t)("sites.toolbar.publish_modal.blocked_community_status_description")," "]}):(0,y.AC)(e)?(0,s.jsxs)("div",{className:"x1n0bwc9 x17akokd x1qxcl5b xno9bf3",children:[(0,p.t)("sites.toolbar.publish_modal.in_review_community_status_description")," "]}):null}var el=i(235313),ed=i(614457),ec=i(263670),eu=i(845003),em=i(52435),ep=i(366571),eh=i(838909),e_=i(807729),eg=i(218233);function ef(e){let{setCommunityPublishingState:t,fileKey:i}=e,{data:r}=et.M4.useFile(i),n=r?.name,[o,l]=(0,a.useState)([]),[d,c]=(0,a.useState)(!1),u=(0,eg.Ay)(),[{data:m,status:h}]=(0,et.IT)((0,ep.Zp)({categorySlug:ec.LJ.make})),_=(0,a.useMemo)(()=>(m?.tags??[]).sort((e,t)=>(0,ed.Yd)(e.i18n_meta?.text,e.text).localeCompare((0,ed.Yd)(t.i18n_meta?.text,t.text))),[m]),[g,f]=(0,a.useState)(!1),x="loading"===h||g,[b,y]=(0,a.useState)([]);(0,a.useEffect)(()=>{t(e=>({...e,tagsV2:o}))},[o,t]);let E=(0,a.useMemo)(()=>b.map(e=>_.find(t=>t.text===e.tag)||null).filter(e=>null!==e),[_,b]),A=(0,a.useMemo)(()=>_.filter(e=>!E.some(t=>t.text===e.text)),[E,_]);(0,a.useEffect)(()=>{(async()=>{if(_.length&&n&&!g&&!b.length){f(!0);let e=(await e_.Ay.community.suggestResourceTags({resourceType:"Figma Make template",title:n??"",description:"",tagOptions:_.map(e=>e.text)},u)).tagSuggestions.filter(e=>_.some(t=>t.text===e.tag)).sort((e,t)=>t.confidence-e.confidence),t=e.filter(e=>e.confidence>.7).map(e=>_.find(t=>t.text===e.tag)).filter(e=>void 0!==e);y(e),l(t),f(!1)}})()},[u,n,g,b,_]);let v=(0,a.useCallback)(e=>{o.find(t=>(0,em.s)(t,e))?l(o.filter(t=>!(0,em.s)(t,e))):l([...o,e])},[o]),T=(0,a.useRef)(null);return 0===_.length&&"loading"!==h?null:(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:"xxrns5j x1q8tae1 x1vg90ec x1eab18d x1yyillh x7hzu26 x1ef8nbk",children:[(0,p.t)("community.publishing.select_up_to_n_tags_error",{maxTagsPerResource:5}),!g&&b.length>0&&(0,s.jsx)(s.Fragment,{children:" ("+(0,p.t)("ai.n_selected",{n:o.length})+")"})]}),(0,s.jsxs)("div",{className:"x78zum5 x1a02dak x17d4w8g",children:[x&&(0,s.jsx)(s.Fragment,{children:Array.from({length:3}).map((e,t)=>(0,s.jsx)("div",{className:"xp5n9r8 xxk0z11 x19y5rnk x1v8gsql"},t))}),!x&&(0,s.jsx)(s.Fragment,{children:(d?[...E,...A]:E).map(e=>{let t=!!o.find(t=>(0,em.s)(t,e)),i=(0,ed.Yd)(e.i18n_meta?.text,e.text);return(0,s.jsx)(eu.o2,{tag:e,isDisabled:!t&&o.length>=eh.jI,isSelected:t,toggleTag:v,firstNonDisabledCheckboxRef:T,translatedTag:i,useSecondaryStyles:!0},e.text)})}),!x&&(0,s.jsx)(el.$n,{variant:"secondary",onClick:()=>{c(!d)},children:(0,s.jsx)("span",{className:"x1n0bwc9",children:d?(0,p.t)("community.detail_view.show_less"):(0,p.t)("community.shelves.show_more")})})]})]})}function ex({isFirst:e=!1,name:t,authorName:i,imageUrl:a,isLoading:r=!1}){return!e||r?(0,s.jsxs)("div",{className:"x1yjdb4r x19y5rnk x1mh6rdz x1sh0mly x78zum5 xdt5ytf xg2d0mh x193iq5w xeuugli",children:[(0,s.jsx)("div",{className:"xb3r6kr x192jxwq x176lpz5 xh8yej3 xn6wvy2"}),(0,s.jsx)("div",{className:"x78zum5 xdt5ytf x195vfkc xe0p6wg"})]}):(0,s.jsxs)("div",{className:"x1yjdb4r x19y5rnk x1mh6rdz x1sh0mly x78zum5 xdt5ytf xg2d0mh x193iq5w xeuugli",children:[(0,s.jsx)("div",{className:"xb3r6kr x192jxwq x176lpz5 xh8yej3 xn6wvy2",children:a&&(0,s.jsx)("img",{className:"xh8yej3 x5yr21d x193iq5w xeuugli xl1xv1r x1lliihq x2lah0s",src:a,loading:"lazy",alt:(0,p.t)("community.publishing.thumbnail_image"),draggable:!1})}),(0,s.jsxs)("div",{className:"x78zum5 xdt5ytf x195vfkc xe0p6wg x15hkz2h",children:[t&&(0,s.jsx)("div",{className:"xrlp15q x1nmd3yn xm735u9 xkbmbem x3wk4up x1akne3o xb3r6kr xlyipyv xuxw1ft",children:t}),i&&(0,s.jsx)("div",{className:"x4oah1p xewu7z0 x2ua9qx x1dnis8n xawads1 x1n0bwc9 xb3r6kr xlyipyv xuxw1ft",children:(0,p.t)("community.publishing.by_author",{authorName:i})})]})]})}function eb({fileKey:e}){let{data:t}=et.M4.useFile(e),i=(0,O.Pc)(),n=function(e){let t=(0,r.d4)(t=>(0,Q.Rv)(e?.team_id??null,t,null,e?.parent_org_id??null),$.c2),{status:i,allowedAuthors:s}=(0,Q.d0)(e?.team_id??null,null,e?.parent_org_id??null),n=(0,ee.u8)({oldValue:t,oldValueReady:!0,newValue:s,newValueReady:"loaded"===i,label:J.A.UseAuthorNameForPreview.SitesPublishCommunityPreviewTile,enableFullRead:(0,Z.UZ)(Z.CF.GROUP_5),enableShadowRead:(0,Z.hc)(Z.CF.GROUP_5)}),o=(0,r.d4)(e=>e.authedActiveCommunityProfile??void 0);return a.useMemo(()=>{if(W()(n))return null;let e=(0,Q.Tn)(o);if(e&&n.some(t=>(0,Q.f7)(t,e)))return Q.j4(e)?.name??null;let t=n.find(Q.jr);if(t)return Q.j4(t)?.name??null;let i=n.find(Q.MO);if(i)return Q.j4(i)?.name??null;let s=n.find(Q.Z7);return s?Q.j4(s)?.name??null:null},[n,o])}(t??void 0),[o,l]=a.useState(""),[d,c]=a.useState(null),[u,m]=a.useState(!0);return(a.useEffect(()=>{t&&i&&(l(t?.name||""),(0,S.DM)(t,i).then(e=>{c(e?.url??null),m(!1)}))},[t,i]),i&&t)?(0,s.jsxs)("div",{className:"x1v8gsql x19y5rnk xi4r6k5 x18d9i69 xkh2ocl x78zum5 xdt5ytf x7hzu26",children:[(0,s.jsx)("div",{className:"xxrns5j x1q8tae1 xh88oxj x1eab18d x1yyillh x3vvef7 xkdneqi",children:(0,p.t)("sites.toolbar.publish_modal.make_collection_label")}),(0,s.jsxs)("div",{className:"xrvj5dj x1p9eum2 x1nfngrj xzp6m1v xb3r6kr",children:[(0,s.jsx)(ex,{isFirst:!0,name:o,authorName:n,imageUrl:d,isLoading:u}),(0,s.jsx)(ex,{}),(0,s.jsx)(ex,{}),(0,s.jsx)(ex,{})]})]}):null}function ey({fileKey:e,setCommunityPublishingState:t}){let i=(0,r.wA)(),s=(0,V.Oc)(),n=(0,C.q5)(),o=(0,h.kc)().cmty_make_publishing??!1,l=(0,_.md)(z.H)??!1,d=function(){let[e]=(0,_.fp)(z.H),t=(0,M.S2)(),i=(0,M.YY)(t);return!!(0,V.Oc)()&&!!(0,h.kc)().cmty_make_publishing&&("loaded"!==i.status||i.data&&!e)}(),c=(0,_.md)(B.td)??!1,u=s&&l&&o&&c,{canPublishAsHubFile:m,reason:p}=(0,I.Of)("SitesPublishModalCommunityUpsell",n),g=s&&l&&o&&!1===m,f=n?.publishedHubFile??null,x=f?.publishingStatus===j.KB.APPROVED_PUBLIC,b=f?.isChatHistoryRemoved;(0,a.useEffect)(()=>{i((0,E.rH)({fileKey:e}))},[i,e]),(0,a.useEffect)(()=>{t(e=>({...e,isCommunityPublishingToggledOffForStarter:d,isCommunityPublishingDisabledForEmptyFigmakeFile:u,cannotPublishAsHubFileReason:p,isHubFileRestrictionBlockingCommunityPublish:g,isUpdatingCommunity:x,shouldShowChatHistory:e.shouldShowChatHistory??(b?.status==="loaded"?!b.data:null)}))},[t,d,u,p,g,x,b])}function eE({fileKey:e,setCommunityPublishingState:t,shouldShowChatHistory:i}){let a=(0,M.S2)(),n=(0,M.YY)(a).unwrapOr(!1),o=(0,b.FT)(),l=(0,r.d4)(t=>{let i=t.figFilePublishedAsHubFile[e];return i?t.hubFiles[i]:void 0});return(0,V.Oc)()&&(0,h.kc)().cmty_make_publishing?l&&(0,k.HF)(l)&&o?(0,s.jsx)(eA,{fileKey:e,existingHubFile:l,setCommunityPublishingState:t,shouldShowChatHistory:i}):(0,s.jsx)(eT,{fileKey:e,isCommunityPublishingEnabledByDefault:n,setCommunityPublishingState:t,shouldShowChatHistory:i}):null}function eA({fileKey:e,existingHubFile:t,setCommunityPublishingState:i,shouldShowChatHistory:r}){ey({fileKey:e,setCommunityPublishingState:i});let[,n]=(0,_.fp)(z.H),o=(0,y.AC)(t)||(0,y.lT)(t);(0,a.useEffect)(()=>{o?n(!1):n(!0)},[t,n,o]);let l=a.useCallback(e=>{i(t=>({...t,customThumbnailMedium:e}))},[i]),d=r??(t?.is_chat_history_removed==null||!t.is_chat_history_removed);return o?(0,s.jsxs)("div",{className:"x78zum5 xdt5ytf x1qjc9v5 x1nfngrj xkh2ocl x178xt8z x13fuv20 x16ufvko x7hzu26 x1ef8nbk xfb5sle xh1goz3 x1w4f5ud x1gcgh60 x1jwbysl",children:[(0,s.jsx)(eS,{}),(0,s.jsx)(en,{existingHubFile:t})]}):(0,s.jsxs)("div",{className:"x78zum5 xdt5ytf x1qjc9v5 x1nfngrj xkh2ocl x178xt8z x13fuv20 x16ufvko x7hzu26 x1ef8nbk xfb5sle xh1goz3 x1w4f5ud x1gcgh60 x1jwbysl",children:[(0,s.jsx)(ev,{existingHubFile:t}),(0,s.jsx)(en,{existingHubFile:t,onThumbnailChange:l}),(0,s.jsx)(ew,{setCommunityPublishingState:i,isChecked:d})]})}function ev({existingHubFile:e}){let t=(0,r.wA)(),i=(0,C.q5)(),l=(0,O.Pc)(),{getTriggerProps:d,manager:c}=n.b(),m=(0,a.useCallback)(()=>{i&&l&&(t(v.Ce()),t((0,A.t)({fileKey:i.key,entryPoint:P.k2.EDITOR,canvasThumbnailPromise:(0,S.DM)(i,l)})))},[i,l,t]),h=(0,a.useCallback)(()=>{if(e?.id){let t=(0,L.X$)(e.id);g.Ay.redirect(t,"_blank")}},[e]);return(0,s.jsx)("div",{className:"x78zum5 xdt5ytf x1nfngrj x1iyjqo2 xs83m0k x1t1x2f9 xh8yej3 xkh2ocl",children:(0,s.jsxs)("div",{className:"x78zum5 x1q0g3np x1qughib x6s0dn4 x1iyjqo2 xs83m0k x1t1x2f9 x1nfngrj xkh2ocl",children:[(0,s.jsx)("div",{className:"xxrns5j x1q8tae1 x1vg90ec x1eab18d x1yyillh",children:(0,p.tx)("sites.toolbar.publish_modal.live_on_figma_community")}),(0,s.jsxs)(n.bL,{manager:c,children:[(0,s.jsx)(o.K,{variant:"ghost","aria-label":(0,p.t)("sites.toolbar.publish_modal.live_on_figma_community"),...d(),children:(0,s.jsx)(u.P,{})}),(0,s.jsxs)(n.mc,{children:[(0,s.jsx)(n.q7,{onClick:m,children:(0,p.tx)("sites.toolbar.publish_modal.update_community_page")}),(0,s.jsx)(n.q7,{onClick:h,children:(0,p.tx)("community.permissions_modal_publish_tab.footer.view_community_page")})]})]})]})})}function eT({fileKey:e,isCommunityPublishingEnabledByDefault:t,setCommunityPublishingState:i,shouldShowChatHistory:r}){ey({fileKey:e,setCommunityPublishingState:i});let[n,o]=(0,_.fp)(z.H),[l,d]=(0,_.fp)(z.B),c=(0,b.FT)(),u=(0,U.Ae)();(0,a.useEffect)(()=>{l||(o(t),d(!0))},[t,l,o,d]),(0,a.useEffect)(()=>{u&&o(!1)},[u,o]);let g=(0,h.kc)().cmty_ai_tagging;return null===n?null:(0,s.jsxs)("div",{className:"x78zum5 xdt5ytf x1qjc9v5 x1nfngrj xkh2ocl x178xt8z x13fuv20 x16ufvko x7hzu26 x1ef8nbk xfb5sle xh1goz3 x1w4f5ud x1gcgh60 x1jwbysl",children:[u?(0,s.jsx)(eS,{}):(0,s.jsx)(eI,{}),(0,s.jsx)(eR,{}),u&&(0,s.jsx)(H.l,{bannerType:H.x.WARNING,children:(0,s.jsxs)("p",{className:x.s.pt4.flex.itemsCenter.gap8.fontMedium.$,children:[(0,s.jsx)(m.z,{style:{minWidth:"16px"}}),(0,p.t)("sites.toolbar.publish_modal.community_private_npm_disabled")]})}),n&&(0,s.jsxs)(s.Fragment,{children:[c?(0,s.jsx)(es,{fileKey:e,setCommunityPublishingState:i}):(0,s.jsx)(eb,{fileKey:e}),g&&(0,s.jsx)(ef,{fileKey:e,setCommunityPublishingState:i}),(0,s.jsx)(ew,{setCommunityPublishingState:i,isChecked:r??!0})]})]})}function eS(){return(0,s.jsx)("button",{"data-testid":"community-toggle",className:"x78zum5 xdt5ytf x1nfngrj x1iyjqo2 xs83m0k x1t1x2f9 xh8yej3 xkh2ocl",children:(0,s.jsxs)("div",{className:"x78zum5 x1q0g3np x1qughib x6s0dn4 x1iyjqo2 xs83m0k x1t1x2f9 x1nfngrj xkh2ocl",children:[(0,s.jsx)("div",{className:"xxrns5j x1q8tae1 x1vg90ec x1eab18d x1yyillh",children:(0,p.t)("sites.toolbar.publish_modal.allow_others_to_remix_on_community")}),(0,s.jsx)(l.v,{checked:!1,disabled:!0})]})})}function eI(){let[e,t]=(0,_.fp)(z.H),i=(0,a.useId)(),r=(0,a.useCallback)(e=>{e?.stopPropagation?.(),t(e=>!e)},[t]);return(0,s.jsx)("button",{"data-testid":"community-toggle",onClick:r,className:"x78zum5 xdt5ytf x1nfngrj x1iyjqo2 xs83m0k x1t1x2f9 xh8yej3 xkh2ocl",children:(0,s.jsxs)("div",{className:"x78zum5 x1q0g3np x1qughib x6s0dn4 x1iyjqo2 xs83m0k x1t1x2f9 x1nfngrj xkh2ocl",children:[(0,s.jsx)("div",{className:"xxrns5j x1q8tae1 x1vg90ec x1eab18d x1yyillh",children:(0,p.t)("sites.toolbar.publish_modal.allow_others_to_remix_on_community")}),(0,s.jsx)(l.v,{id:i,checked:e??!1})]})})}function ew({setCommunityPublishingState:e,isChecked:t}){let i=(0,a.useCallback)(()=>{e(e=>({...e,shouldShowChatHistory:!e.shouldShowChatHistory}))},[e]);return(0,h.kc)().cmty_make_publishing_chat_history_toggle?(0,s.jsxs)("div",{className:"x78zum5 xdt5ytf xg2d0mh x1iyjqo2 xs83m0k x1t1x2f9 xh8yej3 xkh2ocl x7hzu26 x1ah0xmj",children:[(0,s.jsx)("div",{className:"x78zum5 x1q0g3np x6s0dn4 x1nfngrj",children:(0,s.jsx)(d.S,{checked:t,label:(0,s.jsx)(c.J,{children:(0,p.t)("sites.toolbar.publish_modal.show_chat_history")}),onChange:i,...{0:{},1:{className:"x1rkom68"}}[!!t<<0]})}),(0,s.jsx)("div",{className:"xrlp15q x1nmd3yn xm735u9 xkbmbem x3wk4up x1n0bwc9 xdpxx8g",children:(0,p.t)("sites.toolbar.publish_modal.show_chat_history.description")})]}):null}function eR(){let[e]=(0,_.fp)(z.H),t=(0,F.ol)(),i=w.h.useTrackingContext({trigger:D.b.FIGMAKE_PUBLISH_SITE}),a=(0,M.S2)(),r=(0,M.YY)(a),n=(0,R.y)(t?.id||"",N.C.FIGMAKE_PUBLISH_SITE);return e||!r.data?null:(0,s.jsx)("div",{children:(0,p.tx)("sites.toolbar.publish_modal.allow_others_to_remix_on_community.description",{upgradePlanLink:(0,s.jsx)(f.Us,{className:x.s.noWrap.cursorDefault.$,onClick:n,trackingProperties:{trackingDescriptor:T.c.PROFESSIONAL_PLAN,...i},trusted:!0,children:(0,p.tx)("sites.toolbar.publish_modal.allow_others_to_remix_on_community.upgrade_plan_link")})})})}},265828:(e,t,i)=>{i.d(t,{K:()=>K});var s=i(104076),a=i(922251),r=i(395237),n=i(468882),o=i(38989),l=i(511570),d=i.n(l),c=i(59881),u=i(977051),m=i(213242),p=i(790476),h=i(187408),_=i(716976),g=i(239268),f=i(536760);i(224433);var x=i(139537),b=i(635233),y=i(518998),E=i(302051);function A({label:e,content:t,action:i,forceShortContentStyle:a}){return(0,s.jsxs)("div",{className:m.s.flex.justifyBetween.itemsCenter.minH24.$,children:[(0,s.jsxs)("div",{className:m.s.flex.itemsCenter.$,children:[(0,s.jsx)("div",{className:E.Dm,children:(0,s.jsx)("span",{className:m.s.colorTextSecondary.$,children:e})}),(0,s.jsx)("div",{className:i||a?E.GK:E.WR,children:t})]}),i&&(0,s.jsx)("div",{className:m.s.maxW32.$,children:i})]})}function v(e){let{selectedResponsiveSetGuids:t,onViewErrors:i}=e,l=(0,f.md)((0,o.kc)().sites_publish_blocking_lints?b.zI:b.Yj),{blockingErrorsByGuid:c,regularErrorsByGuid:u}=(0,b.$0)(l),p=new Set(t);p.add(y.CS);let h=Array.from(p).reduce((e,t)=>e+(c[t]?.length??0),0),_=h+Array.from(p).reduce((e,t)=>e+(u[t]?.length??0),0);return(0,s.jsx)("div",{"data-testid":"site-review-issues-row",className:m.s.py4.$,children:(0,s.jsx)(A,{label:(0,n.t)("sites.toolbar.publish_modal.issues_label"),content:_>0?(0,s.jsx)("div",{className:m.s.flex.justifyBetween.itemsCenter.overflowHidden.$,children:(0,s.jsx)(a.E,{className:d()(m.s.wFull.flex.justifyBetween.py4.bRadius5.$),onClick:i,children:(0,s.jsx)(g.E,{variant:h>0?"dangerFilled":"warningFilled",children:h>0?(0,n.tx)("sites.toolbar.publish_modal.num_issues_need_attention",{numIssues:h}):(0,n.tx)("sites.toolbar.publish_modal.num_issues_to_review",{numIssues:_})})})}):(0,s.jsx)("span",{children:(0,n.tx)("sites.lint.no-issues")}),action:_>0?(0,s.jsx)(a.E,{"aria-label":(0,n.t)("sites.toolbar.publish_modal.review_issues_aria"),className:d()(m.s.wFull.flex.justifyBetween.bRadius5.$,E.vo),onClick:i,children:(0,s.jsx)(r.a,{style:{minWidth:"fit-content"}})}):null})})}function T(){return(0,s.jsx)("div",{className:m.s.py4.$,children:(0,s.jsx)(A,{label:(0,n.t)("sites.toolbar.publish_modal.issues_label"),content:(0,s.jsxs)("div",{className:"x78zum5 x1q0g3np",children:[(0,s.jsx)(x.k,{size:"sm"}),(0,s.jsx)("span",{className:"x1iog12x x1n0bwc9",children:(0,n.tx)("sites.lint.looking-for-issues")})]})})})}function S(e){return(0,s.jsx)(_.Suspense,{fallback:(0,s.jsx)(T,{}),children:(0,s.jsx)(v,{selectedResponsiveSetGuids:e.selectedResponsiveSetGuids,onViewErrors:e.onViewErrors})})}var I=i(237420),w=i(375652),R=i(258882),N=i(289157),C=i(223776),O=i(175182),k=i(707698),L=i(651376),j=i(410561),M=i(351491),F=i(476224);function D({fileKey:e}){let t=(0,I.wA)(),i=(0,F.Oc)(),a=(0,j._t)(e),r=w.iv({placement:"top"}),o=a?(0,s.jsx)(R.N,{href:(0,j.uw)(a),newTab:!0,children:(0,s.jsx)("span",{className:m.s.overflowHidden.ellipsis.colorTextBrand.$,children:(0,j.RT)(a)})}):(0,s.jsx)("div",{className:m.s.flex.itemsStart.gap4.$,children:(0,s.jsxs)("div",{style:{display:"flex",justifyContent:"center"},children:[(0,s.jsx)("span",{className:m.s.overflowHidden.ellipsis.colorTextSecondary.$,children:`example.${(0,M.nC)()}`}),(0,s.jsx)(w.Uj,{"data-testid":"info-icon","aria-label":(0,n.t)("sites.toolbar.publish_modal.publish_your_site_to_get_your_figma_site_subdomain",{domain:(0,M.nC)()}),...r.getTriggerProps(),children:(0,s.jsx)(C.B,{})}),(0,s.jsx)(w.mc,{manager:r,children:(0,s.jsx)(w.UC,{"data-testid":"info-icon-content",children:(0,n.t)("sites.toolbar.publish_modal.publish_your_site_to_get_your_figma_site_subdomain",{domain:(0,M.nC)()})})})]})}),l=a?(0,s.jsx)(N.K,{onClick:()=>{t(k.lW({stringToCopy:(0,j.uw)(a),ignoreLineBreaks:!1}))},"aria-label":(0,n.t)("sites.toolbar.publish_modal.copy_label_to_clipboard",{label:(0,n.t)("sites.toolbar.publish_modal.domain_header")}),htmlAttributes:{"data-tooltip":(0,n.t)("sites.toolbar.publish_modal.copy_to_clipboard"),"data-tooltip-type":L.Ib.TEXT,"data-tooltip-show-immediately":"true"},children:(0,s.jsx)(O.h,{})}):void 0;return(0,s.jsx)(A,{label:i?(0,n.t)("figmake.toolbar.publish_modal.url_header"):(0,n.t)("sites.toolbar.publish_modal.site_url"),content:o,action:l})}var P=i(876740),B=i(565698),U=i(490384),V=i(889323),z=i(897833),H=i(616657);function $({}){let e=(0,U.q5)(),t=e?.key,i=e?.org?.name,o=(0,H.y2)(),{accessLevel:l,isLoading:d}=(0,z.nJ)(e),u=(0,B.Rs)((0,V.Vny)({fileKey:t||""}),{enabled:!0}),m=_.useMemo(()=>!!("loaded"===u.status&&u.data?.siteMount?.pwdConfig?.id),[u]),p=_.useCallback(()=>{o(),setTimeout(()=>{window.dispatchEvent(new CustomEvent("scrollToSiteAccessSection"))},300),(0,c.sx)("sites_open_site_access_settings",{source:"publish_modal_who_can_view"})},[o]);return t&&i&&!d?(0,s.jsx)("div",{"data-testid":"site-who-can-view-row",className:"x1gskr33 x1ihwiht",children:(0,s.jsx)(A,{label:(0,n.t)("sites.toolbar.publish_modal.who_can_view_label"),content:(0,s.jsxs)("div",{className:"x78zum5 x1nhvcw1 x6s0dn4 xg2d0mh xb3r6kr xeuugli",children:[(0,s.jsx)("span",{className:"xb3r6kr xlyipyv xuxw1ft xeuugli xs83m0k",children:(e=>{switch(e){case z.hx.ORG:return(0,n.tx)("sites.toolbar.publish_modal.visibility_org",{orgName:i});case z.hx.ANYONE:default:return(0,n.tx)("sites.toolbar.publish_modal.visibility_public")}})(l)}),m&&(0,s.jsx)(P.P,{"data-testid":"password-protected-icon"})]}),action:(0,s.jsx)(a.E,{"aria-label":(0,n.t)("sites.toolbar.publish_modal.change_visibility_aria"),className:"xh8yej3 x78zum5 x1qughib x19y5rnk xv2f06h",onClick:p,children:(0,s.jsx)(r.a,{className:"x1pshirs"})})})}):null}var G=i(378435),W=(e=>(e.Main="main",e.PageSelection="page-selection",e.ReviewIssues="review-issues",e.PublishHistory="publish-history",e))(W||{});function q({isFigmake:e}){let t=e?(0,n.t)("figmake.publish_modal.site_title_label"):(0,n.t)("sites.metadata.controls.title_site.label");return(0,s.jsx)("div",{"data-testid":"site-title-row",className:m.s.py4.$,children:(0,s.jsx)(A,{label:t,content:(0,s.jsx)(h.qE,{}),forceShortContentStyle:!0})})}function K({fileKey:e,isFigmake:t,isSitePublished:i,selectedResponsiveSetGuids:l,lastSuccessfulPublishAt:h,publishedBy:_,hasPublishEvents:g,setPublishModalView:f}){let x=(0,o.kc)().sts_ppp&&!t;return(0,s.jsxs)("div",{className:m.s.flex.flexColumn.py4.$,children:[(0,s.jsx)(q,{isFigmake:t}),(0,s.jsx)("div",{"data-testid":"site-domain-row",className:m.s.py4.$,children:(0,s.jsx)(D,{fileKey:e})}),(0,s.jsx)("div",{"data-testid":"site-status-row",className:m.s.py4.$,children:(0,s.jsx)(A,{label:(0,n.t)("sites.toolbar.publish_modal.status_header"),content:(0,s.jsx)("div",{className:m.s.flex.itemsCenter.h24.$,children:(0,s.jsx)(G.x,{isPublished:i,dataTestId:"sitesPublishStatusBadge"})})})}),x&&(0,s.jsx)("div",{"data-testid":"site-pages-row",className:m.s.py4.$,children:(0,s.jsx)(A,{label:(0,n.t)("sites.toolbar.publish_modal.pages_label"),content:(0,s.jsx)("div",{className:m.s.flex.justifyBetween.itemsCenter.overflowHidden.$,children:(0,s.jsx)(a.E,{className:d()(m.s.wFull.flex.justifyBetween.py4.bRadius5.$),onClick:()=>f("page-selection"),children:(0,n.tx)("sites.toolbar.publish_modal.num_pages",{numPages:l.size})})}),action:(0,s.jsx)(a.E,{"aria-label":(0,n.t)("sites.toolbar.publish_modal.select_pages_to_publish"),className:d()(m.s.wFull.flex.justifyBetween.bRadius5.$,E.vo),onClick:()=>f("page-selection"),children:(0,s.jsx)(r.a,{style:{minWidth:"fit-content"}})})})}),!t&&(0,s.jsx)(S,{selectedResponsiveSetGuids:l,onViewErrors:()=>{f("review-issues"),(0,c.sx)("sites_open_lint_modal",{source:"publish_modal"})}}),h&&(0,s.jsx)("div",{"data-testid":"site-last-published-row",className:m.s.py4.$,children:(0,s.jsx)(A,{label:(0,n.t)("sites.toolbar.publish_modal.last_published_header"),content:(0,s.jsxs)("div",{className:m.s.flex.itemsCenter.$,children:[(0,s.jsx)(u.h1,{date:h,capitalize:!0}),_&&(0,s.jsxs)("span",{className:m.s.flex.justifyCenter.itemsCenter.ml4.$,children:[` \xb7 `,(0,s.jsxs)("div",{className:m.s.flex.justifyCenter.itemsCenter.$,children:[(0,s.jsx)("div",{className:m.s.flex.itemsCenter.justifyCenter.h24.w24.$,children:(0,s.jsx)(p.H8,{size:p.Pf.SMALL,user:_||{handle:" "}})}),(0,s.jsx)("span",{className:E.er,children:_.handle})]})]})]}),action:(0,o.kc)().sts_revert_publish&&g?(0,s.jsx)(a.E,{"aria-label":(0,n.t)("sites.toolbar.publish_modal.publish_history"),className:d()(m.s.wFull.flex.justifyBetween.bRadius5.$,E.vo),onClick:()=>{f("publish-history"),(0,c.sx)("sites_publish_history_opened",{productType:t?"figmake":"sites"})},children:(0,s.jsx)(r.a,{style:{minWidth:"fit-content"}})}):null})}),(0,s.jsx)($,{})]})}},378435:(e,t,i)=>{i.d(t,{x:()=>o});var s=i(104076),a=i(178150),r=i(468882),n=i(213242);function o({isPublished:e,dataTestId:t}){return(0,s.jsx)(a.F,{className:n.s.inlineBlock.px4.bRadius5.textBodyMedium.if(e,n.s.colorBgSelected.colorTextBrand,n.s.colorBgSecondary.colorText).$,"data-testid":t,children:e?(0,r.tx)("sites.metadata.controls.publish_status.published"):(0,r.tx)("sites.metadata.controls.publish_status.not_published")})}},765325:(e,t,i)=>{i.d(t,{m:()=>b});var s=i(104076),a=i(716976),r=i(237420),n=i(468882),o=i(879624),l=i(470653),d=i(848755),c=i(291203),u=i(203745),m=i(520356),p=i(428444),h=i(214099),_=i(864830),g=i(448160),f=i(605020),x=i(103192);let b=(0,f.Ju)(function({figFileKey:e,entryPoint:t,shouldShowChatHistory:i,customThumbnailMedium:f,tagsV2:b}){let y=(0,m.iZ)(),E=(0,u.sZ)(),{status:A,data:v}=h.M4.useFile(e),T=(0,x.$S)({fileKey:e,file:v??null}),S=a.useMemo(()=>v?"loaded"===T.status&&T.data.file?(0,c.Jj)(T.data.file):(0,c.bY)(v):void 0,[v,T]),I=(0,r.d4)(t=>{let i=t.figFilePublishedAsHubFile[e];return i?t.hubFiles[i]:void 0});return"loading"===A||"loading"===T.status?null:S?(0,s.jsx)(d.fu,{name:g.e0.COMMUNITY_HUB_FILE_PUBLISH_MODAL_V2,properties:{userId:y?.id,orgId:E?.id,resourceType:_.vt.HUB_FILE,resourceId:I?.id,fileKey:e,editorType:p._Y.FIGMAKE,entryPoint:t},children:(0,s.jsx)(l.S,{figFile:S,existingHubFile:I,createNewVersionOnSubmit:!0,shouldShowChatHistory:i,customThumbnailMedium:f,tagsV2:b})}):(0,s.jsx)(o.r,{title:(0,n.t)("community.publishing.publish_your_file_to_community")})})},813656:(e,t,i)=>{i.d(t,{h:()=>o});var s=i(104076),a=i(374099),r=i(468882),n=i(390904);function o({numUnpublishingPages:e}){return(0,s.jsx)(n.l,{bannerType:n.x.WARNING,icon:(0,s.jsx)(a.M,{}),inLine:!0,children:(0,s.jsx)("p",{children:(0,r.t)("sites.toolbar.publish_modal.pages_will_unpublish_with_the_next_update",{numPages:e})})})}},368034:(e,t,i)=>{i.d(t,{K:()=>o});var s=i(449980);let a=s.z.enum(["lightbox","spin","typewriter","scramble","drag","mouseParallax"]),r=s.z.enum(["motion","mouse","scrolling"]),n=s.z.object({name:s.z.string(),icon:a.optional(),category:r.optional(),nodeTypes:s.z.array(s.z.string()).optional(),apiVersion:s.z.number()}).omit({apiVersion:!0});function o(e){let t=n.safeParse(e);if(!t.success){let{fieldErrors:e}=t.error.flatten(),i=Object.entries(e).filter(([e,t])=>t?.length).map(([e,t])=>`${e}: ${t.join(", ")}`);throw Error(i.length>0?`Interaction configuration is invalid:
  - ${i.join("\n  - ")}`:"Interaction configuration is missing.")}}},531089:(e,t,i)=>{function s(e){return function(e){let t={};for(let i in e){let s=e[i],a=i.substring(0,i.lastIndexOf("#"));a&&s&&(t[a]="value"in s?s.value:s.defaultValue)}return t}(e.canHaveBackingCodeComponent?e.componentProperties():e.isState?e.parentNode.componentPropertyDefinitions():e.componentPropertyDefinitions())}function a(e){return Object.entries(e.isCodeInstance?e.componentProperties():e.isState?e.parentNode.componentPropertyDefinitions():e.componentPropertyDefinitions()).filter(([e,t])=>"INSTANCE_SWAP"===t.type).reduce((e,[t,i])=>{let s=t.substring(0,t.lastIndexOf("#"));return{...e,[s]:"value"in i?i.value:i.defaultValue}},{})}i.d(t,{K8:()=>a,jT:()=>s})},205863:(e,t,i)=>{i.d(t,{K:()=>r,f:()=>n});var s=i(536760),a=i(7438);let r=(0,a.Wh)(()=>(0,s.eU)(!1)),n=(0,a.Wh)(()=>(0,s.eU)(!1))},764330:(e,t,i)=>{i(468882),i(38989),i(728066),i(750709)},614663:(e,t,i)=>{i(104076),i(716976),i(468882),i(224433),i(651376),i(764330)},275159:(e,t,i)=>{i.d(t,{h:()=>n});var s=i(536760),a=i(108661),r=i(89126);let n=new class{clearSlideThemeStylePreview(e){s.zl.set(a.q0,t=>{let i={...t};for(let t of e)delete i[t];return i})}syncSlideThemeAtom(e,t){(0,a.i1)(e).syncFromFullscreen({id:e,data:t}),(0,r.X_)(e)&&(a.TN.syncFromFullscreen(i=>t?i.includes(e)?i:[...i,e]:i.filter(t=>t!==e)),a.Dq.syncFromFullscreen(i=>{if(t){if(!(e in i)||i[e]!==t.name)return{...i,[e]:t.name}}else{let{[e]:t,...s}=i;return s}return i}))}chainShuffle(e){let t=0,i=[];for(let t=1;t<e.length;t++)i.push(t);for(;i.length>0;){let s=Math.floor(Math.random()*i.length),a=i[s];i.splice(s,1);let r=e[a];e[a]=e[t],e[t]=r,t=a}}computeThemeSwapColorVariableMapping(e,t){let i=Array.from(e.keys()),s=Array.from(t.keys());this.chainShuffle(s);let a=new Map;for(let t=0;t<e.size;t++){let e=i[t],r=s[t%s.length];e&&r&&a.set(e,r)}return a}}},108661:(e,t,i)=>{i.d(t,{Dh:()=>d,Dq:()=>o,E_:()=>u,TN:()=>n,i1:()=>l,q0:()=>c});var s=i(536760),a=i(7438),r=i(987485);let n=(0,r.hR)([],{changeFileBehavior:r.hW.RESET_VALUE_ON_FILE_CHANGE}),o=(0,r.hR)({},{changeFileBehavior:r.hW.RESET_VALUE_ON_FILE_CHANGE}),l=(0,s.Iz)(e=>(0,r.hR)({id:e,data:null},{changeFileBehavior:r.hW.RESET_VALUE_ON_FILE_CHANGE}));function d(e){let t=l(e);return s.zl.get(t).data}let c=(0,a.Wh)(()=>(0,s.M2)((0,s.eU)({}))),u=(0,a.Wh)(()=>(0,s.eU)(null))},653155:(e,t,i)=>{i.d(t,{J:()=>r});var s=i(468882),a=i(449980);function r(e,t){let i=t,a=n.safeParse(e);a.success&&(i??=a.data.data.message);let r=o.safeParse(e);if(!r.success)return i;let l=(0,s.YD)(r.data.data.i18n.id,r.data.data.i18n.params);return""===l?i:l}let n=a.z.object({data:a.z.object({message:a.z.string()})}).passthrough(),o=a.z.object({data:a.z.object({i18n:a.z.object({id:a.z.string(),params:a.z.object({}).passthrough()})})}).passthrough()},536760:(e,t,i)=>{i.d(t,{AY:()=>l.AY,An:()=>d.A,E2:()=>c.E,E3:()=>c.l,FZ:()=>o.FZ,Hj:()=>o.Hj,Iz:()=>o.Iz,LJ:()=>o.LJ,M2:()=>o.M2,Mt:()=>o.Mt,Pj:()=>a.Pj,Rq:()=>o.Rq,S_:()=>o.S_,Ut:()=>o.Ut,Xr:()=>a.Xr,Zb:()=>o.Zb,eU:()=>o.eU,fp:()=>m,mC:()=>p,md:()=>u,mg:()=>o.mg,oA:()=>o.oA,p6:()=>o.p6,tP:()=>o.tP,t_:()=>o.t_,tx:()=>o.tx,um:()=>o.um,xP:()=>o.xP,yu:()=>o.yu,zl:()=>o.zl});var s=i(716976),a=i(574855),r=i(940543),n=i(952592),o=i(274661),l=i(548661),d=i(514043),c=i(754033);function u(e,t){let i=(0,a.Pj)(),[[r,o,l],d]=(0,s.useReducer)(t=>{let s=i.get(e);return Object.is(t[0],s)&&t[1]===i&&t[2]===e?t:[s,i,e]},void 0,()=>[i.get(e),i,e]),c=i.get(e);(o!==i||l!==e)&&(d(),c=i.get(e));let u=t?.deferToFrame??!1;return(0,s.useEffect)(()=>{let t;let s=i.sub(e,()=>{u?(void 0!==t&&cancelAnimationFrame(t),t=requestAnimationFrame(d)):d()});return d(),()=>{void 0!==t&&cancelAnimationFrame(t),s()}},[i,e,u]),(0,s.useDebugValue)(c),c instanceof Promise?(0,n.Y)(c):c}function m(e,t){return[u(e,t),(0,a.Xr)(e)]}function p(e,t){let i=(0,s.useMemo)(()=>(0,r.eU)(e),[e]);return u(t||i)}},368845:(e,t,i)=>{i.d(t,{G$:()=>_,HM:()=>g,Mj:()=>f,PM:()=>h,Yv:()=>m,mK:()=>p,pv:()=>u});var s=i(104076),a=i(716976),r=i(754245),n=i(335196),o=i(121301),l=i(951832);let d=new Set,c=(0,a.createContext)(o.A?document.body:null);function u(){return Array.from(d)}function m(){return(0,a.useContext)(c)}function p(){let e=m();if(null==e)throw Error("Attempted to use PersistentPopupOutlet before it was rendered. If you need to use this hook before the PersistentPopupOutletProvider has rendered, use `usePersistentPopupOutletOrNull` instead.");return e}function h({children:e}){let t=m();return t?(0,r.createPortal)(e,t):null}function _({children:e}){let[t,i]=(0,a.useState)(null);return(0,s.jsxs)(c.Provider,{value:t,children:[e,(0,s.jsx)("div",{className:l.D,ref:i})]})}function g({children:e,container:t}){let[i,r]=(0,a.useState)(null);return(0,a.useLayoutEffect)(()=>{let e="string"==typeof t?document.querySelector(t):t.current;e instanceof HTMLElement&&r(e)},[t]),(0,s.jsx)(c.Provider,{value:i,children:e})}function f(e){let t=(0,a.useRef)(null);return(0,a.useCallback)(i=>{(0,n.c)(e,i),null==i?d.delete(t.current):d.add(i),t.current=i},[e])}h.displayName="PersistentPopupOutlet",_.displayName="PersistentPopupOutletProvider",g.displayName="CustomPersistentPopupOutletProvider"},960933:(e,t,i)=>{i.d(t,{Q:()=>r});var s=i(716976),a=i(104076);let r=(0,s.memo)(function(e){return(0,a.jsx)("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e,"data-fpl-icon-size":"24",children:(0,a.jsx)("path",{fill:"var(--fpl-icon-color, var(--color-icon))",fillRule:"evenodd",d:"M8.9 6h-.02c-.403 0-.735 0-1.006.022-.28.023-.54.072-.782.196a2 2 0 0 0-.874.874c-.124.243-.173.501-.196.782C6 8.144 6 8.477 6 8.88v.62a.5.5 0 0 0 1 0v-.6c0-.428 0-.72.019-.944.018-.22.05-.332.09-.41a1 1 0 0 1 .437-.437c.078-.04.19-.072.41-.09C8.18 7 8.472 7 8.9 7h.6a.5.5 0 0 0 0-1zm6.2 0h.02c.403 0 .735 0 1.006.022.281.023.54.072.782.196a2 2 0 0 1 .874.874c.124.243.173.501.196.782.022.27.022.603.022 1.005V9.5a.5.5 0 0 1-1 0v-.6c0-.428 0-.72-.019-.944-.018-.22-.05-.332-.09-.41a1 1 0 0 0-.437-.437c-.078-.04-.19-.072-.41-.09A13 13 0 0 0 15.1 7h-.6a.5.5 0 0 1 0-1zm.02 12h-.62a.5.5 0 0 1 0-1h.6c.428 0 .72 0 .944-.019.22-.018.332-.05.41-.09a1 1 0 0 0 .437-.437c.04-.078.072-.19.09-.41.019-.225.019-.516.019-.944v-.6a.5.5 0 0 1 1 0v.62c0 .403 0 .735-.022 1.006-.023.281-.072.54-.196.782a2 2 0 0 1-.874.874c-.243.124-.501.173-.782.196-.27.022-.603.022-1.005.022M8.9 18h-.02c-.403 0-.735 0-1.006-.022-.281-.023-.54-.072-.782-.196a2 2 0 0 1-.874-.874c-.124-.243-.173-.501-.196-.782A13 13 0 0 1 6 15.12v-.62a.5.5 0 0 1 1 0v.6c0 .428 0 .72.019.944.018.22.05.332.09.41a1 1 0 0 0 .437.437c.078.04.19.072.41.09.225.019.516.019.944.019h.6a.5.5 0 0 1 0 1z",clipRule:"evenodd"})})})},275004:(e,t,i)=>{i.d(t,{Q:()=>r});var s=i(716976),a=i(104076);let r=(0,s.memo)(function(e){return(0,a.jsx)("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e,"data-fpl-icon-size":"24",children:(0,a.jsx)("path",{fill:"var(--fpl-icon-color, var(--color-icon))",fillRule:"evenodd",d:"M13.646 8.146a.5.5 0 0 0 0 .708L16.793 12l-3.147 3.146a.5.5 0 0 0 .708.708l3.5-3.5a.5.5 0 0 0 0-.708l-3.5-3.5a.5.5 0 0 0-.708 0m-3.292 0a.5.5 0 0 0-.708 0l-3.5 3.5a.5.5 0 0 0 0 .708l3.5 3.5a.5.5 0 0 0 .708-.708L7.207 12l3.147-3.146a.5.5 0 0 0 0-.708",clipRule:"evenodd"})})})},324309:(e,t,i)=>{i.d(t,{r:()=>r});var s=i(716976),a=i(104076);let r=(0,s.memo)(function(e){return(0,a.jsx)("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e,"data-fpl-icon-size":"24",children:(0,a.jsx)("path",{fill:"var(--fpl-icon-color, var(--color-icon))",d:"M6.5 5a.5.5 0 0 1 .5.5v13a.5.5 0 0 1-1 0v-13a.5.5 0 0 1 .5-.5M17 6a1 1 0 0 1 1 1v7a1 1 0 0 1-1 1H8.5a.5.5 0 0 1 0-1H17V7H8.5a.5.5 0 0 1 0-1z"})})})},383492:(e,t,i)=>{i.d(t,{L:()=>r});var s=i(716976),a=i(104076);let r=(0,s.memo)(function(e){return(0,a.jsx)("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e,"data-fpl-icon-size":"24",children:(0,a.jsx)("path",{fill:"var(--fpl-icon-color, var(--color-icon))",d:"M11.404 5.196a1 1 0 0 1 1.265.06l5 4.5A1 1 0 0 1 18 10.5V17a1 1 0 0 1-1 1h-3a1 1 0 0 1-1-1v-4h-2v4a1 1 0 0 1-1 1H7a1 1 0 0 1-1-1v-6.5a1 1 0 0 1 .331-.743l5-4.5zM7 10.5V17h3v-4a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1v4h3v-6.5L12 6z"})})})},76553:(e,t,i)=>{i.d(t,{N:()=>r});var s=i(716976),a=i(104076);let r=(0,s.memo)(function(e){return(0,a.jsx)("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e,"data-fpl-icon-size":"24L",children:(0,a.jsx)("path",{fill:"var(--fpl-icon-color, var(--color-icon))",d:"M12 9a2 2 0 0 1 2 2v.27a2 2 0 0 1 2.886 1.07A2 2 0 0 1 20 14v.999l-.002.066.003.229c.006.54.025 1.435-.285 2.346-.326.956-.995 1.887-2.251 2.546a7.12 7.12 0 0 1-4.43.726c-1.31-.206-2.475-.762-3.176-1.463-.764-.765-1.935-1.907-2.761-2.72a2 2 0 0 1 2.804-2.852l.098.096V11a2 2 0 0 1 2-2m0 1a1 1 0 0 0-1 1v4.008a.598.598 0 0 1-.943.415l-.069-.059-.787-.773a1 1 0 0 0-1.414.011l-.068.078a1 1 0 0 0 .08 1.338c.82.807 2 1.956 2.768 2.724 1.005 1.004 3.642 1.875 6.187.68l.246-.121c1.78-.934 1.987-2.444 2.002-3.548l-.001-.446-.003-.24L19 15v-1a1 1 0 0 0-2 0v.48a.5.5 0 0 1-.517.5l-.098-.013a.5.5 0 0 1-.385-.488V13a1 1 0 0 0-2 0v1.375a.5.5 0 0 1-.517.5l-.098-.013a.5.5 0 0 1-.385-.487V11a1 1 0 0 0-1-1m0-7a8 8 0 0 1 7.919 6.854.5.5 0 0 1-.99.142 7.002 7.002 0 1 0-13.687 2.835.5.5 0 0 1-.966.26A8 8 0 0 1 12 3m0 3a5 5 0 0 1 4.538 2.9.5.5 0 1 1-.907.42A4 4 0 0 0 8 11a.5.5 0 0 1-1 0 5 5 0 0 1 5-5"})})})},923656:(e,t,i)=>{i.d(t,{p:()=>r});var s=i(716976),a=i(104076);let r=(0,s.memo)(function(e){return(0,a.jsx)("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e,"data-fpl-icon-size":"24",children:(0,a.jsx)("path",{fill:"var(--fpl-icon-color, var(--color-icon))",d:"M12.598 5.01a.5.5 0 0 1 .255.136l4 4A.5.5 0 0 1 16.5 10h-4a.5.5 0 0 1-.5-.5V6H8.5a.5.5 0 0 0-.5.5v11a.5.5 0 0 0 .5.5h7a.5.5 0 0 0 .5-.5v-6a.5.5 0 0 1 1 0v6a1.5 1.5 0 0 1-1.5 1.5h-7A1.5 1.5 0 0 1 7 17.5v-11A1.5 1.5 0 0 1 8.5 5h4zM13 9h2.293L13 6.707z"})})})},528851:(e,t,i)=>{i.d(t,{x:()=>r});var s=i(716976),a=i(104076);let r=(0,s.memo)(function(e){return(0,a.jsx)("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e,"data-fpl-icon-size":"24L",children:(0,a.jsx)("path",{fill:"var(--fpl-icon-color, var(--color-icon))",fillRule:"evenodd",d:"M3 9c0 1.521.566 2.91 1.5 3.968a6 6 0 0 0 4 2.011.47.47 0 0 0 .5-.479.536.536 0 0 0-.49-.524H8.5a5 5 0 0 1-3.218-1.632A5 5 0 1 1 13.975 8.5l.001.008.013.073A.536.536 0 0 0 14.5 9a.47.47 0 0 0 .48-.5 6 6 0 0 0-2.012-4A6 6 0 0 0 3 9m9 2h7a1 1 0 0 1 1 1v7a1 1 0 0 1-1 1h-7a1 1 0 0 1-1-1v-7a1 1 0 0 1 1-1m-2 1a2 2 0 0 1 2-2h7a2 2 0 0 1 2 2v7a2 2 0 0 1-2 2h-7a2 2 0 0 1-2-2z",clipRule:"evenodd"})})})},675575:(e,t,i)=>{i.d(t,{Gb:()=>o});var s=i(38989),a=i(302190),r=i(711839);function n(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class o{async exportVideo(e,t){if(!(0,s.kc)().panama)throw Error("Export failed");let n=new AbortController;this._eventEmitter?.trigger("started",{nodeId:e,abortController:n});try{if(!this._videoExporter){let{VideoExporter:e}=await Promise.all([i.e(3139),i.e(2857),i.e(5177)]).then(i.bind(i,45177));this._videoExporter=new e}let s=(0,r.UN)(),o=s.get(e);o&&await a.Y?.(o,[]);let l=await this._videoExporter.exportVideo({nodeId:e,sceneGraph:s,...t,signal:n.signal,onProgress:t=>{this._eventEmitter?.trigger("progress",{nodeId:e,percent:100*t})}}),d=new Uint8Array(l);return this._eventEmitter?.trigger("complete",{nodeId:e,buffer:d}),d}catch(t){if(t instanceof Error&&"AbortError"===t.name)throw this._eventEmitter?.trigger("cancelled",{nodeId:e}),t;throw this._eventEmitter?.trigger("error",{nodeId:e,error:t instanceof Error?t:Error(String(t))}),t}}constructor(e){n(this,"_videoExporter",null),n(this,"_eventEmitter",void 0),this._eventEmitter=e}}},630384:(e,t,i)=>{i.d(t,{E:()=>a});var s=i(735847);class a{fontResourceStatusChanged(e,t,i){(0,s.dF)(e,t,i)}}},197299:(e,t,i)=>{i.d(t,{N4:()=>l,eS:()=>d,iL:()=>o,jS:()=>c,nZ:()=>n});var s=i(102440),a=i(105533);let r={};function n(e){r=e}function o(){return r}function l({isProduction:e,executeEmscriptenJS:t}){let i,a;let n=(0,s.n)(),o=null,l=null;!e&&r.WebGLEmscriptenObj&&r.WebGLEmscriptenObj.currentContext&&(o=r.WebGLEmscriptenObj.currentContext.handle,l=r.WebGLEmscriptenObj.contexts),(r={}).instantiateWasm=function(e,t){return i=e,a=t,{}},n.Module=r;try{t()}finally{delete n.Module}if(void 0===i)throw Error('Expected WebAssembly code to set "imports"');if(void 0===a)throw Error('Expected WebAssembly code to set "receiveInstance"');return!e&&null!=o&&l&&null!=r.WebGLEmscriptenObj&&(r.WebGLEmscriptenObj.contexts=l,r.WebGLEmscriptenObj.makeContextCurrent(o)),{imports:i,receiveInstance:a,getReservedHeapSize:()=>r.HEAPU8.buffer.byteLength}}function d(){let e=(0,s.n)(),t=e.executeFullscreenEmscriptenCode;return delete e.executeFullscreenEmscriptenCode,t}function c({callMain:e,tsApisForCpp:t,registerRefreshCallback:i,leakBindings:n}){let o=(0,s.n)();try{o.tsapi_init=(e,t)=>{(0,a.LQj)(e),i?.(t)},o.tsApisForCpp=t,r.jsHelpers=t.jsHelpers,e()}finally{n||(delete o.tsapi_init,delete o.tsApisForCpp)}}},274661:(e,t,i)=>{i.d(t,{Ut:()=>s.Ut,eU:()=>a.eU,Iz:()=>f,p6:()=>n.p6,zl:()=>r.z,Zb:()=>c.Z,t_:()=>s.t_,S_:()=>p.S,um:()=>s.um,tx:()=>s.tx,Mt:()=>l,xP:()=>_.x,Rq:()=>s.Rq,mg:()=>s.mg,oA:()=>s.oA,Hj:()=>d.H,yu:()=>u.y,M2:()=>m.M,LJ:()=>h.L,FZ:()=>g.F,tP:()=>n.tP});var s=i(811709),a=i(940543),r=i(956827),n=i(112934);let o=Symbol();function l(e){let t=(0,s.oA)(e,(...e)=>e.length?e[0]:o),i=i=>i(t)===o?i(e):i(t);return"write"in e?(0,a.eU)(i,e.write):(0,a.eU)(i)}var d=i(533163),c=i(343667),u=i(512490),m=i(268164),p=i(969265),h=i(974369),_=i(313354),g=i(87554);function f(e,t){let i=(0,s.Iz)(e,t);return i.removeAll=()=>{i.setShouldRemove(()=>!0),i.setShouldRemove(null)},i}},777145:(e,t,i)=>{i.d(t,{g:()=>o});var s=i(278995),a=i(711839),r=i(481780),n=i(152469);async function o({node:e,tailwind:t,jsxDev:i,shadcn:o,noWrapper:l,bundleFlags:d,clientDependencies:c}){if(!e.isAlive||!s.glU)return null;let u=e.codeFileFullPath,m=(0,r.og)(u),p=(0,n.N)().asTransferableEntries(),h=a.UN().getLocalCodeLibraryOrNull()?.codeLibraryFormat??0;return{...await c.bundleCode({entrypointsOrIdentifierToFileName:[u],filesystem:{objectPath:m,entries:p},tailwind:t,minify:!1,shadcn:o,jsxDev:i,noWrapper:l,bundleFlags:d,codeLibraryFormat:h,codeObjectType:e.backingCodeComponent?.codeObjectType}),objectPath:m,entries:p,codeBuildId:c.generateUniqueId()}}},778038:(e,t,i)=>{i.d(t,{Iu:()=>c,TK:()=>u,XO:()=>h,ZP:()=>p});var s=i(153472),a=i(31572),r=i(32970),n=i(548682);function o(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}let l={numOfAttempts:5,startingDelay:200,timeMultiple:2,maxDelay:4e3,jitter:"full"},d=[400,403,408,429,500,502,503,504,509];r.z.object({uploadPackages:r.z.record(r.z.string(),r.z.object({package:r.z.object({uploadUrl:r.z.string(),fields:r.z.record(r.z.string(),r.z.string()),commitKey:r.z.string()}).nullable().optional(),errorMessage:r.z.string().nullable().optional(),contentKey:r.z.string()}))});let c=r.z.object({commitKeyToResult:r.z.record(r.z.string(),r.z.object({success:r.z.boolean(),errorMessage:r.z.string().nullable().optional()}))}),u=r.z.object({contentBlobs:r.z.record(r.z.string(),r.z.string())});class m extends s.T{constructor(e,t){super(e),o(this,"status",void 0),this.status=t}}class p{async uploadBlobs(e,t,i){try{let a=i.map(({content:e})=>e instanceof Uint8Array?(0,n.Et)(e):(0,n.yS)(e)),r=Object.fromEntries(a.map((e,t)=>[e,i[t]])),o=await this.apiClient.initUploads({fileKey:e,threadId:t,contentSha1s:a});if(200!==o.status||void 0===o.data)throw new s.T(`initUploads failed: ${o.status} - ${o.cause}`);let l=[],d=[];for(let e of a){let t=o.data.uploadPackages[e]?.contentKey;if(!t)throw new s.T(`Content key not found for contentSha1: ${e}`);let i=o.data.uploadPackages[e]?.package;if(i){let t=r[e];d.push({contentSha1:e,uploadContent:t,uploadPackage:i})}l.push({contentKey:t,entityAlreadyExisted:null==i})}let c=(await Promise.all(d.map(({contentSha1:e,uploadContent:t,uploadPackage:i})=>{let{fields:a,uploadUrl:r}=i,{content:n,contentType:o}=t;if(void 0===n)throw new s.T(`Content not found for contentSha1: ${e}`);return this.uploadToS3({presignedData:{fields:a,uploadUrl:r},content:n,contentSha1:e,contentType:o})}))).filter(e=>!e.success);if(c.length>0)throw new s.T(`S3 upload(s) failed:
- ${c.map(e=>e.error).join("\n- ")}`);let u=d.map(({uploadPackage:e})=>e.commitKey);return u.length>0&&await this.commitUploadsWithRetry(e,u),{success:!0,resultItems:l}}catch(e){return{success:!1,error:`uploadBlobs failed: ${e instanceof Error?e.message:String(e)}`}}}async uploadJsonBlobs(e,t,i){let s=i.map(e=>({content:JSON.stringify(e),contentType:"application/json"}));return await this.uploadBlobs(e,t,s)}async listBlobs(e,t){let i=await this.apiClient.listBlobs({fileKey:e,threadId:t});if(200!==i.status||void 0===i.data)throw new s.T(`listBlobs failed: ${i.status} - ${i.cause}`);return i.data.contentBlobs}async fetchBlob(e,t,i){let a=(await this.listBlobs(e,t))[i];if(!a)throw new s.T(`Blob not found for contentKey: ${i}`);let r=await fetch(a);if(!r.ok)throw new s.T(`Failed to fetch blob: ${r.status} - ${r.statusText}`);return r.blob()}sha1ToBase64(e){return btoa(String.fromCharCode(...(0,n.aD)(e)))}async uploadToS3({presignedData:e,content:t,contentSha1:i,contentType:s}){try{let r=new FormData;Object.entries(e.fields).forEach(([e,t])=>{t&&r.append(e,t)}),r.append("x-amz-checksum-sha1",this.sha1ToBase64(i));let n=new Blob([t],{type:s??"application/octet-stream"});return r.append("file",n),await (0,a.backOff)(async()=>{let t=await fetch(e.uploadUrl,{method:"POST",body:r});if(!t.ok){let e=await t.text();throw new m(`S3 upload fetch failed: ${t.status} ${t.statusText} - ${e}`,t.status)}},{...l,retry:e=>{if(e instanceof m){let t=e.status;return null==t||d.includes(t)}return!0}}),{success:!0}}catch(e){return{success:!1,error:`uploadToS3 failed: ${e instanceof Error?e.message:String(e)}`}}}async commitUploadsWithRetry(e,t){let i,r=t;if(await (0,a.backOff)(async()=>{let t=await this.apiClient.commitUploads({fileKey:e,commitKeys:r});if(200!==t.status||void 0===t.data)throw i=new s.T(`commitUploads failed: ${t.status} - ${t.cause}`);i=t.data;let a=Object.entries(t.data.commitKeyToResult).filter(([e,t])=>!t.success).map(([e])=>e);if(a.length>0)throw r=a,new s.T(`commitUploads had ${a.length} failures; retrying subset`)},l),!i||i instanceof s.T)throw new s.T(i?i.message:"commitUploads failed");let n=Object.entries(i.commitKeyToResult).filter(([e,t])=>!t.success).map(([e,t])=>e);if(n.length>0)throw new s.T(`commitUploads failed for some commit keys: ${n.join(", ")}`)}constructor(e){o(this,"apiClient",void 0),this.apiClient=e}}class h{clearCacheIfFileKeyChanged(e){this.currFileKey!==e&&(this.cache.clear(),this.log("Cleared blobstore cache because file key changed",{fileKey:e}),this.currFileKey=e)}async fetchBlobs({fileKey:e,threadId:t,contentKeys:i}){let a=new Map,r=new Set;for(let e of i)this.cache.has(e)?a.set(e,this.cache.get(e)):r.add(e);if(0===r.size)return a;let n=await this.blobstoreHelper.listBlobs(e,t),o=new Set,l=[];for(let e of r){let t=n[e];t?l.push({contentKey:e,blobUrl:t}):o.add(e)}o.size>0&&this.reportError(new s.T("Some blobs were not found in blobstore"),{missingBlobKeys:JSON.stringify(Array.from(o)),fileKey:e,threadId:t});let d=await Promise.all(l.map(async({contentKey:e,blobUrl:t})=>{let{blob:i,error:s}=await this.fetchBlobUrl(t);return{contentKey:e,blob:i,error:s}})),c=[];for(let{contentKey:e,blob:t,error:i}of d)if(t){let i=await t.arrayBuffer();this.cache.set(e,i),a.set(e,i)}else c.push({contentKey:e,error:i});return c.length>0&&this.reportError(new s.T("Failed to fetch some blobs from blobstore"),{failedBlobs:JSON.stringify(c),fileKey:e,threadId:t}),this.log(`Fetched ${a.size} blobs from blobstore`,{fileKey:e,threadId:t}),a}constructor(e,t,i,s){o(this,"blobstoreHelper",void 0),o(this,"reportError",void 0),o(this,"fetchBlobUrl",void 0),o(this,"log",void 0),o(this,"cache",void 0),o(this,"currFileKey",void 0),this.blobstoreHelper=e,this.reportError=t,this.fetchBlobUrl=i,this.log=s,this.cache=new Map}}},153472:(e,t,i)=>{i.d(t,{T:()=>s,f:()=>a});class s extends Error{constructor(e){super(`[make-chat-sdk] ${e}`),this.name="ChatSdkError"}}class a extends Error{constructor(e){super(`[assistant-chat-sdk] ${e}`),this.name="AssistantChatSdkError"}}},39534:(e,t,i)=>{i.d(t,{T:()=>r});var s=i(650356),a=i(827564);let r="reset-css",n=((0,s.A)`
  @layer figreset, figoverridable, reset, theme, base, figutils, components, utilities;
`,(0,s.A)`
  @layer figoverridable {
    :root {
      font-synthesis: none;
    }
  }
`,(0,s.A)`
  @layer figutils {
    :root {
      --banner-height: 48px;
      --banner-height-v2: 40px;
      --full-height-with-banner: calc(100dvh - var(--banner-height));
    }

    @media (max-width: 600px) {
      .banner-v2-container {
        left: 0 !important;
        right: 0 !important;
        margin: 0 auto !important;
      }
    }

    .wrapper-with-banner .min-h-screen {
      min-height: var(--full-height-with-banner);
    }

    .wrapper-with-banner .h-screen {
      height: var(--full-height-with-banner);
    }
  }
`,(0,s.A)`
  @layer figreset {
    :root {
      font-family: var(
        --default-font-family,
        ui-sans-serif,
        system-ui,
        sans-serif,
        'Apple Color Emoji',
        'Segoe UI Emoji',
        'Segoe UI Symbol',
        'Noto Color Emoji'
      );
    }

    html {
      -webkit-text-size-adjust: 100%; /* Prevent adjustments of font size after orientation changes in iOS. */
      -webkit-tap-highlight-color: transparent; /* Disable tap highlights on iOS */
      -webkit-font-smoothing: antialiased; /* Improve font rendering on macOS. */

      width: 100%;
    }

    body {
      margin: 0; /* Remove default margin */
      width: 100%;
    }

    body:has([data-page-overflowx='hidden']) {
      overflow-x: hidden;
    }

    body:has([data-page-overflowx='auto']) {
      overflow-x: auto;
    }
  }

  @layer figutils {
    #container {
      width: 100%;
    }
  }
`),o=(0,s.A)`
  @layer figreset {
    *,
    *:before,
    *:after {
      box-sizing: border-box; /* Prevent padding and border from affecting element width */
    }

    a {
      color: inherit;
      text-decoration: none;
    }

    button {
      border: none;
      background: none;
      padding: 0;
    }

    h1,
    h2,
    h3,
    h4,
    h5,
    h6,
    p {
      font-size: inherit;
      font-weight: inherit;
    }

    blockquote,
    dl,
    dd,
    h1,
    h2,
    h3,
    h4,
    h5,
    h6,
    hr,
    figure,
    p,
    pre {
      margin: 0;
    }

    ol,
    ul,
    menu {
      list-style: none;
      margin: 0;
      padding-inline-start: 0;
    }
  }
`,l=(0,s.A)`
  @layer figutils {
    #container .marquee-container {
      overflow-x: hidden;
      display: flex;
      flex-direction: row;
      position: relative;
      width: var(--width);
      transform: var(--transform);

      &:hover div {
        animation-play-state: var(--pause-on-hover);
      }

      &:active div {
        animation-play-state: var(--pause-on-click);
      }

      &:focus-within > * {
        animation-play-state: paused !important;
      }
    }

    #container .marquee {
      flex: 0 0 auto;
      min-width: var(--min-width);
      display: flex;
      flex-direction: row;
      align-items: center;
      animation: scroll var(--duration) linear var(--delay) var(--iteration-count);
      animation-delay: var(--delay);
      animation-direction: var(--direction);
      animation-timing-function: var(--timing-function);
    }

    #container .marquee.reduced-motion {
      @media (prefers-reduced-motion: reduce) {
        animation: none;
      }
    }

    @keyframes scroll {
      0% {
        transform: translateX(0%);
      }
      100% {
        transform: translateX(-100%);
      }
    }

    #container .marquee-initial-child-container {
      flex: 0 0 auto;
      display: flex;
      min-width: auto;
      flex-direction: row;
      align-items: center;
    }

    #container .marquee-child {
      transform: var(--transform);
    }
  }
`,d=(0,s.A)`
  @layer figutils {
    .code-behavior-wrapper > * {
      width: 100%;
      height: 100%;
    }
  }
`,c=(0,s.A)`
  @layer figutils {
    #container .embed {
      border: none;
    }
  }
`,u=(0,s.A)`
  @layer figreset {
    #container .textContents {
      color: #ffffff00;
    }
  }

  @layer figutils {
    :is(.textContents ul, ul.textContents) > li:before {
      content: '\\2022';
      margin-left: -1.5em;
      display: inline-block;
      text-align: center;
      width: 1.5em;
      -webkit-background-clip: var(--list-marker-background-clip);
      -webkit-text-fill-color: var(--list-marker-text-fill-color);
      background-clip: var(--list-marker-background-clip);
      background-image: var(--list-marker-background-image);
      color: var(--list-marker-color);
      font-size: var(--list-marker-font-size);
      line-height: var(--list-marker-line-height);
      mix-blend-mode: var(--list-marker-mix-blend-mode);
      vertical-align: var(--list-marker-vertical-align);
    }

    :is(.textContents ol, ol.textContents) > li::marker {
      color: var(--list-marker-color);
      font-size: var(--list-marker-font-size);
      line-height: var(--list-marker-line-height);
      vertical-align: var(--list-marker-vertical-align);
    }

    :is(.textContents, .textContents *).adjustLetterSpacing:after {
      content: '';
      margin-left: calc(var(--letter-spacing) * -1);
    }
  }
`,m=(0,s.A)`
  @layer figutils {
    #container .textClip {
      background-clip: text;
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent !important;
    }

    #container .textClip > * {
      -webkit-text-fill-color: initial;
    }
  }
`,p=(0,s.A)`
  @layer figutils {
    .bypass-link {
      position: fixed;
      top: 16px;
      left: 0;
      right: 0;
      display: flex;
      justify-content: center;
      align-items: center;
      opacity: 0;
      pointer-events: none;
    }

    .bypass-link:focus-within {
      opacity: 1;
      z-index: ${a.F};
    }

    .bypass-link > a {
      background-color: #000;
      color: #fff;
      border: 1px solid #fff;
      padding: 12px 16px;
      font-size: 16px;
      border-radius: 12px;
      pointer-events: auto;
    }
  }
`,h=(0,s.A)`
  @layer figreset {
    :root {
      --100dvw: 100vw;
      --100dvh: 100vh;
    }

    @supports (width: 100dvw) {
      :root {
        --100dvw: 100dvw;
        --100dvh: 100dvh;
      }
    }
  }
`,_=(0,s.A)`
  @layer figreset {
    :root {
      text-align: left;
      button {
        text-align: left;
      }
    }
  }
`;(0,s.A)`
  ${n}
  ${o}
  ${u}
  ${m}
  ${c}
  ${l}
  ${d}
  ${h}
  ${p}
  ${_}
`}}]);

//# debugId=64418b1e-546a-5cb2-aa2a-5bb90c34a500

//# sourceMappingURL=https://admin.figma.com/admin/webpack-artifacts/f2419b5f6dc66782c9f9abdf8f429d5d59446581/1603-1f91f585cf885455.min.js.map