services:
  ollama:
    image: ollama/ollama:latest
    container_name: progeny-brain
    ports:
            # Local-first default: bind to localhost only.
            # To expose on LAN intentionally, use docker-compose.lan.yml as an override.
            - '127.0.0.1:11434:11434'
    volumes:
      - ollama_data:/root/.ollama
    # GPU support (Docker Compose v2). On unsupported systems this may be ignored.
    restart: unless-stopped

  qdrant:
    image: qdrant/qdrant:latest
    container_name: progeny-memory
    ports:
            # Local-first default: bind to localhost only.
            # To expose on LAN intentionally, use docker-compose.lan.yml as an override.
            - '127.0.0.1:6333:6333'
    volumes:
      - ./memory/qdrant:/qdrant/storage
    restart: unless-stopped

volumes:
  ollama_data:
