<Page
    x:Class="SallieStudioApp.ConvergencePage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    Background="{StaticResource WindowBackground}">

    <Grid Padding="40" RowSpacing="24">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- Header -->
        <StackPanel HorizontalAlignment="Center">
            <TextBlock x:Name="PhaseTitle"
                       Text="Convergence"
                       FontSize="32"
                       FontWeight="Bold"
                       Foreground="{StaticResource TextPrimary}"
                       HorizontalAlignment="Center"/>
            <TextBlock x:Name="PhaseSubtitle"
                       Text="Getting to know each other"
                       FontSize="16"
                       Foreground="{StaticResource TextSecondary}"
                       HorizontalAlignment="Center"
                       Margin="0,8,0,0"/>
        </StackPanel>

        <!-- Content Area -->
        <Border Grid.Row="1"
                Background="{StaticResource CardBackground}"
                CornerRadius="12"
                Padding="32"
                MaxWidth="800"
                HorizontalAlignment="Center">
            <StackPanel x:Name="ContentPanel" Spacing="24">
                
                <!-- Question Display -->
                <StackPanel x:Name="QuestionPanel" Visibility="Collapsed">
                    <TextBlock x:Name="QuestionNumber"
                               Text="Question 1 of 15"
                               FontSize="12"
                               Foreground="#a78bfa"
                               Margin="0,0,0,8"/>
                    
                    <TextBlock x:Name="QuestionText"
                               Text=""
                               FontSize="18"
                               Foreground="{StaticResource TextPrimary}"
                               TextWrapping="Wrap"/>
                    
                    <TextBlock x:Name="QuestionPurpose"
                               Text=""
                               FontSize="12"
                               Foreground="#6b7280"
                               FontStyle="Italic"
                               TextWrapping="Wrap"
                               Margin="0,8,0,0"/>
                    
                    <TextBox x:Name="AnswerInput"
                             PlaceholderText="Type your answer..."
                             TextWrapping="Wrap"
                             AcceptsReturn="True"
                             Height="150"
                             Margin="0,16,0,0"/>
                    
                    <!-- Sallie's Response -->
                    <Border x:Name="ResponseBorder"
                            Visibility="Collapsed"
                            Background="#1e1b4b"
                            CornerRadius="8"
                            Padding="16"
                            Margin="0,16,0,0">
                        <StackPanel>
                            <TextBlock Text="Sallie"
                                       FontSize="12"
                                       FontWeight="SemiBold"
                                       Foreground="#a78bfa"/>
                            <TextBlock x:Name="ResponseText"
                                       Text=""
                                       FontSize="14"
                                       Foreground="{StaticResource TextPrimary}"
                                       TextWrapping="Wrap"
                                       Margin="0,8,0,0"/>
                        </StackPanel>
                    </Border>
                </StackPanel>

                <!-- Welcome Screen -->
                <StackPanel x:Name="WelcomePanel" HorizontalAlignment="Center">
                    <TextBlock Text="Welcome to Convergence"
                               FontSize="24"
                               FontWeight="SemiBold"
                               Foreground="{StaticResource TextPrimary}"
                               HorizontalAlignment="Center"/>
                    
                    <TextBlock Text="This is where we get to know each other. Through 15 questions across 5 phases, Sallie will learn about you, your preferences, values, and how you'd like to work together."
                               FontSize="14"
                               Foreground="{StaticResource TextSecondary}"
                               TextWrapping="Wrap"
                               TextAlignment="Center"
                               MaxWidth="500"
                               Margin="0,16,0,0"/>
                    
                    <StackPanel Margin="0,24,0,0" Spacing="8">
                        <TextBlock Text="Phases:" FontWeight="SemiBold" Foreground="{StaticResource TextPrimary}"/>
                        <TextBlock Text="1. Tone â€” Understanding your communication style" Foreground="{StaticResource TextSecondary}"/>
                        <TextBlock Text="2. Shadows â€” Your challenges and boundaries" Foreground="{StaticResource TextSecondary}"/>
                        <TextBlock Text="3. Aspirations â€” Your dreams and goals" Foreground="{StaticResource TextSecondary}"/>
                        <TextBlock Text="4. Ethics â€” Moral compass and values" Foreground="{StaticResource TextSecondary}"/>
                        <TextBlock Text="5. Mirror â€” Reflection and synthesis" Foreground="{StaticResource TextSecondary}"/>
                    </StackPanel>
                </StackPanel>

                <!-- Completion Screen -->
                <StackPanel x:Name="CompletionPanel" Visibility="Collapsed" HorizontalAlignment="Center">
                    <TextBlock Text="ðŸŽ‰ Convergence Complete!"
                               FontSize="28"
                               FontWeight="Bold"
                               Foreground="{StaticResource TextPrimary}"
                               HorizontalAlignment="Center"/>
                    
                    <TextBlock Text="Sallie's Heritage has been compiled. She now has a foundational understanding of who you are and how you'd like to work together."
                               FontSize="14"
                               Foreground="{StaticResource TextSecondary}"
                               TextWrapping="Wrap"
                               TextAlignment="Center"
                               MaxWidth="500"
                               Margin="0,16,0,0"/>
                    
                    <TextBlock Text="You can always revisit and update these settings as your relationship evolves."
                               FontSize="14"
                               Foreground="{StaticResource TextSecondary}"
                               TextWrapping="Wrap"
                               TextAlignment="Center"
                               MaxWidth="500"
                               Margin="0,8,0,0"/>
                </StackPanel>

            </StackPanel>
        </Border>

        <!-- Navigation -->
        <Grid Grid.Row="2">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="Auto"/>
                <ColumnDefinition Width="*"/>
            </Grid.ColumnDefinitions>

            <!-- Progress -->
            <StackPanel Orientation="Horizontal" VerticalAlignment="Center">
                <ProgressBar x:Name="ProgressBar"
                             Width="200"
                             Height="4"
                             Value="0"
                             Maximum="15"/>
                <TextBlock x:Name="ProgressText"
                           Text="0/15"
                           Foreground="{StaticResource TextSecondary}"
                           Margin="12,0,0,0"/>
            </StackPanel>

            <!-- Buttons -->
            <StackPanel Grid.Column="1"
                        Orientation="Horizontal"
                        Spacing="12"
                        HorizontalAlignment="Center">
                <Button x:Name="BackBtn"
                        Content="Back"
                        Padding="24,12"
                        Visibility="Collapsed"
                        Click="Back_Click"/>
                
                <Button x:Name="StartBtn"
                        Content="Begin Convergence"
                        Padding="24,12"
                        Click="Start_Click"/>
                
                <Button x:Name="NextBtn"
                        Content="Next"
                        Padding="24,12"
                        Visibility="Collapsed"
                        Click="Next_Click"/>
                
                <Button x:Name="SubmitBtn"
                        Content="Submit Answer"
                        Padding="24,12"
                        Visibility="Collapsed"
                        Click="Submit_Click"/>
                
                <Button x:Name="FinishBtn"
                        Content="Finish"
                        Padding="24,12"
                        Visibility="Collapsed"
                        Click="Finish_Click"/>
            </StackPanel>

            <StackPanel Grid.Column="2"/>
        </Grid>

    </Grid>
</Page>
