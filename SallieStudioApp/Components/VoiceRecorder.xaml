<UserControl
    x:Class="SallieStudioApp.Components.VoiceRecorder"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    mc:Ignorable="d"
    Background="{StaticResource WindowBackground}">

    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- Main Voice Recording Button -->
        <Button Grid.Row="0"
                x:Name="VoiceRecordButton"
                Width="60"
                Height="60"
                CornerRadius="30"
                Background="{StaticResource PrimaryBrush}"
                BorderThickness="0"
                Padding="0"
                Click="VoiceRecordButton_Click"
                PointerEntered="VoiceRecordButton_PointerEntered"
                PointerExited="VoiceRecordButton_PointerExited">
            <Button.Content>
                <Grid>
                    <Ellipse x:Name="RecordingIndicator"
                             Width="50"
                             Height="50"
                             Fill="White"/>
                    <TextBlock x:Name="RecordIcon"
                               Text="ðŸŽ¤"
                               FontSize="24"
                               HorizontalAlignment="Center"
                               VerticalAlignment="Center"/>
                </Grid>
            </Button.Content>
            <Button.Resources>
                <Storyboard x:Name="PulseStoryboard">
                    <DoubleAnimation Storyboard.TargetName="RecordingIndicator"
                                     Storyboard.TargetProperty="ScaleX"
                                     From="1.0" To="1.2" Duration="0:0:1"
                                     AutoReverse="True"
                                     RepeatBehavior="Forever"/>
                    <DoubleAnimation Storyboard.TargetName="RecordingIndicator"
                                     Storyboard.TargetProperty="ScaleY"
                                     From="1.0" To="1.2" Duration="0:0:1"
                                     AutoReverse="True"
                                     RepeatBehavior="Forever"/>
                </Storyboard>
            </Button.Resources>
        </Button>

        <!-- Recording Status -->
        <Border Grid.Row="1"
                x:Name="RecordingStatusBorder"
                Background="{StaticResource CardBackground}"
                CornerRadius="12"
                Padding="16,8"
                Margin="0,8,0,0"
                Visibility="Collapsed">
            <StackPanel Orientation="Horizontal" Spacing="12">
                <!-- Recording Time -->
                <TextBlock x:Name="RecordingTimeText"
                           Text="00:00"
                           FontSize="14"
                           FontWeight="SemiBold"
                           Foreground="{StaticResource TextPrimary}"/>
                
                <!-- Audio Levels -->
                <StackPanel Orientation="Horizontal" Spacing="2">
                    <Rectangle x:Name="AudioLevel1" Width="4" Height="20" Fill="#10b981" RadiusX="2" RadiusY="2"/>
                    <Rectangle x:Name="AudioLevel2" Width="4" Height="20" Fill="#10b981" RadiusX="2" RadiusY="2"/>
                    <Rectangle x:Name="AudioLevel3" Width="4" Height="20" Fill="#10b981" RadiusX="2" RadiusY="2"/>
                    <Rectangle x:Name="AudioLevel4" Width="4" Height="20" Fill="#10b981" RadiusX="2" RadiusY="2"/>
                    <Rectangle x:Name="AudioLevel5" Width="4" Height="20" Fill="#10b981" RadiusX="2" RadiusY="2"/>
                    <Rectangle x:Name="AudioLevel6" Width="4" Height="20" Fill="#10b981" RadiusX="2" RadiusY="2"/>
                    <Rectangle x:Name="AudioLevel7" Width="4" Height="20" Fill="#10b981" RadiusX="2" RadiusY="2"/>
                    <Rectangle x:Name="AudioLevel8" Width="4" Height="20" Fill="#10b981" RadiusX="2" RadiusY="2"/>
                </StackPanel>

                <!-- Control Buttons -->
                <StackPanel Orientation="Horizontal" Spacing="8">
                    <Button x:Name="PauseButton"
                            Content="â¸ï¸"
                            Background="#f59e0b"
                            Foreground="White"
                            Width="32"
                            Height="32"
                            CornerRadius="16"
                            BorderThickness="0"
                            Padding="0"
                            Click="PauseButton_Click"/>
                    
                    <Button x:Name="StopButton"
                            Content="â¹ï¸"
                            Background="#ef4444"
                            Foreground="White"
                            Width="32"
                            Height="32"
                            CornerRadius="16"
                            BorderThickness="0"
                            Padding="0"
                            Click="StopButton_Click"/>
                    
                    <Button x:Name="CancelButton"
                            Content="ðŸ—‘ï¸"
                            Background="#6b7280"
                            Foreground="White"
                            Width="32"
                            Height="32"
                            CornerRadius="16"
                            BorderThickness="0"
                            Padding="0"
                            Click="CancelButton_Click"/>
                </StackPanel>
            </StackPanel>
        </Border>
    </Grid>
</UserControl>
