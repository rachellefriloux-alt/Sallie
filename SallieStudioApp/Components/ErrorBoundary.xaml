
Components.ErrorBoundary"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="using:SallieStudioApp.Components"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    mc:Ignorable="d"
    d:DesignHeight="600"
    d:DesignWidth="800">

    <UserControl.Resources>
        <!-- Converters -->
        <BooleanToVisibilityConverter x:Key="BoolToVisibilityConverter"/>
        
        <!-- Styles -->
        <Style x:Key="ErrorCardStyle" TargetType="Border">
            <Setter Property="Background" Value="{ThemeResource AcrylicBackgroundBrush}"/>
            <Setter Property="BorderBrush" Value="#ef4444"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="CornerRadius" Value="12"/>
            <Setter Property="Padding" Value="24"/>
            <Setter Property="Shadow">
                <Setter.Value>
                    <ThemeShadow/>
                </Setter.Value>
            </Setter>
            <Setter Property="TranslationZ" Value="8"/>
        </Style>

        <Style x:Key="ErrorTitleStyle" TargetType="TextBlock">
            <Setter Property="FontSize" Value="20"/>
            <Setter Property="FontWeight" Value="SemiBold"/>
            <Setter Property="Foreground" Value="#ef4444"/>
            <Setter Property="HorizontalAlignment" Value="Center"/>
            <Setter Property="TextWrapping" Value="Wrap"/>
        </Style>

        <Style x:Key="ErrorMessageStyle" TargetType="TextBlock">
            <Setter Property="FontSize" Value="16"/>
            <Setter Property="Foreground" Value="{ThemeResource TextFillColorPrimaryBrush}"/>
            <Setter Property="HorizontalAlignment" Value="Center"/>
            <Setter Property="TextWrapping" Value="Wrap"/>
            <Setter Property="Margin" Value="0,12,0,24"/>
        </Style>

        <Style x:Key="PrimaryButtonStyle" TargetType="Button">
            <Setter Property="Background" Value="#6366f1"/>
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="Padding" Value="20,12"/>
            <Setter Property="FontSize" Value="16"/>
            <Setter Property="FontWeight" Value="Medium"/>
            <Setter Property="CornerRadius" Value="8"/>
        </Style>

        <Style x:Key="SecondaryButtonStyle" TargetType="Button">
            <Setter Property="Background" Value="Transparent"/>
            <Setter Property="Foreground" Value="#6366f1"/>
            <Setter Property="BorderBrush" Value="#6366f1"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="Padding" Value="20,12"/>
            <Setter Property="FontSize" Value="16"/>
            <Setter Property="FontWeight" Value="Medium"/>
            <Setter Property="CornerRadius" Value="8"/>
        </Style>

        <Style x:Key="TertiaryButtonStyle" TargetType="Button">
            <Setter Property="Background" Value="Transparent"/>
            <Setter Property="Foreground" Value="#9ca3af"/>
            <Setter Property="BorderBrush" Value="#4b5563"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="Padding" Value="20,12"/>
            <Setter Property="FontSize" Value="14"/>
            <Setter Property="FontWeight" Value="Medium"/>
            <Setter Property="CornerRadius" Value="8"/>
        </Style>

        <!-- Animations -->
        <Storyboard x:Key="FadeIn">
            <DoubleAnimation
                Storyboard.TargetName="ErrorGrid"
                Storyboard.TargetProperty="Opacity"
                From="0"
                To="1"
                Duration="0:0:0.3"/>
        </Storyboard>

        <Storyboard x:Key="SlideIn">
            <DoubleAnimation
                Storyboard.TargetName="ErrorCard"
                Storyboard.TargetProperty="(UIElement.RenderTransform).(TranslateTransform.Y)"
                From="50"
                To="0"
                Duration="0:0:0.4">
                <DoubleAnimation.EasingFunction>
                    <CubicEase EasingMode="EaseOut"/>
                </DoubleAnimation.EasingFunction>
            </DoubleAnimation>
        </Storyboard>
    </UserControl.Resources>

    <Grid x:Name="ErrorGrid" Background="{ThemeResource AcrylicInAppSheetBackground}">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- Header -->
        <StackPanel Grid.Row="0" Margin="20,20,20,0">
            <TextBlock
                Text="⚠️"
                FontSize="48"
                HorizontalAlignment="Center"
                Margin="0,0,0,16"/>
            <TextBlock
                Text="Oops! Something went wrong"
                Style="{StaticResource ErrorTitleStyle}"/>
        </StackPanel>

        <!-- Content -->
        <ScrollViewer
            Grid.Row="1"
            HorizontalScrollMode="Disabled"
            HorizontalScrollBarVisibility="Disabled"
            VerticalScrollMode="Auto"
            VerticalScrollBarVisibility="Auto"
            Margin="20,20,20,0"
            MaxHeight="400">

            <Border Style="{StaticResource ErrorCardStyle}" RenderTransformOrigin="0.5,0.5">
                <Border.RenderTransform>
                    <TranslateTransform Y="50"/>
                </Border.RenderTransform>

                <StackPanel Spacing="16">
                    <TextBlock
                        x:Name="ErrorMessageText"
                        Style="{StaticResource ErrorMessageStyle}"
                        Text="An unexpected error occurred while loading this component."/>

                    <!-- Action Buttons -->
                    <StackPanel Orientation="Horizontal" Spacing="12" HorizontalAlignment="Center">
                        <Button
                            x:Name="ReloadButton"
                            Content="Reload"
                            Style="{StaticResource PrimaryButtonStyle}"
                            Click="ReloadButton_Click"/>
                        
                        <Button
                            x:Name="DismissButton"
                            Content="Dismiss"
                            Style="{StaticResource SecondaryButtonStyle}"
                            Click="DismissButton_Click"/>
                    </StackPanel>

                    <!-- Copy Error Details -->
                    <Button
                        x:Name="CopyErrorButton"
                        Content="Copy Error Details"
                        Style="{StaticResource TertiaryButtonStyle}"
                        HorizontalAlignment="Center"
                        Click="CopyErrorButton_Click"/>

                    <!-- Debug Information (Debug Mode Only) -->
                    <Border
                        x:Name="DebugSection"
                        Background="#1f2937"
                        CornerRadius="8"
                        Padding="16"
                        Visibility="Collapsed">
                        <StackPanel Spacing="8">
                            <TextBlock
                                Text="Debug Information"
                                FontSize="14"
                                FontWeight="SemiBold"
                                Foreground="#f59e0b"/>
                            
                            <ScrollViewer
                                MaxHeight="200"
                                HorizontalScrollMode="Enabled"
                                HorizontalScrollBarVisibility="Auto"
                                VerticalScrollMode="Auto"
                                VerticalScrollBarVisibility="Auto">
                                <TextBlock
                                    x:Name="DebugText"
                                    FontSize="12"
                                    FontFamily="Consolas"
                                    Foreground="#d1d5db"
                                    TextWrapping="NoWrap"
                                    IsTextSelectionEnabled="True"/>
                            </ScrollViewer>
                        </StackPanel>
                    </Border>

                    <!-- Error Details Collapsible -->
                    <Expander
                        x:Name="ErrorDetailsExpander"
                        Header="Error Details"
                        HorizontalAlignment="Stretch"
                        Margin="0,8,0,0">
                        <ScrollViewer
                            MaxHeight="200"
                            HorizontalScrollMode="Enabled"
                            HorizontalScrollBarVisibility="Auto"
                            VerticalScrollMode="Auto"
                            VerticalScrollBarVisibility="Auto">
                            <StackPanel Spacing="8">
                                <TextBlock
                                    x:Name="ErrorTypeText"
                                    FontSize="14"
                                    FontWeight="SemiBold"
                                    Foreground="#ef4444"/>
                                
                                <TextBlock
                                    x:Name="ErrorStackText"
                                    FontSize="12"
                                    FontFamily="Consolas"
                                    Foreground="#d1d5db"
                                    TextWrapping="NoWrap"
                                    IsTextSelectionEnabled="True"/>
                                
                                <TextBlock
                                    x:Name="ComponentStackText"
                                    FontSize="12"
                                    FontFamily="Consolas"
                                    Foreground="#9ca3af"
                                    TextWrapping="NoWrap"
                                    IsTextSelectionEnabled="True"/>
                            </StackPanel>
                        </ScrollViewer>
                    </Expander>
                </StackPanel>
            </Border>
        </ScrollViewer>

        <!-- Footer -->
        <StackPanel
            Grid.Row="2"
            Margin="20,0,20,20"
            Spacing="8">
            <TextBlock
                Text="If this problem persists, please contact support."
                FontSize="12"
                Foreground="{ThemeResource TextFillColorSecondaryBrush}"
                HorizontalAlignment="Center"
                TextWrapping="Wrap"/>
            
            <HyperlinkButton
                x:Name="ReportIssueButton"
                Content="Report this issue"
                HorizontalAlignment="Center"
                Click="ReportIssueButton_Click"/>
        </StackPanel>
    </Grid>
</UserControl>
