(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[350],{3436:function(e,t,s){Promise.resolve().then(s.bind(s,6278))},6278:function(e,t,s){"use strict";s.d(t,{ControlPanel:function(){return l}});var a=s(7437),r=s(2265);function l(){let[e,t]=(0,r.useState)({creator_has_control:!1,emergency_stop_active:!1,state_locked:!1,can_proceed:!0,last_control_ts:null,control_reason:null}),[s,l]=(0,r.useState)([]),[o,n]=(0,r.useState)(!0),[c,i]=(0,r.useState)(!1),[d,x]=(0,r.useState)(.5);(0,r.useEffect)(()=>{h()},[]);let h=async()=>{try{let e=await fetch("/api/control/status");if(e.ok){let s=await e.json();t(s)}let s=await fetch("/api/control/history?limit=10");if(s.ok){let e=await s.json();l(e.history||[])}}catch(e){console.error("Failed to load control status:",e)}finally{n(!1)}},m=async(e,t)=>{try{(await fetch("/api/control/".concat(e),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({reason:t||"".concat(e," via web dashboard")})})).ok&&await h()}catch(t){console.error("Failed to ".concat(e,":"),t)}},g=e=>e?new Date(1e3*e).toLocaleString():"Never";return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-2xl font-bold text-white",children:"Control Panel"}),(0,a.jsx)("p",{className:"text-gray-400",children:"Creator control mechanisms and agency management"})]}),(0,a.jsxs)("div",{className:"bg-gray-800 rounded-lg p-6",children:[(0,a.jsx)("h2",{className:"text-lg font-semibold text-white mb-4",children:"Current Status"}),(0,a.jsxs)("div",{className:"grid grid-cols-3 gap-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-gray-400 text-sm",children:"Control Mode"}),(0,a.jsx)("p",{className:"text-lg font-semibold ".concat(e.creator_has_control?"text-orange-400":"text-green-400"),children:e.creator_has_control?"Creator Control":"Autonomous"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-gray-400 text-sm",children:"State Lock"}),(0,a.jsx)("p",{className:"text-lg font-semibold ".concat(e.state_locked?"text-orange-400":"text-green-400"),children:e.state_locked?"Locked":"Unlocked"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-gray-400 text-sm",children:"Emergency Stop"}),(0,a.jsx)("p",{className:"text-lg font-semibold ".concat(e.emergency_stop_active?"text-red-500":"text-green-400"),children:e.emergency_stop_active?"ACTIVE":"Inactive"})]})]})]}),(0,a.jsxs)("div",{className:"bg-gray-800 rounded-lg p-6",children:[(0,a.jsx)("h2",{className:"text-lg font-semibold text-white mb-4",children:"Control Actions"}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsx)("button",{onClick:()=>m("take"),disabled:e.creator_has_control,className:"bg-purple-600 hover:bg-purple-700 disabled:opacity-50 disabled:cursor-not-allowed text-white py-3 px-4 rounded-lg transition-colors",children:"Take Control"}),(0,a.jsx)("button",{onClick:()=>m("release"),disabled:!e.creator_has_control,className:"bg-gray-600 hover:bg-gray-700 disabled:opacity-50 disabled:cursor-not-allowed text-white py-3 px-4 rounded-lg transition-colors",children:"Release Control"}),(0,a.jsx)("button",{onClick:()=>m("lock"),disabled:e.state_locked,className:"bg-gray-600 hover:bg-gray-700 disabled:opacity-50 disabled:cursor-not-allowed text-white py-3 px-4 rounded-lg transition-colors",children:"Lock State"}),(0,a.jsx)("button",{onClick:()=>m("unlock"),disabled:!e.state_locked,className:"bg-gray-600 hover:bg-gray-700 disabled:opacity-50 disabled:cursor-not-allowed text-white py-3 px-4 rounded-lg transition-colors",children:"Unlock State"})]})]}),(0,a.jsxs)("div",{className:"bg-gray-800 rounded-lg p-6 border border-red-600",children:[(0,a.jsx)("h2",{className:"text-lg font-semibold text-red-500 mb-2",children:"Emergency Controls"}),(0,a.jsx)("p",{className:"text-gray-400 text-sm mb-4",children:"Use these controls only in emergency situations. Emergency stop will immediately halt all autonomous actions."}),(0,a.jsxs)("div",{className:"flex gap-4",children:[(0,a.jsx)("button",{onClick:()=>{confirm("This will immediately halt all autonomous actions. Are you sure?")&&m("emergency_stop")},disabled:e.emergency_stop_active,className:"bg-red-600 hover:bg-red-700 disabled:opacity-50 disabled:cursor-not-allowed text-white py-3 px-6 rounded-lg font-bold transition-colors",children:"\uD83D\uDED1 EMERGENCY STOP"}),e.emergency_stop_active&&(0,a.jsx)("button",{onClick:()=>m("resume"),className:"bg-green-600 hover:bg-green-700 text-white py-3 px-6 rounded-lg transition-colors",children:"Resume Operations"})]})]}),(0,a.jsxs)("div",{className:"bg-gray-800 rounded-lg p-6",children:[(0,a.jsx)("h2",{className:"text-lg font-semibold text-white mb-4",children:"Agency Settings"}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-white",children:"Advisory Mode"}),(0,a.jsx)("p",{className:"text-gray-400 text-sm",children:"Sallie asks before acting"})]}),(0,a.jsxs)("label",{className:"relative inline-flex items-center cursor-pointer",children:[(0,a.jsx)("input",{type:"checkbox",checked:c,onChange:e=>i(e.target.checked),className:"sr-only peer"}),(0,a.jsx)("div",{className:"w-11 h-6 bg-gray-600 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-purple-600"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-gray-400 text-sm",children:"Current Trust Level"}),(0,a.jsxs)("p",{className:"text-white",children:[d.toFixed(2)," - ",d<.6?"Stranger":d<.8?"Associate":d<.9?"Partner":"Surrogate"," Level"]})]})]})]}),(0,a.jsxs)("div",{className:"bg-gray-800 rounded-lg p-6",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,a.jsx)("h2",{className:"text-lg font-semibold text-white",children:"Control History"}),(0,a.jsx)("button",{onClick:h,className:"text-purple-400 hover:text-purple-300 text-sm",children:"Refresh"})]}),0===s.length?(0,a.jsx)("p",{className:"text-gray-500 italic",children:"No recent control activity"}):(0,a.jsx)("div",{className:"space-y-2",children:s.map((e,t)=>(0,a.jsxs)("div",{className:"flex justify-between items-center py-2 border-b border-gray-700 last:border-0",children:[(0,a.jsx)("span",{className:"text-white",children:e.action.replace(/_/g," ")}),(0,a.jsx)("span",{className:"text-gray-500 text-sm",children:g(e.timestamp)})]},t))})]})]})}}},function(e){e.O(0,[971,117,744],function(){return e(e.s=3436)}),_N_E=e.O()}]);