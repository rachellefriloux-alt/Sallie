(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[800],{5951:function(e,t,s){Promise.resolve().then(s.bind(s,7905))},7905:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return u}});var a=s(7437),r=s(2265);function l(e){let{state:t}=e,s=[{label:"Trust",value:t.trust,color:"from-primary to-accent",ariaLabel:"Trust level: ".concat((100*t.trust).toFixed(0),"%")},{label:"Warmth",value:t.warmth,color:"from-accent to-warning",ariaLabel:"Warmth level: ".concat((100*t.warmth).toFixed(0),"%")},{label:"Energy",value:t.arousal,color:"from-warning to-error",ariaLabel:"Energy level: ".concat((100*t.arousal).toFixed(0),"%")},{label:"Mood",value:(t.valence+1)/2,color:"from-info to-success",ariaLabel:"Mood level: ".concat((100*t.valence).toFixed(0),"%")}];return(0,a.jsxs)("div",{role:"region","aria-label":"Emotional state gauges",children:[(0,a.jsx)("h3",{className:"text-sm font-medium text-gray-400 uppercase tracking-wider mb-4",children:"Emotional State"}),(0,a.jsx)("div",{className:"space-y-4",children:s.map(e=>(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("span",{className:"text-sm text-gray-300",children:e.label}),(0,a.jsx)("span",{className:"text-xs text-gray-500 font-mono",children:e.value.toFixed(2)})]}),(0,a.jsx)("div",{className:"h-1.5 bg-gray-700 rounded-full overflow-hidden",role:"progressbar","aria-valuenow":100*e.value,"aria-valuemin":0,"aria-valuemax":100,"aria-label":e.ariaLabel,children:(0,a.jsx)("div",{className:"h-full bg-gradient-to-r ".concat(e.color," transition-all duration-500"),style:{width:"".concat(100*e.value,"%")}})})]},e.label))}),(0,a.jsxs)("div",{className:"mt-6 p-3 bg-gray-700/50 rounded-lg text-center",children:[(0,a.jsx)("div",{className:"text-xs text-gray-400 uppercase tracking-wider mb-1",children:"Current Mode"}),(0,a.jsx)("div",{className:"text-lg font-semibold text-accent-light",children:t.posture||"PEER"})]})]})}var n=s(9625);let i={trust:.5,warmth:.6,arousal:.7,valence:.6,posture:"PEER"},c=(0,n.Ue)(e=>({state:i,updateState:t=>e(e=>({state:{...e.state,...t}}))}));function o(){let{state:e,updateState:t}=c(),[s,n]=(0,r.useState)([]),[i,o]=(0,r.useState)(null),[u,d]=(0,r.useState)("24h"),{connect:m,isConnected:x}=function(){let[e,t]=(0,r.useState)(!1),s=(0,r.useRef)(null),a=(0,r.useRef)(null),l=(0,r.useCallback)(e=>{var r;if((null===(r=s.current)||void 0===r?void 0:r.readyState)===WebSocket.OPEN)return;let n=new WebSocket("ws://192.168.1.47:8742/ws");a.current=e,n.onopen=()=>{t(!0)},n.onclose=()=>{t(!1),setTimeout(()=>l(e),3e3)},n.onerror=e=>{console.error("WebSocket error:",e),t(!1)},n.onmessage=e=>{try{var t;let s=JSON.parse(e.data);null===(t=a.current)||void 0===t||t.call(a,s)}catch(e){console.error("Failed to parse WebSocket message:",e)}},s.current=n},[]),n=(0,r.useCallback)(e=>{var t;(null===(t=s.current)||void 0===t?void 0:t.readyState)===WebSocket.OPEN&&s.current.send(e)},[]);return(0,r.useEffect)(()=>()=>{var e;null===(e=s.current)||void 0===e||e.close()},[]),{connect:l,send:n,isConnected:e}}();(0,r.useEffect)(()=>{h(),m(e=>{"limbic_update"===e.type&&e.state&&(t(e.state),v(e.state))})},[]);let h=async()=>{try{let e=localStorage.getItem("limbic_history");e&&n(JSON.parse(e))}catch(e){console.error("Failed to load history:",e)}},v=e=>{let t={timestamp:Date.now(),trust:e.trust||0,warmth:e.warmth||0,arousal:e.arousal||0,valence:e.valence||0,posture:e.posture||"PEER"};n(e=>{let s=[...e,t].slice(-1e3);return localStorage.setItem("limbic_history",JSON.stringify(s)),s})},f=s.filter(e=>Date.now()-e.timestamp<({"1h":36e5,"24h":864e5,"7d":6048e5,"30d":2592e6})[u]),g=(()=>{let e=[];for(let t=1;t<s.length;t++){let a=s[t-1],r=s[t],l=Math.abs(r.trust-a.trust),n=Math.abs(r.warmth-a.warmth),i=Math.abs(r.arousal-a.arousal),c=Math.abs(r.valence-a.valence);(l>.1||n>.1||i>.1||c>.2)&&e.push({...r,event:"Significant state change: Trust ".concat(l>.1?"\xb1".concat(l.toFixed(2)):""," ").concat(n>.1?"Warmth \xb1".concat(n.toFixed(2)):"")})}return e})();return(0,a.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,a.jsxs)("div",{className:"mb-8",children:[(0,a.jsx)("h1",{className:"text-3xl font-bold mb-2",children:"Limbic State"}),(0,a.jsx)("p",{className:"text-gray-400",children:"Real-time emotional state and historical trends"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 mb-6",children:[(0,a.jsx)("div",{className:"lg:col-span-1",children:(0,a.jsxs)("div",{className:"bg-gray-800 rounded-lg p-6",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"Current State"}),e?(0,a.jsx)(l,{state:e}):(0,a.jsx)("p",{className:"text-gray-400",children:"Loading..."})]})}),(0,a.jsx)("div",{className:"lg:col-span-2",children:(0,a.jsxs)("div",{className:"bg-gray-800 rounded-lg p-6",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold",children:"Historical Trends"}),(0,a.jsxs)("select",{value:u,onChange:e=>d(e.target.value),className:"bg-gray-700 text-gray-100 px-3 py-1 rounded-lg border border-gray-600",children:[(0,a.jsx)("option",{value:"1h",children:"Last Hour"}),(0,a.jsx)("option",{value:"24h",children:"Last 24 Hours"}),(0,a.jsx)("option",{value:"7d",children:"Last 7 Days"}),(0,a.jsx)("option",{value:"30d",children:"Last 30 Days"})]})]}),f.length>0?(0,a.jsxs)("div",{className:"h-64 relative",children:[(0,a.jsxs)("svg",{width:"100%",height:"100%",className:"overflow-visible",children:[[0,.25,.5,.75,1].map(e=>(0,a.jsx)("line",{x1:"0",y1:100*e+"%",x2:"100%",y2:100*e+"%",stroke:"rgba(255,255,255,0.1)",strokeWidth:"1"},e)),f.length>1&&(0,a.jsx)("polyline",{points:f.map((e,t)=>"".concat(t/(f.length-1)*100,",").concat((1-e.trust)*100)).join(" "),fill:"none",stroke:"#8B5CF6",strokeWidth:"2"}),f.length>1&&(0,a.jsx)("polyline",{points:f.map((e,t)=>"".concat(t/(f.length-1)*100,",").concat((1-e.warmth)*100)).join(" "),fill:"none",stroke:"#22d3ee",strokeWidth:"2"}),f.length>1&&(0,a.jsx)("polyline",{points:f.map((e,t)=>"".concat(t/(f.length-1)*100,",").concat((1-e.arousal)*100)).join(" "),fill:"none",stroke:"#f59e0b",strokeWidth:"2"}),g.map((e,t)=>{var s,r,l,n;let i=(e.timestamp-(null===(s=f[0])||void 0===s?void 0:s.timestamp)||0)/((null===(r=f[f.length-1])||void 0===r?void 0:r.timestamp)-(null===(l=f[0])||void 0===l?void 0:l.timestamp)||1)*100;return(0,a.jsx)("circle",{cx:"".concat(i,"%"),cy:"50%",r:"4",fill:"#ef4444",className:"cursor-pointer hover:r-6",onClick:()=>o(e),children:(0,a.jsx)("title",{children:null!==(n=e.event)&&void 0!==n?n:""})},t)})]}),(0,a.jsxs)("div",{className:"flex gap-4 mt-4 text-sm",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("div",{className:"w-4 h-0.5 bg-violet-500"}),(0,a.jsx)("span",{className:"text-gray-400",children:"Trust"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("div",{className:"w-4 h-0.5 bg-cyan-500"}),(0,a.jsx)("span",{className:"text-gray-400",children:"Warmth"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("div",{className:"w-4 h-0.5 bg-amber-500"}),(0,a.jsx)("span",{className:"text-gray-400",children:"Arousal"})]})]})]}):(0,a.jsx)("div",{className:"h-64 flex items-center justify-center text-gray-500",children:(0,a.jsx)("p",{children:"No historical data available"})})]})})]}),i&&(0,a.jsxs)("div",{className:"bg-gray-800 rounded-lg p-6 mb-6",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold mb-2",children:"Event Details"}),(0,a.jsx)("p",{className:"text-gray-400 mb-4",children:i.event}),(0,a.jsxs)("div",{className:"grid grid-cols-4 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-xs text-gray-500",children:"Trust"}),(0,a.jsx)("div",{className:"text-lg font-semibold",children:i.trust.toFixed(2)})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-xs text-gray-500",children:"Warmth"}),(0,a.jsx)("div",{className:"text-lg font-semibold",children:i.warmth.toFixed(2)})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-xs text-gray-500",children:"Arousal"}),(0,a.jsx)("div",{className:"text-lg font-semibold",children:i.arousal.toFixed(2)})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-xs text-gray-500",children:"Valence"}),(0,a.jsx)("div",{className:"text-lg font-semibold",children:i.valence.toFixed(2)})]})]}),(0,a.jsx)("button",{onClick:()=>o(null),className:"mt-4 text-sm text-violet-400 hover:text-violet-300",children:"Close"})]}),(0,a.jsxs)("div",{className:"text-center text-sm text-gray-500",children:["Status: ",x?(0,a.jsx)("span",{className:"text-emerald-400",children:"Connected"}):(0,a.jsx)("span",{className:"text-red-400",children:"Disconnected"})]})]})}function u(){return(0,a.jsx)("div",{className:"min-h-screen bg-gray-900 p-4 md:p-8",children:(0,a.jsx)(o,{})})}},4369:function(e,t,s){"use strict";var a=s(2265),r="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},l=a.useState,n=a.useEffect,i=a.useLayoutEffect,c=a.useDebugValue;function o(e){var t=e.getSnapshot;e=e.value;try{var s=t();return!r(e,s)}catch(e){return!0}}var u="undefined"==typeof window||void 0===window.document||void 0===window.document.createElement?function(e,t){return t()}:function(e,t){var s=t(),a=l({inst:{value:s,getSnapshot:t}}),r=a[0].inst,u=a[1];return i(function(){r.value=s,r.getSnapshot=t,o(r)&&u({inst:r})},[e,s,t]),n(function(){return o(r)&&u({inst:r}),e(function(){o(r)&&u({inst:r})})},[e]),c(s),s};t.useSyncExternalStore=void 0!==a.useSyncExternalStore?a.useSyncExternalStore:u},2860:function(e,t,s){"use strict";var a=s(2265),r=s(2558),l="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},n=r.useSyncExternalStore,i=a.useRef,c=a.useEffect,o=a.useMemo,u=a.useDebugValue;t.useSyncExternalStoreWithSelector=function(e,t,s,a,r){var d=i(null);if(null===d.current){var m={hasValue:!1,value:null};d.current=m}else m=d.current;var x=n(e,(d=o(function(){function e(e){if(!c){if(c=!0,n=e,e=a(e),void 0!==r&&m.hasValue){var t=m.value;if(r(t,e))return i=t}return i=e}if(t=i,l(n,e))return t;var s=a(e);return void 0!==r&&r(t,s)?(n=e,t):(n=e,i=s)}var n,i,c=!1,o=void 0===s?null:s;return[function(){return e(t())},null===o?void 0:function(){return e(o())}]},[t,s,a,r]))[0],d[1]);return c(function(){m.hasValue=!0,m.value=x},[x]),u(x),x}},2558:function(e,t,s){"use strict";e.exports=s(4369)},5195:function(e,t,s){"use strict";e.exports=s(2860)},9625:function(e,t,s){"use strict";s.d(t,{Ue:function(){return m}});let a=e=>{let t;let s=new Set,a=(e,a)=>{let r="function"==typeof e?e(t):e;if(!Object.is(r,t)){let e=t;t=(null!=a?a:"object"!=typeof r||null===r)?r:Object.assign({},t,r),s.forEach(s=>s(t,e))}},r=()=>t,l={setState:a,getState:r,getInitialState:()=>n,subscribe:e=>(s.add(e),()=>s.delete(e)),destroy:()=>{console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),s.clear()}},n=t=e(a,r,l);return l},r=e=>e?a(e):a;var l=s(2265),n=s(5195);let{useDebugValue:i}=l,{useSyncExternalStoreWithSelector:c}=n,o=!1,u=e=>e,d=e=>{"function"!=typeof e&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");let t="function"==typeof e?r(e):e,s=(e,s)=>(function(e,t=u,s){s&&!o&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),o=!0);let a=c(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,s);return i(a),a})(t,e,s);return Object.assign(s,t),s},m=e=>e?d(e):d}},function(e){e.O(0,[971,117,744],function(){return e(e.s=5951)}),_N_E=e.O()}]);