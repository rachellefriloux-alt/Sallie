'use client';

import React, { useState, useEffect } from 'react';
import { LifeSanctuaryDimension } from '../dimensions/LifeSanctuaryDimension';
import { CommandMatrixDimension } from '../dimensions/CommandMatrixDimension';
import { QuantumMessengerDimension } from '../dimensions/QuantumMessengerDimension';
import { CreativeAtelierDimension } from '../dimensions/CreativeAtelierDimension';
import { HealingSanctuaryDimension } from '../dimensions/HealingSanctuaryDimension';
import { LegacyImpactDimension } from '../dimensions/LegacyImpactDimension';
import { ResearchUniverseDimension } from '../dimensions/ResearchUniverseDimension';
import { GrowthGardenDimension } from '../dimensions/GrowthGardenDimension';
import { TranscendenceDimension } from '../dimensions/TranscendenceDimension';
import { SocialMasteryDimension } from '../dimensions/SocialMasteryDimension';
import { TimeEnergyDimension } from '../dimensions/TimeEnergyDimension';
import { QuantumCoreDimension } from '../dimensions/QuantumCoreDimension';

interface LifePrismProps {
  activeDimension: string;
  userState: any;
  sallieState: any;
}

export function LifePrism({ activeDimension, userState, sallieState }: LifePrismProps) {
  const [prismRotation, setPrismRotation] = useState(0);
  const [selectedFacet, setSelectedFacet] = useState<string | null>(null);

  const lifeFacets = [
    {
      id: 'mom',
      name: 'Mom',
      icon: 'üë©‚Äçüëß‚Äçüë¶',
      color: 'from-pink-400 to-rose-500',
      energy: 85,
      tasks: 8,
      joy: 92,
      stress: 15
    },
    {
      id: 'spouse',
      name: 'Spouse',
      icon: 'üíë',
      color: 'from-rose-400 to-pink-500',
      energy: 78,
      tasks: 5,
      joy: 88,
      stress: 12
    },
    {
      id: 'friend',
      name: 'Friend',
      icon: 'üëØ‚Äç‚ôÄÔ∏è',
      color: 'from-purple-400 to-pink-500',
      energy: 70,
      tasks: 3,
      joy: 85,
      stress: 8
    },
    {
      id: 'daughter',
      name: 'Daughter',
      icon: 'üë®‚Äçüë©‚Äçüëß',
      color: 'from-blue-400 to-indigo-500',
      energy: 65,
      tasks: 4,
      joy: 80,
      stress: 18
    },
    {
      id: 'business',
      name: 'Business Owner',
      icon: 'üíº',
      color: 'from-royal-400 to-purple-500',
      energy: 92,
      tasks: 12,
      joy: 95,
      stress: 25
    },
    {
      id: 'entrepreneur',
      name: 'Entrepreneur',
      icon: 'üöÄ',
      color: 'from-gold-400 to-orange-500',
      energy: 88,
      tasks: 15,
      joy: 90,
      stress: 30
    },
    {
      id: 'creator',
      name: 'Creator',
      icon: 'üé®',
      color: 'from-teal-400 to-green-500',
      energy: 95,
      tasks: 6,
      joy: 98,
      stress: 5
    },
    {
      id: 'researcher',
      name: 'Researcher',
      icon: 'üî¨',
      color: 'from-yellow-400 to-amber-500',
      energy: 82,
      tasks: 4,
      joy: 87,
      stress: 10
    }
  ];

  // Auto-rotate prism
  useEffect(() => {
    const interval = setInterval(() => {
      setPrismRotation(prev => (prev + 1) % 360);
    }, 50);

    return () => clearInterval(interval);
  }, []);

  const getDimensionContent = () => {
    switch (activeDimension) {
      case 'sanctuary':
        return <LifeSanctuaryDimension userState={userState} sallieState={sallieState} />;
      case 'command':
        return <CommandMatrixDimension userState={userState} sallieState={sallieState} />;
      case 'growth':
        return <GrowthGardenDimension userState={userState} sallieState={sallieState} />;
      case 'messenger':
        return <QuantumMessengerDimension userState={userState} sallieState={sallieState} />;
      case 'creative':
        return <CreativeAtelierDimension userState={userState} sallieState={sallieState} />;
      case 'healing':
        return <HealingSanctuaryDimension userState={userState} sallieState={sallieState} />;
      case 'transcendence':
        return <TranscendenceDimension userState={userState} sallieState={sallieState} />;
      case 'research':
        return <ResearchUniverseDimension userState={userState} sallieState={sallieState} />;
      case 'social':
        return <SocialMasteryDimension userState={userState} sallieState={sallieState} />;
      case 'time':
        return <TimeEnergyDimension userState={userState} sallieState={sallieState} />;
      case 'legacy':
        return <LegacyImpactDimension userState={userState} sallieState={sallieState} />;
      case 'quantum':
        return <QuantumCoreDimension userState={userState} sallieState={sallieState} />;
      default:
        return <LifeSanctuaryDimension userState={userState} sallieState={sallieState} />;
    }
  };

  return (
    <div className="life-prism h-full">
      {/* Dimension Header */}
      <div className="bg-white/80 backdrop-blur-sm rounded-2xl p-6 border border-peacock-200 mb-6">
        <div className="flex items-center justify-between">
          <div>
            <h2 className="text-2xl font-bold text-peacock-900 capitalize">
              {activeDimension === 'sanctuary' ? 'Life Sanctuary' : 
               activeDimension === 'command' ? 'Command Matrix' :
               activeDimension === 'growth' ? 'Growth Garden' :
               activeDimension === 'messenger' ? 'Quantum Messenger' :
               activeDimension === 'creative' ? 'Creative Atelier' :
               activeDimension === 'healing' ? 'Healing Sanctuary' :
               activeDimension === 'transcendence' ? 'Transcendence' :
               activeDimension === 'research' ? 'Research Universe' :
               activeDimension === 'social' ? 'Social Mastery' :
               activeDimension === 'time' ? 'Time & Energy Mastery' :
               activeDimension === 'legacy' ? 'Legacy & Impact' :
               activeDimension === 'quantum' ? 'Quantum Core' : activeDimension}
            </h2>
            <p className="text-peacock-600">
              {activeDimension === 'sanctuary' ? 'Your personal and family life sanctuary' :
               activeDimension === 'command' ? 'Business and entrepreneurial command center' :
               activeDimension === 'growth' ? 'Personal growth and development garden' :
               activeDimension === 'messenger' ? 'Advanced communication and connection hub' :
               activeDimension === 'creative' ? 'Creative projects and innovation studio' :
               activeDimension === 'healing' ? 'Mental health and spiritual healing space' :
               activeDimension === 'transcendence' ? 'Higher consciousness and spiritual connection' :
               activeDimension === 'research' ? 'Research and knowledge exploration' :
               activeDimension === 'social' ? 'Social skills and relationship mastery' :
               activeDimension === 'time' ? 'Time management and energy optimization' :
               activeDimension === 'legacy' ? 'World impact and legacy creation' :
               activeDimension === 'quantum' ? 'Advanced quantum processing and AI core' : ''}
            </p>
          </div>
          
          {/* Life Facets Overview */}
          <div className="flex space-x-2">
            {lifeFacets.slice(0, 4).map((facet) => (
              <div key={facet.id} className="relative">
                <div className={`w-12 h-12 rounded-full bg-gradient-to-br ${facet.color} flex items-center justify-center text-white shadow-lg`}>
                  {facet.icon}
                </div>
                <div className="absolute -bottom-1 -right-1 w-3 h-3 bg-green-500 rounded-full border-2 border-white"></div>
              </div>
            ))}
          </div>
        </div>
      </div>

      {/* Main Dimension Content */}
      <div className="h-full">
        {getDimensionContent()}
      </div>

      {/* Life Prism Visualization */}
      <div className="fixed bottom-4 right-4 w-32 h-32 opacity-20 pointer-events-none">
        <div 
          className="w-full h-full relative"
          style={{ transform: `rotate(${prismRotation}deg)` }}
        >
          {lifeFacets.map((facet, index) => {
            const angle = (index * 360) / lifeFacets.length;
            const x = Math.cos((angle * Math.PI) / 180) * 40;
            const y = Math.sin((angle * Math.PI) / 180) * 40;
            
            return (
              <div
                key={facet.id}
                className={`absolute w-8 h-8 rounded-full bg-gradient-to-br ${facet.color} flex items-center justify-center text-white text-xs shadow-lg`}
                style={{
                  transform: `translate(${x + 40}px, ${y + 40}px)`,
                  left: 0,
                  top: 0
                }}
              >
                {facet.icon}
              </div>
            );
          })}
        </div>
      </div>
    </div>
  );
}

// Placeholder components for each dimension
function SanctuaryDimension({ userState, sallieState }: any) {
  return (
    <div className="bg-white/80 backdrop-blur-sm rounded-2xl p-6 border border-peacock-200">
      <h3 className="text-xl font-semibold text-peacock-800 mb-4">üè† Life Sanctuary</h3>
      <div className="grid grid-cols-1 lg:grid-cols-2 gap-6">
        <div>
          <h4 className="font-medium text-gray-700 mb-3">Family Roles</h4>
          <div className="space-y-2">
            <div className="p-3 bg-pink-50 rounded-lg border border-pink-200">
              <div className="flex items-center justify-between">
                <span className="font-medium">üë©‚Äçüëß‚Äçüë¶ Mom</span>
                <span className="text-sm text-pink-600">85% energy</span>
              </div>
            </div>
            <div className="p-3 bg-rose-50 rounded-lg border border-rose-200">
              <div className="flex items-center justify-between">
                <span className="font-medium">üíë Spouse</span>
                <span className="text-sm text-rose-600">78% energy</span>
              </div>
            </div>
            <div className="p-3 bg-purple-50 rounded-lg border border-purple-200">
              <div className="flex items-center justify-between">
                <span className="font-medium">üëØ‚Äç‚ôÄÔ∏è Friend</span>
                <span className="text-sm text-purple-600">70% energy</span>
              </div>
            </div>
          </div>
        </div>
        
        <div>
          <h4 className="font-medium text-gray-700 mb-3">Sallie's Support</h4>
          <div className="p-4 bg-gradient-to-r from-peacock-50 to-royal-50 rounded-lg border border-peacock-200">
            <p className="text-sm text-gray-700 mb-2">
              "I'm monitoring your family dynamics and emotional patterns. Your energy is high today - perfect for quality family time. I've prepared suggestions for meaningful connections."
            </p>
            <div className="flex space-x-2">
              <button className="px-3 py-1 bg-peacock-600 text-white rounded-lg text-sm">Family Time Ideas</button>
              <button className="px-3 py-1 bg-royal-600 text-white rounded-lg text-sm">Relationship Insights</button>
            </div>
          </div>
        </div>
      </div>
    </div>
  );
}

function CommandDimension({ userState, sallieState }: any) {
  return (
    <div className="bg-white/80 backdrop-blur-sm rounded-2xl p-6 border border-peacock-200">
      <h3 className="text-xl font-semibold text-peacock-800 mb-4">üíº Command Matrix</h3>
      <p className="text-gray-600">Business intelligence and command center coming soon...</p>
    </div>
  );
}

function GrowthDimension({ userState, sallieState }: any) {
  return (
    <div className="bg-white/80 backdrop-blur-sm rounded-2xl p-6 border border-peacock-200">
      <h3 className="text-xl font-semibold text-peacock-800 mb-4">üå± Growth Garden</h3>
      <p className="text-gray-600">Personal growth and development system coming soon...</p>
    </div>
  );
}

function MessengerDimension({ userState, sallieState }: any) {
  return (
    <div className="bg-white/80 backdrop-blur-sm rounded-2xl p-6 border border-peacock-200">
      <h3 className="text-xl font-semibold text-peacock-800 mb-4">üí¨ Quantum Messenger</h3>
      <p className="text-gray-600">Advanced communication hub coming soon...</p>
    </div>
  );
}

function CreativeDimension({ userState, sallieState }: any) {
  return (
    <div className="bg-white/80 backdrop-blur-sm rounded-2xl p-6 border border-peacock-200">
      <h3 className="text-xl font-semibold text-peacock-800 mb-4">üé® Creative Atelier</h3>
      <p className="text-gray-600">Creative projects and innovation studio coming soon...</p>
    </div>
  );
}

function HealingDimension({ userState, sallieState }: any) {
  return (
    <div className="bg-white/80 backdrop-blur-sm rounded-2xl p-6 border border-peacock-200">
      <h3 className="text-xl font-semibold text-peacock-800 mb-4">üßò Healing Sanctuary</h3>
      <p className="text-gray-600">Mental health and spiritual healing space coming soon...</p>
    </div>
  );
}

function TranscendenceDimension({ userState, sallieState }: any) {
  return (
    <div className="bg-white/80 backdrop-blur-sm rounded-2xl p-6 border border-peacock-200">
      <h3 className="text-xl font-semibold text-peacock-800 mb-4">üåå Transcendence</h3>
      <p className="text-gray-600">Higher consciousness and spiritual connection coming soon...</p>
    </div>
  );
}

function ResearchDimension({ userState, sallieState }: any) {
  return (
    <div className="bg-white/80 backdrop-blur-sm rounded-2xl p-6 border border-peacock-200">
      <h3 className="text-xl font-semibold text-peacock-800 mb-4">üî¨ Research Universe</h3>
      <p className="text-gray-600">Research and knowledge exploration coming soon...</p>
    </div>
  );
}

function SocialDimension({ userState, sallieState }: any) {
  return (
    <div className="bg-white/80 backdrop-blur-sm rounded-2xl p-6 border border-peacock-200">
      <h3 className="text-xl font-semibold text-peacock-800 mb-4">üé≠ Social Mastery</h3>
      <p className="text-gray-600">Social skills and relationship mastery coming soon...</p>
    </div>
  );
}

function TimeDimension({ userState, sallieState }: any) {
  return (
    <div className="bg-white/80 backdrop-blur-sm rounded-2xl p-6 border border-peacock-200">
      <h3 className="text-xl font-semibold text-peacock-800 mb-4">‚ö° Time & Energy Mastery</h3>
      <p className="text-gray-600">Time management and energy optimization coming soon...</p>
    </div>
  );
}

function LegacyDimension({ userState, sallieState }: any) {
  return (
    <div className="bg-white/80 backdrop-blur-sm rounded-2xl p-6 border border-peacock-200">
      <h3 className="text-xl font-semibold text-peacock-800 mb-4">üöÄ Legacy & Impact</h3>
      <p className="text-gray-600">World impact and legacy creation coming soon...</p>
    </div>
  );
}

function QuantumDimension({ userState, sallieState }: any) {
  return (
    <div className="bg-white/80 backdrop-blur-sm rounded-2xl p-6 border border-peacock-200">
      <h3 className="text-xl font-semibold text-peacock-800 mb-4">üîÆ Quantum Core</h3>
      <p className="text-gray-600">Advanced quantum processing and AI core coming soon...</p>
    </div>
  );
}
