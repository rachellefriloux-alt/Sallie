"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8741],{82469:function(e,t,r){r.d(t,{I3:function(){return s},YN:function(){return o},ZC:function(){return i}});var n,a=r(21575),o={UXP_08:"uxp-08",UXP_17:"uxp-17",UXP_02:"uxp-02",UXP_32:"uxp-32",UXP_44:"uxp-44",UXP_13:"uxp-13",UXP_52:"uxp-52",UXP_18:"uxp-18",UXP_39:"uxp-39",UXP_77:"uxp-77",UXP_22:"uxp-22",UXP_60:"uxp-60",UXP_88:"uxp-88",UXP_119:"uxp-119",UXP_29:"uxp-29"},i={CONTROL:"control",UXP_08:{CONTROL:"control",VARIANT_1:"test_group_1",VARIANT_2:"test_group_2",VARIANT_3:"test_group_3",VARIANT_4:"test_group_4",VARIANT_5:"test_group_5",VARIANT_6:"test_group_6"},UXP_17:{CONTROL:"control",VARIANT_1:"top_brands_variant"},UXP_18:{CONTROL:"control",VARIANT_1:"new_design",VARIANT_2:"new_price",VARIANT_3:"new_price_design"},UXP_02:{CONTROL:"control",SHOW_TOOLTIP:"show_tooltip"},UXP_32:{CONTROL:"control",VARIANT_1:"variant_1",VARIANT_2:"variant_2",VARIANT_3:"variant_3"},UXP_44:{CONTROL:"control",IMPORT_COMPONENTS_FIGMA:"import-components-figma"},UXP_13:{CONTROL:"control",SIMPLIFIED_SIGNUP:"simplified_signup"},UXP_52:{CONTROL:"control",PAIN_BASED:"pain_based",BENEFIT_BASED:"benefit_based"},UXP_39:{CONTROL:"control",VARIANT:"hike_2"},UXP_77:{CONTROL:"control",ALL_ACCESS:"all-access"},UXP_22:{CONTROL:"default",VARIANT:"onboarding-dashboard-overflow"},UXP_88:{CONTROL:"control",NEW_DESIGN:"new_design",NEW_LAYOUT:"new_layout"},UXP_119:{CONTROL:"control",SHOW_CHAT:"show_chat"},UXP_29:{CONTROL:"control",PRICING_HIKE:"extra_credits_pricing_hike"}},s=(n={},(0,a._)(n,o.UXP_08,i.UXP_08.CONTROL),(0,a._)(n,o.UXP_17,i.UXP_17.CONTROL),(0,a._)(n,o.UXP_18,i.UXP_18.VARIANT_2),(0,a._)(n,o.UXP_02,i.UXP_02.CONTROL),(0,a._)(n,o.UXP_32,i.UXP_32.CONTROL),(0,a._)(n,o.UXP_44,i.UXP_44.CONTROL),(0,a._)(n,o.UXP_13,i.UXP_13.CONTROL),(0,a._)(n,o.UXP_52,i.UXP_52.CONTROL),(0,a._)(n,o.UXP_39,i.UXP_39.CONTROL),(0,a._)(n,o.UXP_77,i.UXP_77.CONTROL),(0,a._)(n,o.UXP_22,i.UXP_22.CONTROL),(0,a._)(n,o.UXP_88,i.UXP_88.CONTROL),(0,a._)(n,o.UXP_119,i.UXP_119.CONTROL),(0,a._)(n,o.UXP_29,i.UXP_29.CONTROL),n)},4392:function(e,t,r){r.d(t,{ZP:function(){return Contexts_AuthProvider},aC:function(){return useAuth}});var n,a=r(45610),o=r(41369),i=r(43654),s=r(9),u=r(19668),c=r(50044),l=r(57437),d=r(2265),p=r(27007),f=r(6754),g=r(47223),h=r(30791),m=r(79398),_=r(60453),v=r(45511),S=r(40245),getGA4ClientId=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e4;return new Promise(function(n,a){var attemptGetClientId=function(){var o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;window.gtag?window.gtag("get","G-9L2Y115NQ3","client_id",function(i){i?n(i):o<e?setTimeout(function(){return attemptGetClientId(o+1)},Math.min(t*Math.pow(2,o),r)):a(Error("Failed to get GA4 Client ID after multiple attempts"))}):o<e?setTimeout(function(){return attemptGetClientId(o+1)},Math.min(t*Math.pow(2,o),r)):a(Error("gtag not available after multiple attempts"))};attemptGetClientId()})},y=(n=(0,a._)(function(){var e,t,r,n=arguments;return(0,c.Jh)(this,function(a){switch(a.label){case 0:if(!(n.length>0&&void 0!==n[0]&&n[0])&&(e=localStorage.getItem("ga4ClientId")))return console.log("GA4 Client ID available from cache:",e),[2,e];a.label=1;case 1:return a.trys.push([1,3,,4]),[4,getGA4ClientId()];case 2:if(t=a.sent())return localStorage.setItem("ga4ClientId",t),console.log("GA4 Client ID retrieved successfully:",t),[2,t];throw Error("No client ID returned from GA4");case 3:throw console.error("Failed to retrieve GA4 Client ID:",r=a.sent()),r;case 4:return[2]}})}),function(){return n.apply(this,arguments)});(0,a._)(function(){return(0,c.Jh)(this,function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),[4,y()];case 1:return e.sent(),[2,!0];case 2:return e.sent(),[2,!1];case 3:return[2]}})});var getCookie=function(e){var t=document.cookie.match(RegExp("(^| )"+e+"=([^;]+)"));return t?t[2]:null},getGclAwValue=function(){var checkForCookie=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3,r=getCookie("_gcl_aw");if(r){var n=r.split(".").slice(2).join(".");return n&&localStorage.setItem("gclAw",n),!0}return e<t&&setTimeout(function(){return checkForCookie(e+1)},2e3),!1};checkForCookie()},getReferringUrl=function(){var e=window.location.href;return e.includes("?")?e:document.referrer||e},getFbclidValue=function(){var checkForCookie=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3,r=getCookie("_fbc");return r?(localStorage.setItem("fbc",r),!0):(e<t&&setTimeout(function(){return checkForCookie(e+1)},2e3),!1)};checkForCookie()},getFbpValue=function(){var checkForCookie=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3,r=getCookie("_fbp");return r?(localStorage.setItem("fbp",r),!0):(e<t&&setTimeout(function(){return checkForCookie(e+1)},2e3),!1)};checkForCookie()},useTrackingData=function(){var e=(0,s._)((0,d.useState)({referringUrl:null,gclAw:null,ga4ClientId:null,fbc:null,fbp:null}),2),t=e[0],r=e[1];return(0,d.useEffect)(function(){if(localStorage.getItem("referringUrl")||localStorage.setItem("referringUrl",getReferringUrl()),localStorage.getItem("gclAw")||getGclAwValue(),localStorage.getItem("fbc")||getFbclidValue(),localStorage.getItem("fbp")||getFbpValue(),!localStorage.getItem("ga4ClientId")){var e,t=(e=(0,a._)(function(){return(0,c.Jh)(this,function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),[4,y()];case 1:return e.sent(),[3,3];case 2:return console.error("Failed to retrieve GA4 Client ID in useTrackingData:",e.sent()),[3,3];case 3:return[2]}})}),function(){return e.apply(this,arguments)});setTimeout(function(){t()},3e3)}r({referringUrl:localStorage.getItem("referringUrl"),gclAw:localStorage.getItem("gclAw"),ga4ClientId:localStorage.getItem("ga4ClientId"),fbc:localStorage.getItem("fbc"),fbp:localStorage.getItem("fbp")})},[]),t},I=r(42146),E=r(24708),U=r(29467),P=r(82469),w=r(76340),A=r(84172),T=r(10649),C=r(38597),b=(0,d.createContext)(),useAuth=function(){return(0,d.useContext)(b)},Contexts_AuthProvider=function(e){var t,n,y,N,k,R,O,x,D,L,X,V,G,H,F,Y,W,q,M=e.children,J=(0,m.z)(),j=(t=(0,m.z)().capture,{trackEvent:(0,d.useCallback)(function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};v.Z.trackEvent(e,r),t(e,r)},[]),trackSignUp:(0,d.useCallback)(function(e,r,n,a){v.Z.trackSignUp(e,r,n,a),t("c_sign_up",{user_id:e,method:r,email:n,full_name:a,campaign_id:(0,S.QL)()})},[t]),trackSignIn:(0,d.useCallback)(function(e,r){v.Z.trackSignIn(e,r),t("c_sign_in",{user_id:e,method:r})},[t]),trackVerificationPageVisit:(0,d.useCallback)(function(){v.Z.trackVerificationPageVisit()},[]),trackAccountVerified:(0,d.useCallback)(function(e){v.Z.trackAccountVerified(e)},[]),trackPurchase:(0,d.useCallback)(function(e){var r=e.user_id,n=e.plan,a=e.email,o=e.currency,i=e.value,s=e.subscription_id,u=e.phone,c=e.full_name,l=e.street_address,d=e.city,p=e.region,f=e.postal_code,g=e.country;v.Z.trackPurchase({user_id:r,plan:n,email:a,currency:o,value:i,subscription_id:s,phone:u,full_name:c,street_address:l,city:d,region:p,postal_code:f,country:g});var h={user_id:r,plan:n,email:a,currency:o,value:i},addIfPresent=function(e,t){if(null!=t){if("string"==typeof t){var r=t.trim();if(!r)return;h[e]=r;return}h[e]=t}};addIfPresent("subscription_id",s),addIfPresent("phone_number",u),addIfPresent("full_name",c),addIfPresent("street_address",l),addIfPresent("city",d),addIfPresent("region",p),addIfPresent("postal_code",f),addIfPresent("country",g),t("c_purchase",h)},[t])}),z=(0,s._)((0,d.useState)(null),2),Z=z[0],K=z[1],B=(0,s._)((0,d.useState)(null),2),Q=B[0],$=B[1],ee=(0,s._)((0,d.useState)(!0),2),et=ee[0],er=ee[1],en=(0,s._)((0,d.useState)(null),2),ea=en[0],eo=en[1];useTrackingData();var ei=(0,U.j)().experiments,es=ei[P.YN.UXP_18],eu=(null==es?void 0:es.variant)||P.I3[P.YN.UXP_18],ec=ei[P.YN.UXP_71],el=(null==ec?void 0:ec.variant)||"control",ed=ei[P.YN.UXP_39],ep=(null==ed?void 0:ed.variant)||P.I3[P.YN.UXP_39],ef=ei[P.YN.UXP_77],eg=(null==ef?void 0:ef.variant)||P.I3[P.YN.UXP_77],eh=(0,w.Z)().notify,em=(0,d.useRef)(!0),e_=(0,d.useRef)(!1),ev=(0,d.useRef)(new Set);(0,d.useEffect)(function(){eo(localStorage.getItem("pendingInviteToken"))},[]),(0,d.useEffect)(function(){return function(){em.current=!1}},[]);var safeSetState=function(e,t){em.current&&e(t)},eS=(0,I.gw)({},{skip:!Q&&!h.I8.currentUser}),ey=eS.data,eI=eS.refetch,eE=(0,s._)((0,I.Rs)(),1)[0],eU=(0,s._)((0,I.UE)(),1)[0],eP=(0,s._)((0,I.yL)(),1)[0],ew=(0,s._)((0,I.NZ)(),1)[0],eA=(0,s._)((0,I.pr)(),1)[0],eT=(0,s._)((0,I.lo)(),1)[0],eC=(n=(0,a._)(function(e){return(0,c.Jh)(this,function(t){switch(t.label){case 0:return t.trys.push([0,3,,4]),[4,fetch("https://ipapi.co/".concat(e,"/json/"))];case 1:return[4,t.sent().json()];case 2:return[2,t.sent().country_name];case 3:return console.warn("Error getting location data:",t.sent()),[2,null];case 4:return[2]}})}),function(e){return n.apply(this,arguments)}),getTrackingDataFromLocalStorage=function(){return{referringUrl:localStorage.getItem("referringUrl"),ga4ClientId:localStorage.getItem("ga4ClientId"),gclAwCookie:localStorage.getItem("gclAw"),fbc:localStorage.getItem("fbc"),fbp:localStorage.getItem("fbp")}},cleanObject=function(e){return Object.entries(e).reduce(function(e,t){var r=(0,s._)(t,2),n=r[0],a=r[1];return null!=a&&(e[n]=a),e},{})},updateUserLocalStorage=function(e,t){localStorage.setItem("UxpUserID",e),t&&localStorage.setItem("userPhotoURL",t)},eb=(y=(0,a._)(function(e){var t;return(0,c.Jh)(this,function(r){switch(r.label){case 0:return r.trys.push([0,5,,6]),[4,eA().unwrap()];case 1:return[4,eC(r.sent().ip)];case 2:if(!(t=r.sent()))return[3,4];return[4,eU({uid:e,userCountry:t})];case 3:r.sent(),r.label=4;case 4:return[3,6];case 5:return console.warn("Error getting IP data:",r.sent()),[3,6];case 6:return[2]}})}),function(e){return y.apply(this,arguments)}),addUserToActiveCampaign=function(e,t,r,n){ew(cleanObject((0,o._)({email:e,firstName:t,lastName:r,tag:"uxpilot"},n))).catch(function(e){return console.warn("Error adding to ActiveCampaign:",e)})},eN=(N=(0,a._)(function(e,t){var r,n,a,i,s,l,d,p,f,g,h,m,_;return(0,c.Jh)(this,function(c){switch(c.label){case 0:if(!(null==e?void 0:e.user))throw Error("No user object in authentication result");if(!e.user.emailVerified)throw{code:"auth/email-not-verified",message:"Email not verified",email:e.user.email,uuid:e.user.uid};if(r=e.user.uid,!(n=e.user.providerData.find(function(e){return"google.com"===e.providerId})))throw Error("Google provider data not found");a=n.uid,i=n.email,s=n.photoURL,l=n.displayName,c.label=1;case 1:return c.trys.push([1,3,,4]),[4,eE().unwrap()];case 2:if(d=c.sent())return em.current&&(safeSetState($,r),updateUserLocalStorage(r,s)),[2,d];return[3,4];case 3:return console.warn("Error checking for existing user:",c.sent()),[3,4];case 4:return p=(0,E.R)(i),g=(f=(0,u._)((l||"").split(" ")))[0],h=f.slice(1).join(" "),m=getTrackingDataFromLocalStorage(),_=(0,S.QL)(),[4,eP(cleanObject((0,o._)({uid:r,googleUid:a,email:p,photoURL:s,displayName:l,authMethod:t,uxp18Variant:eu,uxp77Variant:eg,uxp71Variant:el,uxp39Variant:ep,uxp39StandardVariant:ep,campaignId:_},m))).unwrap()];case 5:return c.sent(),addUserToActiveCampaign(p,g,h,m),eb(r),em.current&&(safeSetState($,r),updateUserLocalStorage(r,s),j.trackSignUp(r,t,i,l),localStorage.setItem("signupTimestamp",Date.now().toString())),[2,{uid:r,email:i,photoURL:s,displayName:l,onboardingCompleted:!1}]}})}),function(e,t){return N.apply(this,arguments)});(0,d.useEffect)(function(){var e,unsubscribe=function(){};try{unsubscribe=h.I8.onAuthStateChanged((e=(0,a._)(function(e){var t,r,n,a,o;return(0,c.Jh)(this,function(i){switch(i.label){case 0:if(i.trys.push([0,7,,8]),!em.current||localStorage[A.Tg.WORKOS_ACCESS_TOKEN])return[2];if(!(null==e?void 0:e.emailVerified))return[3,5];safeSetState(K,e),i.label=1;case 1:return i.trys.push([1,3,,4]),[4,eE().unwrap()];case 2:return(t=i.sent())&&em.current&&(safeSetState($,t.uid),localStorage.setItem("UxpUserID",t.uid)),[3,4];case 3:return r=i.sent(),console.error("Error getting user info:",r),[3,4];case 4:return safeSetState(er,!1),n=e.uid,a=e.providerData.some(function(e){return"google.com"===e.providerId}),J.identify(n,{distinct_id:n,email:e.email,name:e.displayName,profession:null==ey?void 0:ey.profession,provider:a?"google":"email",emailVerified:e.emailVerified}),document.cookie="ph-distinct-id=".concat(n,"; path=/; max-age=").concat(31536e3,"; SameSite=Lax"),[3,6];case 5:em.current&&(J.reset(),safeSetState(K,null),safeSetState($,null),safeSetState(er,!1)),i.label=6;case 6:return[3,8];case 7:return o=i.sent(),console.error("Error in auth state change handler:",o),em.current&&safeSetState(er,!1),[3,8];case 8:return[2]}})}),function(t){return e.apply(this,arguments)}))}catch(e){console.error("Error setting up auth state listener:",e),em.current&&safeSetState(er,!1)}return function(){em.current=!1,unsubscribe()}},[]),(0,d.useEffect)(function(){var e,t=(e=(0,a._)(function(){var e;return(0,c.Jh)(this,function(t){switch(t.label){case 0:if(t.trys.push([0,2,3,4]),!localStorage.getItem(A.Tg.WORKOS_ACCESS_TOKEN))return[2];return localStorage.setItem(A.Tg.AUTH_TYPE,A.bf.WORKOS),[4,eG()];case 1:return(e=t.sent())&&em.current&&(safeSetState(K,{uid:e.uid,email:e.email,displayName:e.displayName||e.name,photoURL:e.photoURL||e.avatar,emailVerified:!0,authMethod:A.bf.WORKOS,isEnterpriseUser:!0,organizationId:e.organizationId,organizationName:e.organizationName,role:e.role,providerData:[{providerId:"workos.com",uid:e.uid,email:e.email,displayName:e.displayName||e.name}]}),safeSetState($,e.uid),localStorage.setItem("UxpUserID",e.uid),J.identify(e.uid,{distinct_id:e.uid,email:e.email,name:e.displayName||e.name,provider:"workos_sso",emailVerified:!0,isEnterpriseUser:!0,organizationId:e.organizationId,organizationName:e.organizationName})),[3,4];case 2:return console.error("Error checking WorkOS authentication:",t.sent()),[3,4];case 3:return em.current&&safeSetState(er,!1),[7];case 4:return[2]}})}),function(){return e.apply(this,arguments)});localStorage[A.Tg.WORKOS_ACCESS_TOKEN]&&t()},[]);var ek=(k=(0,a._)(function(){var e,t,r,n,a,o;return(0,c.Jh)(this,function(i){switch(i.label){case 0:return i.trys.push([0,3,,4]),e=new p.hJ,[4,(0,p.rh)(h.I8,e)];case 1:return t=i.sent(),(0,_.hb)("googleSignIn"),[4,eN(t,"google")];case 2:return[2,i.sent()];case 3:if(console.error("Google sign in error:",r=i.sent()),a=(0,E.K$)(r))throw console.log("[SSO Debug] ✅ SSO error parsed:",a),(0,E.US)(a);if("auth/account-exists-with-different-credential"===r.code||(null===(n=r.message)||void 0===n?void 0:n.includes("No user found")))return[2,{error:!0,code:"account-exists-with-email",email:(null===(o=r.customData)||void 0===o?void 0:o.email)||r.email,message:"An account already exists with this email. Please sign in with your password first, then link your Google account from Account Settings."}];throw r;case 4:return[2]}})}),function(){return k.apply(this,arguments)}),eR=(R=(0,a._)(function(e){var t,r,n,a,o;return(0,c.Jh)(this,function(i){switch(i.label){case 0:return i.trys.push([0,3,,4]),t=p.hJ.credential(e),[4,(0,p.sB)(h.I8,t)];case 1:return[4,eN(i.sent(),"google_one_tap")];case 2:return[2,i.sent()];case 3:if(console.error("Google One Tap sign in failed:",r=i.sent()),a=(0,E.K$)(r))throw console.log("[One Tap SSO] Enterprise SSO detected, redirecting to:",a.redirectUrl),(0,E.US)(a);if("auth/account-exists-with-different-credential"===r.code||(null===(n=r.message)||void 0===n?void 0:n.includes("No user found")))return[2,{error:!0,code:"account-exists-with-email",email:(null===(o=r.customData)||void 0===o?void 0:o.email)||r.email,message:"An account already exists with this email. Please sign in with your password first, then link your Google account from Account Settings."}];throw r;case 4:return[2]}})}),function(e){return R.apply(this,arguments)}),eO=(O=(0,a._)(function(){var e,t,r;return(0,c.Jh)(this,function(n){switch(n.label){case 0:if(!(e=h.I8.currentUser))throw Error("No user found. Please sign in or sign up first.");t=window.location.origin,n.label=1;case 1:return n.trys.push([1,3,,4]),[4,e.sendEmailVerification({url:"".concat(t,"/b"),handleCodeInApp:!0})];case 2:return n.sent(),[3,4];case 3:throw console.error("Error sending verification email:",r=n.sent()),r;case 4:return[2]}})}),function(){return O.apply(this,arguments)}),ex=(x=(0,a._)(function(e,t,r){var n,a,i,s,l,d,f,g,m,_,v,y,I;return(0,c.Jh)(this,function(c){switch(c.label){case 0:return c.trys.push([0,10,,11]),[4,eT({email:n=(0,E.R)(e)}).unwrap()];case 1:if(!(null==(a=c.sent())?void 0:a.canAdd))return eh({message:"Unable to create account. Please contact support for help.",type:"error"}),[2];return[4,(0,p.Xb)(h.I8,n,t)];case 2:return i=c.sent(),[4,(0,p.ck)(i.user,{displayName:r})];case 3:if(c.sent(),K(null),!(i&&i.user))return[3,9];s=i.user.uid,l=getTrackingDataFromLocalStorage(),f=(d=(0,u._)((r||"").split(" ")))[0],g=d.slice(1).join(" "),m=(0,S.QL)(),_=cleanObject((0,o._)({uid:s,email:n,displayName:r,authMethod:"email",uxp18Variant:eu,uxp77Variant:eg,uxp71Variant:el,uxp39Variant:ep,uxp39StandardVariant:ep,campaignId:m},l)),c.label=4;case 4:return c.trys.push([4,7,,8]),[4,eP(_).unwrap()];case 5:return c.sent(),[4,eO()];case 6:return c.sent(),[3,8];case 7:return(null==(v=c.sent())?void 0:v.data)&&(null===(y=JSON.parse(null==v?void 0:v.data))||void 0===y?void 0:y.code)==="USER_PREVIOUSLY_DELETED"&&eh({message:"Unable to create account. Please contact support for help.",type:"error"}),console.warn("Error adding user to DB:",v),[3,8];case 8:j.trackSignUp(s,"email_password",e,r),localStorage.setItem("UxpUserID",s),localStorage.setItem("signupTimestamp",Date.now().toString()),addUserToActiveCampaign(n,f,g,l),eb(s),J.identify(s,{distinct_id:s,email:n,name:r,provider:"email",emailVerified:!1,campaignId:m}),c.label=9;case 9:return[2,{uid:i.user.uid}];case 10:switch(console.error("Error in signUp:",I=c.sent()),I.code){case"auth/email-already-in-use":return[2,{code:"auth/email-already-in-use",message:"This email is already registered. Please sign in to your existing account."}];case"auth/invalid-email":return[2,{code:"auth/invalid-email",message:"The email address is not valid."}];case"auth/operation-not-allowed":return[2,{code:"auth/operation-not-allowed",message:"Email/password accounts are not enabled. Please contact support."}];case"auth/weak-password":return[2,{code:"auth/weak-password",message:"The password is too weak. Please use at least 8 characters."}];default:return[2,{code:I.code||"auth/unknown",message:I.message||"An error occurred during signup. Please try again."}]}return[3,11];case 11:return[2]}})}),function(e,t,r){return x.apply(this,arguments)}),eD=(D=(0,a._)(function(e,t){var r,n,a,o,i,s,u,l,d;return(0,c.Jh)(this,function(c){switch(c.label){case 0:return c.trys.push([0,7,,8]),r=(0,E.R)(e),[4,(0,p.e5)(h.I8,r,t)];case 1:if(!(n=c.sent().user))throw Error("Sign-in failed: No user returned from Firebase.");return[4,n.getIdToken()];case 2:a=c.sent(),(0,_.hb)("googleSignIn"),o=n.uid,n.photoURL&&localStorage.setItem("userPhotoURL",n.photoURL),c.label=3;case 3:return c.trys.push([3,5,,6]),[4,eE().unwrap()];case 4:return i=c.sent(),[3,6];case 5:return console.warn("Error fetching user info:",c.sent()),(0,E.w7)("/login?authFailed=true"),[3,6];case 6:return s=null==i?void 0:i.onboardingCompleted,n&&J.identify(o,{distinct_id:o,email:r,name:n.displayName,provider:n.providerData.some(function(e){return"google.com"===e.providerId})?"google":"email",emailVerified:n.emailVerified}),(null==n?void 0:n.emailVerified)&&!1===s&&(safeSetState(K,n),safeSetState($,n.uid),localStorage.setItem("UxpUserID",n.uid)),[2,{providerData:null!==(u=n.providerData)&&void 0!==u?u:[],uid:o,user:n,token:a,email:r,onboardingCompleted:s}];case 7:if("auth/invalid-email"===(l=c.sent()).code||"auth/wrong-password"===l.code||"auth/user-not-found"===l.code||"auth/invalid-credential"===l.code||(null===(d=l.message)||void 0===d?void 0:d.includes("INVALID_LOGIN_CREDENTIALS")))return[2,{code:"auth/invalid-credential",message:"Invalid username or password. Please try again."}];throw console.error("Sign-in failed:",l),l;case 8:return[2]}})}),function(e,t){return D.apply(this,arguments)}),eL=(L=(0,a._)(function(){var e,t,r,n;return(0,c.Jh)(this,function(a){switch(a.label){case 0:if(a.trys.push([0,7,,8]),!h.I8.currentUser)throw Error("You must be signed in to link accounts");return e=new p.hJ,[4,h.I8.currentUser.linkWithPopup(e)];case 1:if(!(t=a.sent().user.providerData.find(function(e){return"google.com"===e.providerId})))return[3,6];r=t.photoURL,a.label=2;case 2:if(a.trys.push([2,5,,6]),!r)return[3,4];return[4,(0,p.ck)(h.I8.currentUser,{photoURL:r})];case 3:a.sent(),Z&&K((0,i._)((0,o._)({},Z),{photoURL:r})),a.label=4;case 4:return[3,6];case 5:return console.warn("Error updating user data with linked Google account:",a.sent()),[3,6];case 6:return[2,!0];case 7:if(console.error("Error linking Google account:",n=a.sent()),"auth/credential-already-in-use"===n.code)throw Error("This Google account is already linked to another user.");if("auth/email-already-in-use"===n.code)throw Error("This Google account's email is already in use by another account.");throw n;case 8:return[2]}})}),function(){return L.apply(this,arguments)}),eX=(X=(0,a._)(function(e){var t,r;return(0,c.Jh)(this,function(n){switch(n.label){case 0:if(n.trys.push([0,4,,5]),!h.I8.currentUser)throw Error("You must be signed in to set a password");if(h.I8.currentUser.providerData.some(function(e){return"password"===e.providerId}))throw Error("This account already has a password set");return t=h.ZP.auth.EmailAuthProvider.credential(h.I8.currentUser.email,e),[4,h.I8.currentUser.linkWithCredential(t)];case 1:return n.sent(),[4,h.I8.currentUser.reload()];case 2:return n.sent(),[4,h.I8.currentUser.sendEmailVerification({url:window.location.origin,handleCodeInApp:!0})];case 3:return n.sent(),[2,!0];case 4:throw console.error("Error setting password for OAuth user:",r=n.sent()),r;case 5:return[2]}})}),function(e){return X.apply(this,arguments)}),eV=(V=(0,a._)(function(e,t){var r,n;return(0,c.Jh)(this,function(a){switch(a.label){case 0:if(a.trys.push([0,3,,4]),!h.I8.currentUser)throw Error("You must be signed in to change password");return r=h.ZP.auth.EmailAuthProvider.credential(h.I8.currentUser.email,e),[4,h.I8.currentUser.reauthenticateWithCredential(r)];case 1:return a.sent(),[4,h.I8.currentUser.updatePassword(t)];case 2:return a.sent(),[2,!0];case 3:throw console.error("Error changing password:",n=a.sent()),n;case 4:return[2]}})}),function(e,t){return V.apply(this,arguments)}),eG=(G=(0,a._)(function(){return(0,c.Jh)(this,function(e){switch(e.label){case 0:if(e.trys.push([0,9,,10]),localStorage.getItem(A.Tg.AUTH_TYPE)!==A.bf.WORKOS)return[3,5];e.label=1;case 1:return e.trys.push([1,3,,4]),[4,eE().unwrap()];case 2:case 6:return[2,e.sent()];case 3:return console.error("Error getting WorkOS user info:",e.sent()),[2,null];case 4:return[3,8];case 5:return e.trys.push([5,7,,8]),[4,eE().unwrap()];case 7:return console.error("Error getting Firebase user info:",e.sent()),[2,null];case 8:return[3,10];case 9:return console.error("Error in getCurrentUserData:",e.sent()),[2,null];case 10:return[2]}})}),function(){return G.apply(this,arguments)}),eH=(H=(0,a._)(function(e,t){var n,a,o,i,s,u,l,d,p,f,g,h,m,_,v,S,y;return(0,c.Jh)(this,function(c){switch(c.label){case 0:if(n="".concat(e,"-").concat(t,"-").concat(Date.now()),a="".concat(null==e?void 0:e.substring(0,8),"...").concat(null==t?void 0:t.substring(0,8)),!e)throw console.error("[AuthProvider] No authorization code provided"),Error("No authorization code provided");if(e_.current)throw Error("Authentication already in progress");if(Array.from(ev.current).find(function(r){return r.startsWith("".concat(e,"-").concat(t))}))throw console.warn("[AuthProvider] This WorkOS callback has already been processed: ".concat(a)),Error("This authentication request has already been processed");e_.current=!0,ev.current.add(n),c.label=1;case 1:return c.trys.push([1,4,6,7]),[4,fetch("".concat(C.URLS.streamUrl,"/").concat(A.lZ.WORKOS_CALLBACK),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({code:e,state:t})})];case 2:return[4,c.sent().json()];case 3:if("success"!==(o=c.sent()).status)throw Error(o.message||"Failed to complete SSO");return s=(i=o.data).workosUser,u=i.tokens,l=i.userExists,d=i.existingUser,eA().unwrap().then(function(e){eC(e.ip).then(function(e){if(e){var t;eU({uid:null!==(t=null==s?void 0:s.externalId)&&void 0!==t?t:null==s?void 0:s.id,userCountry:e})}})}).catch(function(e){return console.warn("Error getting IP data:",e)}),(0,T.eJ)(u.accessToken,u.refreshToken,u.expiresIn),g={uid:(f=d||{uid:null!==(p=null==s?void 0:s.externalId)&&void 0!==p?p:null==s?void 0:s.id,email:s.email,displayName:s.displayName,onboardingCompleted:!1,isEnterpriseUser:!0,subscription:!0}).uid,email:f.email,displayName:f.displayName,emailVerified:!0,authMethod:"workos_sso",isEnterpriseUser:!0,onboardingCompleted:f.onboardingCompleted,subscription:f.subscription},em.current&&(safeSetState(K,g),safeSetState($,f.uid),localStorage.setItem("UxpUserID",f.uid),J.identify(f.uid,{distinct_id:f.uid,email:f.email,name:f.displayName,provider:"workos_sso",emailVerified:!0,isEnterpriseUser:!0,subscription:f.subscription}),l||j.trackSignUp(f.uid,"workos_sso",f.email,f.displayName)),[2,{uid:f.uid,email:f.email,displayName:f.displayName,onboardingCompleted:f.onboardingCompleted,isEnterpriseUser:!0,subscription:f.subscription,tokens:u}];case 4:return h=c.sent(),console.error("[AuthProvider] Error handling WorkOS callback ".concat(a,":"),h),[4,r.e(9086).then(r.bind(r,9086))];case 5:throw _=(m=c.sent()).handleWorkOSError,v=m.logWorkOSError,S=_(h,"WorkOS callback"),v(h,"WorkOS callback ".concat(a)),(y=Error(S.message)).code=S.code,y.type=S.type,y.retryable=S.retryable,S.shouldLogout&&(console.warn("[AuthProvider] Error requires logout, clearing auth state"),em.current&&(safeSetState(K,null),safeSetState($,null)),localStorage.removeItem("UxpUserID")),S.shouldRedirect&&S.redirectPath&&(console.warn("[AuthProvider] Error requires redirect to ".concat(S.redirectPath)),y.redirectPath=S.redirectPath),y.retryable&&ev.current.delete(n),y;case 6:return e_.current=!1,[7];case 7:return[2]}})}),function(e,t){return H.apply(this,arguments)}),eF=(F=(0,a._)(function(e){var t;return(0,c.Jh)(this,function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,h.I8.verifyPasswordResetCode(e)];case 1:return[2,r.sent()];case 2:throw console.error("Error verifying reset code:",t=r.sent()),t;case 3:return[2]}})}),function(e){return F.apply(this,arguments)}),eY=(Y=(0,a._)(function(e){var t;return(0,c.Jh)(this,function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,h.I8.applyActionCode(e)];case 1:return[2,r.sent()];case 2:throw console.error("Error applying action code:",t=r.sent()),t;case 3:return[2]}})}),function(e){return Y.apply(this,arguments)}),eW=(W=(0,a._)(function(e,t){var r;return(0,c.Jh)(this,function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,h.I8.confirmPasswordReset(e,t)];case 1:return[2,n.sent()];case 2:throw console.error("Error confirming password reset:",r=n.sent()),r;case 3:return[2]}})}),function(e,t){return W.apply(this,arguments)}),eq=(q=(0,a._)(function(e){var t;return(0,c.Jh)(this,function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,h.I8.checkActionCode(e)];case 1:return[2,r.sent()];case 2:throw console.error("Error checking action code:",t=r.sent()),t;case 3:return[2]}})}),function(e){return q.apply(this,arguments)});return(0,l.jsx)(b.Provider,{value:{currentUser:Z,signInWithGoogle:ek,authLoading:et,googleUID:Q,signUp:ex,signIn:eD,userInfo:ey||null,refetch:eI,signInWithGoogleOneTap:eR,linkWithGoogleAccount:eL,setPasswordForOAuthUser:eX,changePassword:eV,verifyPasswordResetCode:eF,applyActionCode:eY,confirmPasswordReset:eW,checkActionCode:eq,sendVerificationEmail:eO,handleWorkOSCallback:eH,getIsNewUser:function(){var e=new Date(null==ey?void 0:ey.createdDate);return(0,f.Z)(e,(0,g.Z)(new Date,1))},pendingToken:ea},children:M})}},29467:function(e,t,r){r.d(t,{V:function(){return ExperimentsProvider},j:function(){return useExperiments}});var n=r(21575),a=r(57437),o=r(2265),i=r(41369),s=r(9),u=r(53611);function useExperiment(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.defaultVariant,n=void 0===r?"control":r,a=t.sendExposureEvent,c=void 0===a||a,l=t.properties,d=void 0===l?{}:l,p=(0,u.U0)(),f=(0,s._)((0,o.useState)(!0),2),g=f[0],h=f[1],m=(0,u.ZR)(e),_=(0,s._)((0,o.useState)(m||n),2),v=_[0],S=_[1],y=null!=m,I=(0,o.useRef)(!1),E=(0,o.useRef)(d);return(0,o.useEffect)(function(){E.current=d},[d]),(0,o.useEffect)(function(){if(!p){S(n),h(!1);return}var t=localStorage.getItem("experiment_variant_UXP-22");if("uxp-22"===e?m?(localStorage.setItem("experiment_variant_UXP-22",m),S(m)):t?S(t):S(n):m?S(m):S(n),h(!1),y&&c&&m&&!I.current){var r=(0,i._)({experiment:e,experiment_variant:m},E.current);if(p&&"function"==typeof p.capture)try{p.capture("$experiment_viewed",r),I.current=!0}catch(t){console.error("❌ [Experiment] Error capturing exposure event for ".concat(e,":"),t),window.queuePostHogEvent&&(window.queuePostHogEvent("$experiment_viewed",r),I.current=!0)}else window.queuePostHogEvent&&(window.queuePostHogEvent("$experiment_viewed",r),I.current=!0)}},[p,e,m,y,c,n]),{variant:v,loading:g,enabled:y,isVariant:function(e){return v===e}}}var c=r(82469),l=(0,o.createContext)({experiments:{},isVariant:function(){return!1},isExperimentEnabled:function(){return!1},getVariant:function(){return null}});function ExperimentsProvider(e){var t=e.children,r=useExperiment(c.YN.UXP_08,{defaultVariant:c.I3[c.YN.UXP_08],properties:{page:"homepage",element:"social_proof"}}),i=useExperiment(c.YN.UXP_17,{defaultVariant:c.I3[c.YN.UXP_17],properties:{page:"plans",element:"top_brands"}}),s=useExperiment(c.YN.UXP_18,{defaultVariant:c.I3[c.YN.UXP_18],properties:{page:"plans",element:"pricing_design"}}),u=useExperiment(c.YN.UXP_32,{defaultVariant:c.I3[c.YN.UXP_32],properties:{page:"homepage",element:"microtriggers"}}),d=useExperiment(c.YN.UXP_44,{defaultVariant:c.I3[c.YN.UXP_44],properties:{page:"dashboard",element:"import_components_cta"}}),p=useExperiment(c.YN.UXP_13,{defaultVariant:c.I3[c.YN.UXP_13],properties:{page:"homepage",element:"simplified_signup"}}),f=useExperiment(c.YN.UXP_52,{defaultVariant:c.I3[c.YN.UXP_52],properties:{page:"homepage",element:"pain_based_vs_benefit_based"}}),g=useExperiment(c.YN.UXP_39,{defaultVariant:c.I3[c.YN.UXP_39],properties:{page:"plans",element:"us_pricing"}}),h=useExperiment(c.YN.UXP_77,{defaultVariant:c.I3[c.YN.UXP_77],properties:{element:"credits_experiment"}}),m=useExperiment(c.YN.UXP_22,{defaultVariant:c.I3[c.YN.UXP_22],properties:{element:"onboarding_experiment"}}),_=useExperiment(c.YN.UXP_88,{defaultVariant:c.I3[c.YN.UXP_88],properties:{element:"uxp_88_test"}}),v=useExperiment(c.YN.UXP_119,{defaultVariant:c.I3[c.YN.UXP_119],properties:{page:"canvas",element:"default_tab_selection"}}),S=useExperiment(c.YN.UXP_29,{defaultVariant:c.I3[c.YN.UXP_29],properties:{page:"account_settings",element:"additional_credits_pricing"}}),y=(0,o.useMemo)(function(){var e;return e={},(0,n._)(e,c.YN.UXP_08,r),(0,n._)(e,c.YN.UXP_17,i),(0,n._)(e,c.YN.UXP_18,s),(0,n._)(e,c.YN.UXP_32,u),(0,n._)(e,c.YN.UXP_44,d),(0,n._)(e,c.YN.UXP_13,p),(0,n._)(e,c.YN.UXP_52,f),(0,n._)(e,c.YN.UXP_39,g),(0,n._)(e,c.YN.UXP_77,h),(0,n._)(e,c.YN.UXP_22,m),(0,n._)(e,c.YN.UXP_88,_),(0,n._)(e,c.YN.UXP_119,v),(0,n._)(e,c.YN.UXP_29,S),e},[r,i,u,d,p,f,s,g,h,m,_,v,S]),I=(0,o.useCallback)(function(e,t){var r=y[e];return(null==r?void 0:r.variant)===t},[y]),E=(0,o.useCallback)(function(e){var t=y[e];return(null==t?void 0:t.enabled)===!0},[y]),U=(0,o.useCallback)(function(e){var t=y[e];return(null==t?void 0:t.variant)||c.I3[e]||null},[y]),P=(0,o.useMemo)(function(){return{experiments:y,isVariant:I,isExperimentEnabled:E,getVariant:U}},[y,I,E,U]);return(0,a.jsx)(l.Provider,{value:P,children:t})}function useExperiments(){var e=(0,o.useContext)(l);if(void 0===e)throw Error("useExperiments must be used within an ExperimentsProvider");return e}},13716:function(e,t,r){r.r(t),r.d(t,{PostHogProvider:function(){return PostHogProvider},isPostHogReadyState:function(){return isPostHogReadyState},queuePostHogEvent:function(){return queuePostHogEvent}});var n=r(41369),a=r(57437),o=r(2265),i=r(58066),s=r(53611),u=r(29467),c=r(25566),AnalyticsLoader=function(){return null},l=[],d=!1,p=null;function isPostHogReadyState(){return d&&null!==p}function queuePostHogEvent(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!d||!p)return l.push({eventName:e,properties:t}),!1;try{return p.capture(e,t),!0}catch(t){return console.error("❌ [PostHog] Error capturing event ".concat(e,":"),t),!1}}function PostHogInitializer(e){var t=e.children,r=(0,o.useRef)(!1);return(0,o.useEffect)(function(){if(!r.current){r.current=!0;var e,t=window.location.search.includes("__posthog_debug=true"),a="https://ph.uxpilot.ai",o="https://us.posthog.com",s="undefined"!=typeof document?null===(e=document.cookie.split("; ").find(function(e){return e.startsWith("ph-distinct-id=")}))||void 0===e?void 0:e.split("=")[1]:null,syncDistinctIdToCookie=function(e){"undefined"!=typeof document&&(document.cookie="ph-distinct-id=".concat(e,"; path=/; max-age=").concat(31536e3,"; SameSite=Lax"),t&&console.log("\uD83D\uDD04 [PostHog] Synced distinct_id to cookie:",e))},u={api_host:a,ui_host:o,person_profiles:"identified_only",capture_pageview:!0,debug:t,bootstrap:(0,n._)({featureFlags:!0,experimentVariants:!0},s&&{distinctID:s}),loaded:function(e){p=e,d=!0;var r=e.get_distinct_id();if(t&&console.info("✅ [PostHog] Loaded successfully",{api_host:a,ui_host:o,distinct_id:r,queue_length:l.length}),s&&r!==s&&(t&&console.warn("⚠️  [PostHog] Syncing with server-provided ID:",s),e.identify(s)),syncDistinctIdToCookie(r),e.on("identify",function(t){syncDistinctIdToCookie(e.get_distinct_id())}),e.register({app_version:c.env.NEXT_PUBLIC_APP_VERSION||"unknown",environment:"production"}),function(){if(d&&p)for(;l.length>0;){var e=l.shift(),t=e.eventName,r=e.properties;try{p.capture(t,r)}catch(e){console.error("❌ [PostHog] Error processing queued event ".concat(t,":"),e)}}}(),t&&l.length>0&&console.log("\uD83D\uDCE4 [PostHog] Processed ".concat(l.length," queued events")),window.localStorage)try{var n=JSON.parse(window.localStorage.getItem("ph_failed_events")||"[]");n.length>0&&(t&&console.log("\uD83D\uDD04 [PostHog] Recovering ".concat(n.length," failed events")),n.forEach(function(t){try{e.capture(t.eventName,t.properties)}catch(e){console.error("❌ [PostHog] Failed to recover event ".concat(t.eventName,":"),e)}}),window.localStorage.removeItem("ph_failed_events"),t&&console.log("✅ [PostHog] Recovered ".concat(n.length," events")))}catch(e){console.error("❌ [PostHog] Error recovering failed events:",e)}t&&console.log("\uD83D\uDCCA [PostHog] Configuration:",{api_host:a,ui_host:o,debug:t,person_profiles:u.person_profiles,capture_pageview:u.capture_pageview})}};try{var f="phc_TE3FyEbshAgJokNVQQVdWQomWe3c4g09Le9tKmD7tKI";if(!f){console.error("❌ [PostHog] NEXT_PUBLIC_POSTHOG_KEY is not set!");return}i.ZP.init(f,u),setTimeout(function(){d||console.warn("⚠️  [PostHog] Still not loaded after 5 seconds. Events may be queued.")},5e3)}catch(e){console.error("❌ [PostHog] Initialization error:",e),d=!0}}},[]),t}function PostHogProvider(e){var t=e.children;return(0,o.useEffect)(function(){window.queuePostHogEvent=queuePostHogEvent,window.isPostHogReadyState=isPostHogReadyState},[]),(0,a.jsx)(o.Suspense,{fallback:(0,a.jsx)(AnalyticsLoader,{}),children:(0,a.jsx)(s.zf,{client:i.ZP,children:(0,a.jsx)(PostHogInitializer,{children:(0,a.jsx)(u.V,{children:t})})})})}},45511:function(e,t,r){var n=r(86335),a=r(40494),o=r(41369),i=r(87944),s=new(function(){function AnalyticsService(){(0,n._)(this,AnalyticsService),this.maxRetries=5,this.retryInterval=100}return(0,a._)(AnalyticsService,[{key:"trackEvent",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.trackGTMEvent(e,t),this.trackVWOEvent(e,t)}},{key:"trackGTMEvent",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=this,pushDataLayer=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(window.dataLayer)try{window.dataLayer.push((0,o._)({event:e},t))}catch(t){console.error("Error tracking GTM event ".concat(e,":"),t)}else n<r.maxRetries&&setTimeout(function(){return pushDataLayer(n+1)},r.retryInterval)};pushDataLayer()}},{key:"trackVWOEvent",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=this,pushVWOEvent=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(window.VWO&&window.VWO.event)try{window.VWO.event(e,t)}catch(t){console.error("Error tracking VWO event ".concat(e,":"),t)}else n<r.maxRetries&&setTimeout(function(){return pushVWOEvent(n+1)},r.retryInterval)};pushVWOEvent()}},{key:"trackPageView",value:function(e,t){this.trackEvent("page_view",{page_path:e,page_title:t})}},{key:"trackSignUp",value:function(e,t,r,n){this.trackEvent("c_sign_up",{user_id:e,method:t,email:r,full_name:n})}},{key:"trackSignIn",value:function(e,t){this.trackEvent("c_sign_in",{user_id:e,method:t})}},{key:"trackVerificationPageVisit",value:function(){this.trackEvent("c_verification_page_visit")}},{key:"trackAccountVerified",value:function(e){this.trackEvent("c_account_verified",{user_id:e})}},{key:"trackPurchase",value:function(e){var t=e.user_id,r=e.plan,n=e.email,a=e.currency,o=e.value,s=e.subscription_id,u=e.phone,c=e.full_name,l=e.street_address,d=e.city,p=e.region,f=e.postal_code,g=e.country,h={plan_name:r,plan:r,price:o,value:o,user_id:t,email:n,currency:null!=a?a:"USD",subscription_id:s},addIfPresent=function(e,t){if(null!=t){if("string"==typeof t){var r=t.trim();if(!r)return;h[e]=r;return}h[e]=t}};addIfPresent("phone_number",u),addIfPresent("full_name",c),addIfPresent("street_address",l),addIfPresent("city",d),addIfPresent("region",p),addIfPresent("postal_code",f),addIfPresent("country",g),this.trackEvent("c_purchase",h),(0,i.g8)(n,o,null!=a?a:"USD")}},{key:"trackLinkedInConversion",value:function(e){var t=this,trackLinkedIn=function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(window.lintrk)try{window.lintrk("track",{conversion_id:e})}catch(e){console.error("LinkedIn tracking failed:",e)}else r<t.maxRetries&&setTimeout(function(){return trackLinkedIn(r+1)},t.retryInterval)};trackLinkedIn()}},{key:"validateEventData",value:function(e,t){return!0}}]),AnalyticsService}());t.Z=s},40245:function(e,t,r){r.d(t,{Pm:function(){return hasCampaignId},QL:function(){return getCampaignIdForApi},Vs:function(){return clearCampaignId},e2:function(){return initializeCampaignTracking}});var n={STORAGE_KEY:"uxpilot_campaign_id",QUERY_PARAM:"campaign_id"};function getStoredCampaignId(){try{return localStorage.getItem(n.STORAGE_KEY)||null}catch(e){return console.error("Error retrieving campaign ID:",e),null}}function clearCampaignId(){try{return localStorage.removeItem(n.STORAGE_KEY),!0}catch(e){return console.error("Error clearing campaign ID:",e),!1}}function initializeCampaignTracking(e){try{var t=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;try{var t=e||window.location.href;if(!t)return null;var r=new URL(t).searchParams.get(n.QUERY_PARAM);if(r&&/^[a-zA-Z0-9_-]{3,50}$/.test(r))return r;return null}catch(e){return console.error("Error extracting campaign ID:",e),null}}();if(t)return function(e){try{if(!e)return!1;return localStorage.setItem(n.STORAGE_KEY,e),!0}catch(e){return console.error("Error storing campaign ID:",e),!1}}(t)&&e&&e.capture("campaign_landing",{campaign_id:t,landing_url:window.location.href,timestamp:new Date().toISOString()}),t;return null}catch(e){return console.error("Error initializing campaign tracking:",e),null}}function getCampaignIdForApi(){return getStoredCampaignId()}function hasCampaignId(){return!!getStoredCampaignId()}},87944:function(e,t,r){r.d(t,{G9:function(){return trackTwitterSignupConversion},g8:function(){return trackTwitterPurchaseConversion}});var trackTwitterConversion=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"tw-pqg9x-pqgbo",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;window.twq&&window.twq("event",e,{email_address:t,value:r,currency:n})},trackTwitterSignupConversion=function(){trackTwitterConversion("tw-pqg9x-pqgbo")},trackTwitterPurchaseConversion=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;trackTwitterConversion("tw-pqg9x-pqg9y",e,t,r)}},79398:function(e,t,r){r.d(t,{z:function(){return useAnalytics}});var n=r(41369),a=r(43654),o=r(9),i=r(53611),s=r(2265),u=r(29467),c=r(4392),l=r(13716);function useAnalytics(){var e=(0,i.U0)(),t=(0,u.j)().experiments,r=(0,c.aC)(),d=(0,o._)((0,s.useState)(!1),2),p=d[0],f=d[1];(0,s.useEffect)(function(){var checkReady=function(){f(e&&"function"==typeof e.capture&&((0,l.isPostHogReadyState)()||e.__loaded))};checkReady();var t=setInterval(function(){checkReady(),((0,l.isPostHogReadyState)()||e&&"function"==typeof e.capture)&&clearInterval(t)},100),r=setTimeout(function(){clearInterval(t)},1e4);return function(){clearInterval(t),clearTimeout(r)}},[e]);var getUserDataForDataLayer=function(){var e,t,n,a,o;return{email:(null==r?void 0:null===(e=r.userInfo)||void 0===e?void 0:e.email)||(null==r?void 0:null===(t=r.currentUser)||void 0===t?void 0:t.email)||"",fullName:(null==r?void 0:null===(n=r.userInfo)||void 0===n?void 0:n.displayName)||(null==r?void 0:null===(a=r.userInfo)||void 0===a?void 0:a.fullName)||(null==r?void 0:null===(o=r.currentUser)||void 0===o?void 0:o.displayName)||""}},pushToDataLayer=function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1];try{if(window.dataLayer){var t=getUserDataForDataLayer(),r=t.email,n=t.fullName;window.dataLayer.push({event:e,email:r,full_name:n})}}catch(t){console.error("DataLayer Error (".concat(e,"):"),t)}};return{capture:function(r){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(r)try{var i=Object.keys(t).reduce(function(e,r){var n=t[r];return(null==n?void 0:n.enabled)&&n.variant&&(e["$feature/".concat(r)]=n.variant),e},{}),s=(0,n._)((0,a._)((0,n._)({},o),{source:"frontend"}),i);if(e&&"function"==typeof e.capture&&p)try{e.capture(r,s)}catch(e){console.error("❌ [Analytics] Error in posthog.capture for ".concat(r,":"),e),(0,l.queuePostHogEvent)(r,s)}else(0,l.queuePostHogEvent)(r,s);pushToDataLayer(r,(0,a._)((0,n._)({},o),{source:"frontend"}))}catch(e){console.error("❌ [Analytics] Error capturing event ".concat(r,":"),e);try{(0,l.queuePostHogEvent)(r,(0,a._)((0,n._)({},o),{source:"frontend",error:e.message,error_stack:e.stack}))}catch(t){if(console.error("❌ [Analytics] Failed to queue event ".concat(r,":"),t),window.localStorage)try{var u=JSON.parse(window.localStorage.getItem("ph_failed_events")||"[]");u.push({eventName:r,properties:(0,a._)((0,n._)({},o),{source:"frontend",error:e.message}),timestamp:new Date().toISOString()}),u.length>100&&u.shift(),window.localStorage.setItem("ph_failed_events",JSON.stringify(u))}catch(e){console.error("❌ [Analytics] Failed to store event in localStorage:",e)}}}},identify:function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{e&&"function"==typeof e.identify&&e.identify(t,r)}catch(e){console.error("Analytics Identify Error:",e)}},setUserProperties:function(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};try{e&&"function"==typeof(null===(t=e.people)||void 0===t?void 0:t.set)&&e.people.set(r)}catch(e){console.error("Analytics Set User Properties Error:",e)}},reset:function(){e&&"function"==typeof e.reset&&e.reset()},isFeatureEnabled:function(t){try{if(e&&"function"==typeof e.isFeatureEnabled)return e.isFeatureEnabled(t);return!1}catch(e){return console.error("Analytics Feature Flag Error:",e),!1}}}}},76340:function(e,t,r){var n=r(57437),a=r(87415);t.Z=function(){return{notify:function(e){var t=e.message,r=e.type,n={position:"top-right",autoClose:3e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0};switch(void 0===r?"default":r){case"info":a.toast.info(t,n);break;case"success":a.toast.success(t,n);break;case"warning":a.toast.warn(t,n);break;case"error":a.toast.error(t,n);break;default:(0,a.toast)(t,n)}},notifyWithAction:function(e){var t=e.message,r=e.type,o=e.actionText,i=e.onAction,s=e.autoClose,u={position:"top-right",autoClose:void 0===s?5e3:s,hideProgressBar:!1,closeOnClick:!1,pauseOnHover:!0,draggable:!1,progress:void 0,className:"toast-with-action"},ToastContent=function(e){var r=e.closeToast;return(0,n.jsxs)("div",{className:"flex items-center gap-3",children:[(0,n.jsx)("div",{className:"flex-1",children:(0,n.jsx)("p",{className:"text-sm font-medium text-carbon-900",children:t})}),o&&i&&(0,n.jsx)("button",{onClick:function(){i(),r()},className:"px-3 py-1 text-xs font-semibold text-white bg-amethyst-700 rounded-lg hover:bg-amethyst-800 transition-colors whitespace-nowrap shadow-sm",children:o})]})};switch(void 0===r?"default":r){case"info":a.toast.info((0,n.jsx)(ToastContent,{}),u);break;case"success":a.toast.success((0,n.jsx)(ToastContent,{}),u);break;case"warning":a.toast.warn((0,n.jsx)(ToastContent,{}),u);break;case"error":a.toast.error((0,n.jsx)(ToastContent,{}),u);break;default:(0,a.toast)((0,n.jsx)(ToastContent,{}),u)}},managedToast:function(){var e=null;return{start:function(t){return e=a.toast.loading(t)},update:function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"success";e&&a.toast.update(e,{render:t,type:r,isLoading:!1,autoClose:3e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0})},finish:function(){e&&a.toast.dismiss(e)}}}}}},16958:function(e,t,r){r.d(t,{V:function(){return a},q:function(){return n}});var n={USER:"User",SUBSCRIPTION:"Subscription",CREDITS:"Credits",WIREFRAMES:"Wireframes",GROUPS:"Groups",PROMPTS:"Prompts",PAGES:"Pages",DESIGN_REVIEWS:"DesignReviews",USER_COUNT:"UserCount",PAYMENT_LOGS:"PaymentLogs",USER_IP:"UserIp",GENERATE:"Generate",GENERATE_HIFI:"GenerateHiFi",GENERATE_WIREFRAMES:"GenerateWireframes",GENERATE_BY_FLOW:"GenerateByFlow",HEATMAP:"Heatmap",SAVED_WIREFRAMES:"SavedWireframes",CANVAS_SHAPES:"CanvasShapes",CANVAS_ASSETS:"CanvasAssets",DESIGN_COLLECTIONS:"DesignCollections",CHAT_MESSAGES:"ChatMessages",CHAT_CONVERSATIONS:"ChatConversations",THEMES:"Themes",EXPORTS:"Exports",PREVIEW:"Preview",PREVIEWS:"Previews",COMPANY_INFORMATION:"CompanyInformation",SYMBOLS:"Symbols"},a={AUTH:"authApi",SUBSCRIPTION:"subscriptionApi",REVIEWS_QUERIES_MUTATIONS:"reviewsQueriesMutationsApi",UPLOAD_FILE:"uploadFileApi",UPLOAD_IMAGE_FILE:"uploadImageFileApi",UPLOAD_DOCUMENT:"uploadDocumentApi",UX_REVIEW:"uxReviewApi",USER_COUNT:"userCountApi",DESIGN:"designApi",WIREFRAMES:"wireframesApi",PROMPT:"promptApi",GROUPS:"groupsApi",PAGES:"pagesApi",SHARING:"sharingApi",CANVAS_SHAPES:"canvasShapesApi",ONBOARDING:"onboardingApi",CANVAS_ASSETS:"canvasAssetsApi",CHAT:"chatApi",THEMES:"themesApi",EXPORTS:"exportsApi",SYMBOLS:"symbolsApi",USER_IMAGE:"userImageApi"}},42146:function(e,t,r){r.d(t,{LF:function(){return _},NZ:function(){return h},Rs:function(){return p},St:function(){return v},UE:function(){return f},gw:function(){return d},iJ:function(){return l},lo:function(){return S},pr:function(){return m},yL:function(){return g},z8:function(){return y}});var n=r(45610),a=r(50044),o=r(85687),i=r(65800),s=r(84172),u=r(16958),c=r(38597),l=(0,o.LC)({reducerPath:u.V.AUTH,baseQuery:i.hK,tagTypes:[u.q.USER,u.q.USER_IP],endpoints:function(e){return{getUserInfo:e.query({query:function(){return{url:s.lZ.GET_USER_DATA,method:"POST",body:{}}},transformResponse:function(e){return(null==e?void 0:e.status)==="success"&&e.data},providesTags:function(e,t){return[{type:u.q.USER,id:"current"}]}}),updateUserData:e.mutation({query:function(e){return{url:s.lZ.UPDATE_USER_DATA,method:"POST",body:e}},invalidatesTags:function(e,t){return[{type:u.q.USER,id:"current"}]}}),addUserToDB:e.mutation({queryFn:function(e){return(0,n._)(function(){var t,r,n;return(0,a.Jh)(this,function(a){switch(a.label){case 0:return a.trys.push([0,5,,6]),[4,fetch("".concat(c.URLS.streamUrl,"/").concat(s.lZ.ADD_USER),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})];case 1:if((t=a.sent()).ok)return[3,3];return r={},n={status:t.status},[4,t.text()];case 2:return[2,(r.error=(n.data=a.sent(),n),r)];case 3:return[4,t.json()];case 4:return[2,{data:a.sent()}];case 5:return[2,{error:{status:"FETCH_ERROR",error:a.sent().message}}];case 6:return[2]}})})()}}),addToActiveCampaign:e.mutation({queryFn:function(e){return(0,n._)(function(){var t,r,n;return(0,a.Jh)(this,function(a){switch(a.label){case 0:return a.trys.push([0,5,,6]),[4,fetch("".concat(c.URLS.streamUrl,"/").concat(s.lZ.ADD_TO_AC),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})];case 1:if((t=a.sent()).ok)return[3,3];return r={},n={status:t.status},[4,t.text()];case 2:return[2,(r.error=(n.data=a.sent(),n),r)];case 3:return[4,t.json()];case 4:return[2,{data:a.sent()}];case 5:return[2,{error:{status:"FETCH_ERROR",error:a.sent().message}}];case 6:return[2]}})})()}}),getUserIp:e.query({queryFn:function(){return(0,n._)(function(){var e,t,r,n;return(0,a.Jh)(this,function(a){switch(a.label){case 0:return a.trys.push([0,5,,6]),[4,fetch(s.lZ.IPIFY)];case 1:if((e=a.sent()).ok)return[3,3];return t={},r={status:e.status},[4,e.text()];case 2:return[2,(t.error=(r.data=a.sent(),r.error=e.status,r),t)];case 3:return[4,e.json()];case 4:return[2,{data:a.sent()}];case 5:return[2,{error:{status:"FETCH_ERROR",data:void 0,error:(null==(n=a.sent())?void 0:n.message)||"Unknown fetch error"}}];case 6:return[2]}})})()},keepUnusedDataFor:600,providesTags:[u.q.USER_IP]}),updateUserProfile:e.mutation({query:function(e){return{url:s.lZ.UPDATE_USER_PROFILE,method:"POST",body:e}},invalidatesTags:function(e,t){return[{type:u.q.USER,id:"current"}]}}),deleteUserData:e.mutation({query:function(e){return{url:s.lZ.DELETE_USER_DATA,method:"POST",body:e}},invalidatesTags:function(e,t){return[{type:u.q.USER,id:"current"}]}}),canAddUser:e.mutation({query:function(e){return{url:s.lZ.CAN_ADD_USER,method:"POST",body:e}},invalidatesTags:function(e,t){return[{type:u.q.USER,id:"current"}]}}),checkDomain:e.mutation({query:function(e){return{url:"".concat(s.lZ.WORKOS_CHECK_DOMAIN,"?domain=").concat(encodeURIComponent(e.domain),"&redirect=").concat(null==e?void 0:e.redirect).concat((null==e?void 0:e.writeKey)?"&writeKey=".concat(null==e?void 0:e.writeKey):""),method:"GET"}}})}}}),d=l.useGetUserInfoQuery,p=l.useLazyGetUserInfoQuery,f=l.useUpdateUserDataMutation,g=l.useAddUserToDBMutation,h=l.useAddToActiveCampaignMutation,m=(l.useGetUserIpQuery,l.useLazyGetUserIpQuery),_=l.useUpdateUserProfileMutation,v=l.useDeleteUserDataMutation,S=l.useCanAddUserMutation,y=l.useCheckDomainMutation},24708:function(e,t,r){r.d(t,{K$:function(){return parseSSOError},R:function(){return normalizeEmail},US:function(){return createSSOError},w2:function(){return f},w7:function(){return p}});var n,a,o=r(45610),i=r(50044),s=r(30791),u=r(60453),c=r(27007),l=r(10649),d=r(84172),p=(n=(0,o._)(function(e){var t,r,n=arguments;return(0,i.Jh)(this,function(a){switch(a.label){case 0:return t=!(n.length>1)||void 0===n[1]||n[1],(0,l.eC)()===d.bf.WORKOS&&((0,l.BB)(),window.location.href="string"==typeof e?e:"/"),[4,null===s.ZP||void 0===s.ZP?void 0:s.ZP.auth().signOut()];case 1:return a.sent(),r=localStorage.getItem("cookieConsent"),localStorage.removeItem("tokenId"),localStorage.removeItem("userPhotoURL"),localStorage.setItem("cookieConsent",r),t&&(window.location.href="string"==typeof e?e:"/"),[2]}})}),function(e){return n.apply(this,arguments)}),f=(a=(0,o._)(function(e,t){var r,n,a,o,l,d,p,f,g;return(0,i.Jh)(this,function(i){switch(i.label){case 0:return i.trys.push([0,4,,5]),r=normalizeEmail(e),[4,(0,c.e5)(s.I8,e,t)];case 1:return[4,(n=i.sent()).user.getIdToken()];case 2:return a=i.sent(),o=n.user.refreshToken,(0,u.hb)("googleSignIn"),l=n.user.uid,[4,n.user.getIdTokenResult()];case 3:return d=i.sent(),p=new Date(d.expirationTime).getTime(),n.user.photoURL&&localStorage.setItem("userPhotoURL",n.user.photoURL),[2,{providerData:null!==(f=n.user.providerData)&&void 0!==f?f:[],uid:l,user:n.user,token:a,refreshToken:o,expiresAt:p,email:r}];case 4:return console.error("Error in signInUser:",g=i.sent()),[2,g];case 5:return[2]}})}),function(e,t){return a.apply(this,arguments)}),normalizeEmail=function(e){if(!e||"string"!=typeof e)return e;var t=e.trim().toLowerCase();return t.endsWith("@googlemail.com")?t.replace("@googlemail.com","@gmail.com"):t},parseSSOError=function(e){if(!(null==e?void 0:e.message))return null;try{var t=null;if(e.message.includes("HTTP Cloud Function returned an error:")){var r=e.message.indexOf('{"error":');if(-1!==r){for(var n=e.message.substring(r),a=0,o=0,i=0;i<n.length;i++)if("{"===n[i]&&a++,"}"===n[i]&&a--,0===a){o=i+1;break}o>0&&(t=n.substring(0,o))}}else if(e.message.includes("BLOCKING_FUNCTION_ERROR_RESPONSE")){var s=e.message.match(/\{"error":\{.*\}\}/);s&&(t=s[0])}if(t){var u,c,l=JSON.parse(t);if((null===(u=l.error)||void 0===u?void 0:u.message)==="sso_required"&&(null===(c=l.error)||void 0===c?void 0:c.details))return{error:"sso_required",redirectUrl:l.error.details.redirectUrl,organizationName:l.error.details.organizationName,organizationId:l.error.details.organizationId}}}catch(e){if("sso_required"===e.code&&e.redirectUrl)throw e}return null},createSSOError=function(e){var t=Error("SSO Required");return t.code="sso_required",t.redirectUrl=e.redirectUrl,t.organizationName=e.organizationName,t.organizationId=e.organizationId,t.photoURL=e.photoURL,t.message="sso_required",t}},65800:function(e,t,r){r.d(t,{Ps:function(){return h},hK:function(){return v}});var n,a,o,i=r(45610),s=r(41369),u=r(43654),c=r(50044),l=r(55345),d=r(38597),p=r(84172),f=r(10649),g=null,h=(n=(0,i._)(function(){return(0,c.Jh)(this,function(e){return g?[2,g]:[2,g=(0,i._)(function(){return(0,c.Jh)(this,function(e){switch(e.label){case 0:return e.trys.push([0,5,6,7]),[4,(0,f.eC)()];case 1:if(e.sent()!==p.bf.WORKOS)return[3,3];return[4,(0,f.Gl)(f.KT)];case 2:case 4:return[2,e.sent()];case 3:return[4,(0,f.Gl)(f.Rl)];case 5:return console.error("[AUTH] Failed to refresh token:",e.sent()),[2,!1];case 6:return g=null,[7];case 7:return[2]}})})()]})}),function(){return n.apply(this,arguments)}),m=null,_=(a=(0,i._)(function(e){var t;return(0,c.Jh)(this,function(r){switch(r.label){case 0:return r.trys.push([0,2,3,4]),m||(m=(0,f.hd)()),[4,m];case 1:var n;if(n=r.sent(),t={Authorization:"Bearer ".concat(n)},"string"==typeof e)return[2,{url:e,headers:t}];return[2,(0,u._)((0,s._)({},e),{headers:(0,s._)({},e.headers,t)})];case 2:return console.error("[AUTH] Failed to add token:",r.sent()),[2,e];case 3:return m=null,[7];case 4:return[2]}})}),function(e){return a.apply(this,arguments)}),v=(o=(0,i._)(function(e,t,r){var n,a,o,i;return(0,c.Jh)(this,function(s){switch(s.label){case 0:return n=(0,l.ni)({baseUrl:d.URLS.streamUrl}),[4,_(e)];case 1:return a=s.sent(),[4,n(a,t,r)];case 2:if(!((o=s.sent()).error&&(401===o.error.status||401===o.error.originalStatus)))return[3,9];s.label=3;case 3:return s.trys.push([3,8,,9]),[4,h()];case 4:if(!s.sent())return[3,7];return[4,_(e)];case 5:return i=s.sent(),[4,n(i,t,r)];case 6:o=s.sent(),s.label=7;case 7:return[3,9];case 8:return console.error("[AUTH] Refresh error:",s.sent()),[3,9];case 9:return[2,o]}})}),function(e,t,r){return o.apply(this,arguments)})}}]);